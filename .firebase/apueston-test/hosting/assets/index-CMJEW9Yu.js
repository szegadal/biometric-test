function Dh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tb(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var S3={exports:{}},$h={},x3={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _d=Symbol.for("react.element"),YR=Symbol.for("react.portal"),QR=Symbol.for("react.fragment"),ZR=Symbol.for("react.strict_mode"),JR=Symbol.for("react.profiler"),eF=Symbol.for("react.provider"),tF=Symbol.for("react.context"),nF=Symbol.for("react.forward_ref"),rF=Symbol.for("react.suspense"),sF=Symbol.for("react.memo"),oF=Symbol.for("react.lazy"),rS=Symbol.iterator;function aF(e){return e===null||typeof e!="object"?null:(e=rS&&e[rS]||e["@@iterator"],typeof e=="function"?e:null)}var k3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I3=Object.assign,_3={};function du(e,t,n){this.props=e,this.context=t,this.refs=_3,this.updater=n||k3}du.prototype.isReactComponent={};du.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};du.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function E3(){}E3.prototype=du.prototype;function nb(e,t,n){this.props=e,this.context=t,this.refs=_3,this.updater=n||k3}var rb=nb.prototype=new E3;rb.constructor=nb;I3(rb,du.prototype);rb.isPureReactComponent=!0;var sS=Array.isArray,C3=Object.prototype.hasOwnProperty,sb={current:null},T3={key:!0,ref:!0,__self:!0,__source:!0};function N3(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)C3.call(t,r)&&!T3.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:_d,type:e,key:o,ref:a,props:s,_owner:sb.current}}function iF(e,t){return{$$typeof:_d,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ob(e){return typeof e=="object"&&e!==null&&e.$$typeof===_d}function lF(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var oS=/\/+/g;function $y(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lF(""+e.key):t.toString(36)}function jf(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case _d:case YR:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+$y(a,0):r,sS(s)?(n="",e!=null&&(n=e.replace(oS,"$&/")+"/"),jf(s,t,n,"",function(c){return c})):s!=null&&(ob(s)&&(s=iF(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(oS,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",sS(e))for(var i=0;i<e.length;i++){o=e[i];var u=r+$y(o,i);a+=jf(o,t,n,u,s)}else if(u=aF(e),typeof u=="function")for(e=u.call(e),i=0;!(o=e.next()).done;)o=o.value,u=r+$y(o,i++),a+=jf(o,t,n,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function af(e,t,n){if(e==null)return e;var r=[],s=0;return jf(e,r,"","",function(o){return t.call(n,o,s++)}),r}function uF(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wr={current:null},Gf={transition:null},cF={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:Gf,ReactCurrentOwner:sb};function A3(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:af,forEach:function(e,t,n){af(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return af(e,function(){t++}),t},toArray:function(e){return af(e,function(t){return t})||[]},only:function(e){if(!ob(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ot.Component=du;ot.Fragment=QR;ot.Profiler=JR;ot.PureComponent=nb;ot.StrictMode=ZR;ot.Suspense=rF;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cF;ot.act=A3;ot.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=I3({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=sb.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)C3.call(t,u)&&!T3.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:_d,type:e.type,key:s,ref:o,props:r,_owner:a}};ot.createContext=function(e){return e={$$typeof:tF,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eF,_context:e},e.Consumer=e};ot.createElement=N3;ot.createFactory=function(e){var t=N3.bind(null,e);return t.type=e,t};ot.createRef=function(){return{current:null}};ot.forwardRef=function(e){return{$$typeof:nF,render:e}};ot.isValidElement=ob;ot.lazy=function(e){return{$$typeof:oF,_payload:{_status:-1,_result:e},_init:uF}};ot.memo=function(e,t){return{$$typeof:sF,type:e,compare:t===void 0?null:t}};ot.startTransition=function(e){var t=Gf.transition;Gf.transition={};try{e()}finally{Gf.transition=t}};ot.unstable_act=A3;ot.useCallback=function(e,t){return wr.current.useCallback(e,t)};ot.useContext=function(e){return wr.current.useContext(e)};ot.useDebugValue=function(){};ot.useDeferredValue=function(e){return wr.current.useDeferredValue(e)};ot.useEffect=function(e,t){return wr.current.useEffect(e,t)};ot.useId=function(){return wr.current.useId()};ot.useImperativeHandle=function(e,t,n){return wr.current.useImperativeHandle(e,t,n)};ot.useInsertionEffect=function(e,t){return wr.current.useInsertionEffect(e,t)};ot.useLayoutEffect=function(e,t){return wr.current.useLayoutEffect(e,t)};ot.useMemo=function(e,t){return wr.current.useMemo(e,t)};ot.useReducer=function(e,t,n){return wr.current.useReducer(e,t,n)};ot.useRef=function(e){return wr.current.useRef(e)};ot.useState=function(e){return wr.current.useState(e)};ot.useSyncExternalStore=function(e,t,n){return wr.current.useSyncExternalStore(e,t,n)};ot.useTransition=function(){return wr.current.useTransition()};ot.version="18.3.1";x3.exports=ot;var V=x3.exports;const ge=Wi(V),dF=Dh({__proto__:null,default:ge},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fF=V,pF=Symbol.for("react.element"),hF=Symbol.for("react.fragment"),mF=Object.prototype.hasOwnProperty,gF=fF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yF={key:!0,ref:!0,__self:!0,__source:!0};function D3(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)mF.call(t,r)&&!yF.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:pF,type:e,key:o,ref:a,props:s,_owner:gF.current}}$h.Fragment=hF;$h.jsx=D3;$h.jsxs=D3;S3.exports=$h;var Sn=S3.exports,$3={exports:{}},Zr={},R3={exports:{}},F3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,G){var Y=P.length;P.push(G);e:for(;0<Y;){var Z=Y-1>>>1,se=P[Z];if(0<s(se,G))P[Z]=G,P[Y]=se,Y=Z;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var G=P[0],Y=P.pop();if(Y!==G){P[0]=Y;e:for(var Z=0,se=P.length,re=se>>>1;Z<re;){var ae=2*(Z+1)-1,ie=P[ae],ue=ae+1,ve=P[ue];if(0>s(ie,Y))ue<se&&0>s(ve,ie)?(P[Z]=ve,P[ue]=Y,Z=ue):(P[Z]=ie,P[ae]=Y,Z=ae);else if(ue<se&&0>s(ve,Y))P[Z]=ve,P[ue]=Y,Z=ue;else break e}}return G}function s(P,G){var Y=P.sortIndex-G.sortIndex;return Y!==0?Y:P.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],l=1,d=null,f=3,p=!1,h=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(P){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=P)r(c),G.sortIndex=G.expirationTime,t(u,G);else break;G=n(c)}}function S(P){if(m=!1,w(P),!h)if(n(u)!==null)h=!0,X(I);else{var G=n(c);G!==null&&Q(S,G.startTime-P)}}function I(P,G){h=!1,m&&(m=!1,g(N),N=-1),p=!0;var Y=f;try{for(w(G),d=n(u);d!==null&&(!(d.expirationTime>G)||P&&!F());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,f=d.priorityLevel;var se=Z(d.expirationTime<=G);G=e.unstable_now(),typeof se=="function"?d.callback=se:d===n(u)&&r(u),w(G)}else r(u);d=n(u)}if(d!==null)var re=!0;else{var ae=n(c);ae!==null&&Q(S,ae.startTime-G),re=!1}return re}finally{d=null,f=Y,p=!1}}var _=!1,C=null,N=-1,$=5,R=-1;function F(){return!(e.unstable_now()-R<$)}function U(){if(C!==null){var P=e.unstable_now();R=P;var G=!0;try{G=C(!0,P)}finally{G?L():(_=!1,C=null)}}else _=!1}var L;if(typeof b=="function")L=function(){b(U)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,j=H.port2;H.port1.onmessage=U,L=function(){j.postMessage(null)}}else L=function(){y(U,0)};function X(P){C=P,_||(_=!0,L())}function Q(P,G){N=y(function(){P(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){h||p||(h=!0,X(I))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var Y=f;f=G;try{return P()}finally{f=Y}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,G){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Y=f;f=P;try{return G()}finally{f=Y}},e.unstable_scheduleCallback=function(P,G,Y){var Z=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,P){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=Y+se,P={id:l++,callback:G,priorityLevel:P,startTime:Y,expirationTime:se,sortIndex:-1},Y>Z?(P.sortIndex=Y,t(c,P),n(u)===null&&P===n(c)&&(m?(g(N),N=-1):m=!0,Q(S,Y-Z))):(P.sortIndex=se,t(u,P),h||p||(h=!0,X(I))),P},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(P){var G=f;return function(){var Y=f;f=G;try{return P.apply(this,arguments)}finally{f=Y}}}})(F3);R3.exports=F3;var vF=R3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bF=V,Yr=vF;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M3=new Set,Fc={};function Ui(e,t){Hl(e,t),Hl(e+"Capture",t)}function Hl(e,t){for(Fc[e]=t,e=0;e<t.length;e++)M3.add(t[e])}var Ao=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pv=Object.prototype.hasOwnProperty,wF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aS={},iS={};function SF(e){return Pv.call(iS,e)?!0:Pv.call(aS,e)?!1:wF.test(e)?iS[e]=!0:(aS[e]=!0,!1)}function xF(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kF(e,t,n,r){if(t===null||typeof t>"u"||xF(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sr(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Un[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Un[t]=new Sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Un[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Un[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Un[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Un[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Un[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Un[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Un[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var ab=/[\-:]([a-z])/g;function ib(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ab,ib);Un[t]=new Sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ab,ib);Un[t]=new Sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ab,ib);Un[t]=new Sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Un[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});Un.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Un[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function lb(e,t,n,r){var s=Un.hasOwnProperty(t)?Un[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kF(t,n,s,r)&&(n=null),r||s===null?SF(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Wo=bF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lf=Symbol.for("react.element"),yl=Symbol.for("react.portal"),vl=Symbol.for("react.fragment"),ub=Symbol.for("react.strict_mode"),Bv=Symbol.for("react.profiler"),O3=Symbol.for("react.provider"),P3=Symbol.for("react.context"),cb=Symbol.for("react.forward_ref"),Lv=Symbol.for("react.suspense"),zv=Symbol.for("react.suspense_list"),db=Symbol.for("react.memo"),ea=Symbol.for("react.lazy"),B3=Symbol.for("react.offscreen"),lS=Symbol.iterator;function Ou(e){return e===null||typeof e!="object"?null:(e=lS&&e[lS]||e["@@iterator"],typeof e=="function"?e:null)}var Jt=Object.assign,Ry;function Ju(e){if(Ry===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ry=t&&t[1]||""}return`
`+Ry+e}var Fy=!1;function My(e,t){if(!e||Fy)return"";Fy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,i=o.length-1;1<=a&&0<=i&&s[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(s[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||s[a]!==o[i]){var u=`
`+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{Fy=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ju(e):""}function IF(e){switch(e.tag){case 5:return Ju(e.type);case 16:return Ju("Lazy");case 13:return Ju("Suspense");case 19:return Ju("SuspenseList");case 0:case 2:case 15:return e=My(e.type,!1),e;case 11:return e=My(e.type.render,!1),e;case 1:return e=My(e.type,!0),e;default:return""}}function Wv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vl:return"Fragment";case yl:return"Portal";case Bv:return"Profiler";case ub:return"StrictMode";case Lv:return"Suspense";case zv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case P3:return(e.displayName||"Context")+".Consumer";case O3:return(e._context.displayName||"Context")+".Provider";case cb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case db:return t=e.displayName||null,t!==null?t:Wv(e.type)||"Memo";case ea:t=e._payload,e=e._init;try{return Wv(e(t))}catch{}}return null}function _F(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wv(t);case 8:return t===ub?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _a(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function L3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function EF(e){var t=L3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uf(e){e._valueTracker||(e._valueTracker=EF(e))}function z3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=L3(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function wp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Uv(e,t){var n=t.checked;return Jt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function uS(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_a(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function W3(e,t){t=t.checked,t!=null&&lb(e,"checked",t,!1)}function Vv(e,t){W3(e,t);var n=_a(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hv(e,t.type,n):t.hasOwnProperty("defaultValue")&&Hv(e,t.type,_a(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cS(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Hv(e,t,n){(t!=="number"||wp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ec=Array.isArray;function Dl(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_a(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function jv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Jt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dS(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(fe(92));if(ec(n)){if(1<n.length)throw Error(fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_a(n)}}function U3(e,t){var n=_a(t.value),r=_a(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function fS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function V3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?V3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cf,H3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cf=cf||document.createElement("div"),cf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var pc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CF=["Webkit","ms","Moz","O"];Object.keys(pc).forEach(function(e){CF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pc[t]=pc[e]})});function j3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||pc.hasOwnProperty(e)&&pc[e]?(""+t).trim():t+"px"}function G3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=j3(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var TF=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qv(e,t){if(t){if(TF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function Kv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xv=null;function fb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yv=null,$l=null,Rl=null;function pS(e){if(e=Td(e)){if(typeof Yv!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=Ph(t),Yv(e.stateNode,e.type,t))}}function q3(e){$l?Rl?Rl.push(e):Rl=[e]:$l=e}function K3(){if($l){var e=$l,t=Rl;if(Rl=$l=null,pS(e),t)for(e=0;e<t.length;e++)pS(t[e])}}function X3(e,t){return e(t)}function Y3(){}var Oy=!1;function Q3(e,t,n){if(Oy)return e(t,n);Oy=!0;try{return X3(e,t,n)}finally{Oy=!1,($l!==null||Rl!==null)&&(Y3(),K3())}}function Oc(e,t){var n=e.stateNode;if(n===null)return null;var r=Ph(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(fe(231,t,typeof n));return n}var Qv=!1;if(Ao)try{var Pu={};Object.defineProperty(Pu,"passive",{get:function(){Qv=!0}}),window.addEventListener("test",Pu,Pu),window.removeEventListener("test",Pu,Pu)}catch{Qv=!1}function NF(e,t,n,r,s,o,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var hc=!1,Sp=null,xp=!1,Zv=null,AF={onError:function(e){hc=!0,Sp=e}};function DF(e,t,n,r,s,o,a,i,u){hc=!1,Sp=null,NF.apply(AF,arguments)}function $F(e,t,n,r,s,o,a,i,u){if(DF.apply(this,arguments),hc){if(hc){var c=Sp;hc=!1,Sp=null}else throw Error(fe(198));xp||(xp=!0,Zv=c)}}function Vi(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Z3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hS(e){if(Vi(e)!==e)throw Error(fe(188))}function RF(e){var t=e.alternate;if(!t){if(t=Vi(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return hS(s),e;if(o===r)return hS(s),t;o=o.sibling}throw Error(fe(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,i=s.child;i;){if(i===n){a=!0,n=s,r=o;break}if(i===r){a=!0,r=s,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=s;break}if(i===r){a=!0,r=o,n=s;break}i=i.sibling}if(!a)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?e:t}function J3(e){return e=RF(e),e!==null?e_(e):null}function e_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=e_(e);if(t!==null)return t;e=e.sibling}return null}var t_=Yr.unstable_scheduleCallback,mS=Yr.unstable_cancelCallback,FF=Yr.unstable_shouldYield,MF=Yr.unstable_requestPaint,an=Yr.unstable_now,OF=Yr.unstable_getCurrentPriorityLevel,pb=Yr.unstable_ImmediatePriority,n_=Yr.unstable_UserBlockingPriority,kp=Yr.unstable_NormalPriority,PF=Yr.unstable_LowPriority,r_=Yr.unstable_IdlePriority,Rh=null,no=null;function BF(e){if(no&&typeof no.onCommitFiberRoot=="function")try{no.onCommitFiberRoot(Rh,e,void 0,(e.current.flags&128)===128)}catch{}}var $s=Math.clz32?Math.clz32:WF,LF=Math.log,zF=Math.LN2;function WF(e){return e>>>=0,e===0?32:31-(LF(e)/zF|0)|0}var df=64,ff=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ip(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~s;i!==0?r=tc(i):(o&=a,o!==0&&(r=tc(o)))}else a=n&~s,a!==0?r=tc(a):o!==0&&(r=tc(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-$s(t),s=1<<n,r|=e[n],t&=~s;return r}function UF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VF(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-$s(o),i=1<<a,u=s[a];u===-1?(!(i&n)||i&r)&&(s[a]=UF(i,t)):u<=t&&(e.expiredLanes|=i),o&=~i}}function Jv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function s_(){var e=df;return df<<=1,!(df&4194240)&&(df=64),e}function Py(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ed(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-$s(t),e[t]=n}function HF(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-$s(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function hb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-$s(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var xt=0;function o_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var a_,mb,i_,l_,u_,e0=!1,pf=[],pa=null,ha=null,ma=null,Pc=new Map,Bc=new Map,ra=[],jF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gS(e,t){switch(e){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":Pc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bc.delete(t.pointerId)}}function Bu(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Td(t),t!==null&&mb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function GF(e,t,n,r,s){switch(t){case"focusin":return pa=Bu(pa,e,t,n,r,s),!0;case"dragenter":return ha=Bu(ha,e,t,n,r,s),!0;case"mouseover":return ma=Bu(ma,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Pc.set(o,Bu(Pc.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Bc.set(o,Bu(Bc.get(o)||null,e,t,n,r,s)),!0}return!1}function c_(e){var t=pi(e.target);if(t!==null){var n=Vi(t);if(n!==null){if(t=n.tag,t===13){if(t=Z3(n),t!==null){e.blockedOn=t,u_(e.priority,function(){i_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=t0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Xv=r,n.target.dispatchEvent(r),Xv=null}else return t=Td(n),t!==null&&mb(t),e.blockedOn=n,!1;t.shift()}return!0}function yS(e,t,n){qf(e)&&n.delete(t)}function qF(){e0=!1,pa!==null&&qf(pa)&&(pa=null),ha!==null&&qf(ha)&&(ha=null),ma!==null&&qf(ma)&&(ma=null),Pc.forEach(yS),Bc.forEach(yS)}function Lu(e,t){e.blockedOn===t&&(e.blockedOn=null,e0||(e0=!0,Yr.unstable_scheduleCallback(Yr.unstable_NormalPriority,qF)))}function Lc(e){function t(s){return Lu(s,e)}if(0<pf.length){Lu(pf[0],e);for(var n=1;n<pf.length;n++){var r=pf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(pa!==null&&Lu(pa,e),ha!==null&&Lu(ha,e),ma!==null&&Lu(ma,e),Pc.forEach(t),Bc.forEach(t),n=0;n<ra.length;n++)r=ra[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ra.length&&(n=ra[0],n.blockedOn===null);)c_(n),n.blockedOn===null&&ra.shift()}var Fl=Wo.ReactCurrentBatchConfig,_p=!0;function KF(e,t,n,r){var s=xt,o=Fl.transition;Fl.transition=null;try{xt=1,gb(e,t,n,r)}finally{xt=s,Fl.transition=o}}function XF(e,t,n,r){var s=xt,o=Fl.transition;Fl.transition=null;try{xt=4,gb(e,t,n,r)}finally{xt=s,Fl.transition=o}}function gb(e,t,n,r){if(_p){var s=t0(e,t,n,r);if(s===null)qy(e,t,r,Ep,n),gS(e,r);else if(GF(s,e,t,n,r))r.stopPropagation();else if(gS(e,r),t&4&&-1<jF.indexOf(e)){for(;s!==null;){var o=Td(s);if(o!==null&&a_(o),o=t0(e,t,n,r),o===null&&qy(e,t,r,Ep,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else qy(e,t,r,null,n)}}var Ep=null;function t0(e,t,n,r){if(Ep=null,e=fb(r),e=pi(e),e!==null)if(t=Vi(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Z3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ep=e,null}function d_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OF()){case pb:return 1;case n_:return 4;case kp:case PF:return 16;case r_:return 536870912;default:return 16}default:return 16}}var la=null,yb=null,Kf=null;function f_(){if(Kf)return Kf;var e,t=yb,n=t.length,r,s="value"in la?la.value:la.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return Kf=s.slice(e,1<r?1-r:void 0)}function Xf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hf(){return!0}function vS(){return!1}function Jr(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hf:vS,this.isPropagationStopped=vS,this}return Jt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hf)},persist:function(){},isPersistent:hf}),t}var fu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vb=Jr(fu),Cd=Jt({},fu,{view:0,detail:0}),YF=Jr(Cd),By,Ly,zu,Fh=Jt({},Cd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zu&&(zu&&e.type==="mousemove"?(By=e.screenX-zu.screenX,Ly=e.screenY-zu.screenY):Ly=By=0,zu=e),By)},movementY:function(e){return"movementY"in e?e.movementY:Ly}}),bS=Jr(Fh),QF=Jt({},Fh,{dataTransfer:0}),ZF=Jr(QF),JF=Jt({},Cd,{relatedTarget:0}),zy=Jr(JF),e6=Jt({},fu,{animationName:0,elapsedTime:0,pseudoElement:0}),t6=Jr(e6),n6=Jt({},fu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r6=Jr(n6),s6=Jt({},fu,{data:0}),wS=Jr(s6),o6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function l6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=i6[e])?!!t[e]:!1}function bb(){return l6}var u6=Jt({},Cd,{key:function(e){if(e.key){var t=o6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?a6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bb,charCode:function(e){return e.type==="keypress"?Xf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),c6=Jr(u6),d6=Jt({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SS=Jr(d6),f6=Jt({},Cd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bb}),p6=Jr(f6),h6=Jt({},fu,{propertyName:0,elapsedTime:0,pseudoElement:0}),m6=Jr(h6),g6=Jt({},Fh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),y6=Jr(g6),v6=[9,13,27,32],wb=Ao&&"CompositionEvent"in window,mc=null;Ao&&"documentMode"in document&&(mc=document.documentMode);var b6=Ao&&"TextEvent"in window&&!mc,p_=Ao&&(!wb||mc&&8<mc&&11>=mc),xS=" ",kS=!1;function h_(e,t){switch(e){case"keyup":return v6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bl=!1;function w6(e,t){switch(e){case"compositionend":return m_(t);case"keypress":return t.which!==32?null:(kS=!0,xS);case"textInput":return e=t.data,e===xS&&kS?null:e;default:return null}}function S6(e,t){if(bl)return e==="compositionend"||!wb&&h_(e,t)?(e=f_(),Kf=yb=la=null,bl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return p_&&t.locale!=="ko"?null:t.data;default:return null}}var x6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function IS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!x6[e.type]:t==="textarea"}function g_(e,t,n,r){q3(r),t=Cp(t,"onChange"),0<t.length&&(n=new vb("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gc=null,zc=null;function k6(e){C_(e,0)}function Mh(e){var t=xl(e);if(z3(t))return e}function I6(e,t){if(e==="change")return t}var y_=!1;if(Ao){var Wy;if(Ao){var Uy="oninput"in document;if(!Uy){var _S=document.createElement("div");_S.setAttribute("oninput","return;"),Uy=typeof _S.oninput=="function"}Wy=Uy}else Wy=!1;y_=Wy&&(!document.documentMode||9<document.documentMode)}function ES(){gc&&(gc.detachEvent("onpropertychange",v_),zc=gc=null)}function v_(e){if(e.propertyName==="value"&&Mh(zc)){var t=[];g_(t,zc,e,fb(e)),Q3(k6,t)}}function _6(e,t,n){e==="focusin"?(ES(),gc=t,zc=n,gc.attachEvent("onpropertychange",v_)):e==="focusout"&&ES()}function E6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mh(zc)}function C6(e,t){if(e==="click")return Mh(t)}function T6(e,t){if(e==="input"||e==="change")return Mh(t)}function N6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ps=typeof Object.is=="function"?Object.is:N6;function Wc(e,t){if(Ps(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Pv.call(t,s)||!Ps(e[s],t[s]))return!1}return!0}function CS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function TS(e,t){var n=CS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CS(n)}}function b_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?b_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function w_(){for(var e=window,t=wp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=wp(e.document)}return t}function Sb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function A6(e){var t=w_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&b_(n.ownerDocument.documentElement,n)){if(r!==null&&Sb(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=TS(n,o);var a=TS(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var D6=Ao&&"documentMode"in document&&11>=document.documentMode,wl=null,n0=null,yc=null,r0=!1;function NS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;r0||wl==null||wl!==wp(r)||(r=wl,"selectionStart"in r&&Sb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yc&&Wc(yc,r)||(yc=r,r=Cp(n0,"onSelect"),0<r.length&&(t=new vb("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wl)))}function mf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sl={animationend:mf("Animation","AnimationEnd"),animationiteration:mf("Animation","AnimationIteration"),animationstart:mf("Animation","AnimationStart"),transitionend:mf("Transition","TransitionEnd")},Vy={},S_={};Ao&&(S_=document.createElement("div").style,"AnimationEvent"in window||(delete Sl.animationend.animation,delete Sl.animationiteration.animation,delete Sl.animationstart.animation),"TransitionEvent"in window||delete Sl.transitionend.transition);function Oh(e){if(Vy[e])return Vy[e];if(!Sl[e])return e;var t=Sl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in S_)return Vy[e]=t[n];return e}var x_=Oh("animationend"),k_=Oh("animationiteration"),I_=Oh("animationstart"),__=Oh("transitionend"),E_=new Map,AS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(e,t){E_.set(e,t),Ui(t,[e])}for(var Hy=0;Hy<AS.length;Hy++){var jy=AS[Hy],$6=jy.toLowerCase(),R6=jy[0].toUpperCase()+jy.slice(1);Ma($6,"on"+R6)}Ma(x_,"onAnimationEnd");Ma(k_,"onAnimationIteration");Ma(I_,"onAnimationStart");Ma("dblclick","onDoubleClick");Ma("focusin","onFocus");Ma("focusout","onBlur");Ma(__,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F6=new Set("cancel close invalid load scroll toggle".split(" ").concat(nc));function DS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,$F(r,t,void 0,e),e.currentTarget=null}function C_(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==o&&s.isPropagationStopped())break e;DS(s,i,c),o=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==o&&s.isPropagationStopped())break e;DS(s,i,c),o=u}}}if(xp)throw e=Zv,xp=!1,Zv=null,e}function Lt(e,t){var n=t[l0];n===void 0&&(n=t[l0]=new Set);var r=e+"__bubble";n.has(r)||(T_(t,e,2,!1),n.add(r))}function Gy(e,t,n){var r=0;t&&(r|=4),T_(n,e,r,t)}var gf="_reactListening"+Math.random().toString(36).slice(2);function Uc(e){if(!e[gf]){e[gf]=!0,M3.forEach(function(n){n!=="selectionchange"&&(F6.has(n)||Gy(n,!1,e),Gy(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gf]||(t[gf]=!0,Gy("selectionchange",!1,t))}}function T_(e,t,n,r){switch(d_(t)){case 1:var s=KF;break;case 4:s=XF;break;default:s=gb}n=s.bind(null,t,n,e),s=void 0,!Qv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qy(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;i!==null;){if(a=pi(i),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}i=i.parentNode}}r=r.return}Q3(function(){var c=o,l=fb(n),d=[];e:{var f=E_.get(e);if(f!==void 0){var p=vb,h=e;switch(e){case"keypress":if(Xf(n)===0)break e;case"keydown":case"keyup":p=c6;break;case"focusin":h="focus",p=zy;break;case"focusout":h="blur",p=zy;break;case"beforeblur":case"afterblur":p=zy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=bS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=ZF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=p6;break;case x_:case k_:case I_:p=t6;break;case __:p=m6;break;case"scroll":p=YF;break;case"wheel":p=y6;break;case"copy":case"cut":case"paste":p=r6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=SS}var m=(t&4)!==0,y=!m&&e==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var b=c,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,g!==null&&(S=Oc(b,g),S!=null&&m.push(Vc(b,S,w)))),y)break;b=b.return}0<m.length&&(f=new p(f,h,null,n,l),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&n!==Xv&&(h=n.relatedTarget||n.fromElement)&&(pi(h)||h[Do]))break e;if((p||f)&&(f=l.window===l?l:(f=l.ownerDocument)?f.defaultView||f.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=c,h=h?pi(h):null,h!==null&&(y=Vi(h),h!==y||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=c),p!==h)){if(m=bS,S="onMouseLeave",g="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(m=SS,S="onPointerLeave",g="onPointerEnter",b="pointer"),y=p==null?f:xl(p),w=h==null?f:xl(h),f=new m(S,b+"leave",p,n,l),f.target=y,f.relatedTarget=w,S=null,pi(l)===c&&(m=new m(g,b+"enter",h,n,l),m.target=w,m.relatedTarget=y,S=m),y=S,p&&h)t:{for(m=p,g=h,b=0,w=m;w;w=rl(w))b++;for(w=0,S=g;S;S=rl(S))w++;for(;0<b-w;)m=rl(m),b--;for(;0<w-b;)g=rl(g),w--;for(;b--;){if(m===g||g!==null&&m===g.alternate)break t;m=rl(m),g=rl(g)}m=null}else m=null;p!==null&&$S(d,f,p,m,!1),h!==null&&y!==null&&$S(d,y,h,m,!0)}}e:{if(f=c?xl(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var I=I6;else if(IS(f))if(y_)I=T6;else{I=E6;var _=_6}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=C6);if(I&&(I=I(e,c))){g_(d,I,n,l);break e}_&&_(e,f,c),e==="focusout"&&(_=f._wrapperState)&&_.controlled&&f.type==="number"&&Hv(f,"number",f.value)}switch(_=c?xl(c):window,e){case"focusin":(IS(_)||_.contentEditable==="true")&&(wl=_,n0=c,yc=null);break;case"focusout":yc=n0=wl=null;break;case"mousedown":r0=!0;break;case"contextmenu":case"mouseup":case"dragend":r0=!1,NS(d,n,l);break;case"selectionchange":if(D6)break;case"keydown":case"keyup":NS(d,n,l)}var C;if(wb)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else bl?h_(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(p_&&n.locale!=="ko"&&(bl||N!=="onCompositionStart"?N==="onCompositionEnd"&&bl&&(C=f_()):(la=l,yb="value"in la?la.value:la.textContent,bl=!0)),_=Cp(c,N),0<_.length&&(N=new wS(N,e,null,n,l),d.push({event:N,listeners:_}),C?N.data=C:(C=m_(n),C!==null&&(N.data=C)))),(C=b6?w6(e,n):S6(e,n))&&(c=Cp(c,"onBeforeInput"),0<c.length&&(l=new wS("onBeforeInput","beforeinput",null,n,l),d.push({event:l,listeners:c}),l.data=C))}C_(d,t)})}function Vc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Cp(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Oc(e,n),o!=null&&r.unshift(Vc(e,o,s)),o=Oc(e,t),o!=null&&r.push(Vc(e,o,s))),e=e.return}return r}function rl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $S(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,s?(u=Oc(n,o),u!=null&&a.unshift(Vc(n,u,i))):s||(u=Oc(n,o),u!=null&&a.push(Vc(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var M6=/\r\n?/g,O6=/\u0000|\uFFFD/g;function RS(e){return(typeof e=="string"?e:""+e).replace(M6,`
`).replace(O6,"")}function yf(e,t,n){if(t=RS(t),RS(e)!==t&&n)throw Error(fe(425))}function Tp(){}var s0=null,o0=null;function a0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var i0=typeof setTimeout=="function"?setTimeout:void 0,P6=typeof clearTimeout=="function"?clearTimeout:void 0,FS=typeof Promise=="function"?Promise:void 0,B6=typeof queueMicrotask=="function"?queueMicrotask:typeof FS<"u"?function(e){return FS.resolve(null).then(e).catch(L6)}:i0;function L6(e){setTimeout(function(){throw e})}function Ky(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Lc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lc(t)}function ga(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function MS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pu=Math.random().toString(36).slice(2),eo="__reactFiber$"+pu,Hc="__reactProps$"+pu,Do="__reactContainer$"+pu,l0="__reactEvents$"+pu,z6="__reactListeners$"+pu,W6="__reactHandles$"+pu;function pi(e){var t=e[eo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Do]||n[eo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=MS(e);e!==null;){if(n=e[eo])return n;e=MS(e)}return t}e=n,n=e.parentNode}return null}function Td(e){return e=e[eo]||e[Do],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function Ph(e){return e[Hc]||null}var u0=[],kl=-1;function Oa(e){return{current:e}}function Wt(e){0>kl||(e.current=u0[kl],u0[kl]=null,kl--)}function Mt(e,t){kl++,u0[kl]=e.current,e.current=t}var Ea={},tr=Oa(Ea),Or=Oa(!1),Ci=Ea;function jl(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pr(e){return e=e.childContextTypes,e!=null}function Np(){Wt(Or),Wt(tr)}function OS(e,t,n){if(tr.current!==Ea)throw Error(fe(168));Mt(tr,t),Mt(Or,n)}function N_(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(fe(108,_F(e)||"Unknown",s));return Jt({},n,r)}function Ap(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Ci=tr.current,Mt(tr,e),Mt(Or,Or.current),!0}function PS(e,t,n){var r=e.stateNode;if(!r)throw Error(fe(169));n?(e=N_(e,t,Ci),r.__reactInternalMemoizedMergedChildContext=e,Wt(Or),Wt(tr),Mt(tr,e)):Wt(Or),Mt(Or,n)}var bo=null,Bh=!1,Xy=!1;function A_(e){bo===null?bo=[e]:bo.push(e)}function U6(e){Bh=!0,A_(e)}function Pa(){if(!Xy&&bo!==null){Xy=!0;var e=0,t=xt;try{var n=bo;for(xt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}bo=null,Bh=!1}catch(s){throw bo!==null&&(bo=bo.slice(e+1)),t_(pb,Pa),s}finally{xt=t,Xy=!1}}return null}var Il=[],_l=0,Dp=null,$p=0,ls=[],us=0,Ti=null,Io=1,_o="";function oi(e,t){Il[_l++]=$p,Il[_l++]=Dp,Dp=e,$p=t}function D_(e,t,n){ls[us++]=Io,ls[us++]=_o,ls[us++]=Ti,Ti=e;var r=Io;e=_o;var s=32-$s(r)-1;r&=~(1<<s),n+=1;var o=32-$s(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Io=1<<32-$s(t)+s|n<<s|r,_o=o+e}else Io=1<<o|n<<s|r,_o=e}function xb(e){e.return!==null&&(oi(e,1),D_(e,1,0))}function kb(e){for(;e===Dp;)Dp=Il[--_l],Il[_l]=null,$p=Il[--_l],Il[_l]=null;for(;e===Ti;)Ti=ls[--us],ls[us]=null,_o=ls[--us],ls[us]=null,Io=ls[--us],ls[us]=null}var qr=null,Gr=null,Gt=!1,As=null;function $_(e,t){var n=ds(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function BS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qr=e,Gr=ga(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qr=e,Gr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ti!==null?{id:Io,overflow:_o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ds(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qr=e,Gr=null,!0):!1;default:return!1}}function c0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function d0(e){if(Gt){var t=Gr;if(t){var n=t;if(!BS(e,t)){if(c0(e))throw Error(fe(418));t=ga(n.nextSibling);var r=qr;t&&BS(e,t)?$_(r,n):(e.flags=e.flags&-4097|2,Gt=!1,qr=e)}}else{if(c0(e))throw Error(fe(418));e.flags=e.flags&-4097|2,Gt=!1,qr=e}}}function LS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qr=e}function vf(e){if(e!==qr)return!1;if(!Gt)return LS(e),Gt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!a0(e.type,e.memoizedProps)),t&&(t=Gr)){if(c0(e))throw R_(),Error(fe(418));for(;t;)$_(e,t),t=ga(t.nextSibling)}if(LS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gr=ga(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gr=null}}else Gr=qr?ga(e.stateNode.nextSibling):null;return!0}function R_(){for(var e=Gr;e;)e=ga(e.nextSibling)}function Gl(){Gr=qr=null,Gt=!1}function Ib(e){As===null?As=[e]:As.push(e)}var V6=Wo.ReactCurrentBatchConfig;function Wu(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=s.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,e))}return e}function bf(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zS(e){var t=e._init;return t(e._payload)}function F_(e){function t(g,b){if(e){var w=g.deletions;w===null?(g.deletions=[b],g.flags|=16):w.push(b)}}function n(g,b){if(!e)return null;for(;b!==null;)t(g,b),b=b.sibling;return null}function r(g,b){for(g=new Map;b!==null;)b.key!==null?g.set(b.key,b):g.set(b.index,b),b=b.sibling;return g}function s(g,b){return g=wa(g,b),g.index=0,g.sibling=null,g}function o(g,b,w){return g.index=w,e?(w=g.alternate,w!==null?(w=w.index,w<b?(g.flags|=2,b):w):(g.flags|=2,b)):(g.flags|=1048576,b)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,b,w,S){return b===null||b.tag!==6?(b=nv(w,g.mode,S),b.return=g,b):(b=s(b,w),b.return=g,b)}function u(g,b,w,S){var I=w.type;return I===vl?l(g,b,w.props.children,S,w.key):b!==null&&(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ea&&zS(I)===b.type)?(S=s(b,w.props),S.ref=Wu(g,b,w),S.return=g,S):(S=np(w.type,w.key,w.props,null,g.mode,S),S.ref=Wu(g,b,w),S.return=g,S)}function c(g,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=rv(w,g.mode,S),b.return=g,b):(b=s(b,w.children||[]),b.return=g,b)}function l(g,b,w,S,I){return b===null||b.tag!==7?(b=xi(w,g.mode,S,I),b.return=g,b):(b=s(b,w),b.return=g,b)}function d(g,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=nv(""+b,g.mode,w),b.return=g,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lf:return w=np(b.type,b.key,b.props,null,g.mode,w),w.ref=Wu(g,null,b),w.return=g,w;case yl:return b=rv(b,g.mode,w),b.return=g,b;case ea:var S=b._init;return d(g,S(b._payload),w)}if(ec(b)||Ou(b))return b=xi(b,g.mode,w,null),b.return=g,b;bf(g,b)}return null}function f(g,b,w,S){var I=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return I!==null?null:i(g,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case lf:return w.key===I?u(g,b,w,S):null;case yl:return w.key===I?c(g,b,w,S):null;case ea:return I=w._init,f(g,b,I(w._payload),S)}if(ec(w)||Ou(w))return I!==null?null:l(g,b,w,S,null);bf(g,w)}return null}function p(g,b,w,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return g=g.get(w)||null,i(b,g,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lf:return g=g.get(S.key===null?w:S.key)||null,u(b,g,S,I);case yl:return g=g.get(S.key===null?w:S.key)||null,c(b,g,S,I);case ea:var _=S._init;return p(g,b,w,_(S._payload),I)}if(ec(S)||Ou(S))return g=g.get(w)||null,l(b,g,S,I,null);bf(b,S)}return null}function h(g,b,w,S){for(var I=null,_=null,C=b,N=b=0,$=null;C!==null&&N<w.length;N++){C.index>N?($=C,C=null):$=C.sibling;var R=f(g,C,w[N],S);if(R===null){C===null&&(C=$);break}e&&C&&R.alternate===null&&t(g,C),b=o(R,b,N),_===null?I=R:_.sibling=R,_=R,C=$}if(N===w.length)return n(g,C),Gt&&oi(g,N),I;if(C===null){for(;N<w.length;N++)C=d(g,w[N],S),C!==null&&(b=o(C,b,N),_===null?I=C:_.sibling=C,_=C);return Gt&&oi(g,N),I}for(C=r(g,C);N<w.length;N++)$=p(C,g,N,w[N],S),$!==null&&(e&&$.alternate!==null&&C.delete($.key===null?N:$.key),b=o($,b,N),_===null?I=$:_.sibling=$,_=$);return e&&C.forEach(function(F){return t(g,F)}),Gt&&oi(g,N),I}function m(g,b,w,S){var I=Ou(w);if(typeof I!="function")throw Error(fe(150));if(w=I.call(w),w==null)throw Error(fe(151));for(var _=I=null,C=b,N=b=0,$=null,R=w.next();C!==null&&!R.done;N++,R=w.next()){C.index>N?($=C,C=null):$=C.sibling;var F=f(g,C,R.value,S);if(F===null){C===null&&(C=$);break}e&&C&&F.alternate===null&&t(g,C),b=o(F,b,N),_===null?I=F:_.sibling=F,_=F,C=$}if(R.done)return n(g,C),Gt&&oi(g,N),I;if(C===null){for(;!R.done;N++,R=w.next())R=d(g,R.value,S),R!==null&&(b=o(R,b,N),_===null?I=R:_.sibling=R,_=R);return Gt&&oi(g,N),I}for(C=r(g,C);!R.done;N++,R=w.next())R=p(C,g,N,R.value,S),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?N:R.key),b=o(R,b,N),_===null?I=R:_.sibling=R,_=R);return e&&C.forEach(function(U){return t(g,U)}),Gt&&oi(g,N),I}function y(g,b,w,S){if(typeof w=="object"&&w!==null&&w.type===vl&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case lf:e:{for(var I=w.key,_=b;_!==null;){if(_.key===I){if(I=w.type,I===vl){if(_.tag===7){n(g,_.sibling),b=s(_,w.props.children),b.return=g,g=b;break e}}else if(_.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ea&&zS(I)===_.type){n(g,_.sibling),b=s(_,w.props),b.ref=Wu(g,_,w),b.return=g,g=b;break e}n(g,_);break}else t(g,_);_=_.sibling}w.type===vl?(b=xi(w.props.children,g.mode,S,w.key),b.return=g,g=b):(S=np(w.type,w.key,w.props,null,g.mode,S),S.ref=Wu(g,b,w),S.return=g,g=S)}return a(g);case yl:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(g,b.sibling),b=s(b,w.children||[]),b.return=g,g=b;break e}else{n(g,b);break}else t(g,b);b=b.sibling}b=rv(w,g.mode,S),b.return=g,g=b}return a(g);case ea:return _=w._init,y(g,b,_(w._payload),S)}if(ec(w))return h(g,b,w,S);if(Ou(w))return m(g,b,w,S);bf(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(g,b.sibling),b=s(b,w),b.return=g,g=b):(n(g,b),b=nv(w,g.mode,S),b.return=g,g=b),a(g)):n(g,b)}return y}var ql=F_(!0),M_=F_(!1),Rp=Oa(null),Fp=null,El=null,_b=null;function Eb(){_b=El=Fp=null}function Cb(e){var t=Rp.current;Wt(Rp),e._currentValue=t}function f0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ml(e,t){Fp=e,_b=El=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fr=!0),e.firstContext=null)}function vs(e){var t=e._currentValue;if(_b!==e)if(e={context:e,memoizedValue:t,next:null},El===null){if(Fp===null)throw Error(fe(308));El=e,Fp.dependencies={lanes:0,firstContext:e}}else El=El.next=e;return t}var hi=null;function Tb(e){hi===null?hi=[e]:hi.push(e)}function O_(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Tb(t)):(n.next=s.next,s.next=n),t.interleaved=n,$o(e,r)}function $o(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ta=!1;function Nb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ya(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dt&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,$o(e,n)}return s=r.interleaved,s===null?(t.next=t,Tb(r)):(t.next=s.next,s.next=t),r.interleaved=t,$o(e,n)}function Yf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hb(e,n)}}function WS(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Mp(e,t,n,r){var s=e.updateQueue;ta=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var l=e.alternate;l!==null&&(l=l.updateQueue,i=l.lastBaseUpdate,i!==a&&(i===null?l.firstBaseUpdate=c:i.next=c,l.lastBaseUpdate=u))}if(o!==null){var d=s.baseState;a=0,l=c=u=null,i=o;do{var f=i.lane,p=i.eventTime;if((r&f)===f){l!==null&&(l=l.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,m=i;switch(f=t,p=n,m.tag){case 1:if(h=m.payload,typeof h=="function"){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=m.payload,f=typeof h=="function"?h.call(p,d,f):h,f==null)break e;d=Jt({},d,f);break e;case 2:ta=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[i]:f.push(i))}else p={eventTime:p,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},l===null?(c=l=p,u=d):l=l.next=p,a|=f;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;f=i,i=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(l===null&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=l,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Ai|=a,e.lanes=a,e.memoizedState=d}}function US(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(fe(191,s));s.call(r)}}}var Nd={},ro=Oa(Nd),jc=Oa(Nd),Gc=Oa(Nd);function mi(e){if(e===Nd)throw Error(fe(174));return e}function Ab(e,t){switch(Mt(Gc,t),Mt(jc,e),Mt(ro,Nd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gv(t,e)}Wt(ro),Mt(ro,t)}function Kl(){Wt(ro),Wt(jc),Wt(Gc)}function B_(e){mi(Gc.current);var t=mi(ro.current),n=Gv(t,e.type);t!==n&&(Mt(jc,e),Mt(ro,n))}function Db(e){jc.current===e&&(Wt(ro),Wt(jc))}var Qt=Oa(0);function Op(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Yy=[];function $b(){for(var e=0;e<Yy.length;e++)Yy[e]._workInProgressVersionPrimary=null;Yy.length=0}var Qf=Wo.ReactCurrentDispatcher,Qy=Wo.ReactCurrentBatchConfig,Ni=0,Zt=null,xn=null,Nn=null,Pp=!1,vc=!1,qc=0,H6=0;function Kn(){throw Error(fe(321))}function Rb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ps(e[n],t[n]))return!1;return!0}function Fb(e,t,n,r,s,o){if(Ni=o,Zt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qf.current=e===null||e.memoizedState===null?K6:X6,e=n(r,s),vc){o=0;do{if(vc=!1,qc=0,25<=o)throw Error(fe(301));o+=1,Nn=xn=null,t.updateQueue=null,Qf.current=Y6,e=n(r,s)}while(vc)}if(Qf.current=Bp,t=xn!==null&&xn.next!==null,Ni=0,Nn=xn=Zt=null,Pp=!1,t)throw Error(fe(300));return e}function Mb(){var e=qc!==0;return qc=0,e}function Qs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?Zt.memoizedState=Nn=e:Nn=Nn.next=e,Nn}function bs(){if(xn===null){var e=Zt.alternate;e=e!==null?e.memoizedState:null}else e=xn.next;var t=Nn===null?Zt.memoizedState:Nn.next;if(t!==null)Nn=t,xn=e;else{if(e===null)throw Error(fe(310));xn=e,e={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Nn===null?Zt.memoizedState=Nn=e:Nn=Nn.next=e}return Nn}function Kc(e,t){return typeof t=="function"?t(e):t}function Zy(e){var t=bs(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=xn,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var i=a=null,u=null,c=o;do{var l=c.lane;if((Ni&l)===l)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:l,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=d,a=r):u=u.next=d,Zt.lanes|=l,Ai|=l}c=c.next}while(c!==null&&c!==o);u===null?a=r:u.next=i,Ps(r,t.memoizedState)||(Fr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Zt.lanes|=o,Ai|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Jy(e){var t=bs(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);Ps(o,t.memoizedState)||(Fr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function L_(){}function z_(e,t){var n=Zt,r=bs(),s=t(),o=!Ps(r.memoizedState,s);if(o&&(r.memoizedState=s,Fr=!0),r=r.queue,Ob(V_.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Nn!==null&&Nn.memoizedState.tag&1){if(n.flags|=2048,Xc(9,U_.bind(null,n,r,s,t),void 0,null),Dn===null)throw Error(fe(349));Ni&30||W_(n,t,s)}return s}function W_(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Zt.updateQueue,t===null?(t={lastEffect:null,stores:null},Zt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function U_(e,t,n,r){t.value=n,t.getSnapshot=r,H_(t)&&j_(e)}function V_(e,t,n){return n(function(){H_(t)&&j_(e)})}function H_(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ps(e,n)}catch{return!0}}function j_(e){var t=$o(e,1);t!==null&&Rs(t,e,1,-1)}function VS(e){var t=Qs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:e},t.queue=e,e=e.dispatch=q6.bind(null,Zt,e),[t.memoizedState,e]}function Xc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Zt.updateQueue,t===null?(t={lastEffect:null,stores:null},Zt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function G_(){return bs().memoizedState}function Zf(e,t,n,r){var s=Qs();Zt.flags|=e,s.memoizedState=Xc(1|t,n,void 0,r===void 0?null:r)}function Lh(e,t,n,r){var s=bs();r=r===void 0?null:r;var o=void 0;if(xn!==null){var a=xn.memoizedState;if(o=a.destroy,r!==null&&Rb(r,a.deps)){s.memoizedState=Xc(t,n,o,r);return}}Zt.flags|=e,s.memoizedState=Xc(1|t,n,o,r)}function HS(e,t){return Zf(8390656,8,e,t)}function Ob(e,t){return Lh(2048,8,e,t)}function q_(e,t){return Lh(4,2,e,t)}function K_(e,t){return Lh(4,4,e,t)}function X_(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Y_(e,t,n){return n=n!=null?n.concat([e]):null,Lh(4,4,X_.bind(null,t,e),n)}function Pb(){}function Q_(e,t){var n=bs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Z_(e,t){var n=bs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function J_(e,t,n){return Ni&21?(Ps(n,t)||(n=s_(),Zt.lanes|=n,Ai|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fr=!0),e.memoizedState=n)}function j6(e,t){var n=xt;xt=n!==0&&4>n?n:4,e(!0);var r=Qy.transition;Qy.transition={};try{e(!1),t()}finally{xt=n,Qy.transition=r}}function eE(){return bs().memoizedState}function G6(e,t,n){var r=ba(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tE(e))nE(t,n);else if(n=O_(e,t,n,r),n!==null){var s=mr();Rs(n,e,r,s),rE(n,t,r)}}function q6(e,t,n){var r=ba(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tE(e))nE(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(s.hasEagerState=!0,s.eagerState=i,Ps(i,a)){var u=t.interleaved;u===null?(s.next=s,Tb(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=O_(e,t,s,r),n!==null&&(s=mr(),Rs(n,e,r,s),rE(n,t,r))}}function tE(e){var t=e.alternate;return e===Zt||t!==null&&t===Zt}function nE(e,t){vc=Pp=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rE(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,hb(e,n)}}var Bp={readContext:vs,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useInsertionEffect:Kn,useLayoutEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useMutableSource:Kn,useSyncExternalStore:Kn,useId:Kn,unstable_isNewReconciler:!1},K6={readContext:vs,useCallback:function(e,t){return Qs().memoizedState=[e,t===void 0?null:t],e},useContext:vs,useEffect:HS,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Zf(4194308,4,X_.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Zf(4,2,e,t)},useMemo:function(e,t){var n=Qs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=G6.bind(null,Zt,e),[r.memoizedState,e]},useRef:function(e){var t=Qs();return e={current:e},t.memoizedState=e},useState:VS,useDebugValue:Pb,useDeferredValue:function(e){return Qs().memoizedState=e},useTransition:function(){var e=VS(!1),t=e[0];return e=j6.bind(null,e[1]),Qs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Zt,s=Qs();if(Gt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=t(),Dn===null)throw Error(fe(349));Ni&30||W_(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,HS(V_.bind(null,r,o,e),[e]),r.flags|=2048,Xc(9,U_.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Qs(),t=Dn.identifierPrefix;if(Gt){var n=_o,r=Io;n=(r&~(1<<32-$s(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=H6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},X6={readContext:vs,useCallback:Q_,useContext:vs,useEffect:Ob,useImperativeHandle:Y_,useInsertionEffect:q_,useLayoutEffect:K_,useMemo:Z_,useReducer:Zy,useRef:G_,useState:function(){return Zy(Kc)},useDebugValue:Pb,useDeferredValue:function(e){var t=bs();return J_(t,xn.memoizedState,e)},useTransition:function(){var e=Zy(Kc)[0],t=bs().memoizedState;return[e,t]},useMutableSource:L_,useSyncExternalStore:z_,useId:eE,unstable_isNewReconciler:!1},Y6={readContext:vs,useCallback:Q_,useContext:vs,useEffect:Ob,useImperativeHandle:Y_,useInsertionEffect:q_,useLayoutEffect:K_,useMemo:Z_,useReducer:Jy,useRef:G_,useState:function(){return Jy(Kc)},useDebugValue:Pb,useDeferredValue:function(e){var t=bs();return xn===null?t.memoizedState=e:J_(t,xn.memoizedState,e)},useTransition:function(){var e=Jy(Kc)[0],t=bs().memoizedState;return[e,t]},useMutableSource:L_,useSyncExternalStore:z_,useId:eE,unstable_isNewReconciler:!1};function Es(e,t){if(e&&e.defaultProps){t=Jt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function p0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Jt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zh={isMounted:function(e){return(e=e._reactInternals)?Vi(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mr(),s=ba(e),o=Co(r,s);o.payload=t,n!=null&&(o.callback=n),t=ya(e,o,s),t!==null&&(Rs(t,e,s,r),Yf(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mr(),s=ba(e),o=Co(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ya(e,o,s),t!==null&&(Rs(t,e,s,r),Yf(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mr(),r=ba(e),s=Co(n,r);s.tag=2,t!=null&&(s.callback=t),t=ya(e,s,r),t!==null&&(Rs(t,e,r,n),Yf(t,e,r))}};function jS(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Wc(n,r)||!Wc(s,o):!0}function sE(e,t,n){var r=!1,s=Ea,o=t.contextType;return typeof o=="object"&&o!==null?o=vs(o):(s=Pr(t)?Ci:tr.current,r=t.contextTypes,o=(r=r!=null)?jl(e,s):Ea),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function GS(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zh.enqueueReplaceState(t,t.state,null)}function h0(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Nb(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=vs(o):(o=Pr(t)?Ci:tr.current,s.context=jl(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(p0(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&zh.enqueueReplaceState(s,s.state,null),Mp(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Xl(e,t){try{var n="",r=t;do n+=IF(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function ev(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function m0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Q6=typeof WeakMap=="function"?WeakMap:Map;function oE(e,t,n){n=Co(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zp||(zp=!0,_0=r),m0(e,t)},n}function aE(e,t,n){n=Co(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){m0(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){m0(e,t),typeof r!="function"&&(va===null?va=new Set([this]):va.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function qS(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Q6;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=dM.bind(null,e,t,n),t.then(e,e))}function KS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function XS(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Co(-1,1),t.tag=2,ya(n,t,1))),n.lanes|=1),e)}var Z6=Wo.ReactCurrentOwner,Fr=!1;function fr(e,t,n,r){t.child=e===null?M_(t,null,n,r):ql(t,e.child,n,r)}function YS(e,t,n,r,s){n=n.render;var o=t.ref;return Ml(t,s),r=Fb(e,t,n,r,o,s),n=Mb(),e!==null&&!Fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ro(e,t,s)):(Gt&&n&&xb(t),t.flags|=1,fr(e,t,r,s),t.child)}function QS(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!jb(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,iE(e,t,o,r,s)):(e=np(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Wc,n(a,r)&&e.ref===t.ref)return Ro(e,t,s)}return t.flags|=1,e=wa(o,r),e.ref=t.ref,e.return=t,t.child=e}function iE(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Wc(o,r)&&e.ref===t.ref)if(Fr=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(Fr=!0);else return t.lanes=e.lanes,Ro(e,t,s)}return g0(e,t,n,r,s)}function lE(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(Tl,Hr),Hr|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mt(Tl,Hr),Hr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Mt(Tl,Hr),Hr|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Mt(Tl,Hr),Hr|=r;return fr(e,t,s,n),t.child}function uE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function g0(e,t,n,r,s){var o=Pr(n)?Ci:tr.current;return o=jl(t,o),Ml(t,s),n=Fb(e,t,n,r,o,s),r=Mb(),e!==null&&!Fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ro(e,t,s)):(Gt&&r&&xb(t),t.flags|=1,fr(e,t,n,s),t.child)}function ZS(e,t,n,r,s){if(Pr(n)){var o=!0;Ap(t)}else o=!1;if(Ml(t,s),t.stateNode===null)Jf(e,t),sE(t,n,r),h0(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=vs(c):(c=Pr(n)?Ci:tr.current,c=jl(t,c));var l=n.getDerivedStateFromProps,d=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&GS(t,a,r,c),ta=!1;var f=t.memoizedState;a.state=f,Mp(t,r,a,s),u=t.memoizedState,i!==r||f!==u||Or.current||ta?(typeof l=="function"&&(p0(t,n,l,r),u=t.memoizedState),(i=ta||jS(t,n,i,r,f,u,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,P_(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:Es(t.type,i),a.props=c,d=t.pendingProps,f=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=vs(u):(u=Pr(n)?Ci:tr.current,u=jl(t,u));var p=n.getDerivedStateFromProps;(l=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==d||f!==u)&&GS(t,a,r,u),ta=!1,f=t.memoizedState,a.state=f,Mp(t,r,a,s);var h=t.memoizedState;i!==d||f!==h||Or.current||ta?(typeof p=="function"&&(p0(t,n,p,r),h=t.memoizedState),(c=ta||jS(t,n,c,r,f,h,u)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,h,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,h,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return y0(e,t,n,r,o,s)}function y0(e,t,n,r,s,o){uE(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&PS(t,n,!1),Ro(e,t,o);r=t.stateNode,Z6.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ql(t,e.child,null,o),t.child=ql(t,null,i,o)):fr(e,t,i,o),t.memoizedState=r.state,s&&PS(t,n,!0),t.child}function cE(e){var t=e.stateNode;t.pendingContext?OS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&OS(e,t.context,!1),Ab(e,t.containerInfo)}function JS(e,t,n,r,s){return Gl(),Ib(s),t.flags|=256,fr(e,t,n,r),t.child}var v0={dehydrated:null,treeContext:null,retryLane:0};function b0(e){return{baseLanes:e,cachePool:null,transitions:null}}function dE(e,t,n){var r=t.pendingProps,s=Qt.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Mt(Qt,s&1),e===null)return d0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Vh(a,r,0,null),e=xi(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=b0(n),t.memoizedState=v0,e):Bb(t,a));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return J6(e,t,a,r,i,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,i=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=wa(s,u),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=wa(i,o):(o=xi(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?b0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=v0,r}return o=e.child,e=o.sibling,r=wa(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Bb(e,t){return t=Vh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wf(e,t,n,r){return r!==null&&Ib(r),ql(t,e.child,null,n),e=Bb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function J6(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=ev(Error(fe(422))),wf(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Vh({mode:"visible",children:r.children},s,0,null),o=xi(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ql(t,e.child,null,a),t.child.memoizedState=b0(a),t.memoizedState=v0,o);if(!(t.mode&1))return wf(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(fe(419)),r=ev(o,r,void 0),wf(e,t,a,r)}if(i=(a&e.childLanes)!==0,Fr||i){if(r=Dn,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,$o(e,s),Rs(r,e,s,-1))}return Hb(),r=ev(Error(fe(421))),wf(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=fM.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Gr=ga(s.nextSibling),qr=t,Gt=!0,As=null,e!==null&&(ls[us++]=Io,ls[us++]=_o,ls[us++]=Ti,Io=e.id,_o=e.overflow,Ti=t),t=Bb(t,r.children),t.flags|=4096,t)}function ex(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),f0(e.return,t,n)}function tv(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function fE(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(fr(e,t,r.children,n),r=Qt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ex(e,n,t);else if(e.tag===19)ex(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mt(Qt,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Op(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),tv(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Op(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}tv(t,!0,n,null,o);break;case"together":tv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ro(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ai|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,n=wa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=wa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function eM(e,t,n){switch(t.tag){case 3:cE(t),Gl();break;case 5:B_(t);break;case 1:Pr(t.type)&&Ap(t);break;case 4:Ab(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Mt(Rp,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Mt(Qt,Qt.current&1),t.flags|=128,null):n&t.child.childLanes?dE(e,t,n):(Mt(Qt,Qt.current&1),e=Ro(e,t,n),e!==null?e.sibling:null);Mt(Qt,Qt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return fE(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Mt(Qt,Qt.current),r)break;return null;case 22:case 23:return t.lanes=0,lE(e,t,n)}return Ro(e,t,n)}var pE,w0,hE,mE;pE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};w0=function(){};hE=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,mi(ro.current);var o=null;switch(n){case"input":s=Uv(e,s),r=Uv(e,r),o=[];break;case"select":s=Jt({},s,{value:void 0}),r=Jt({},r,{value:void 0}),o=[];break;case"textarea":s=jv(e,s),r=jv(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Tp)}qv(n,r);var a;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var i=s[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fc.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(i=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fc.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Lt("scroll",e),o||i===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};mE=function(e,t,n,r){n!==r&&(t.flags|=4)};function Uu(e,t){if(!Gt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tM(e,t,n){var r=t.pendingProps;switch(kb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(t),null;case 1:return Pr(t.type)&&Np(),Xn(t),null;case 3:return r=t.stateNode,Kl(),Wt(Or),Wt(tr),$b(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,As!==null&&(T0(As),As=null))),w0(e,t),Xn(t),null;case 5:Db(t);var s=mi(Gc.current);if(n=t.type,e!==null&&t.stateNode!=null)hE(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(fe(166));return Xn(t),null}if(e=mi(ro.current),vf(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[eo]=t,r[Hc]=o,e=(t.mode&1)!==0,n){case"dialog":Lt("cancel",r),Lt("close",r);break;case"iframe":case"object":case"embed":Lt("load",r);break;case"video":case"audio":for(s=0;s<nc.length;s++)Lt(nc[s],r);break;case"source":Lt("error",r);break;case"img":case"image":case"link":Lt("error",r),Lt("load",r);break;case"details":Lt("toggle",r);break;case"input":uS(r,o),Lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Lt("invalid",r);break;case"textarea":dS(r,o),Lt("invalid",r)}qv(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&yf(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&yf(r.textContent,i,e),s=["children",""+i]):Fc.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Lt("scroll",r)}switch(n){case"input":uf(r),cS(r,o,!0);break;case"textarea":uf(r),fS(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Tp)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=V3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[eo]=t,e[Hc]=r,pE(e,t,!1,!1),t.stateNode=e;e:{switch(a=Kv(n,r),n){case"dialog":Lt("cancel",e),Lt("close",e),s=r;break;case"iframe":case"object":case"embed":Lt("load",e),s=r;break;case"video":case"audio":for(s=0;s<nc.length;s++)Lt(nc[s],e);s=r;break;case"source":Lt("error",e),s=r;break;case"img":case"image":case"link":Lt("error",e),Lt("load",e),s=r;break;case"details":Lt("toggle",e),s=r;break;case"input":uS(e,r),s=Uv(e,r),Lt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Jt({},r,{value:void 0}),Lt("invalid",e);break;case"textarea":dS(e,r),s=jv(e,r),Lt("invalid",e);break;default:s=r}qv(n,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="style"?G3(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&H3(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Mc(e,u):typeof u=="number"&&Mc(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Fc.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Lt("scroll",e):u!=null&&lb(e,o,u,a))}switch(n){case"input":uf(e),cS(e,r,!1);break;case"textarea":uf(e),fS(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_a(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Dl(e,!!r.multiple,o,!1):r.defaultValue!=null&&Dl(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Tp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Xn(t),null;case 6:if(e&&t.stateNode!=null)mE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(fe(166));if(n=mi(Gc.current),mi(ro.current),vf(t)){if(r=t.stateNode,n=t.memoizedProps,r[eo]=t,(o=r.nodeValue!==n)&&(e=qr,e!==null))switch(e.tag){case 3:yf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yf(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[eo]=t,t.stateNode=r}return Xn(t),null;case 13:if(Wt(Qt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gt&&Gr!==null&&t.mode&1&&!(t.flags&128))R_(),Gl(),t.flags|=98560,o=!1;else if(o=vf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(fe(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(fe(317));o[eo]=t}else Gl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Xn(t),o=!1}else As!==null&&(T0(As),As=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qt.current&1?In===0&&(In=3):Hb())),t.updateQueue!==null&&(t.flags|=4),Xn(t),null);case 4:return Kl(),w0(e,t),e===null&&Uc(t.stateNode.containerInfo),Xn(t),null;case 10:return Cb(t.type._context),Xn(t),null;case 17:return Pr(t.type)&&Np(),Xn(t),null;case 19:if(Wt(Qt),o=t.memoizedState,o===null)return Xn(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Uu(o,!1);else{if(In!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Op(e),a!==null){for(t.flags|=128,Uu(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mt(Qt,Qt.current&1|2),t.child}e=e.sibling}o.tail!==null&&an()>Yl&&(t.flags|=128,r=!0,Uu(o,!1),t.lanes=4194304)}else{if(!r)if(e=Op(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Uu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Gt)return Xn(t),null}else 2*an()-o.renderingStartTime>Yl&&n!==1073741824&&(t.flags|=128,r=!0,Uu(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=an(),t.sibling=null,n=Qt.current,Mt(Qt,r?n&1|2:n&1),t):(Xn(t),null);case 22:case 23:return Vb(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Hr&1073741824&&(Xn(t),t.subtreeFlags&6&&(t.flags|=8192)):Xn(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function nM(e,t){switch(kb(t),t.tag){case 1:return Pr(t.type)&&Np(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kl(),Wt(Or),Wt(tr),$b(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Db(t),null;case 13:if(Wt(Qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));Gl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Wt(Qt),null;case 4:return Kl(),null;case 10:return Cb(t.type._context),null;case 22:case 23:return Vb(),null;case 24:return null;default:return null}}var Sf=!1,Zn=!1,rM=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Cl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nn(e,t,r)}else n.current=null}function S0(e,t,n){try{n()}catch(r){nn(e,t,r)}}var tx=!1;function sM(e,t){if(s0=_p,e=w_(),Sb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,l=0,d=e,f=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(i=a+s),d!==o||r!==0&&d.nodeType!==3||(u=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===s&&(i=a),f===o&&++l===r&&(u=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(o0={focusedElem:e,selectionRange:n},_p=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var m=h.memoizedProps,y=h.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Es(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(S){nn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return h=tx,tx=!1,h}function bc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&S0(t,n,o)}s=s.next}while(s!==r)}}function Wh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function x0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function gE(e){var t=e.alternate;t!==null&&(e.alternate=null,gE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[eo],delete t[Hc],delete t[l0],delete t[z6],delete t[W6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function yE(e){return e.tag===5||e.tag===3||e.tag===4}function nx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||yE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function k0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Tp));else if(r!==4&&(e=e.child,e!==null))for(k0(e,t,n),e=e.sibling;e!==null;)k0(e,t,n),e=e.sibling}function I0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(I0(e,t,n),e=e.sibling;e!==null;)I0(e,t,n),e=e.sibling}var Bn=null,Ns=!1;function Yo(e,t,n){for(n=n.child;n!==null;)vE(e,t,n),n=n.sibling}function vE(e,t,n){if(no&&typeof no.onCommitFiberUnmount=="function")try{no.onCommitFiberUnmount(Rh,n)}catch{}switch(n.tag){case 5:Zn||Cl(n,t);case 6:var r=Bn,s=Ns;Bn=null,Yo(e,t,n),Bn=r,Ns=s,Bn!==null&&(Ns?(e=Bn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Bn.removeChild(n.stateNode));break;case 18:Bn!==null&&(Ns?(e=Bn,n=n.stateNode,e.nodeType===8?Ky(e.parentNode,n):e.nodeType===1&&Ky(e,n),Lc(e)):Ky(Bn,n.stateNode));break;case 4:r=Bn,s=Ns,Bn=n.stateNode.containerInfo,Ns=!0,Yo(e,t,n),Bn=r,Ns=s;break;case 0:case 11:case 14:case 15:if(!Zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&S0(n,t,a),s=s.next}while(s!==r)}Yo(e,t,n);break;case 1:if(!Zn&&(Cl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){nn(n,t,i)}Yo(e,t,n);break;case 21:Yo(e,t,n);break;case 22:n.mode&1?(Zn=(r=Zn)||n.memoizedState!==null,Yo(e,t,n),Zn=r):Yo(e,t,n);break;default:Yo(e,t,n)}}function rx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rM),t.forEach(function(r){var s=pM.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Is(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:Bn=i.stateNode,Ns=!1;break e;case 3:Bn=i.stateNode.containerInfo,Ns=!0;break e;case 4:Bn=i.stateNode.containerInfo,Ns=!0;break e}i=i.return}if(Bn===null)throw Error(fe(160));vE(o,a,s),Bn=null,Ns=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){nn(s,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bE(t,e),t=t.sibling}function bE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Is(t,e),Gs(e),r&4){try{bc(3,e,e.return),Wh(3,e)}catch(m){nn(e,e.return,m)}try{bc(5,e,e.return)}catch(m){nn(e,e.return,m)}}break;case 1:Is(t,e),Gs(e),r&512&&n!==null&&Cl(n,n.return);break;case 5:if(Is(t,e),Gs(e),r&512&&n!==null&&Cl(n,n.return),e.flags&32){var s=e.stateNode;try{Mc(s,"")}catch(m){nn(e,e.return,m)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&W3(s,o),Kv(i,a);var c=Kv(i,o);for(a=0;a<u.length;a+=2){var l=u[a],d=u[a+1];l==="style"?G3(s,d):l==="dangerouslySetInnerHTML"?H3(s,d):l==="children"?Mc(s,d):lb(s,l,d,c)}switch(i){case"input":Vv(s,o);break;case"textarea":U3(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Dl(s,!!o.multiple,p,!1):f!==!!o.multiple&&(o.defaultValue!=null?Dl(s,!!o.multiple,o.defaultValue,!0):Dl(s,!!o.multiple,o.multiple?[]:"",!1))}s[Hc]=o}catch(m){nn(e,e.return,m)}}break;case 6:if(Is(t,e),Gs(e),r&4){if(e.stateNode===null)throw Error(fe(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(m){nn(e,e.return,m)}}break;case 3:if(Is(t,e),Gs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lc(t.containerInfo)}catch(m){nn(e,e.return,m)}break;case 4:Is(t,e),Gs(e);break;case 13:Is(t,e),Gs(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Wb=an())),r&4&&rx(e);break;case 22:if(l=n!==null&&n.memoizedState!==null,e.mode&1?(Zn=(c=Zn)||l,Is(t,e),Zn=c):Is(t,e),Gs(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!l&&e.mode&1)for(Ie=e,l=e.child;l!==null;){for(d=Ie=l;Ie!==null;){switch(f=Ie,p=f.child,f.tag){case 0:case 11:case 14:case 15:bc(4,f,f.return);break;case 1:Cl(f,f.return);var h=f.stateNode;if(typeof h.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(m){nn(r,n,m)}}break;case 5:Cl(f,f.return);break;case 22:if(f.memoizedState!==null){ox(d);continue}}p!==null?(p.return=f,Ie=p):ox(d)}l=l.sibling}e:for(l=null,d=e;;){if(d.tag===5){if(l===null){l=d;try{s=d.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=d.stateNode,u=d.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=j3("display",a))}catch(m){nn(e,e.return,m)}}}else if(d.tag===6){if(l===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){nn(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;l===d&&(l=null),d=d.return}l===d&&(l=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Is(t,e),Gs(e),r&4&&rx(e);break;case 21:break;default:Is(t,e),Gs(e)}}function Gs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(yE(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Mc(s,""),r.flags&=-33);var o=nx(e);I0(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,i=nx(e);k0(e,i,a);break;default:throw Error(fe(161))}}catch(u){nn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function oM(e,t,n){Ie=e,wE(e)}function wE(e,t,n){for(var r=(e.mode&1)!==0;Ie!==null;){var s=Ie,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Sf;if(!a){var i=s.alternate,u=i!==null&&i.memoizedState!==null||Zn;i=Sf;var c=Zn;if(Sf=a,(Zn=u)&&!c)for(Ie=s;Ie!==null;)a=Ie,u=a.child,a.tag===22&&a.memoizedState!==null?ax(s):u!==null?(u.return=a,Ie=u):ax(s);for(;o!==null;)Ie=o,wE(o),o=o.sibling;Ie=s,Sf=i,Zn=c}sx(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Ie=o):sx(e)}}function sx(e){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zn||Wh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Zn)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Es(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&US(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}US(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var l=c.memoizedState;if(l!==null){var d=l.dehydrated;d!==null&&Lc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Zn||t.flags&512&&x0(t)}catch(f){nn(t,t.return,f)}}if(t===e){Ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function ox(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function ax(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Wh(4,t)}catch(u){nn(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){nn(t,s,u)}}var o=t.return;try{x0(t)}catch(u){nn(t,o,u)}break;case 5:var a=t.return;try{x0(t)}catch(u){nn(t,a,u)}}}catch(u){nn(t,t.return,u)}if(t===e){Ie=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Ie=i;break}Ie=t.return}}var aM=Math.ceil,Lp=Wo.ReactCurrentDispatcher,Lb=Wo.ReactCurrentOwner,ms=Wo.ReactCurrentBatchConfig,dt=0,Dn=null,hn=null,Wn=0,Hr=0,Tl=Oa(0),In=0,Yc=null,Ai=0,Uh=0,zb=0,wc=null,$r=null,Wb=0,Yl=1/0,vo=null,zp=!1,_0=null,va=null,xf=!1,ua=null,Wp=0,Sc=0,E0=null,ep=-1,tp=0;function mr(){return dt&6?an():ep!==-1?ep:ep=an()}function ba(e){return e.mode&1?dt&2&&Wn!==0?Wn&-Wn:V6.transition!==null?(tp===0&&(tp=s_()),tp):(e=xt,e!==0||(e=window.event,e=e===void 0?16:d_(e.type)),e):1}function Rs(e,t,n,r){if(50<Sc)throw Sc=0,E0=null,Error(fe(185));Ed(e,n,r),(!(dt&2)||e!==Dn)&&(e===Dn&&(!(dt&2)&&(Uh|=n),In===4&&sa(e,Wn)),Br(e,r),n===1&&dt===0&&!(t.mode&1)&&(Yl=an()+500,Bh&&Pa()))}function Br(e,t){var n=e.callbackNode;VF(e,t);var r=Ip(e,e===Dn?Wn:0);if(r===0)n!==null&&mS(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&mS(n),t===1)e.tag===0?U6(ix.bind(null,e)):A_(ix.bind(null,e)),B6(function(){!(dt&6)&&Pa()}),n=null;else{switch(o_(r)){case 1:n=pb;break;case 4:n=n_;break;case 16:n=kp;break;case 536870912:n=r_;break;default:n=kp}n=TE(n,SE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function SE(e,t){if(ep=-1,tp=0,dt&6)throw Error(fe(327));var n=e.callbackNode;if(Ol()&&e.callbackNode!==n)return null;var r=Ip(e,e===Dn?Wn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Up(e,r);else{t=r;var s=dt;dt|=2;var o=kE();(Dn!==e||Wn!==t)&&(vo=null,Yl=an()+500,Si(e,t));do try{uM();break}catch(i){xE(e,i)}while(!0);Eb(),Lp.current=o,dt=s,hn!==null?t=0:(Dn=null,Wn=0,t=In)}if(t!==0){if(t===2&&(s=Jv(e),s!==0&&(r=s,t=C0(e,s))),t===1)throw n=Yc,Si(e,0),sa(e,r),Br(e,an()),n;if(t===6)sa(e,r);else{if(s=e.current.alternate,!(r&30)&&!iM(s)&&(t=Up(e,r),t===2&&(o=Jv(e),o!==0&&(r=o,t=C0(e,o))),t===1))throw n=Yc,Si(e,0),sa(e,r),Br(e,an()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(fe(345));case 2:ai(e,$r,vo);break;case 3:if(sa(e,r),(r&130023424)===r&&(t=Wb+500-an(),10<t)){if(Ip(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){mr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=i0(ai.bind(null,e,$r,vo),t);break}ai(e,$r,vo);break;case 4:if(sa(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-$s(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=an()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aM(r/1960))-r,10<r){e.timeoutHandle=i0(ai.bind(null,e,$r,vo),r);break}ai(e,$r,vo);break;case 5:ai(e,$r,vo);break;default:throw Error(fe(329))}}}return Br(e,an()),e.callbackNode===n?SE.bind(null,e):null}function C0(e,t){var n=wc;return e.current.memoizedState.isDehydrated&&(Si(e,t).flags|=256),e=Up(e,t),e!==2&&(t=$r,$r=n,t!==null&&T0(t)),e}function T0(e){$r===null?$r=e:$r.push.apply($r,e)}function iM(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Ps(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sa(e,t){for(t&=~zb,t&=~Uh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-$s(t),r=1<<n;e[n]=-1,t&=~r}}function ix(e){if(dt&6)throw Error(fe(327));Ol();var t=Ip(e,0);if(!(t&1))return Br(e,an()),null;var n=Up(e,t);if(e.tag!==0&&n===2){var r=Jv(e);r!==0&&(t=r,n=C0(e,r))}if(n===1)throw n=Yc,Si(e,0),sa(e,t),Br(e,an()),n;if(n===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ai(e,$r,vo),Br(e,an()),null}function Ub(e,t){var n=dt;dt|=1;try{return e(t)}finally{dt=n,dt===0&&(Yl=an()+500,Bh&&Pa())}}function Di(e){ua!==null&&ua.tag===0&&!(dt&6)&&Ol();var t=dt;dt|=1;var n=ms.transition,r=xt;try{if(ms.transition=null,xt=1,e)return e()}finally{xt=r,ms.transition=n,dt=t,!(dt&6)&&Pa()}}function Vb(){Hr=Tl.current,Wt(Tl)}function Si(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,P6(n)),hn!==null)for(n=hn.return;n!==null;){var r=n;switch(kb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Np();break;case 3:Kl(),Wt(Or),Wt(tr),$b();break;case 5:Db(r);break;case 4:Kl();break;case 13:Wt(Qt);break;case 19:Wt(Qt);break;case 10:Cb(r.type._context);break;case 22:case 23:Vb()}n=n.return}if(Dn=e,hn=e=wa(e.current,null),Wn=Hr=t,In=0,Yc=null,zb=Uh=Ai=0,$r=wc=null,hi!==null){for(t=0;t<hi.length;t++)if(n=hi[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}hi=null}return e}function xE(e,t){do{var n=hn;try{if(Eb(),Qf.current=Bp,Pp){for(var r=Zt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Pp=!1}if(Ni=0,Nn=xn=Zt=null,vc=!1,qc=0,Lb.current=null,n===null||n.return===null){In=1,Yc=t,hn=null;break}e:{var o=e,a=n.return,i=n,u=t;if(t=Wn,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,l=i,d=l.tag;if(!(l.mode&1)&&(d===0||d===11||d===15)){var f=l.alternate;f?(l.updateQueue=f.updateQueue,l.memoizedState=f.memoizedState,l.lanes=f.lanes):(l.updateQueue=null,l.memoizedState=null)}var p=KS(a);if(p!==null){p.flags&=-257,XS(p,a,i,o,t),p.mode&1&&qS(o,c,t),t=p,u=c;var h=t.updateQueue;if(h===null){var m=new Set;m.add(u),t.updateQueue=m}else h.add(u);break e}else{if(!(t&1)){qS(o,c,t),Hb();break e}u=Error(fe(426))}}else if(Gt&&i.mode&1){var y=KS(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),XS(y,a,i,o,t),Ib(Xl(u,i));break e}}o=u=Xl(u,i),In!==4&&(In=2),wc===null?wc=[o]:wc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=oE(o,u,t);WS(o,g);break e;case 1:i=u;var b=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(va===null||!va.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var S=aE(o,i,t);WS(o,S);break e}}o=o.return}while(o!==null)}_E(n)}catch(I){t=I,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function kE(){var e=Lp.current;return Lp.current=Bp,e===null?Bp:e}function Hb(){(In===0||In===3||In===2)&&(In=4),Dn===null||!(Ai&268435455)&&!(Uh&268435455)||sa(Dn,Wn)}function Up(e,t){var n=dt;dt|=2;var r=kE();(Dn!==e||Wn!==t)&&(vo=null,Si(e,t));do try{lM();break}catch(s){xE(e,s)}while(!0);if(Eb(),dt=n,Lp.current=r,hn!==null)throw Error(fe(261));return Dn=null,Wn=0,In}function lM(){for(;hn!==null;)IE(hn)}function uM(){for(;hn!==null&&!FF();)IE(hn)}function IE(e){var t=CE(e.alternate,e,Hr);e.memoizedProps=e.pendingProps,t===null?_E(e):hn=t,Lb.current=null}function _E(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=nM(n,t),n!==null){n.flags&=32767,hn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{In=6,hn=null;return}}else if(n=tM(n,t,Hr),n!==null){hn=n;return}if(t=t.sibling,t!==null){hn=t;return}hn=t=e}while(t!==null);In===0&&(In=5)}function ai(e,t,n){var r=xt,s=ms.transition;try{ms.transition=null,xt=1,cM(e,t,n,r)}finally{ms.transition=s,xt=r}return null}function cM(e,t,n,r){do Ol();while(ua!==null);if(dt&6)throw Error(fe(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(HF(e,o),e===Dn&&(hn=Dn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xf||(xf=!0,TE(kp,function(){return Ol(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ms.transition,ms.transition=null;var a=xt;xt=1;var i=dt;dt|=4,Lb.current=null,sM(e,n),bE(n,e),A6(o0),_p=!!s0,o0=s0=null,e.current=n,oM(n),MF(),dt=i,xt=a,ms.transition=o}else e.current=n;if(xf&&(xf=!1,ua=e,Wp=s),o=e.pendingLanes,o===0&&(va=null),BF(n.stateNode),Br(e,an()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zp)throw zp=!1,e=_0,_0=null,e;return Wp&1&&e.tag!==0&&Ol(),o=e.pendingLanes,o&1?e===E0?Sc++:(Sc=0,E0=e):Sc=0,Pa(),null}function Ol(){if(ua!==null){var e=o_(Wp),t=ms.transition,n=xt;try{if(ms.transition=null,xt=16>e?16:e,ua===null)var r=!1;else{if(e=ua,ua=null,Wp=0,dt&6)throw Error(fe(331));var s=dt;for(dt|=4,Ie=e.current;Ie!==null;){var o=Ie,a=o.child;if(Ie.flags&16){var i=o.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(Ie=c;Ie!==null;){var l=Ie;switch(l.tag){case 0:case 11:case 15:bc(8,l,o)}var d=l.child;if(d!==null)d.return=l,Ie=d;else for(;Ie!==null;){l=Ie;var f=l.sibling,p=l.return;if(gE(l),l===c){Ie=null;break}if(f!==null){f.return=p,Ie=f;break}Ie=p}}}var h=o.alternate;if(h!==null){var m=h.child;if(m!==null){h.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}Ie=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Ie=a;else e:for(;Ie!==null;){if(o=Ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:bc(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Ie=g;break e}Ie=o.return}}var b=e.current;for(Ie=b;Ie!==null;){a=Ie;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Ie=w;else e:for(a=b;Ie!==null;){if(i=Ie,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Wh(9,i)}}catch(I){nn(i,i.return,I)}if(i===a){Ie=null;break e}var S=i.sibling;if(S!==null){S.return=i.return,Ie=S;break e}Ie=i.return}}if(dt=s,Pa(),no&&typeof no.onPostCommitFiberRoot=="function")try{no.onPostCommitFiberRoot(Rh,e)}catch{}r=!0}return r}finally{xt=n,ms.transition=t}}return!1}function lx(e,t,n){t=Xl(n,t),t=oE(e,t,1),e=ya(e,t,1),t=mr(),e!==null&&(Ed(e,1,t),Br(e,t))}function nn(e,t,n){if(e.tag===3)lx(e,e,n);else for(;t!==null;){if(t.tag===3){lx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(va===null||!va.has(r))){e=Xl(n,e),e=aE(t,e,1),t=ya(t,e,1),e=mr(),t!==null&&(Ed(t,1,e),Br(t,e));break}}t=t.return}}function dM(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=mr(),e.pingedLanes|=e.suspendedLanes&n,Dn===e&&(Wn&n)===n&&(In===4||In===3&&(Wn&130023424)===Wn&&500>an()-Wb?Si(e,0):zb|=n),Br(e,t)}function EE(e,t){t===0&&(e.mode&1?(t=ff,ff<<=1,!(ff&130023424)&&(ff=4194304)):t=1);var n=mr();e=$o(e,t),e!==null&&(Ed(e,t,n),Br(e,n))}function fM(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),EE(e,n)}function pM(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(t),EE(e,n)}var CE;CE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Or.current)Fr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Fr=!1,eM(e,t,n);Fr=!!(e.flags&131072)}else Fr=!1,Gt&&t.flags&1048576&&D_(t,$p,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Jf(e,t),e=t.pendingProps;var s=jl(t,tr.current);Ml(t,n),s=Fb(null,t,r,e,s,n);var o=Mb();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pr(r)?(o=!0,Ap(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nb(t),s.updater=zh,t.stateNode=s,s._reactInternals=t,h0(t,r,e,n),t=y0(null,t,r,!0,o,n)):(t.tag=0,Gt&&o&&xb(t),fr(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Jf(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=mM(r),e=Es(r,e),s){case 0:t=g0(null,t,r,e,n);break e;case 1:t=ZS(null,t,r,e,n);break e;case 11:t=YS(null,t,r,e,n);break e;case 14:t=QS(null,t,r,Es(r.type,e),n);break e}throw Error(fe(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Es(r,s),g0(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Es(r,s),ZS(e,t,r,s,n);case 3:e:{if(cE(t),e===null)throw Error(fe(387));r=t.pendingProps,o=t.memoizedState,s=o.element,P_(e,t),Mp(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Xl(Error(fe(423)),t),t=JS(e,t,r,n,s);break e}else if(r!==s){s=Xl(Error(fe(424)),t),t=JS(e,t,r,n,s);break e}else for(Gr=ga(t.stateNode.containerInfo.firstChild),qr=t,Gt=!0,As=null,n=M_(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gl(),r===s){t=Ro(e,t,n);break e}fr(e,t,r,n)}t=t.child}return t;case 5:return B_(t),e===null&&d0(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,a0(r,s)?a=null:o!==null&&a0(r,o)&&(t.flags|=32),uE(e,t),fr(e,t,a,n),t.child;case 6:return e===null&&d0(t),null;case 13:return dE(e,t,n);case 4:return Ab(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ql(t,null,r,n):fr(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Es(r,s),YS(e,t,r,s,n);case 7:return fr(e,t,t.pendingProps,n),t.child;case 8:return fr(e,t,t.pendingProps.children,n),t.child;case 12:return fr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Mt(Rp,r._currentValue),r._currentValue=a,o!==null)if(Ps(o.value,a)){if(o.children===s.children&&!Or.current){t=Ro(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Co(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var l=c.pending;l===null?u.next=u:(u.next=l.next,l.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),f0(o.return,n,t),i.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(fe(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),f0(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}fr(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ml(t,n),s=vs(s),r=r(s),t.flags|=1,fr(e,t,r,n),t.child;case 14:return r=t.type,s=Es(r,t.pendingProps),s=Es(r.type,s),QS(e,t,r,s,n);case 15:return iE(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Es(r,s),Jf(e,t),t.tag=1,Pr(r)?(e=!0,Ap(t)):e=!1,Ml(t,n),sE(t,r,s),h0(t,r,s,n),y0(null,t,r,!0,e,n);case 19:return fE(e,t,n);case 22:return lE(e,t,n)}throw Error(fe(156,t.tag))};function TE(e,t){return t_(e,t)}function hM(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(e,t,n,r){return new hM(e,t,n,r)}function jb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mM(e){if(typeof e=="function")return jb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cb)return 11;if(e===db)return 14}return 2}function wa(e,t){var n=e.alternate;return n===null?(n=ds(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function np(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")jb(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case vl:return xi(n.children,s,o,t);case ub:a=8,s|=8;break;case Bv:return e=ds(12,n,t,s|2),e.elementType=Bv,e.lanes=o,e;case Lv:return e=ds(13,n,t,s),e.elementType=Lv,e.lanes=o,e;case zv:return e=ds(19,n,t,s),e.elementType=zv,e.lanes=o,e;case B3:return Vh(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O3:a=10;break e;case P3:a=9;break e;case cb:a=11;break e;case db:a=14;break e;case ea:a=16,r=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=ds(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function xi(e,t,n,r){return e=ds(7,e,r,t),e.lanes=n,e}function Vh(e,t,n,r){return e=ds(22,e,r,t),e.elementType=B3,e.lanes=n,e.stateNode={isHidden:!1},e}function nv(e,t,n){return e=ds(6,e,null,t),e.lanes=n,e}function rv(e,t,n){return t=ds(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gM(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Py(0),this.expirationTimes=Py(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Py(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gb(e,t,n,r,s,o,a,i,u){return e=new gM(e,t,n,i,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ds(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nb(o),e}function yM(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function NE(e){if(!e)return Ea;e=e._reactInternals;e:{if(Vi(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var n=e.type;if(Pr(n))return N_(e,n,t)}return t}function AE(e,t,n,r,s,o,a,i,u){return e=Gb(n,r,!0,e,s,o,a,i,u),e.context=NE(null),n=e.current,r=mr(),s=ba(n),o=Co(r,s),o.callback=t??null,ya(n,o,s),e.current.lanes=s,Ed(e,s,r),Br(e,r),e}function Hh(e,t,n,r){var s=t.current,o=mr(),a=ba(s);return n=NE(n),t.context===null?t.context=n:t.pendingContext=n,t=Co(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ya(s,t,a),e!==null&&(Rs(e,s,a,o),Yf(e,s,a)),a}function Vp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ux(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qb(e,t){ux(e,t),(e=e.alternate)&&ux(e,t)}function vM(){return null}var DE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kb(e){this._internalRoot=e}jh.prototype.render=Kb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));Hh(e,t,null,null)};jh.prototype.unmount=Kb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Di(function(){Hh(null,e,null,null)}),t[Do]=null}};function jh(e){this._internalRoot=e}jh.prototype.unstable_scheduleHydration=function(e){if(e){var t=l_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ra.length&&t!==0&&t<ra[n].priority;n++);ra.splice(n,0,e),n===0&&c_(e)}};function Xb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cx(){}function bM(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var c=Vp(a);o.call(c)}}var a=AE(t,r,e,0,null,!1,!1,"",cx);return e._reactRootContainer=a,e[Do]=a.current,Uc(e.nodeType===8?e.parentNode:e),Di(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var c=Vp(u);i.call(c)}}var u=Gb(e,0,!1,null,null,!1,!1,"",cx);return e._reactRootContainer=u,e[Do]=u.current,Uc(e.nodeType===8?e.parentNode:e),Di(function(){Hh(t,u,n,r)}),u}function qh(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var i=s;s=function(){var u=Vp(a);i.call(u)}}Hh(t,a,e,s)}else a=bM(n,t,e,s,r);return Vp(a)}a_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tc(t.pendingLanes);n!==0&&(hb(t,n|1),Br(t,an()),!(dt&6)&&(Yl=an()+500,Pa()))}break;case 13:Di(function(){var r=$o(e,1);if(r!==null){var s=mr();Rs(r,e,1,s)}}),qb(e,1)}};mb=function(e){if(e.tag===13){var t=$o(e,134217728);if(t!==null){var n=mr();Rs(t,e,134217728,n)}qb(e,134217728)}};i_=function(e){if(e.tag===13){var t=ba(e),n=$o(e,t);if(n!==null){var r=mr();Rs(n,e,t,r)}qb(e,t)}};l_=function(){return xt};u_=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}};Yv=function(e,t,n){switch(t){case"input":if(Vv(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ph(r);if(!s)throw Error(fe(90));z3(r),Vv(r,s)}}}break;case"textarea":U3(e,n);break;case"select":t=n.value,t!=null&&Dl(e,!!n.multiple,t,!1)}};X3=Ub;Y3=Di;var wM={usingClientEntryPoint:!1,Events:[Td,xl,Ph,q3,K3,Ub]},Vu={findFiberByHostInstance:pi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SM={bundleType:Vu.bundleType,version:Vu.version,rendererPackageName:Vu.rendererPackageName,rendererConfig:Vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=J3(e),e===null?null:e.stateNode},findFiberByHostInstance:Vu.findFiberByHostInstance||vM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kf.isDisabled&&kf.supportsFiber)try{Rh=kf.inject(SM),no=kf}catch{}}Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wM;Zr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xb(t))throw Error(fe(200));return yM(e,t,null,n)};Zr.createRoot=function(e,t){if(!Xb(e))throw Error(fe(299));var n=!1,r="",s=DE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Gb(e,1,!1,null,null,n,!1,r,s),e[Do]=t.current,Uc(e.nodeType===8?e.parentNode:e),new Kb(t)};Zr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=J3(t),e=e===null?null:e.stateNode,e};Zr.flushSync=function(e){return Di(e)};Zr.hydrate=function(e,t,n){if(!Gh(t))throw Error(fe(200));return qh(null,e,t,!0,n)};Zr.hydrateRoot=function(e,t,n){if(!Xb(e))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=DE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=AE(t,null,e,1,n??null,s,!1,o,a),e[Do]=t.current,Uc(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new jh(t)};Zr.render=function(e,t,n){if(!Gh(t))throw Error(fe(200));return qh(null,e,t,!1,n)};Zr.unmountComponentAtNode=function(e){if(!Gh(e))throw Error(fe(40));return e._reactRootContainer?(Di(function(){qh(null,null,e,!1,function(){e._reactRootContainer=null,e[Do]=null})}),!0):!1};Zr.unstable_batchedUpdates=Ub;Zr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gh(n))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return qh(e,t,n,!1,r)};Zr.version="18.3.1-next-f1338f8080-20240426";function $E(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($E)}catch(e){console.error(e)}}$E(),$3.exports=Zr;var RE=$3.exports;const xM=Wi(RE);var FE,dx=RE;FE=dx.createRoot,dx.hydrateRoot;const kM="Logging",IM="NoHubcallbackProvidedException";var Vr;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(Vr||(Vr={}));const fx={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class gs{constructor(t,n=Vr.WARN){this.name=t,this.level=n,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){const t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...n){let r=this.level;gs.LOG_LEVEL&&(r=gs.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(r=window.LOG_LEVEL);const s=fx[r];if(!(fx[t]>=s))return;let a=console.log.bind(console);t===Vr.ERROR&&console.error&&(a=console.error.bind(console)),t===Vr.WARN&&console.warn&&(a=console.warn.bind(console)),gs.BIND_ALL_LOG_LEVELS&&(t===Vr.INFO&&console.info&&(a=console.info.bind(console)),t===Vr.DEBUG&&console.debug&&(a=console.debug.bind(console)));const i=`[${t}] ${this._ts()} ${this.name}`;let u="";if(n.length===1&&typeof n[0]=="string")u=`${i} - ${n[0]}`,a(u);else if(n.length===1)u=`${i} ${n[0]}`,a(i,n[0]);else if(typeof n[0]=="string"){let c=n.slice(1);c.length===1&&(c=c[0]),u=`${i} - ${n[0]} ${c}`,a(`${i} - ${n[0]}`,c)}else u=`${i} ${n}`,a(i,n);for(const c of this._pluggables){const l={message:u,timestamp:Date.now()};c.pushLogs([l])}}log(...t){this._log(Vr.INFO,...t)}info(...t){this._log(Vr.INFO,...t)}warn(...t){this._log(Vr.WARN,...t)}error(...t){this._log(Vr.ERROR,...t)}debug(...t){this._log(Vr.DEBUG,...t)}verbose(...t){this._log(Vr.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===kM&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}gs.LOG_LEVEL=null;gs.BIND_ALL_LOG_LEVELS=!1;class ao extends Error{constructor({message:t,name:n,recoverySuggestion:r,underlyingError:s}){super(t),this.name=n,this.underlyingError=s,this.recoverySuggestion=r,this.constructor=ao,Object.setPrototypeOf(this,ao.prototype)}}var Qc;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"})(Qc||(Qc={}));const ME=(e,t=ao)=>(n,r,s)=>{const{message:o,recoverySuggestion:a}=e[r];if(!n)throw new t({name:r,message:s?`${o} ${s}`:o,recoverySuggestion:a})},Hp=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",Hu=new gs("Hub");class _M{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const r=this.listeners.get(t);if(!r){Hu.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...r.filter(({callback:s})=>s!==n)])}dispatch(t,n,r,s){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(s===Hp||Hu.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const o={channel:t,payload:{...n},source:r,patternInfo:[]};try{this._toListeners(o)}catch(a){Hu.error(a)}}listen(t,n,r="noname"){let s;if(typeof n!="function")throw new ao({name:IM,message:"No callback supplied to Hub"});s=n;let o=this.listeners.get(t);return o||(o=[],this.listeners.set(t,o)),o.push({name:r,callback:s}),()=>{this._remove(t,s)}}_toListeners(t){const{channel:n,payload:r}=t,s=this.listeners.get(n);s&&s.forEach(o=>{Hu.debug(`Dispatching to ${n} with `,r);try{o.callback(t)}catch(a){Hu.error(a)}})}}const N0=new _M("__default__"),EM=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new ao({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},CM={convert(e){return EM()(e)}};var xo;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(xo||(xo={}));const TM={[xo.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[xo.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[xo.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[xo.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[xo.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},OE=ME(TM);function Ar(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,OE(t,xo.AuthUserPoolException)}function rp(e){const t=!!(e!=null&&e.identityPoolId);OE(t,xo.InvalidIdentityPoolIdException)}function Zc(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{const r=t[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(CM.convert(r).split("").map(a=>`%${`00${a.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),o=JSON.parse(s);return{toString:()=>e,payload:o}}catch{throw new Error("Invalid token payload")}}const NM=e=>e&&e["nonRetryable"],If=new gs("retryUtil");async function AM(e,t,n,r){if(typeof e!="function")throw Error("functionToRetry must be a function");return new Promise(async(s,o)=>{let a=0,i=!1,u=()=>{},c;for(;!i;){a++,If.debug(`${e.name} attempt #${a} with this vars: ${JSON.stringify(t)}`);try{s(await e(...t));return}catch(l){if(c=l,If.debug(`error on ${e.name}`,l),NM(l)){If.debug(`${e.name} non retryable error`,l),o(l);return}const d=n(a,t,l);if(If.debug(`${e.name} retrying in ${d} ms`),d===!1||i){o(l);return}else await new Promise(f=>{u=f,setTimeout(u,d)})}}o(c)})}const PE=e=>{const t=Reflect.ownKeys(e);for(const n of t){const r=e[n];(r&&typeof r=="object"||typeof r=="function")&&PE(r)}return Object.freeze(e)},DM=new gs("parseAWSExports"),$M={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},RM=(e={})=>{var ae,ie,ue,ve,pe,xe;if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new ao({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:s,aws_bots_config:o,aws_cognito_identity_pool_id:a,aws_cognito_sign_up_verification_method:i,aws_cognito_mfa_configuration:u,aws_cognito_mfa_types:c,aws_cognito_password_protection_settings:l,aws_cognito_verification_mechanisms:d,aws_cognito_signup_attributes:f,aws_cognito_social_providers:p,aws_cognito_username_attributes:h,aws_mandatory_sign_in:m,aws_mobile_analytics_app_id:y,aws_mobile_analytics_app_region:g,aws_user_files_s3_bucket:b,aws_user_files_s3_bucket_region:w,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:S,aws_user_pools_id:I,aws_user_pools_web_client_id:_,geo:C,oauth:N,predictions:$,aws_cloud_logic_custom:R,Notifications:F,modelIntrospection:U}=e,L={};y&&(L.Analytics={Pinpoint:{appId:y,region:g}});const{InAppMessaging:H,Push:j}=F??{};if(H!=null&&H.AWSPinpoint||j!=null&&j.AWSPinpoint){if(H!=null&&H.AWSPinpoint){const{appId:Se,region:Ce}=H.AWSPinpoint;L.Notifications={InAppMessaging:{Pinpoint:{appId:Se,region:Ce}}}}if(j!=null&&j.AWSPinpoint){const{appId:Se,region:Ce}=j.AWSPinpoint;L.Notifications={...L.Notifications,PushNotification:{Pinpoint:{appId:Se,region:Ce}}}}}if(Array.isArray(o)&&(L.Interactions={LexV1:Object.fromEntries(o.map(Se=>[Se.name,Se]))}),r){const Se=$M[n];Se||DM.debug(`Invalid authentication type ${n}. Falling back to IAM.`),L.API={GraphQL:{endpoint:r,apiKey:t,region:s,defaultAuthMode:Se??"iam"}},U&&(L.API.GraphQL.modelIntrospection=U)}const X=u?{status:u&&u.toLowerCase(),totpEnabled:(c==null?void 0:c.includes("TOTP"))??!1,smsEnabled:(c==null?void 0:c.includes("SMS"))??!1}:void 0,Q=l?{minLength:l.passwordPolicyMinLength,requireLowercase:((ae=l.passwordPolicyCharacters)==null?void 0:ae.includes("REQUIRES_LOWERCASE"))??!1,requireUppercase:((ie=l.passwordPolicyCharacters)==null?void 0:ie.includes("REQUIRES_UPPERCASE"))??!1,requireNumbers:((ue=l.passwordPolicyCharacters)==null?void 0:ue.includes("REQUIRES_NUMBERS"))??!1,requireSpecialCharacters:((ve=l.passwordPolicyCharacters)==null?void 0:ve.includes("REQUIRES_SYMBOLS"))??!1}:void 0,G=Array.from(new Set([...d??[],...f??[]])).reduce((Se,Ce)=>({...Se,[Ce.toLowerCase()]:{required:!0}}),{}),Y=(h==null?void 0:h.includes("EMAIL"))??!1,Z=(h==null?void 0:h.includes("PHONE_NUMBER"))??!1;(a||I)&&(L.Auth={Cognito:{identityPoolId:a,allowGuestAccess:m!=="enable",signUpVerificationMethod:i,userAttributes:G,userPoolClientId:_,userPoolId:I,mfa:X,passwordFormat:Q,loginWith:{username:!(Y||Z),email:Y,phone:Z}}});const se=N?Object.keys(N).length>0:!1,re=p?p.length>0:!1;if(L.Auth&&se&&(L.Auth.Cognito.loginWith={...L.Auth.Cognito.loginWith,oauth:{...FM(N),...re&&{providers:MM(p)}}}),b&&(L.Storage={S3:{bucket:b,region:w,dangerouslyConnectToHttpEndpointForTesting:S}}),C){const{amazon_location_service:Se}=C;L.Geo={LocationService:{maps:Se.maps,geofenceCollections:Se.geofenceCollections,searchIndices:Se.search_indices,region:Se.region}}}if(R&&(L.API={...L.API,REST:R.reduce((Se,Ce)=>{const{name:$e,endpoint:Fe,region:Be,service:Le}=Ce;return{...Se,[$e]:{endpoint:Fe,...Le?{service:Le}:void 0,...Be?{region:Be}:void 0}}},{})}),$){const{VoiceId:Se}=((xe=(pe=$==null?void 0:$.convert)==null?void 0:pe.speechGenerator)==null?void 0:xe.defaults)??{};L.Predictions=Se?{...$,convert:{...$.convert,speechGenerator:{...$.convert.speechGenerator,defaults:{voiceId:Se}}}}:$}return L},px=e=>(e==null?void 0:e.split(","))??[],FM=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:s})=>({domain:e,scopes:t,redirectSignIn:px(n),redirectSignOut:px(r),responseType:s}),MM=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),OM=Symbol("oauth-listener");let _f;const PM=new Uint8Array(16);function BM(){if(!_f&&(_f=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_f))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _f(PM)}const Pn=[];for(let e=0;e<256;++e)Pn.push((e+256).toString(16).slice(1));function LM(e,t=0){return Pn[e[t+0]]+Pn[e[t+1]]+Pn[e[t+2]]+Pn[e[t+3]]+"-"+Pn[e[t+4]]+Pn[e[t+5]]+"-"+Pn[e[t+6]]+Pn[e[t+7]]+"-"+Pn[e[t+8]]+Pn[e[t+9]]+"-"+Pn[e[t+10]]+Pn[e[t+11]]+Pn[e[t+12]]+Pn[e[t+13]]+Pn[e[t+14]]+Pn[e[t+15]]}const zM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hx={randomUUID:zM};function WM(e,t,n){if(hx.randomUUID&&!t&&!e)return hx.randomUUID();e=e||{};const r=e.random||(e.rng||BM)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,LM(r)}function UM(e){const{version:t}=e;return t?t.startsWith("1"):!1}function VM(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:r}=e;return{S3:{bucket:t,region:n,buckets:r&&eO(r)}}}function HM(e){if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:r,password_policy:s,mfa_configuration:o,mfa_methods:a,unauthenticated_identities_enabled:i,oauth:u,username_attributes:c,standard_required_attributes:l}=e,d={Cognito:{userPoolId:t,userPoolClientId:n}};return r&&(d.Cognito={...d.Cognito,identityPoolId:r}),s&&(d.Cognito.passwordFormat={requireLowercase:s.require_lowercase,requireNumbers:s.require_numbers,requireUppercase:s.require_uppercase,requireSpecialCharacters:s.require_symbols,minLength:s.min_length??6}),o&&(d.Cognito.mfa={status:JM(o),smsEnabled:a==null?void 0:a.includes("SMS"),totpEnabled:a==null?void 0:a.includes("TOTP")}),i&&(d.Cognito.allowGuestAccess=i),u&&(d.Cognito.loginWith={oauth:{domain:u.domain,redirectSignIn:u.redirect_sign_in_uri,redirectSignOut:u.redirect_sign_out_uri,responseType:u.response_type==="token"?"token":"code",scopes:u.scopes,providers:ZM(u.identity_providers)}}),c&&(d.Cognito.loginWith={...d.Cognito.loginWith,email:c.includes("email"),phone:c.includes("phone_number"),username:c.includes("username")}),l&&(d.Cognito.userAttributes=l.reduce((f,p)=>({...f,[p]:{required:!0}}),{})),d}function jM(e){if(!(e!=null&&e.amazon_pinpoint))return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function GM(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:r,search_indices:s}=e;return{LocationService:{region:t,searchIndices:s,geofenceCollections:n,maps:r}}}function qM(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:r,api_key:s,model_introspection:o}=e;return{GraphQL:{endpoint:r,defaultAuthMode:QM(n),region:t,apiKey:s,modelIntrospection:o}}}function KM(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:r}=e,s=n.includes("IN_APP_MESSAGING"),o=n.includes("APNS")||n.includes("FCM");if(!(s||o))return;const a={};return s&&(a.InAppMessaging={Pinpoint:{appId:r,region:t}}),o&&(a.PushNotification={Pinpoint:{appId:r,region:t}}),a}function XM(e){const t={};return e.storage&&(t.Storage=VM(e.storage)),e.auth&&(t.Auth=HM(e.auth)),e.analytics&&(t.Analytics=jM(e.analytics)),e.geo&&(t.Geo=GM(e.geo)),e.data&&(t.API=qM(e.data)),e.notifications&&(t.Notifications=KM(e.notifications)),t}const YM={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function QM(e){return YM[e]}const mx={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function ZM(e=[]){return e.reduce((t,n)=>(mx[n]!==void 0&&t.push(mx[n]),t),[])}function JM(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function eO(e){const t={};return e.forEach(({name:n,bucket_name:r,aws_region:s})=>{if(n in t)throw new Error(`Duplicate friendly name found: ${n}. Name must be unique.`);t[n]={bucketName:r,region:s}}),t}const BE=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?RM(e):UM(e)?XM(e):e;function gx({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class tO{configure(t,n){this.authConfig=t,this.authOptions=n}async fetchAuthSession(t={}){var o,a,i,u,c,l;let n,r;const s=await this.getTokens(t);return s?(r=(a=(o=s.accessToken)==null?void 0:o.payload)==null?void 0:a.sub,n=await((u=(i=this.authOptions)==null?void 0:i.credentialsProvider)==null?void 0:u.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:s,authenticated:!0,forceRefresh:t.forceRefresh}))):n=await((l=(c=this.authOptions)==null?void 0:c.credentialsProvider)==null?void 0:l.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh})),{tokens:s,credentials:n==null?void 0:n.credentials,identityId:n==null?void 0:n.identityId,userSub:r}}async clearCredentials(){var t,n;await((n=(t=this.authOptions)==null?void 0:t.credentialsProvider)==null?void 0:n.clearCredentialsAndIdentityId())}async getTokens(t){var n,r;return await((r=(n=this.authOptions)==null?void 0:n.tokenProvider)==null?void 0:r.getTokens(t))??void 0}}function nO(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{c(r.next(l))}catch(d){a(d)}}function u(l){try{c(r.throw(l))}catch(d){a(d)}}function c(l){l.done?o(l.value):s(l.value).then(i,u)}c((r=r.apply(e,t||[])).next())})}function rO(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function i(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(n=0)),n;)try{if(r=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function sO(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var as=64,oO=32,aO=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),iO=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],lO=Math.pow(2,53)-1,sp=function(){function e(){this.state=Int32Array.from(iO),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=t.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>lO)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=t[n++],r--,this.bufferLength===as&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%as>=as-8){for(var s=this.bufferLength;s<as;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<as-8;s++)n.setUint8(s,0);n.setUint32(as-8,Math.floor(t/4294967296),!0),n.setUint32(as-4,t),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(oO),s=0;s<8;s++)o[s*4]=this.state[s]>>>24&255,o[s*4+1]=this.state[s]>>>16&255,o[s*4+2]=this.state[s]>>>8&255,o[s*4+3]=this.state[s]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var t=this,n=t.buffer,r=t.state,s=r[0],o=r[1],a=r[2],i=r[3],u=r[4],c=r[5],l=r[6],d=r[7],f=0;f<as;f++){if(f<16)this.temp[f]=(n[f*4]&255)<<24|(n[f*4+1]&255)<<16|(n[f*4+2]&255)<<8|n[f*4+3]&255;else{var p=this.temp[f-2],h=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[f-15];var m=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[f]=(h+this.temp[f-7]|0)+(m+this.temp[f-16]|0)}var y=(((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&c^~u&l)|0)+(d+(aO[f]+this.temp[f]|0)|0)|0,g=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&o^s&a^o&a)|0;d=l,l=c,c=u,u=i+y|0,i=a,a=o,o=s,s=y+g|0}r[0]+=s,r[1]+=o,r[2]+=a,r[3]+=i,r[4]+=u,r[5]+=c,r[6]+=l,r[7]+=d},e}();const uO=e=>new TextEncoder().encode(e);var cO=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:uO;function Jc(e){return e instanceof Uint8Array?e:typeof e=="string"?cO(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function A0(e){return typeof e=="string"?e.length===0:e.byteLength===0}function dO(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),n=0;n<e.length;)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}var fO=function(){function e(t){this.secret=t,this.hash=new sp,this.reset()}return e.prototype.update=function(t){if(!(A0(t)||this.error))try{this.hash.update(Jc(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return nO(this,void 0,void 0,function(){return rO(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new sp,this.secret){this.outer=new sp;var t=pO(this.secret),n=new Uint8Array(as);n.set(t);for(var r=0;r<as;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}},e}();function pO(e){var t=Jc(e);if(t.byteLength>as){var n=new sp;n.update(t),t=n.digest()}var r=new Uint8Array(as);return r.set(t),r}for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`)}var pn;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(pn||(pn={}));var yx;(function(e){e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(yx||(yx={}));var vx;(function(e){e.Record="1",e.IdentifyUser="2"})(vx||(vx={}));var bx;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(bx||(bx={}));var wx;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36"})(wx||(wx={}));var Sx;(function(e){e.Subscribe="1",e.GraphQl="2"})(Sx||(Sx={}));var xx;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(xx||(xx={}));var kx;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(kx||(kx={}));var Ix;(function(e){e.None="0"})(Ix||(Ix={}));var _x;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(_x||(_x={}));var Ex;(function(e){e.Subscribe="1"})(Ex||(Ex={}));var Cx;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(Cx||(Cx={}));var Tx;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7"})(Tx||(Tx={}));const Kh=()=>typeof global<"u",hu=()=>typeof window<"u",LE=()=>typeof document<"u",Yb=()=>typeof process<"u",ed=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));var Nx={};function hO(){const e=r=>r.startsWith("_react")||r.startsWith("__react"),t=r=>Object.keys(r).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return LE()&&n().some(t)}function mO(){return Yb()&&typeof Nx<"u"&&!!Object.keys(Nx).find(e=>e.includes("react"))}function gO(){return hu()&&ed(window,"__VUE")}function yO(){return Kh()&&ed(global,"__VUE")}var Ax={};function vO(){return hu()&&ed(window,"__SVELTE")}function bO(){return Yb()&&typeof Ax<"u"&&!!Object.keys(Ax).find(e=>e.includes("svelte"))}function wO(){return hu()&&window.next&&typeof window.next=="object"}function SO(){return Kh()&&(ed(global,"__next")||ed(global,"__NEXT"))}function xO(){return hu()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function kO(){return Kh()&&typeof global.__NUXT_PATHS__<"u"}var Dx={};function IO(){const e=!!(LE()&&document.querySelector("[ng-version]")),t=!!(hu()&&typeof window.ng<"u");return e||t}function _O(){var e;return Yb()&&typeof Dx=="object"&&((e=Dx.npm_lifecycle_script)==null?void 0:e.startsWith("ng "))||!1}function EO(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function CO(){return Kh()&&typeof global.expo<"u"}function TO(){return hu()}const NO=[{platform:pn.Expo,detectionMethod:CO},{platform:pn.ReactNative,detectionMethod:EO},{platform:pn.NextJs,detectionMethod:wO},{platform:pn.Nuxt,detectionMethod:xO},{platform:pn.Angular,detectionMethod:IO},{platform:pn.React,detectionMethod:hO},{platform:pn.VueJs,detectionMethod:gO},{platform:pn.Svelte,detectionMethod:vO},{platform:pn.WebUnknown,detectionMethod:TO},{platform:pn.NextJsSSR,detectionMethod:SO},{platform:pn.NuxtSSR,detectionMethod:kO},{platform:pn.ReactSSR,detectionMethod:mO},{platform:pn.VueJsSSR,detectionMethod:yO},{platform:pn.AngularSSR,detectionMethod:_O},{platform:pn.SvelteSSR,detectionMethod:bO}];function AO(){var e;return((e=NO.find(t=>t.detectionMethod()))==null?void 0:e.platform)||pn.ServerSideUnknown}const DO=()=>typeof window<"u"&&typeof window.document<"u";class $O{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new tO}configure(t,n){const r=BE(t);this.resourcesConfig=r,n&&(this.libraryOptions=n),this.resourcesConfig=PE(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),N0.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",Hp),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[OM](t){var n,r,s;(r=(n=this.resourcesConfig.Auth)==null?void 0:n.Cognito.loginWith)!=null&&r.oauth?t((s=this.resourcesConfig.Auth)==null?void 0:s.Cognito):this.oAuthListener=t}notifyOAuthListener(){var t,n,r;!((n=(t=this.resourcesConfig.Auth)==null?void 0:t.Cognito.loginWith)!=null&&n.oauth)||!this.oAuthListener||(this.oAuthListener((r=this.resourcesConfig.Auth)==null?void 0:r.Cognito),this.oAuthListener=void 0)}}const mo=new $O,RO=(e,t)=>e.Auth.fetchAuthSession(t),zE=e=>RO(mo,e),Xh=e=>{const{headers:t,statusCode:n}=e;return{...FO(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},FO=e=>typeof(e==null?void 0:e.$metadata)=="object",Ad=async e=>{if(!e||e.statusCode<300)return;const t=await Yh(e),r=(a=>{const[i]=a.toString().split(/[,:]+/);return i.includes("#")?i.split("#")[1]:i})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),s=t.message??t.Message??"Unknown error",o=new Error(s);return Object.assign(o,{name:r,$metadata:Xh(e)})},Yh=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:Xh(e)})},Qb=(e,t,n,r)=>async(s,o)=>{const a={...r,...s},i=await a.endpointResolver(a,o),u=await t(o,i),c=await e(u,{...a});return n(c)},WE={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},MO={partitions:[WE,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},UE=e=>{const{partitions:t}=MO;for(const{regions:n,outputs:r,regionRegex:s}of t){const o=new RegExp(s);if(n.includes(e)||o.test(e))return r.dnsSuffix}return WE.outputs.dnsSuffix},OO=3,PO=({maxAttempts:e=OO,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(s,o)=>async function(i){let u,c=o.attemptsCount??0,l;const d=()=>{if(l)return $x(l,c),l;throw $x(u,c),u};for(;!(r!=null&&r.aborted)&&c<e;){try{l=await s(i),u=void 0}catch(f){u=f,l=void 0}if(c=(o.attemptsCount??0)>c?o.attemptsCount??0:c+1,o.attemptsCount=c,await t(l,u)){if(!(r!=null&&r.aborted)&&c<e){const f=n(c);await BO(f,r)}continue}else return d()}if(r!=null&&r.aborted)throw new Error("Request aborted.");return d()}},BO=(e,t)=>{if(t!=null&&t.aborted)return Promise.resolve();let n,r;const s=new Promise(o=>{r=o,n=setTimeout(o,e)});return t==null||t.addEventListener("abort",function o(a){clearTimeout(n),t==null||t.removeEventListener("abort",o),r()}),s},$x=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata={...e.$metadata??{},attempts:t})},LO=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(s){if(t.trim().length===0)return await n(s);{const o=e.toLowerCase();return s.headers[o]=s.headers[o]?`${s.headers[o]} ${t}`:t,await n(s)}},Zb=(e,t)=>(n,r)=>{const s={};let o=a=>e(a,r);for(let a=t.length-1;a>=0;a--){const i=t[a];o=i(r)(o,s)}return o(n)},sv=e=>{let t;return()=>(t||(t=e()),t)},zO=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),WO=async({url:e,method:t,headers:n,body:r},{abortSignal:s,cache:o,withCrossDomainCredentials:a})=>{var d;let i;try{i=await fetch(e,{method:t,headers:n,body:zO(t)?r:void 0,signal:s,cache:o,credentials:a?"include":"same-origin"})}catch(f){throw f instanceof TypeError?new ao({name:Qc.NetworkError,message:"A network error has occurred.",underlyingError:f}):f}const u={};(d=i.headers)==null||d.forEach((f,p)=>{u[p.toLowerCase()]=f});const c={statusCode:i.status,headers:u,body:null},l=Object.assign(i.body??{},{text:sv(()=>i.text()),blob:sv(()=>i.blob()),json:sv(()=>i.json())});return{...c,body:l}},VE=Zb(WO,[LO,PO]),HE=5*60*1e3;function jE(e=HE){return r=>{const s=2**r*100+100*Math.random();return s>e?!1:s}}const Rx=5*60*1e3,GE=e=>{const n=jE(Rx)(e);return n===!1?Rx:n},UO=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],VO=e=>!!e&&UO.includes(e),qE=e=>async(t,n)=>{const r=n??await e(t)??void 0,s=(r==null?void 0:r.code)||(r==null?void 0:r.name),o=t==null?void 0:t.statusCode;return qO(n)||GO(o,s)||VO(s)||KO(o,s)},HO=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],jO=["TimeoutError","RequestTimeout","RequestTimeoutException"],GO=(e,t)=>e===429||!!t&&HO.includes(t),qO=e=>(e==null?void 0:e.name)==="Network error",KO=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&jO.includes(t),Jb=URL,XO="6.6.2";let xc;const op=[];let jp=!1;const YO=10,QO=10,ZO=1e3,KE=()=>{var e;if(!xc){if(xc=AO(),jp)for(;op.length;)(e=op.pop())==null||e();else op.forEach(t=>{t()});Fx(pn.ServerSideUnknown,YO),Fx(pn.WebUnknown,QO)}return xc},JO=e=>{jp||op.push(e)};function e5(){xc=void 0}function Fx(e,t){xc===e&&!jp&&setTimeout(()=>{e5(),jp=!0,setTimeout(KE,ZO)},t)}const t5={},n5=(e,t)=>{var n,r;return(r=(n=t5[e])==null?void 0:n[t])==null?void 0:r.additionalDetails},r5="aws-amplify",s5=({category:e,action:t}={})=>{const n=[[r5,XO]];if(e&&n.push([e,t]),n.push(["framework",KE()]),e&&t){const r=n5(e,t);r&&r.forEach(s=>{n.push(s)})}return n},Qh=e=>s5(e).map(([r,s])=>r&&s?`${r}/${s}`:r).join(" "),o5="cognito-identity",a5=({region:e})=>({url:new Jb(`https://cognito-identity.${e}.${UE(e)}`)}),i5=()=>e=>async function(n){return n.headers["cache-control"]="no-store",e(n)},XE=Zb(VE,[i5]),ew={service:o5,endpointResolver:a5,retryDecider:qE(Ad),computeDelay:GE,userAgentValue:Qh(),cache:"no-store"};JO(()=>{ew.userAgentValue=Qh()});const YE=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),QE=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),l5=(e,t)=>{const n=YE("GetId"),r=JSON.stringify(e);return QE(t,n,r)},u5=async e=>{if(e.statusCode>=300)throw await Ad(e);return{IdentityId:(await Yh(e)).IdentityId,$metadata:Xh(e)}},c5=Qb(XE,l5,u5,ew),d5=(e,t)=>{const n=YE("GetCredentialsForIdentity"),r=JSON.stringify(e);return QE(t,n,r)},f5=async e=>{if(e.statusCode>=300)throw await Ad(e);{const t=await Yh(e);return{IdentityId:t.IdentityId,Credentials:p5(t.Credentials),$metadata:Xh(e)}}},p5=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r&&new Date(r*1e3)}),Mx=Qb(XE,d5,f5,ew);class Ef extends ao{constructor(){super({name:Qc.PlatformNotSupported,message:"Function not supported on current platform"})}}class ZE{constructor(t){this.storage=t}async setItem(t,n){if(!this.storage)throw new Ef;this.storage.setItem(t,n)}async getItem(t){if(!this.storage)throw new Ef;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new Ef;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new Ef;this.storage.clear()}}class JE{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const h5=()=>typeof window<"u"&&window.localStorage?window.localStorage:new JE,m5=()=>typeof window<"u"&&window.sessionStorage?window.sessionStorage:new JE;class g5 extends ZE{constructor(){super(h5())}}class y5 extends ZE{constructor(){super(m5())}}/*! js-cookie v3.0.5 | MIT */function Cf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var v5={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function D0(e,t){function n(s,o,a){if(!(typeof document>"u")){a=Cf({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var u in a)a[u]&&(i+="; "+u,a[u]!==!0&&(i+="="+a[u].split(";")[0]));return document.cookie=s+"="+e.write(o,s)+i}}function r(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var o=document.cookie?document.cookie.split("; "):[],a={},i=0;i<o.length;i++){var u=o[i].split("="),c=u.slice(1).join("=");try{var l=decodeURIComponent(u[0]);if(a[l]=e.read(c,l),s===l)break}catch{}}return s?a[s]:a}}return Object.create({set:n,get:r,remove:function(s,o){n(s,"",Cf({},o,{expires:-1}))},withAttributes:function(s){return D0(this.converter,Cf({},this.attributes,s))},withConverter:function(s){return D0(Cf({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Tf=D0(v5,{path:"/"});class Ox{constructor(t={}){const{path:n,domain:r,expires:s,sameSite:o,secure:a}=t;if(this.domain=r,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?s:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?a:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!o||!["strict","lax","none"].includes(o))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(o==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=o}}async setItem(t,n){Tf.set(t,n,this.getData())}async getItem(t){return Tf.get(t)??null}async removeItem(t){Tf.remove(t,this.getData())}async clear(){const t=Tf.get(),n=Object.keys(t).map(r=>this.removeItem(r));await Promise.all(n)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const td=new g5;new y5;const b5=(e,t,n=HE,r)=>AM(e,t,jE(n)),w5=e=>{let t;return async(...n)=>t||(t=new Promise((r,s)=>{e(...n).then(o=>{r(o)}).catch(o=>{s(o)}).finally(()=>{t=void 0})}),t)};class en extends ao{constructor(t){super(t),this.constructor=en,Object.setPrototypeOf(this,en.prototype)}}function S5(e){const t=e==null?void 0:e.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new en({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function $0(e){if(!e||!e.includes(":"))throw new en({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}const eC="UserUnAuthenticatedException",x5="InvalidRedirectException",k5="InvalidAppSchemeException",I5="InvalidPreferredRedirectUrlException";new en({name:x5,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new en({name:k5,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});new en({name:I5,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."});const _5="InvalidOriginException";new en({name:_5,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});const E5="TokenRefreshException";function C5(e){if(!e||!e.idToken)throw new en({name:eC,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const T5=new en({name:E5,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),N5=new en({name:eC,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function A5(e){if(R5(e))throw T5;if(!$5(e))throw N5}const D5={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function tC(e){return(e==null?void 0:e.accessToken)||(e==null?void 0:e.idToken)}function $5(e){return tC(e)&&(e==null?void 0:e.refreshToken)}function R5(e){return tC(e)&&!(e!=null&&e.refreshToken)}const F5=e=>(t,n)=>{const r=M5(e),s=JSON.stringify(t);return O5(n,r,s)},M5=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),O5=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});function nC(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new en({name:Qc.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const P5=()=>async e=>{if(e.statusCode>=300){const t=await Ad(e);throw nC(t),new en({name:t.name,message:t.message})}return Yh(e)},B5=()=>(e,t)=>async function(r){return r.headers["cache-control"]="no-store",e(r)},L5=Zb(VE,[B5]),rC="cognito-idp",z5={service:rC,retryDecider:qE(Ad),computeDelay:GE,userAgentValue:Qh(),cache:"no-store"},W5=e=>Qb(L5,F5("InitiateAuth"),P5(),{...z5,...e}),U5=({region:e})=>({url:new Jb(`https://${rC}.${e}.${UE(e)}`)}),V5=({endpointOverride:e})=>t=>e?{url:new Jb(e)}:U5(t);function H5({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window>"u")return;const r=window.AmazonCognitoAdvancedSecurityData;if(typeof r>"u")return;const s=r.getData(e,t,n);return s?{EncodedData:s}:{}}const j5=async({tokens:e,authConfig:t,username:n})=>{var y;Ar(t==null?void 0:t.Cognito);const{userPoolId:r,userPoolClientId:s,userPoolEndpoint:o}=t.Cognito,a=S5(r);A5(e);const i=e.refreshToken,u={REFRESH_TOKEN:i};(y=e.deviceMetadata)!=null&&y.deviceKey&&(u.DEVICE_KEY=e.deviceMetadata.deviceKey);const c=H5({username:n,userPoolId:r,userPoolClientId:s}),l=W5({endpointResolver:V5({endpointOverride:o})}),{AuthenticationResult:d}=await l({region:a},{ClientId:s,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:u,UserContextData:c}),f=Zc((d==null?void 0:d.AccessToken)??""),p=d!=null&&d.IdToken?Zc(d.IdToken):void 0,{iat:h}=f.payload;if(!h)throw new en({name:"iatNotFoundException",message:"iat not found in access token"});const m=h*1e3-new Date().getTime();return{accessToken:f,idToken:p,clockDrift:m,refreshToken:i,username:n}},G5=w5(j5),q5={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var Gp;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(Gp||(Gp={}));const K5={[Gp.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},X5=ME(K5);class Y5{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new en({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{const t=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t.accessToken);if(!n)throw new en({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const r=Zc(n),s=await this.getKeyValueStorage().getItem(t.idToken),o=s?Zc(s):void 0,a=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,i=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",u=Number.parseInt(i),c=await this.getKeyValueStorage().getItem(t.signInDetails),l={accessToken:r,idToken:o,refreshToken:a,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:u,username:await this.getLastAuthUser()};return c&&(l.signInDetails=JSON.parse(c)),l}catch{return null}}async storeTokens(t){X5(t!==void 0,Gp.InvalidAuthTokens),await this.clearTokens();const n=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);const r=await this.getAuthKeys();await this.getKeyValueStorage().setItem(r.accessToken,t.accessToken.toString()),t.idToken&&await this.getKeyValueStorage().setItem(r.idToken,t.idToken.toString()),t.refreshToken&&await this.getKeyValueStorage().setItem(r.refreshToken,t.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(r.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(r.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(r.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails&&await this.getKeyValueStorage().setItem(r.signInDetails,JSON.stringify(t.signInDetails)),await this.getKeyValueStorage().setItem(r.clockDrift,`${t.clockDrift}`)}async clearTokens(){const t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])}async getDeviceMetadata(t){const n=await this.getAuthKeys(t),r=await this.getKeyValueStorage().getItem(n.deviceKey),s=await this.getKeyValueStorage().getItem(n.deviceGroupKey),o=await this.getKeyValueStorage().getItem(n.randomPasswordKey);return o&&s&&r?{deviceKey:r,deviceGroupKey:s,randomPassword:o}:null}async clearDeviceMetadata(t){const n=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])}async getAuthKeys(t){var r;Ar((r=this.authConfig)==null?void 0:r.Cognito);const n=t??await this.getLastAuthUser();return Q5(this.name,`${this.authConfig.Cognito.userPoolClientId}.${n}`)}getLastAuthUserKey(){var n;Ar((n=this.authConfig)==null?void 0:n.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(t){const{oauthMetadata:n}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n,JSON.stringify(t))}async getOAuthMetadata(){const{oauthMetadata:t}=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t);return n&&JSON.parse(n)}}const Q5=(e,t)=>tw(q5)(`${e}`,t);function tw(e){const t=Object.values({...e});return(n,r)=>t.reduce((s,o)=>({...s,[o]:`${n}.${r}.${o}`}),{})}const Px="amplify-signin-with-hostedUI",qs="CognitoIdentityServiceProvider";class Z5{constructor(t){this.keyValueStorage=t}async clearOAuthInflightData(){Ar(this.cognitoConfig);const t=Ks(qs,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])}async clearOAuthData(){Ar(this.cognitoConfig);const t=Ks(qs,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(Px),this.keyValueStorage.removeItem(t.oauthSignIn)}loadOAuthState(){Ar(this.cognitoConfig);const t=Ks(qs,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){Ar(this.cognitoConfig);const n=Ks(qs,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){Ar(this.cognitoConfig);const t=Ks(qs,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){Ar(this.cognitoConfig);const n=Ks(qs,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}async loadOAuthInFlight(){Ar(this.cognitoConfig);const t=Ks(qs,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(t.inflightOAuth)==="true"}async storeOAuthInFlight(t){Ar(this.cognitoConfig);const n=Ks(qs,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.inflightOAuth,`${t}`)}async loadOAuthSignIn(){var o;Ar(this.cognitoConfig);const t=Ks(qs,this.cognitoConfig.userPoolClientId),n=await this.keyValueStorage.getItem(Px),[r,s]=((o=await this.keyValueStorage.getItem(t.oauthSignIn))==null?void 0:o.split(","))??[];return{isOAuthSignIn:r==="true"||n==="true",preferPrivateSession:s==="true"}}async storeOAuthSignIn(t,n=!1){Ar(this.cognitoConfig);const r=Ks(qs,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(r.oauthSignIn,`${t},${n}`)}}const Ks=(e,t)=>tw(D5)(e,t),Bx=new Z5(td);class J5{constructor(){this.waitForInflightOAuth=DO()?async()=>{if(await Bx.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,n)=>{}),this.inflightPromise)}:async()=>{}}setAuthConfig(t){Bx.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new en({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new en({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(t){var a,i,u,c,l;let n;try{Ar((a=this.authConfig)==null?void 0:a.Cognito)}catch{return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,n=await this.getTokenStore().loadTokens();const r=await this.getTokenStore().getLastAuthUser();if(n===null)return null;const s=!!(n!=null&&n.idToken)&&gx({expiresAt:(((u=(i=n.idToken)==null?void 0:i.payload)==null?void 0:u.exp)??0)*1e3,clockDrift:n.clockDrift??0}),o=gx({expiresAt:(((l=(c=n.accessToken)==null?void 0:c.payload)==null?void 0:l.exp)??0)*1e3,clockDrift:n.clockDrift??0});return(t!=null&&t.forceRefresh||s||o)&&(n=await this.refreshTokens({tokens:n,username:r}),n===null)?null:{accessToken:n==null?void 0:n.accessToken,idToken:n==null?void 0:n.idToken,signInDetails:n==null?void 0:n.signInDetails}}async refreshTokens({tokens:t,username:n}){try{const{signInDetails:r}=t,s=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n});return s.signInDetails=r,await this.setTokens({tokens:s}),N0.dispatch("auth",{event:"tokenRefresh"},"Auth",Hp),s}catch(r){return this.handleErrors(r)}}handleErrors(t){if(nC(t),t.message!=="Network error"&&this.clearTokens(),N0.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",Hp),t.name.startsWith("NotAuthorizedException"))return null;throw t}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class e8{constructor(){this.authTokenStore=new Y5,this.authTokenStore.setKeyValueStorage(td),this.tokenOrchestrator=new J5,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(G5)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}}const Nf=new e8,t8={identityId:"identityId"},n8=new gs("DefaultIdentityIdStore");class r8{setAuthConfig(t){rp(t.Cognito),this.authConfig=t,this._authKeys=s8("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this.keyValueStorage=t}async loadIdentityId(){var t;rp((t=this.authConfig)==null?void 0:t.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const n=await this.keyValueStorage.getItem(this._authKeys.identityId);return n?{id:n,type:"guest"}:null}}catch(n){return n8.log("Error getting stored IdentityId.",n),null}}async storeIdentityId(t){var n;rp((n=this.authConfig)==null?void 0:n.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0):(this._primaryIdentityId=t.id,this.keyValueStorage.removeItem(this._authKeys.identityId))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const s8=(e,t)=>tw(t8)(`com.amplify.${e}`,t);function sC(e){const t=Zc(e).payload.iss,n={};if(!t)throw new en({name:"InvalidIdTokenException",message:"Invalid Idtoken."});const r=t.replace(/(^\w+:|^)\/\//,"");return n[r]=e,n}const o8=new gs("CognitoIdentityIdProvider");async function a8({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let r=await n.loadIdentityId();if(e){if(r&&r.type==="primary")return r.id;{const s=e.idToken?sC(e.idToken.toString()):{},o=await Lx(s,t);r&&r.id===o&&o8.debug(`The guest identity ${r.id} has become the primary identity.`),r={id:o,type:"primary"}}}else{if(r&&r.type==="guest")return r.id;r={id:await Lx({},t),type:"guest"}}return n.storeIdentityId(r),r.id}async function Lx(e,t){const n=t==null?void 0:t.identityPoolId,r=$0(n),s=(await c5({region:r},{IdentityPoolId:n,Logins:e})).IdentityId;if(!s)throw new en({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return s}const Af=new gs("CognitoCredentialsProvider"),zx=50*60*1e3;class i8{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}async clearCredentialsAndIdentityId(){Af.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){Af.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(t){const n=t.authenticated,{tokens:r}=t,{authConfig:s}=t;try{rp(s==null?void 0:s.Cognito)}catch{return}if(!n&&!s.Cognito.allowGuestAccess)return;const{forceRefresh:o}=t,a=this.hasTokenChanged(r),i=await a8({tokens:r,authConfig:s.Cognito,identityIdStore:this._identityIdStore});return(o||a)&&this.clearCredentials(),n?(C5(r),this.credsForOIDCTokens(s.Cognito,r,i)):this.getGuestCredentials(i,s.Cognito)}async getGuestCredentials(t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return Af.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const r=$0(n.identityPoolId),s=await Mx({region:r},{IdentityId:t});if(s.Credentials&&s.Credentials.AccessKeyId&&s.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+zx;const o={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:t},a=s.IdentityId;return a&&(o.identityId=a,this._identityIdStore.storeIdentityId({id:a,type:"guest"})),this._credentialsAndIdentityId={...o,isAuthenticatedCreds:!1},o}else throw new en({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(t,n,r){var i;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return Af.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const s=n.idToken?sC(n.idToken.toString()):{},o=$0(t.identityPoolId),a=await Mx({region:o},{IdentityId:r,Logins:s});if(a.Credentials&&a.Credentials.AccessKeyId&&a.Credentials.SecretKey){const u={credentials:{accessKeyId:a.Credentials.AccessKeyId,secretAccessKey:a.Credentials.SecretKey,sessionToken:a.Credentials.SessionToken,expiration:a.Credentials.Expiration},identityId:r};this._credentialsAndIdentityId={...u,isAuthenticatedCreds:!0,associatedIdToken:(i=n.idToken)==null?void 0:i.toString()},this._nextCredentialsRefresh=new Date().getTime()+zx;const c=a.IdentityId;return c&&(u.identityId=c,this._identityIdStore.storeIdentityId({id:c,type:"primary"})),u}else throw new en({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){var n,r;return!!t&&!!((n=this._credentialsAndIdentityId)!=null&&n.associatedIdToken)&&((r=t.idToken)==null?void 0:r.toString())!==this._credentialsAndIdentityId.associatedIdToken}}const l8=new i8(new r8(td)),u8={configure(e,t){const n=BE(e);if(!n.Auth){mo.configure(n,t);return}if(t!=null&&t.Auth){mo.configure(n,t);return}if(!mo.libraryOptions.Auth){Nf.setAuthConfig(n.Auth),Nf.setKeyValueStorage(t!=null&&t.ssr?new Ox({sameSite:"lax"}):td),mo.configure(n,{...t,Auth:{tokenProvider:Nf,credentialsProvider:l8}});return}if(t){t.ssr!==void 0&&Nf.setKeyValueStorage(t.ssr?new Ox({sameSite:"lax"}):td),mo.configure(n,{Auth:mo.libraryOptions.Auth,...t});return}mo.configure(n)},getConfig(){return mo.getConfig()}},c8={user_pool_id:"us-east-1_qEdDuKc49",aws_region:"us-east-1",user_pool_client_id:"27v3rf7qacs12gddblc1k1ihp2",identity_pool_id:"us-east-1:51cb8b7f-96ed-4a74-a8f3-e69bf4d6b1cd",mfa_methods:[],standard_required_attributes:["email"],username_attributes:["email"],user_verification_types:["email"],mfa_configuration:"NONE",password_policy:{min_length:8,require_lowercase:!0,require_numbers:!0,require_symbols:!0,require_uppercase:!0},unauthenticated_identities_enabled:!0},d8="1.1",f8={auth:c8,version:d8};var oC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var i=arguments[a];i&&(o=s(o,r(i)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var i in o)t.call(o,i)&&o[i]&&(a=s(a,i));return a}function s(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(oC);var p8=oC.exports;const rc=Wi(p8);function h8(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}var nw=!1;if(typeof window<"u"){var Wx={get passive(){nw=!0}};window.addEventListener("testPassive",null,Wx),window.removeEventListener("testPassive",null,Wx)}var aC=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),ca=[],qp=!1,iC=-1,kc=void 0,Ic=void 0,lC=function(t){return ca.some(function(n){return!!(n.options.allowTouchMove&&n.options.allowTouchMove(t))})},Kp=function(t){var n=t||window.event;return lC(n.target)||n.touches.length>1?!0:(n.preventDefault&&n.preventDefault(),!1)},m8=function(t){if(Ic===void 0){var n=!!t&&t.reserveScrollBarGap===!0,r=window.innerWidth-document.documentElement.clientWidth;n&&r>0&&(Ic=document.body.style.paddingRight,document.body.style.paddingRight=r+"px")}kc===void 0&&(kc=document.body.style.overflow,document.body.style.overflow="hidden")},g8=function(){Ic!==void 0&&(document.body.style.paddingRight=Ic,Ic=void 0),kc!==void 0&&(document.body.style.overflow=kc,kc=void 0)},y8=function(t){return t?t.scrollHeight-t.scrollTop<=t.clientHeight:!1},v8=function(t,n){var r=t.targetTouches[0].clientY-iC;return lC(t.target)?!1:n&&n.scrollTop===0&&r>0||y8(n)&&r<0?Kp(t):(t.stopPropagation(),!0)},b8=function(t,n){if(!t){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!ca.some(function(s){return s.targetElement===t})){var r={targetElement:t,options:n||{}};ca=[].concat(h8(ca),[r]),aC?(t.ontouchstart=function(s){s.targetTouches.length===1&&(iC=s.targetTouches[0].clientY)},t.ontouchmove=function(s){s.targetTouches.length===1&&v8(s,t)},qp||(document.addEventListener("touchmove",Kp,nw?{passive:!1}:void 0),qp=!0)):m8(n)}},w8=function(t){if(!t){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}ca=ca.filter(function(n){return n.targetElement!==t}),aC?(t.ontouchstart=null,t.ontouchmove=null,qp&&ca.length===0&&(document.removeEventListener("touchmove",Kp,nw?{passive:!1}:void 0),qp=!1)):ca.length||g8()};function S8(e=null){let[t,n]=ge.useState(e);const{current:r}=ge.useRef({current:t});return Object.defineProperty(r,"current",{get:()=>t,set:s=>{Object.is(t,s)||(t=s,n(s))}}),r}function x8(e,t={isStateful:!0}){const n=S8(null),r=V.useRef(null),s=t.isStateful?n:r;return ge.useEffect(()=>{!e||(typeof e=="function"?e(s.current):e.current=s.current)}),s}function Xp(){return Xp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xp.apply(this,arguments)}var k8=function(t){var n=t.classes,r=t.classNames,s=t.styles,o=t.id,a=t.closeIcon,i=t.onClick;return ge.createElement("button",{id:o,className:rc(n.closeButton,r==null?void 0:r.closeButton),style:s==null?void 0:s.closeButton,onClick:i,"data-testid":"close-button"},a||ge.createElement("svg",{className:r==null?void 0:r.closeIcon,style:s==null?void 0:s.closeIcon,width:28,height:28,viewBox:"0 0 36 36","data-testid":"close-icon"},ge.createElement("path",{d:"M28.5 9.62L26.38 7.5 18 15.88 9.62 7.5 7.5 9.62 15.88 18 7.5 26.38l2.12 2.12L18 20.12l8.38 8.38 2.12-2.12L20.12 18z"})))},ap=typeof window<"u",uC=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'];function I8(e){return e.offsetParent===null||getComputedStyle(e).visibility==="hidden"}function _8(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}function E8(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!0;var t=e.form||e.ownerDocument,n=t.querySelectorAll('input[type="radio"][name="'+e.name+'"]'),r=_8(n,e.form);return r===e||r===void 0&&n[0]===e}function cC(e){for(var t=document.activeElement,n=e.querySelectorAll(uC.join(",")),r=[],s=0;s<n.length;s++){var o=n[s];(t===o||!o.disabled&&T8(o)>-1&&!I8(o)&&E8(o))&&r.push(o)}return r}function C8(e,t){if(!(!e||e.key!=="Tab")){if(!t||!t.contains)return process,!1;if(!t.contains(e.target))return!1;var n=cC(t),r=n[0],s=n[n.length-1];return e.shiftKey&&e.target===r?(s.focus(),e.preventDefault(),!0):!e.shiftKey&&e.target===s?(r.focus(),e.preventDefault(),!0):!1}}function T8(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?N8(e)?0:e.tabIndex:t}function N8(e){return e.getAttribute("contentEditable")}var A8=function(t){var n=t.container,r=t.initialFocusRef,s=V.useRef();return V.useEffect(function(){var o=function(c){n!=null&&n.current&&C8(c,n.current)};if(ap&&document.addEventListener("keydown",o),ap&&(n!=null&&n.current)){var a=function(){uC.findIndex(function(c){var l;return(l=document.activeElement)==null?void 0:l.matches(c)})!==-1&&(s.current=document.activeElement)};if(r)a(),requestAnimationFrame(function(){var u;(u=r.current)==null||u.focus()});else{var i=cC(n.current);i[0]&&(a(),i[0].focus())}}return function(){if(ap){var u;document.removeEventListener("keydown",o),(u=s.current)==null||u.focus()}}},[n,r]),null},sl=[],R0={add:function(t){sl.push(t)},remove:function(t){sl=sl.filter(function(n){return n!==t})},isTopModal:function(t){return!!sl.length&&sl[sl.length-1]===t}};function D8(e,t){V.useEffect(function(){return t&&R0.add(e),function(){R0.remove(e)}},[t,e])}var $8=function(t,n,r,s,o){var a=V.useRef(null);V.useEffect(function(){return n&&t.current&&s&&(a.current=t.current,b8(t.current,{reserveScrollBarGap:o})),function(){a.current&&(w8(a.current),a.current=null)}},[n,r,t,s,o])},Xs={root:"react-responsive-modal-root",overlay:"react-responsive-modal-overlay",overlayAnimationIn:"react-responsive-modal-overlay-in",overlayAnimationOut:"react-responsive-modal-overlay-out",modalContainer:"react-responsive-modal-container",modalContainerCenter:"react-responsive-modal-containerCenter",modal:"react-responsive-modal-modal",modalAnimationIn:"react-responsive-modal-modal-in",modalAnimationOut:"react-responsive-modal-modal-out",closeButton:"react-responsive-modal-closeButton"},R8=ge.forwardRef(function(e,t){var n,r,s,o,a=e.open,i=e.center,u=e.blockScroll,c=u===void 0?!0:u,l=e.closeOnEsc,d=l===void 0?!0:l,f=e.closeOnOverlayClick,p=f===void 0?!0:f,h=e.container,m=e.showCloseIcon,y=m===void 0?!0:m,g=e.closeIconId,b=e.closeIcon,w=e.focusTrapped,S=w===void 0?!0:w,I=e.initialFocusRef,_=I===void 0?void 0:I,C=e.animationDuration,N=C===void 0?300:C,$=e.classNames,R=e.styles,F=e.role,U=F===void 0?"dialog":F,L=e.ariaDescribedby,H=e.ariaLabelledby,j=e.containerId,X=e.modalId,Q=e.onClose,P=e.onEscKeyDown,G=e.onOverlayClick,Y=e.onAnimationEnd,Z=e.children,se=e.reserveScrollBarGap,re=x8(t),ae=V.useRef(null),ie=V.useRef(null),ue=V.useRef(null);ue.current===null&&ap&&(ue.current=document.createElement("div"));var ve=V.useState(!1),pe=ve[0],xe=ve[1];D8(ae,a),$8(ae,a,pe,c,se);var Se=function(){ue.current&&!h&&!document.body.contains(ue.current)&&document.body.appendChild(ue.current),document.addEventListener("keydown",$e)},Ce=function(){ue.current&&!h&&document.body.contains(ue.current)&&document.body.removeChild(ue.current),document.removeEventListener("keydown",$e)},$e=function(et){et.keyCode!==27||!R0.isTopModal(ae)||(P==null||P(et),d&&Q())};V.useEffect(function(){return function(){pe&&Ce()}},[pe]),V.useEffect(function(){a&&!pe&&(xe(!0),Se())},[a]);var Fe=function(et){if(ie.current===null&&(ie.current=!0),!ie.current){ie.current=null;return}G==null||G(et),p&&Q(),ie.current=null},Be=function(){ie.current=!1},Le=function(){a||xe(!1),Y==null||Y()},Ae=h||ue.current,st=a?(n=$==null?void 0:$.overlayAnimationIn)!=null?n:Xs.overlayAnimationIn:(r=$==null?void 0:$.overlayAnimationOut)!=null?r:Xs.overlayAnimationOut,Ze=a?(s=$==null?void 0:$.modalAnimationIn)!=null?s:Xs.modalAnimationIn:(o=$==null?void 0:$.modalAnimationOut)!=null?o:Xs.modalAnimationOut;return pe&&Ae?xM.createPortal(ge.createElement("div",{className:rc(Xs.root,$==null?void 0:$.root),style:R==null?void 0:R.root,"data-testid":"root"},ge.createElement("div",{className:rc(Xs.overlay,$==null?void 0:$.overlay),"data-testid":"overlay","aria-hidden":!0,style:Xp({animation:st+" "+N+"ms"},R==null?void 0:R.overlay)}),ge.createElement("div",{ref:ae,id:j,className:rc(Xs.modalContainer,i&&Xs.modalContainerCenter,$==null?void 0:$.modalContainer),style:R==null?void 0:R.modalContainer,"data-testid":"modal-container",onClick:Fe},ge.createElement("div",{ref:re,className:rc(Xs.modal,$==null?void 0:$.modal),style:Xp({animation:Ze+" "+N+"ms"},R==null?void 0:R.modal),onMouseDown:Be,onMouseUp:Be,onClick:Be,onAnimationEnd:Le,id:X,role:U,"aria-modal":"true","aria-labelledby":H,"aria-describedby":L,"data-testid":"modal",tabIndex:-1},S&&ge.createElement(A8,{container:re,initialFocusRef:_}),Z,y&&ge.createElement(k8,{classes:Xs,classNames:$,styles:R,closeIcon:b,onClick:Q,id:g})))),Ae):null});const dC="https://401n8gz0-3002.brs.devtunnels.ms/api/v1";async function F8(e){const n=await(await fetch(`${dC}/users/biometric-session`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log(n),n}async function M8(e){const n=await(await fetch(`${dC}/users/biometric-results`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e})})).json();return console.log(n),n}var fC={exports:{}},pC={},hC={exports:{}},mC={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ql=V;function O8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var P8=typeof Object.is=="function"?Object.is:O8,B8=Ql.useState,L8=Ql.useEffect,z8=Ql.useLayoutEffect,W8=Ql.useDebugValue;function U8(e,t){var n=t(),r=B8({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return z8(function(){s.value=n,s.getSnapshot=t,ov(s)&&o({inst:s})},[e,n,t]),L8(function(){return ov(s)&&o({inst:s}),e(function(){ov(s)&&o({inst:s})})},[e]),W8(n),n}function ov(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!P8(e,n)}catch{return!0}}function V8(e,t){return t()}var H8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?V8:U8;mC.useSyncExternalStore=Ql.useSyncExternalStore!==void 0?Ql.useSyncExternalStore:H8;hC.exports=mC;var j8=hC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh=V,G8=j8;function q8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var K8=typeof Object.is=="function"?Object.is:q8,X8=G8.useSyncExternalStore,Y8=Zh.useRef,Q8=Zh.useEffect,Z8=Zh.useMemo,J8=Zh.useDebugValue;pC.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=Y8(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=Z8(function(){function u(p){if(!c){if(c=!0,l=p,p=r(p),s!==void 0&&a.hasValue){var h=a.value;if(s(h,p))return d=h}return d=p}if(h=d,K8(l,p))return h;var m=r(p);return s!==void 0&&s(h,m)?h:(l=p,d=m)}var c=!1,l,d,f=n===void 0?null:n;return[function(){return u(t())},f===null?void 0:function(){return u(f())}]},[t,n,r,s]);var i=X8(e,o[0],o[1]);return Q8(function(){a.hasValue=!0,a.value=i},[i]),J8(i),i};fC.exports=pC;var gC=fC.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ye=function(){return ye=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ye.apply(this,arguments)};function rw(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function it(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function pt(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],a;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(i){a={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function zt(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,o;r<s;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var It;(function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"})(It||(It={}));var Zl;(function(e){e.Parent="#_parent",e.Internal="#_internal"})(Zl||(Zl={}));var F0=It.Start,sw=It.Stop,Dd=It.Raise,Jh=It.Send,yC=It.Cancel,eP=It.NullEvent,ow=It.Assign;It.After;It.DoneState;var vC=It.Log,tP=It.Init,M0=It.Invoke;It.ErrorExecution;var Ux=It.ErrorPlatform,nP=It.ErrorCustom,bC=It.Update,rP=It.Choose,sP=It.Pure,wC=".",Vx={},O0="xstate.guard",oP="",Df;function aw(e,t,n){n===void 0&&(n=wC);var r=_c(e,n),s=_c(t,n);return mt(s)?mt(r)?s===r:!1:mt(r)?r in s:Object.keys(r).every(function(o){return o in s?aw(r[o],s[o]):!1})}function SC(e){try{return mt(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function P0(e,t){try{return mu(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function aP(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function _c(e,t){if(aP(e))return e.value;if(mu(e))return Yp(e);if(typeof e!="string")return e;var n=P0(e,t);return Yp(n)}function Yp(e){if(e.length===1)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function sc(e,t){for(var n={},r=Object.keys(e),s=0;s<r.length;s++){var o=r[s];n[o]=t(e[o],o,e,s)}return n}function Hx(e,t,n){var r,s,o={};try{for(var a=it(Object.keys(e)),i=a.next();!i.done;i=a.next()){var u=i.value,c=e[u];n(c)&&(o[u]=t(c,u,e))}}catch(l){r={error:l}}finally{try{i&&!i.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}return o}var iP=function(e){return function(t){var n,r,s=t;try{for(var o=it(e),a=o.next();!a.done;a=o.next()){var i=a.value;s=s[i]}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}};function lP(e,t){return function(n){var r,s,o=n;try{for(var a=it(e),i=a.next();!i.done;i=a.next()){var u=i.value;o=o[t][u]}}catch(c){r={error:c}}finally{try{i&&!i.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}return o}}function ip(e){if(!e)return[[]];if(mt(e))return[[e]];var t=Yt(Object.keys(e).map(function(n){var r=e[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:ip(e[n]).map(function(s){return[n].concat(s)})}));return t}function Yt(e){var t;return(t=[]).concat.apply(t,zt([],pt(e),!1))}function xC(e){return mu(e)?e:[e]}function Cs(e){return e===void 0?[]:xC(e)}function Qp(e,t,n){var r,s;if(gt(e))return e(t,n.data);var o={};try{for(var a=it(Object.keys(e)),i=a.next();!i.done;i=a.next()){var u=i.value,c=e[u];gt(c)?o[u]=c(t,n.data):o[u]=c}}catch(l){r={error:l}}finally{try{i&&!i.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}return o}function uP(e){return/^(done|error)\./.test(e)}function jx(e){return!!(e instanceof Promise||e!==null&&(gt(e)||typeof e=="object")&&gt(e.then))}function cP(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function dP(e,t){var n,r,s=pt([[],[]],2),o=s[0],a=s[1];try{for(var i=it(e),u=i.next();!u.done;u=i.next()){var c=u.value;t(c)?o.push(c):a.push(c)}}catch(l){n={error:l}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return[o,a]}function kC(e,t){return sc(e.states,function(n,r){if(n){var s=(mt(t)?void 0:t[r])||(n?n.current:void 0);if(s)return{current:s,states:kC(n,s)}}})}function fP(e,t){return{current:t,states:kC(e,t)}}function Gx(e,t,n,r){var s=e&&n.reduce(function(o,a){var i,u,c=a.assignment,l={state:r,action:a,_event:t},d={};if(gt(c))d=c(o,t.data,l);else try{for(var f=it(Object.keys(c)),p=f.next();!p.done;p=f.next()){var h=p.value,m=c[h];d[h]=gt(m)?m(o,t.data,l):m}}catch(y){i={error:y}}finally{try{p&&!p.done&&(u=f.return)&&u.call(f)}finally{if(i)throw i.error}}return Object.assign({},o,d)},e);return s}var pP=function(){};function mu(e){return Array.isArray(e)}function gt(e){return typeof e=="function"}function mt(e){return typeof e=="string"}function IC(e,t){if(e)return mt(e)?{type:O0,name:e,predicate:t?t[e]:void 0}:gt(e)?{type:O0,name:e.name,predicate:e}:e}function hP(e){try{return"subscribe"in e&&gt(e.subscribe)}catch{return!1}}var oa=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Df={},Df[oa]=function(){return this},Df[Symbol.observable]=function(){return this};function Jl(e){return!!e&&"__xstatenode"in e}function mP(e){return!!e&&typeof e.send=="function"}var gP=function(){var e=0;return function(){return e++,e.toString(16)}}();function em(e,t){return mt(e)||typeof e=="number"?ye({type:e},t):e}function Ln(e,t){if(!mt(e)&&"$$type"in e&&e.$$type==="scxml")return e;var n=em(e);return ye({name:n.type,data:n,$$type:"scxml",type:"external"},t)}function ol(e,t){var n=xC(t).map(function(r){return typeof r>"u"||typeof r=="string"||Jl(r)?{target:r,event:e}:ye(ye({},r),{event:e})});return n}function yP(e){if(!(e===void 0||e===oP))return Cs(e)}function _C(e,t,n,r,s){var o=e.options.guards,a={state:s,cond:t,_event:r};if(t.type===O0)return((o==null?void 0:o[t.name])||t.predicate)(n,r.data,a);var i=o==null?void 0:o[t.type];if(!i)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return i(n,r.data,a)}function EC(e){return typeof e=="string"?{type:e}:e}function Ec(e,t,n){var r=function(){},s=typeof e=="object",o=s?e:null;return{next:((s?e.next:e)||r).bind(o),error:((s?e.error:t)||r).bind(o),complete:((s?e.complete:n)||r).bind(o)}}function $f(e,t){return"".concat(e,":invocation[").concat(t,"]")}function B0(e){return(e.type===Dd||e.type===Jh&&e.to===Zl.Internal)&&typeof e.delay!="number"}var Pl=Ln({type:tP});function L0(e,t){return t&&t[e]||void 0}function nd(e,t){var n;if(mt(e)||typeof e=="number"){var r=L0(e,t);gt(r)?n={type:e,exec:r}:r?n=r:n={type:e,exec:void 0}}else if(gt(e))n={type:e.name||e.toString(),exec:e};else{var r=L0(e.type,t);if(gt(r))n=ye(ye({},e),{exec:r});else if(r){var s=r.type||e.type;n=ye(ye(ye({},r),e),{type:s})}else n=e}return n}var aa=function(e,t){if(!e)return[];var n=mu(e)?e:[e];return n.map(function(r){return nd(r,t)})};function iw(e){var t=nd(e);return ye(ye({id:mt(e)?e:t.id},t),{type:t.type})}function vP(e,t){return{type:Dd,event:typeof e=="function"?e:em(e),delay:t?t.delay:void 0,id:t==null?void 0:t.id}}function bP(e,t,n,r){var s={_event:n},o=Ln(gt(e.event)?e.event(t,n.data,s):e.event),a;if(mt(e.delay)){var i=r&&r[e.delay];a=gt(i)?i(t,n.data,s):i}else a=gt(e.delay)?e.delay(t,n.data,s):e.delay;return ye(ye({},e),{type:Dd,_event:o,delay:a})}function lp(e,t){return{to:t?t.to:void 0,type:Jh,event:gt(e)?e:em(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:gt(e)?e.name:SC(e)}}function wP(e,t,n,r){var s={_event:n},o=Ln(gt(e.event)?e.event(t,n.data,s):e.event),a;if(mt(e.delay)){var i=r&&r[e.delay];a=gt(i)?i(t,n.data,s):i}else a=gt(e.delay)?e.delay(t,n.data,s):e.delay;var u=gt(e.to)?e.to(t,n.data,s):e.to;return ye(ye({},e),{to:u,_event:o,event:o.data,delay:a})}var SP=function(e,t,n){return ye(ye({},e),{value:mt(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})},up=function(e){return{type:yC,sendId:e}};function xP(e){var t=iw(e);return{type:It.Start,activity:t,exec:void 0}}function kP(e){var t=gt(e)?e:iw(e);return{type:It.Stop,activity:t,exec:void 0}}function IP(e,t,n){var r=gt(e.activity)?e.activity(t,n.data):e.activity,s=typeof r=="string"?{id:r}:r,o={type:It.Stop,activity:s};return o}var _P=function(e){return{type:ow,assignment:e}};function EP(e,t){var n=t?"#".concat(t):"";return"".concat(It.After,"(").concat(e,")").concat(n)}function Rf(e,t){var n="".concat(It.DoneState,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function cp(e,t){var n="".concat(It.DoneInvoke,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}function oc(e,t){var n="".concat(It.ErrorPlatform,".").concat(e),r={type:n,data:t};return r.toString=function(){return n},r}var CP=function(e){var t,n,r=[];try{for(var s=it(e),o=s.next();!o.done;o=s.next())for(var a=o.value,i=0;i<a.actions.length;){if(a.actions[i].type===ow){r.push(a.actions[i]),a.actions.splice(i,1);continue}i++}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r};function Zp(e,t,n,r,s,o,a){a===void 0&&(a=!1);var i=a?[]:CP(s),u=i.length?Gx(n,r,i,t):n,c=a?[n]:void 0,l=[];function d(h,m){var y;switch(m.type){case Dd:{var g=bP(m,u,r,e.options.delays);return o&&typeof g.delay=="number"&&o(g,u,r),g}case Jh:var b=wP(m,u,r,e.options.delays);return o&&b.to!==Zl.Internal&&(h==="entry"?l.push(b):o(b,u,r)),b;case vC:{var w=SP(m,u,r);return o==null||o(w,u,r),w}case rP:{var S=m,I=(y=S.conds.find(function(X){var Q=IC(X.cond,e.options.guards);return!Q||_C(e,Q,u,r,o?void 0:t)}))===null||y===void 0?void 0:y.actions;if(!I)return[];var _=pt(Zp(e,t,u,r,[{type:h,actions:aa(Cs(I),e.options.actions)}],o,a),2),C=_[0],N=_[1];return u=N,c==null||c.push(u),C}case sP:{var I=m.get(u,r.data);if(!I)return[];var $=pt(Zp(e,t,u,r,[{type:h,actions:aa(Cs(I),e.options.actions)}],o,a),2),R=$[0],F=$[1];return u=F,c==null||c.push(u),R}case sw:{var w=IP(m,u,r);return o==null||o(w,n,r),w}case ow:{u=Gx(u,r,[m],o?void 0:t),c==null||c.push(u);break}default:var U=nd(m,e.options.actions),L=U.exec;if(o)o(U,u,r);else if(L&&c){var H=c.length-1,j=ye(ye({},U),{exec:function(X){for(var Q=[],P=1;P<arguments.length;P++)Q[P-1]=arguments[P];L.apply(void 0,zt([c[H]],pt(Q),!1))}});U=j}return U}}function f(h){var m,y,g=[];try{for(var b=it(h.actions),w=b.next();!w.done;w=b.next()){var S=w.value,I=d(h.type,S);I&&(g=g.concat(I))}}catch(_){m={error:_}}finally{try{w&&!w.done&&(y=b.return)&&y.call(b)}finally{if(m)throw m.error}}return l.forEach(function(_){o(_,u,r)}),l.length=0,g}var p=Yt(s.map(f));return[p,u]}var Jp=[],cl=function(e,t){Jp.push(e);var n=t(e);return Jp.pop(),n},TP=function(e){return e(Jp[Jp.length-1])};function CC(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[oa]=function(){return this},t}function NP(e,t,n,r){var s,o=EC(e.src),a=(s=t==null?void 0:t.options.services)===null||s===void 0?void 0:s[o.type],i=e.data?Qp(e.data,n,r):void 0,u=a?lw(a,e.id,i):CC(e.id);return u.meta=e,u}function lw(e,t,n){var r=CC(t);if(r.deferred=!0,Jl(e)){var s=r.state=cl(void 0,function(){return(n?e.withContext(n):e).initialState});r.getSnapshot=function(){return s}}return r}function AP(e){try{return typeof e.send=="function"}catch{return!1}}function DP(e){return AP(e)&&"id"in e}function $P(e){var t;return ye((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[oa]=function(){return this},t),e)}var eh=function(e){return e.type==="atomic"||e.type==="final"};function TC(e){return Object.keys(e.states).map(function(t){return e.states[t]})}function rd(e){return TC(e).filter(function(t){return t.type!=="history"})}function NC(e){var t=[e];return eh(e)?t:t.concat(Yt(rd(e).map(NC)))}function ac(e,t){var n,r,s,o,a,i,u,c,l=new Set(e),d=z0(l),f=new Set(t);try{for(var p=it(f),h=p.next();!h.done;h=p.next())for(var m=h.value,y=m.parent;y&&!f.has(y);)f.add(y),y=y.parent}catch($){n={error:$}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}var g=z0(f);try{for(var b=it(f),w=b.next();!w.done;w=b.next()){var m=w.value;if(m.type==="compound"&&(!g.get(m)||!g.get(m).length))d.get(m)?d.get(m).forEach(function(R){return f.add(R)}):m.initialStateNodes.forEach(function(R){return f.add(R)});else if(m.type==="parallel")try{for(var S=(a=void 0,it(rd(m))),I=S.next();!I.done;I=S.next()){var _=I.value;f.has(_)||(f.add(_),d.get(_)?d.get(_).forEach(function(R){return f.add(R)}):_.initialStateNodes.forEach(function(R){return f.add(R)}))}}catch(R){a={error:R}}finally{try{I&&!I.done&&(i=S.return)&&i.call(S)}finally{if(a)throw a.error}}}}catch($){s={error:$}}finally{try{w&&!w.done&&(o=b.return)&&o.call(b)}finally{if(s)throw s.error}}try{for(var C=it(f),N=C.next();!N.done;N=C.next())for(var m=N.value,y=m.parent;y&&!f.has(y);)f.add(y),y=y.parent}catch($){u={error:$}}finally{try{N&&!N.done&&(c=C.return)&&c.call(C)}finally{if(u)throw u.error}}return f}function AC(e,t){var n=t.get(e);if(!n)return{};if(e.type==="compound"){var r=n[0];if(r){if(eh(r))return r.key}else return{}}var s={};return n.forEach(function(o){s[o.key]=AC(o,t)}),s}function z0(e){var t,n,r=new Map;try{for(var s=it(e),o=s.next();!o.done;o=s.next()){var a=o.value;r.has(a)||r.set(a,[]),a.parent&&(r.has(a.parent)||r.set(a.parent,[]),r.get(a.parent).push(a))}}catch(i){t={error:i}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return r}function RP(e,t){var n=ac([e],t);return AC(e,z0(n))}function ic(e,t){return Array.isArray(e)?e.some(function(n){return n===t}):e instanceof Set?e.has(t):!1}function FP(e){return zt([],pt(new Set(Yt(zt([],pt(e.map(function(t){return t.ownEvents})),!1)))),!1)}function dp(e,t){return t.type==="compound"?rd(t).some(function(n){return n.type==="final"&&ic(e,n)}):t.type==="parallel"?rd(t).every(function(n){return dp(e,n)}):!1}function MP(e){return e===void 0&&(e=[]),e.reduce(function(t,n){return n.meta!==void 0&&(t[n.id]=n.meta),t},{})}function qx(e){return new Set(Yt(e.map(function(t){return t.tags})))}function DC(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(mt(e)||mt(t))return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every(function(s){return DC(e[s],t[s])})}function OP(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}function PP(e,t){var n=e.exec,r=ye(ye({},e),{exec:n!==void 0?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return r}var Ts=function(){function e(t){var n=this,r;this.actions=[],this.activities=Vx,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||Vx,this.meta=MP(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(r=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&r!==void 0?r:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return FP(n.configuration)}})}return e.from=function(t,n){if(t instanceof e)return t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t;var r=Pl;return new e({value:t,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=Pl;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(t,n){var r=this;if(t===void 0&&(t=this.value),n===void 0&&(n="."),mt(t))return[t];var s=Object.keys(t);return s.concat.apply(s,zt([],pt(s.map(function(o){return r.toStrings(t[o],n).map(function(a){return o+n+a})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var n=t.tags;t.machine;var r=rw(t,["configuration","transitions","tags","machine"]);return ye(ye({},r),{tags:Array.from(n)})},e.prototype.matches=function(t){return aw(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var n;pP(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,t);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(s){return s.target!==void 0||s.actions.length})},e}(),BP={deferEvents:!1},Kx=function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=ye(ye({},BP),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},e}(),av=new Map,LP=0,ju={bookId:function(){return"x:".concat(LP++)},register:function(e,t){return av.set(e,t),e},get:function(e){return av.get(e)},free:function(e){av.delete(e)}};function uw(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function zP(){var e=uw();if(e&&"__xstate__"in e)return e.__xstate__}function WP(e){if(uw()){var t=zP();t&&t.register(e)}}function UP(e,t){t===void 0&&(t={});var n=e.initialState,r=new Set,s=[],o=!1,a=function(){if(!o){for(o=!0;s.length>0;){var c=s.shift();n=e.transition(n,c,u),r.forEach(function(l){return l.next(n)})}o=!1}},i=$P({id:t.id,send:function(c){s.push(c),a()},getSnapshot:function(){return n},subscribe:function(c,l,d){var f=Ec(c,l,d);return r.add(f),f.next(n),{unsubscribe:function(){r.delete(f)}}}}),u={parent:t.parent,self:i,id:t.id||"anonymous",observers:r};return n=e.start?e.start(u):n,i}var W0={sync:!1,autoForward:!1},fn;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(fn||(fn={}));var VP=function(){function e(t,n){n===void 0&&(n=e.defaultOptions);var r=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=fn.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(l,d){if(mu(l))return r.batch(l),r.state;var f=Ln(em(l,d));if(r.status===fn.Stopped)return r.state;if(r.status!==fn.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(f.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(f.data)));return r.scheduler.schedule(function(){r.forward(f);var p=r._nextState(f);r.update(p,f)}),r._state},this.sendTo=function(l,d,f){var p=r.parent&&(d===Zl.Parent||r.parent.id===d),h=p?r.parent:mt(d)?d===Zl.Internal?r:r.children.get(d)||ju.get(d):mP(d)?d:void 0;if(!h){if(!p)throw new Error("Unable to send event to child '".concat(d,"' from service '").concat(r.id,"'."));return}if("machine"in h){if(r.status!==fn.Stopped||r.parent!==h||r.state.done){var m=ye(ye({},l),{name:l.name===nP?"".concat(oc(r.id)):l.name,origin:r.sessionId});!f&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([h,m]):h.send(m)}}else!f&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([h,l.data]):h.send(l.data)},this._exec=function(l,d,f,p){p===void 0&&(p=r.machine.options.actions);var h=l.exec||L0(l.type,p),m=gt(h)?h:h?h.exec:l.exec;if(m)try{return m(d,f.data,r.machine.config.predictableActionArguments?{action:l,_event:f}:{action:l,state:r.state,_event:f})}catch(H){throw r.parent&&r.parent.send({type:"xstate.error",data:H}),H}switch(l.type){case Dd:{var y=l;r.defer(y);break}case Jh:var g=l;if(typeof g.delay=="number"){r.defer(g);return}else g.to?r.sendTo(g._event,g.to,f===Pl):r.send(g._event);break;case yC:r.cancel(l.sendId);break;case F0:{if(r.status!==fn.Running)return;var b=l.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[b.id||b.type])break;if(b.type===It.Invoke){var w=EC(b.src),S=r.machine.options.services?r.machine.options.services[w.type]:void 0,I=b.id,_=b.data,C="autoForward"in b?b.autoForward:!!b.forward;if(!S)return;var N=_?Qp(_,d,f):void 0;if(typeof S=="string")return;var $=gt(S)?S(d,f.data,{data:N,src:w,meta:b.meta}):S;if(!$)return;var R=void 0;Jl($)&&($=N?$.withContext(N):$,R={autoForward:C}),r.spawn($,I,R)}else r.spawnActivity(b);break}case sw:{r.stopChild(l.activity.id);break}case vC:var F=l,U=F.label,L=F.value;U?r.logger(U,L):r.logger(L);break}};var s=ye(ye({},e.defaultOptions),n),o=s.clock,a=s.logger,i=s.parent,u=s.id,c=u!==void 0?u:t.id;this.id=c,this.logger=a,this.clock=o,this.parent=i,this.options=s,this.scheduler=new Kx({deferEvents:this.options.deferEvents}),this.sessionId=ju.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:cl(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,n){var r,s;try{for(var o=it(t.actions),a=o.next();!a.done;a=o.next()){var i=a.value;this.exec(i,t,n)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}},e.prototype.update=function(t,n){var r,s,o,a,i,u,c,l,d=this;if(t._sessionid=this.sessionId,this._state=t,(!this.machine.config.predictableActionArguments||n===Pl)&&this.options.execute)this.execute(this.state);else for(var f=void 0;f=this._outgoingQueue.shift();)f[0].send(f[1]);if(this.children.forEach(function($){d.state.children[$.id]=$}),this.devTools&&this.devTools.send(n.data,t),t.event)try{for(var p=it(this.eventListeners),h=p.next();!h.done;h=p.next()){var m=h.value;m(t.event)}}catch($){r={error:$}}finally{try{h&&!h.done&&(s=p.return)&&s.call(p)}finally{if(r)throw r.error}}try{for(var y=it(this.listeners),g=y.next();!g.done;g=y.next()){var m=g.value;m(t,t.event)}}catch($){o={error:$}}finally{try{g&&!g.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}try{for(var b=it(this.contextListeners),w=b.next();!w.done;w=b.next()){var S=w.value;S(this.state.context,this.state.history?this.state.history.context:void 0)}}catch($){i={error:$}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(i)throw i.error}}if(this.state.done){var I=t.configuration.find(function($){return $.type==="final"&&$.parent===d.machine}),_=I&&I.doneData?Qp(I.doneData,t.context,n):void 0;this._doneEvent=cp(this.id,_);try{for(var C=it(this.doneListeners),N=C.next();!N.done;N=C.next()){var m=N.value;m(this._doneEvent)}}catch($){c={error:$}}finally{try{N&&!N.done&&(l=C.return)&&l.call(C)}finally{if(c)throw c.error}}this._stop(),this._stopChildren(),ju.free(this.sessionId)}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===fn.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,n,r){var s=this,o=Ec(t,n,r);this.listeners.add(o.next),this.status!==fn.NotStarted&&o.next(this.state);var a=function(){s.doneListeners.delete(a),s.stopListeners.delete(a),o.complete()};return this.status===fn.Stopped?o.complete():(this.onDone(a),this.onStop(a)),{unsubscribe:function(){s.listeners.delete(o.next),s.doneListeners.delete(a),s.stopListeners.delete(a)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.status===fn.Stopped&&this._doneEvent?t(this._doneEvent):this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var n=this;if(this.status===fn.Running)return this;this.machine._init(),ju.register(this.sessionId,this),this.initialized=!0,this.status=fn.Running;var r=t===void 0?this.initialState:cl(this,function(){return OP(t)?n.machine.resolveState(t):n.machine.resolveState(Ts.from(t,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,Pl)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(t){gt(t.stop)&&t.stop()}),this.children.clear()},e.prototype._stop=function(){var t,n,r,s,o,a,i,u,c,l;try{for(var d=it(this.listeners),f=d.next();!f.done;f=d.next()){var p=f.value;this.listeners.delete(p)}}catch(C){t={error:C}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}try{for(var h=it(this.stopListeners),m=h.next();!m.done;m=h.next()){var p=m.value;p(),this.stopListeners.delete(p)}}catch(C){r={error:C}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(r)throw r.error}}try{for(var y=it(this.contextListeners),g=y.next();!g.done;g=y.next()){var p=g.value;this.contextListeners.delete(p)}}catch(C){o={error:C}}finally{try{g&&!g.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}try{for(var b=it(this.doneListeners),w=b.next();!w.done;w=b.next()){var p=w.value;this.doneListeners.delete(p)}}catch(C){i={error:C}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(i)throw i.error}}if(!this.initialized)return this;this.initialized=!1,this.status=fn.Stopped,this._initialState=void 0;try{for(var S=it(Object.keys(this.delayedEventsMap)),I=S.next();!I.done;I=S.next()){var _=I.value;this.clock.clearTimeout(this.delayedEventsMap[_])}}catch(C){c={error:C}}finally{try{I&&!I.done&&(l=S.return)&&l.call(S)}finally{if(c)throw c.error}}this.scheduler.clear(),this.scheduler=new Kx({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var t=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r;if(!(!((r=t._state)===null||r===void 0)&&r.done)){var s=Ln({type:"xstate.stop"}),o=cl(t,function(){var a=Yt(zt([],pt(t.state.configuration),!1).sort(function(d,f){return f.order-d.order}).map(function(d){return aa(d.onExit,t.machine.options.actions)})),i=pt(Zp(t.machine,t.state,t.state.context,s,[{type:"exit",actions:a}],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),u=i[0],c=i[1],l=new Ts({value:t.state.value,context:c,_event:s,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:u.filter(function(d){return!B0(d)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return l.changed=!0,l});t.update(o,s),t._stopChildren(),ju.free(t.sessionId)}}),this},e.prototype.batch=function(t){var n=this;if(!(this.status===fn.NotStarted&&this.options.deferEvents)){if(this.status!==fn.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(t.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var s,o,a=n.state,i=!1,u=[],c=function(p){var h=Ln(p);n.forward(h),a=cl(n,function(){return n.machine.transition(a,h,void 0,r||void 0)}),u.push.apply(u,zt([],pt(n.machine.config.predictableActionArguments?a.actions:a.actions.map(function(m){return PP(m,a)})),!1)),i=i||!!a.changed};try{for(var l=it(t),d=l.next();!d.done;d=l.next()){var f=d.value;c(f)}}catch(p){s={error:p}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(s)throw s.error}}a.changed=i,a.actions=u,n.update(a,Ln(t[t.length-1]))})}},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype._nextState=function(t,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var s=Ln(t);if(s.name.indexOf(Ux)===0&&!this.state.nextEvents.some(function(a){return a.indexOf(Ux)===0}))throw s.data.data;var o=cl(this,function(){return r.machine.transition(r.state,s,void 0,n||void 0)});return o},e.prototype.nextState=function(t){return this._nextState(t,!1)},e.prototype.forward=function(t){var n,r;try{for(var s=it(this.forwardTo),o=s.next();!o.done;o=s.next()){var a=o.value,i=this.children.get(a);if(!i)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(a,"'."));i.send(t)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.defer=function(t){var n=this,r=this.clock.setTimeout(function(){"to"in t&&t.to?n.sendTo(t._event,t.to,!0):n.send(t._event)},t.delay);t.id&&(this.delayedEventsMap[t.id]=r)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(t,n.context,n._event,r)},e.prototype.removeChild=function(t){var n;this.children.delete(t),this.forwardTo.delete(t),(n=this.state)===null||n===void 0||delete n.children[t]},e.prototype.stopChild=function(t){var n=this.children.get(t);n&&(this.removeChild(t),gt(n.stop)&&n.stop())},e.prototype.spawn=function(t,n,r){if(this.status!==fn.Running)return lw(t,n);if(jx(t))return this.spawnPromise(Promise.resolve(t),n);if(gt(t))return this.spawnCallback(t,n);if(DP(t))return this.spawnActor(t,n);if(hP(t))return this.spawnObservable(t,n);if(Jl(t))return this.spawnMachine(t,ye(ye({},r),{id:n}));if(cP(t))return this.spawnBehavior(t,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,n){var r=this;n===void 0&&(n={});var s=new e(t,ye(ye({},this.options),{parent:this,id:n.id||t.id})),o=ye(ye({},W0),n);o.sync&&s.onTransition(function(i){r.send(bC,{state:i,id:s.id})});var a=s;return this.children.set(s.id,a),o.autoForward&&this.forwardTo.add(s.id),s.onDone(function(i){r.removeChild(s.id),r.send(Ln(i,{origin:s.id}))}).start(),a},e.prototype.spawnBehavior=function(t,n){var r=UP(t,{id:n,parent:this});return this.children.set(n,r),r},e.prototype.spawnPromise=function(t,n){var r,s=this,o=!1,a;t.then(function(u){o||(a=u,s.removeChild(n),s.send(Ln(cp(n,u),{origin:n})))},function(u){if(!o){s.removeChild(n);var c=oc(n,u);try{s.send(Ln(c,{origin:n}))}catch{s.devTools&&s.devTools.send(c,s.state),s.machine.strict&&s.stop()}}});var i=(r={id:n,send:function(){},subscribe:function(u,c,l){var d=Ec(u,c,l),f=!1;return t.then(function(p){f||(d.next(p),!f&&d.complete())},function(p){f||d.error(p)}),{unsubscribe:function(){return f=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return a}},r[oa]=function(){return this},r);return this.children.set(n,i),i},e.prototype.spawnCallback=function(t,n){var r,s=this,o=!1,a=new Set,i=new Set,u,c=function(f){u=f,i.forEach(function(p){return p(f)}),!o&&s.send(Ln(f,{origin:n}))},l;try{l=t(c,function(f){a.add(f)})}catch(f){this.send(oc(n,f))}if(jx(l))return this.spawnPromise(l,n);var d=(r={id:n,send:function(f){return a.forEach(function(p){return p(f)})},subscribe:function(f){var p=Ec(f);return i.add(p.next),{unsubscribe:function(){i.delete(p.next)}}},stop:function(){o=!0,gt(l)&&l()},toJSON:function(){return{id:n}},getSnapshot:function(){return u}},r[oa]=function(){return this},r);return this.children.set(n,d),d},e.prototype.spawnObservable=function(t,n){var r,s=this,o,a=t.subscribe(function(u){o=u,s.send(Ln(u,{origin:n}))},function(u){s.removeChild(n),s.send(Ln(oc(n,u),{origin:n}))},function(){s.removeChild(n),s.send(Ln(cp(n),{origin:n}))}),i=(r={id:n,send:function(){},subscribe:function(u,c,l){return t.subscribe(u,c,l)},stop:function(){return a.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},r[oa]=function(){return this},r);return this.children.set(n,i),i},e.prototype.spawnActor=function(t,n){return this.children.set(n,t),t},e.prototype.spawnActivity=function(t){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(n){var r=n(this.state.context,t);this.spawnEffect(t.id,r)}},e.prototype.spawnEffect=function(t,n){var r;this.children.set(t,(r={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},r[oa]=function(){return this},r))},e.prototype.attachDev=function(){var t=uw();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(ye(ye({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:ye({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}WP(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[oa]=function(){return this},e.prototype.getSnapshot=function(){return this.status===fn.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,n){return setTimeout(t,n)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=$C,e}(),HP=function(e){return mt(e)?ye(ye({},W0),{name:e}):ye(ye(ye({},W0),{name:gP()}),e)};function jP(e,t){var n=HP(t);return TP(function(r){return r?r.spawn(e,n.name,n):lw(e,n.name)})}function $C(e,t){var n=new VP(e,t);return n}function GP(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function Ff(e){return ye(ye({type:M0},e),{toJSON:function(){e.onDone,e.onError;var t=rw(e,["onDone","onError"]);return ye(ye({},t),{type:M0,src:GP(e.src)})}})}var Mf="",U0="#",iv="*",al={},il=function(e){return e[0]===U0},qP=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},KP=function(){function e(t,n,r,s){r===void 0&&(r="context"in t?t.context:void 0);var o=this,a;this.config=t,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(qP(),n),this.parent=s==null?void 0:s.parent,this.key=this.config.key||(s==null?void 0:s.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:wC),this.id=this.config.id||zt([this.machine.key],pt(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(a=this.config.schema)!==null&&a!==void 0?a:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?sc(this.config.states,function(c,l){var d,f=new e(c,{},void 0,{parent:o,key:l});return Object.assign(o.idMap,ye((d={},d[f.id]=f,d),f.idMap)),f}):al;var i=0;function u(c){var l,d;c.order=i++;try{for(var f=it(TC(c)),p=f.next();!p.done;p=f.next()){var h=p.value;u(h)}}catch(m){l={error:m}}finally{try{p&&!p.done&&(d=f.return)&&d.call(f)}finally{if(l)throw l.error}}}u(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(c){var l=c.event;return l===Mf}):Mf in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=Cs(this.config.entry||this.config.onEntry).map(function(c){return nd(c)}),this.onExit=Cs(this.config.exit||this.config.onExit).map(function(c){return nd(c)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=Cs(this.config.invoke).map(function(c,l){var d,f;if(Jl(c)){var p=$f(o.id,l);return o.machine.options.services=ye((d={},d[p]=c,d),o.machine.options.services),Ff({src:p,id:p})}else if(mt(c.src)){var p=c.id||$f(o.id,l);return Ff(ye(ye({},c),{id:p,src:c.src}))}else if(Jl(c.src)||gt(c.src)){var p=c.id||$f(o.id,l);return o.machine.options.services=ye((f={},f[p]=c.src,f),o.machine.options.services),Ff(ye(ye({id:p},c),{src:p}))}else{var h=c.src;return Ff(ye(ye({id:$f(o.id,l)},c),{src:h}))}}),this.activities=Cs(this.config.activities).concat(this.invoke).map(function(c){return iw(c)}),this.transition=this.transition.bind(this),this.tags=Cs(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||NC(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,n){var r=this.options,s=r.actions,o=r.activities,a=r.guards,i=r.services,u=r.delays;return new e(this.config,{actions:ye(ye({},s),t.actions),activities:ye(ye({},o),t.activities),guards:ye(ye({},a),t.guards),services:ye(ye({},i),t.services),delays:ye(ye({},u),t.delays)},n??this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return gt(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:sc(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var n=t===Mf,r=this.transitions.filter(function(s){var o=s.eventType===t;return n?o:o||s.eventType===iv});return this.__cache.candidates[t]=r,r},e.prototype.getDelayedTransitions=function(){var t=this,n=this.config.after;if(!n)return[];var r=function(o,a){var i=gt(o)?"".concat(t.id,":delay[").concat(a,"]"):o,u=EP(i,t.id);return t.onEntry.push(lp(u,{delay:o})),t.onExit.push(up(u)),u},s=mu(n)?n.map(function(o,a){var i=r(o.delay,a);return ye(ye({},o),{event:i})}):Yt(Object.keys(n).map(function(o,a){var i=n[o],u=mt(i)?{target:i}:i,c=isNaN(+o)?o:+o,l=r(c,a);return Cs(u).map(function(d){return ye(ye({},d),{event:l,delay:c})})}));return s.map(function(o){var a=o.delay;return ye(ye({},t.formatTransition(o)),{delay:a})})},e.prototype.getStateNodes=function(t){var n,r=this;if(!t)return[];var s=t instanceof Ts?t.value:_c(t,this.delimiter);if(mt(s)){var o=this.getStateNode(s).initial;return o!==void 0?this.getStateNodes((n={},n[s]=o,n)):[this,this.states[s]]}var a=Object.keys(s),i=[this];return i.push.apply(i,zt([],pt(Yt(a.map(function(u){return r.getStateNode(u).getStateNodes(s[u])}))),!1)),i},e.prototype.handles=function(t){var n=SC(t);return this.events.includes(n)},e.prototype.resolveState=function(t){var n=t instanceof Ts?t:Ts.create(t),r=Array.from(ac([],this.getStateNodes(n.value)));return new Ts(ye(ye({},n),{value:this.resolve(n.value),configuration:r,done:dp(r,this),tags:qx(r),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,n,r){var s=this.getStateNode(t),o=s.next(n,r);return!o||!o.transitions.length?this.next(n,r):o},e.prototype.transitionCompoundNode=function(t,n,r){var s=Object.keys(t),o=this.getStateNode(s[0]),a=o._transition(t[s[0]],n,r);return!a||!a.transitions.length?this.next(n,r):a},e.prototype.transitionParallelNode=function(t,n,r){var s,o,a={};try{for(var i=it(Object.keys(t)),u=i.next();!u.done;u=i.next()){var c=u.value,l=t[c];if(l){var d=this.getStateNode(c),f=d._transition(l,n,r);f&&(a[c]=f)}}}catch(g){s={error:g}}finally{try{u&&!u.done&&(o=i.return)&&o.call(i)}finally{if(s)throw s.error}}var p=Object.keys(a).map(function(g){return a[g]}),h=Yt(p.map(function(g){return g.transitions})),m=p.some(function(g){return g.transitions.length>0});if(!m)return this.next(n,r);var y=Yt(Object.keys(a).map(function(g){return a[g].configuration}));return{transitions:h,exitSet:Yt(p.map(function(g){return g.exitSet})),configuration:y,source:n,actions:Yt(Object.keys(a).map(function(g){return a[g].actions}))}},e.prototype._transition=function(t,n,r){return mt(t)?this.transitionLeafNode(t,n,r):Object.keys(t).length===1?this.transitionCompoundNode(t,n,r):this.transitionParallelNode(t,n,r)},e.prototype.getTransitionData=function(t,n){return this._transition(t.value,t,Ln(n))},e.prototype.next=function(t,n){var r,s,o=this,a=n.name,i=[],u=[],c;try{for(var l=it(this.getCandidates(a)),d=l.next();!d.done;d=l.next()){var f=d.value,p=f.cond,h=f.in,m=t.context,y=h?mt(h)&&il(h)?t.matches(_c(this.getStateNodeById(h).path,this.delimiter)):aw(_c(h,this.delimiter),iP(this.path.slice(0,-2))(t.value)):!0,g=!1;try{g=!p||_C(this.machine,p,m,n,t)}catch(S){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,`':
`).concat(S.message))}if(g&&y){f.target!==void 0&&(u=f.target),i.push.apply(i,zt([],pt(f.actions),!1)),c=f;break}}}catch(S){r={error:S}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}if(c){if(!u.length)return{transitions:[c],exitSet:[],configuration:t.value?[this]:[],source:t,actions:i};var b=Yt(u.map(function(S){return o.getRelativeStateNodes(S,t.historyValue)})),w=!!c.internal;return{transitions:[c],exitSet:w?[]:Yt(u.map(function(S){return o.getPotentiallyReenteringNodes(S)})),configuration:b,source:t,actions:i}}},e.prototype.getPotentiallyReenteringNodes=function(t){if(this.order<t.order)return[this];for(var n=[],r=this,s=t;r&&r!==s;)n.push(r),r=r.parent;return r!==s?[]:(n.push(s),n)},e.prototype.getActions=function(t,n,r,s,o,a,i){var u,c,l,d,f=this,p=a?ac([],this.getStateNodes(a.value)):[],h=new Set;try{for(var m=it(Array.from(t).sort(function(F,U){return F.order-U.order})),y=m.next();!y.done;y=m.next()){var g=y.value;(!ic(p,g)||ic(r.exitSet,g)||g.parent&&h.has(g.parent))&&h.add(g)}}catch(F){u={error:F}}finally{try{y&&!y.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}try{for(var b=it(p),w=b.next();!w.done;w=b.next()){var g=w.value;(!ic(t,g)||ic(r.exitSet,g.parent))&&r.exitSet.push(g)}}catch(F){l={error:F}}finally{try{w&&!w.done&&(d=b.return)&&d.call(b)}finally{if(l)throw l.error}}r.exitSet.sort(function(F,U){return U.order-F.order});var S=Array.from(h).sort(function(F,U){return F.order-U.order}),I=new Set(r.exitSet),_=Yt(S.map(function(F){var U=[];if(F.type!=="final")return U;var L=F.parent;if(!L.parent)return U;U.push(Rf(F.id,F.doneData),Rf(L.id,F.doneData?Qp(F.doneData,s,o):void 0));var H=L.parent;return H.type==="parallel"&&rd(H).every(function(j){return dp(r.configuration,j)})&&U.push(Rf(H.id)),U})),C=S.map(function(F){var U=F.onEntry,L=F.activities.map(function(H){return xP(H)});return{type:"entry",actions:aa(i?zt(zt([],pt(U),!1),pt(L),!1):zt(zt([],pt(L),!1),pt(U),!1),f.machine.options.actions)}}).concat({type:"state_done",actions:_.map(function(F){return vP(F)})}),N=Array.from(I).map(function(F){return{type:"exit",actions:aa(zt(zt([],pt(F.onExit),!1),pt(F.activities.map(function(U){return kP(U)})),!1),f.machine.options.actions)}}),$=N.concat({type:"transition",actions:aa(r.actions,this.machine.options.actions)}).concat(C);if(n){var R=aa(Yt(zt([],pt(t),!1).sort(function(F,U){return U.order-F.order}).map(function(F){return F.onExit})),this.machine.options.actions).filter(function(F){return!B0(F)});return $.concat({type:"stop",actions:R})}return $},e.prototype.transition=function(t,n,r,s){t===void 0&&(t=this.initialState);var o=Ln(n),a;if(t instanceof Ts)a=r===void 0?t:this.resolveState(Ts.from(t,r));else{var i=mt(t)?this.resolve(Yp(this.getResolvedPath(t))):this.resolve(t),u=r??this.machine.context;a=this.resolveState(Ts.from(i,u))}if(this.strict&&!this.events.includes(o.name)&&!uP(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var c=this._transition(a.value,a,o)||{transitions:[],configuration:[],exitSet:[],source:a,actions:[]},l=ac([],this.getStateNodes(a.value)),d=c.configuration.length?ac(l,c.configuration):l;return c.configuration=zt([],pt(d),!1),this.resolveTransition(c,a,a.context,s,o)},e.prototype.resolveRaisedTransition=function(t,n,r,s){var o,a=t.actions;return t=this.transition(t,n,void 0,s),t._event=r,t.event=r.data,(o=t.actions).unshift.apply(o,zt([],pt(a),!1)),t},e.prototype.resolveTransition=function(t,n,r,s,o){var a,i,u,c,l=this;o===void 0&&(o=Pl);var d=t.configuration,f=!n||t.transitions.length>0,p=f?t.configuration:n?n.configuration:[],h=dp(p,this),m=f?RP(this.machine,d):void 0,y=n?n.historyValue?n.historyValue:t.source?this.machine.historyValue(n.value):void 0:void 0,g=this.getActions(new Set(p),h,t,r,o,n,s),b=n?ye({},n.activities):{};try{for(var w=it(g),S=w.next();!S.done;S=w.next()){var I=S.value;try{for(var _=(u=void 0,it(I.actions)),C=_.next();!C.done;C=_.next()){var N=C.value;N.type===F0?b[N.activity.id||N.activity.type]=N:N.type===sw&&(b[N.activity.id||N.activity.type]=!1)}}catch(ae){u={error:ae}}finally{try{C&&!C.done&&(c=_.return)&&c.call(_)}finally{if(u)throw u.error}}}}catch(ae){a={error:ae}}finally{try{S&&!S.done&&(i=w.return)&&i.call(w)}finally{if(a)throw a.error}}var $=pt(Zp(this,n,r,o,g,s,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),R=$[0],F=$[1],U=pt(dP(R,B0),2),L=U[0],H=U[1],j=R.filter(function(ae){var ie;return ae.type===F0&&((ie=ae.activity)===null||ie===void 0?void 0:ie.type)===M0}),X=j.reduce(function(ae,ie){return ae[ie.activity.id]=NP(ie.activity,l.machine,F,o),ae},n?ye({},n.children):{}),Q=new Ts({value:m||n.value,context:F,_event:o,_sessionid:n?n._sessionid:null,historyValue:m?y?fP(y,m):void 0:n?n.historyValue:void 0,history:!m||t.source?n:void 0,actions:m?H:[],activities:m?b:n?n.activities:{},events:[],configuration:p,transitions:t.transitions,children:X,done:h,tags:qx(p),machine:this}),P=r!==F;Q.changed=o.name===bC||P;var G=Q.history;G&&delete G.history;var Y=!h&&(this._transient||d.some(function(ae){return ae._transient}));if(!f&&(!Y||o.name===Mf))return Q;var Z=Q;if(!h)for(Y&&(Z=this.resolveRaisedTransition(Z,{type:eP},o,s));L.length;){var se=L.shift();Z=this.resolveRaisedTransition(Z,se._event,o,s)}var re=Z.changed||(G?!!Z.actions.length||P||typeof G.value!=typeof Z.value||!DC(Z.value,G.value):void 0);return Z.changed=re,Z.history=G,Z},e.prototype.getStateNode=function(t){if(il(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[t];if(!n)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return n},e.prototype.getStateNodeById=function(t){var n=il(t)?t.slice(U0.length):t;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&il(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var n=P0(t,this.delimiter).slice(),r=this;n.length;){var s=n.shift();if(!s.length)break;r=r.getStateNode(s)}return r},e.prototype.resolve=function(t){var n,r=this;if(!t)return this.initialStateValue||al;switch(this.type){case"parallel":return sc(this.initialStateValue,function(o,a){return o?r.getStateNode(a).resolve(t[a]||o):al});case"compound":if(mt(t)){var s=this.getStateNode(t);return s.type==="parallel"||s.type==="compound"?(n={},n[t]=s.initialStateValue,n):t}return Object.keys(t).length?sc(t,function(o,a){return o?r.getStateNode(a).resolve(o):al}):this.initialStateValue||{};default:return t||al}},e.prototype.getResolvedPath=function(t){if(il(t)){var n=this.machine.idMap[t.slice(U0.length)];if(!n)throw new Error("Unable to find state node '".concat(t,"'"));return n.path}return P0(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Hx(this.states,function(r){return r.initialStateValue||al},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=eh(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,n){this._init();var r=this.getStateNodes(t);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var n=this.config;mt(n.target)?t=il(n.target)?Yp(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:t=n.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,n,r){return r===void 0&&(r=!0),r?t.type==="history"?t.resolveHistory(n):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if(eh(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=ip(this.initialStateValue);return Yt(n.map(function(r){return t.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var n=pt(t),r=n[0],s=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if(o.type==="history")return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(s)},e.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:Hx(this.states,function(n,r){if(!t)return n.historyValue();var s=mt(t)?void 0:t[r];return n.historyValue(s||n.initialStateValue)},function(n){return!n.history})}},e.prototype.resolveHistory=function(t){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!t){var s=this.target;return s?Yt(ip(s).map(function(a){return r.getFromRelativePath(a)})):r.initialStateNodes}var o=lP(r.path,"states")(t).current;return mt(o)?[r.getStateNode(o)]:Yt(ip(o).map(function(a){return n.history==="deep"?r.getFromRelativePath(a):[r.states[a[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,n=Yt(Object.keys(this.states).map(function(r){return t.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,n,r,s;if(this.__cache.events)return this.__cache.events;var o=this.states,a=new Set(this.ownEvents);if(o)try{for(var i=it(Object.keys(o)),u=i.next();!u.done;u=i.next()){var c=u.value,l=o[c];if(l.states)try{for(var d=(r=void 0,it(l.events)),f=d.next();!f.done;f=d.next()){var p=f.value;a.add("".concat(p))}}catch(h){r={error:h}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(r)throw r.error}}}}catch(h){t={error:h}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var n=this;if(t!==void 0)return t.map(function(r){if(!mt(r))return r;var s=r[0]===n.delimiter;if(s&&!n.parent)return n.getStateNodeByPath(r.slice(1));var o=s?n.key+r:r;if(n.parent)try{var a=n.parent.getStateNodeByPath(o);return a}catch(i){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(i.message))}else return n.getStateNodeByPath(o)})},e.prototype.formatTransition=function(t){var n=this,r=yP(t.target),s="internal"in t?t.internal:r?r.some(function(u){return mt(u)&&u[0]===n.delimiter}):!0,o=this.machine.options.guards,a=this.resolveTarget(r),i=ye(ye({},t),{actions:aa(Cs(t.actions)),cond:IC(t.cond,o),target:a,source:this,internal:s,eventType:t.event,toJSON:function(){return ye(ye({},i),{target:i.target?i.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(n.id)})}});return i},e.prototype.formatTransitions=function(){var t,n,r=this,s;if(!this.config.on)s=[];else if(Array.isArray(this.config.on))s=this.config.on;else{var o=this.config.on,a=iv,i=o[a],u=i===void 0?[]:i,c=rw(o,[typeof a=="symbol"?a:a+""]);s=Yt(Object.keys(c).map(function(b){var w=ol(b,c[b]);return w}).concat(ol(iv,u)))}var l=this.config.always?ol("",this.config.always):[],d=this.config.onDone?ol(String(Rf(this.id)),this.config.onDone):[],f=Yt(this.invoke.map(function(b){var w=[];return b.onDone&&w.push.apply(w,zt([],pt(ol(String(cp(b.id)),b.onDone)),!1)),b.onError&&w.push.apply(w,zt([],pt(ol(String(oc(b.id)),b.onError)),!1)),w})),p=this.after,h=Yt(zt(zt(zt(zt([],pt(d),!1),pt(f),!1),pt(s),!1),pt(l),!1).map(function(b){return Cs(b).map(function(w){return r.formatTransition(w)})}));try{for(var m=it(p),y=m.next();!y.done;y=m.next()){var g=y.value;h.push(g)}}catch(b){t={error:b}}finally{try{y&&!y.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}return h},e}();function XP(e,t){return new KP(e,t)}var wt=_P,RC=V.useLayoutEffect;function V0(e){var t=V.useRef();return t.current||(t.current={v:e()}),t.current.v}var th=function(){return th=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},th.apply(this,arguments)},YP=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n},QP=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],a;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(i){a={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function ZP(e,t){var n=V0(function(){return typeof e=="function"?e():e}),r=t.context,s=t.guards,o=t.actions,a=t.activities,i=t.services,u=t.delays;t.state;var c=YP(t,["context","guards","actions","activities","services","delays","state"]),l=V0(function(){var d={context:r,guards:s,actions:o,activities:a,services:i,delays:u},f=n.withConfig(d,function(){return th(th({},n.context),r)});return $C(f,c)});return RC(function(){Object.assign(l.machine.options.actions,o),Object.assign(l.machine.options.guards,s),Object.assign(l.machine.options.activities,a),Object.assign(l.machine.options.services,i),Object.assign(l.machine.options.delays,u)},[o,s,a,i,u]),l}function JP(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=QP(t,2),s=r[0],o=s===void 0?{}:s,a=r[1],i=ZP(e,o);return V.useEffect(function(){if(a){var u=i.subscribe(Ec(a));return function(){u.unsubscribe()}}},[a]),V.useEffect(function(){var u=o.state;return i.start(u?Ts.create(u):void 0),function(){i.stop(),i.status=fn.NotStarted}},[]),i}function FC(e){return e.status!==0?e.getSnapshot():e.machine.initialState}function cw(e){return"state"in e&&"machine"in e}function eB(e,t,n){if(e.status===fn.NotStarted)return!0;var r=n.changed===void 0&&(Object.keys(n.children).length>0||typeof t.changed=="boolean");return!(n.changed||r)}function tB(e){return e}function MC(e){return"state"in e}function nB(e){return"deferred"in e}function rB(e){return"getSnapshot"in e?cw(e)?FC(e):e.getSnapshot():MC(e)?e.state:void 0}function sB(e,t){t===void 0&&(t=rB);var n=V.useRef(e),r=V.useRef([]),s=V.useCallback(function(c){var l=e.subscribe(c).unsubscribe;return l},[e]),o=V.useCallback(function(){return t(e)},[e,t]),a=V.useCallback(function(c,l){return cw(e)?eB(e,c,l):c===l},[e]),i=gC.useSyncExternalStoreWithSelector(s,o,o,tB,a),u=V0(function(){return function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var d=c[0],f=n.current;nB(f)&&f.deferred?r.current.push(d):f.send(d)}});return RC(function(){for(n.current=e;r.current.length>0;){var c=r.current.shift();e.send(c)}},[e]),[i,u]}var oB=function(e,t){return e===t},aB=function(e,t){if(cw(e)){if(e.status===0&&t.current)return t.current;var n=FC(e);return t.current=e.status===0?n:null,n}return MC(e)?e.state:void 0};function iB(e,t,n,r){n===void 0&&(n=oB);var s=V.useRef(null),o=V.useCallback(function(u){var c=e.subscribe(u).unsubscribe;return c},[e]),a=V.useCallback(function(){return aB(e,s)},[e,r]),i=gC.useSyncExternalStoreWithSelector(o,a,a,t,n);return i}let Xx=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=n[e]&63;r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r<63?t+="_":t+="-"}return t};var Eo;(function(e){e.DARK="dark",e.BRIGHT="bright",e.NORMAL="normal"})(Eo||(Eo={}));var ht;(function(e){e.MATCHED="MATCHED",e.TOO_FAR="TOO FAR",e.CANT_IDENTIFY="CANNOT IDENTIFY",e.FACE_IDENTIFIED="ONE FACE IDENTIFIED",e.TOO_MANY="TOO MANY FACES",e.OFF_CENTER="OFF CENTER"})(ht||(ht={}));const Rt={CONNECTION_TIMEOUT:"CONNECTION_TIMEOUT",TIMEOUT:"TIMEOUT",RUNTIME_ERROR:"RUNTIME_ERROR",FRESHNESS_TIMEOUT:"FRESHNESS_TIMEOUT",SERVER_ERROR:"SERVER_ERROR",CAMERA_FRAMERATE_ERROR:"CAMERA_FRAMERATE_ERROR",CAMERA_ACCESS_ERROR:"CAMERA_ACCESS_ERROR",FACE_DISTANCE_ERROR:"FACE_DISTANCE_ERROR",MOBILE_LANDSCAPE_ERROR:"MOBILE_LANDSCAPE_ERROR",MULTIPLE_FACES_ERROR:"MULTIPLE_FACES_ERROR"},lB=.32,uB=.4,cB=.37,H0=2,OC=1.8,dB=0,fB=1,pB=.25,hB=.75,dl={SUCCESS_CODE:1e3,DEFAULT_ERROR_CODE:4e3,FACE_FIT_TIMEOUT:4001,USER_CANCEL:4003,RUNTIME_ERROR:4005,USER_ERROR_DURING_CONNECTION:4007};function Yx(e,t,n){return e*(n-t)+t}function PC(e){const t=e.flippedCenterX-e.width/2,n=e.flippedCenterX+e.width/2,r=e.centerY-e.height/2,s=e.centerY+e.height/2;return{ovalBoundingBox:{left:t,top:r,right:n,bottom:s},minOvalX:t,maxOvalX:n,minOvalY:r,maxOvalY:s}}function BC(e,t){const n=Math.max(e.left,t.left),r=Math.max(e.top,t.top),s=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom),a=Math.abs(Math.max(0,s-n)*Math.max(0,o-r));if(a===0)return 0;const i=Math.abs((e.right-e.left)*(e.bottom-e.top)),u=Math.abs((t.right-t.left)*(t.bottom-t.top));return a/(i+u-a)}function mB({sessionInformation:e,videoWidth:t}){var r,s;const n=(s=(r=e==null?void 0:e.Challenge)==null?void 0:r.FaceMovementAndLightChallenge)==null?void 0:s.OvalParameters;if(!n||!n.CenterX||!n.CenterY||!n.Width||!n.Height)throw new Error("Oval parameters not returned from session information.");return{flippedCenterX:t-n.CenterX,centerX:n.CenterX,centerY:n.CenterY,width:n.Width,height:n.Height}}function j0({width:e,height:t,widthSeed:n=1,centerXSeed:r=.5,centerYSeed:s=.5,ratioMultiplier:o=.8}){const a=t;let i=e;const u=n*o,c=Math.floor(7*e/16),l=Math.floor(9*e/16),d=Math.floor(7*t/16),f=Math.floor(9*t/16),p=Yx(r,c,l),h=Yx(s,d,f);e>=t&&(i=3/4*a);const m=u*i,y=1.618*m;return{flippedCenterX:Math.floor(i-p),centerX:Math.floor(p),centerY:Math.floor(h),width:Math.floor(m),height:Math.floor(y)}}function LC({canvas:e,oval:t,scaleFactor:n,videoEl:r,isStartScreen:s}){const{flippedCenterX:o,centerY:a,width:i,height:u}=t,{width:c,height:l}=e.getBoundingClientRect(),d=e.getContext("2d");if(d){d.restore(),d.clearRect(0,0,c,l),d.fillStyle=s?getComputedStyle(e).getPropertyValue("--amplify-colors-background-primary"):"#fff",d.fillRect(0,0,c,l);const f={width:r.videoWidth,height:r.videoHeight},p={x:(c-f.width*n)/2,y:(l-f.height*n)/2};d.setTransform(n,0,0,n,p.x,p.y),d.beginPath(),d.ellipse(o,a,i/2,u/2,0,0,2*Math.PI),d.strokeStyle=getComputedStyle(e).getPropertyValue("--amplify-colors-border-secondary"),d.lineWidth=3,d.stroke(),d.save(),d.clip(),d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,c,l)}else throw new Error("Cannot find Canvas.")}function G0(e,t,n){const{width:r,height:s}=n.getTracks()[0].getSettings(),{width:o,height:a}=t.getBoundingClientRect();e.width=Math.ceil(o),e.height=Math.ceil(a);const i=j0({width:r,height:s,ratioMultiplier:.5});i.flippedCenterX=r-i.centerX;const u=o/t.videoWidth;LC({canvas:e,oval:i,scaleFactor:u,videoEl:t,isStartScreen:!0})}function gB({canvas:e}){const t=e.getContext("2d");if(t)t.restore(),t.clearRect(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);else throw new Error("Cannot find Canvas.")}function zC(e){const{leftEye:t,rightEye:n,mouth:r}=e,s=[];s[0]=(t[0]+n[0])/2,s[1]=(t[1]+n[1])/2;const o=Math.sqrt((t[0]-n[0])**2+(t[1]-n[1])**2),a=Math.sqrt((s[0]-r[0])**2+(s[1]-r[1])**2);return{pupilDistance:o,faceHeight:a}}function q0(e,t,n){const{leftEye:r,rightEye:s,nose:o,leftEar:a,rightEar:i}=e,{height:u,centerY:c}=t,l=c-u/2,d=[];d[0]=(r[0]+s[0])/2,d[1]=(r[1]+s[1])/2;const{pupilDistance:f,faceHeight:p}=zC(e),h=(H0*f+OC*p)/2;let m,y;d[1]<=(l+u)/2?(m=(d[0]+o[0])/2,y=(d[1]+o[1])/2):(m=d[0],y=d[1]);const b=1.68*h,w=Math.max(y-b/2,0),S=Math.min(y+b/2,n),I=Math.min(m-h/2,i[0]),_=Math.max(m+h/2,a[0]);return{bottom:S,left:I,right:_,top:w}}function Qx(e){const t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight;const n=t.getContext("2d");if(n){n.drawImage(e,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height).data,s=8,o=new Array(s).fill(0);for(let u=0;u<r.length;u++){const c=Math.round(r[u++]*.2126+r[u++]*.7152+r[u++]*.0722);o[c%32]++}let a=-1,i=0;for(let u=0;u<s;u++)o[u]>i&&(i=o[u],a=u);return t.remove(),a===0?Eo.DARK:a===s?Eo.BRIGHT:Eo.NORMAL}else throw new Error("Cannot find Video Element.")}function yB(e){return e.label.toLowerCase().includes("virtual")}const vB=.9,bB=.75;function lv({ctx:e,prevColor:t,nextColor:n,fraction:r}){const s=e.canvas.width,o=e.canvas.height;e.fillStyle=n,e.fillRect(0,0,s,o*r),r!==1&&(e.fillStyle=t,e.fillRect(0,o*r,s,o*(1-r)))}function wB({overlayCanvas:e,prevColor:t,nextColor:n,videoEl:r,ovalDetails:s,heightFraction:o,scaleFactor:a}){const{x:i,y:u}=r.getBoundingClientRect(),{flippedCenterX:c,centerY:l,width:d,height:f}=s,p=c*a+i,h=l*a+u,m=e.width,y=e.height,g=e.getContext("2d");if(g)g.canvas.width=window.innerWidth,g.canvas.height=window.innerHeight,g.clearRect(0,0,m,y),lv({ctx:g,prevColor:t,nextColor:n,fraction:o}),g.save(),g.beginPath(),g.rect(0,0,m,y),g.clip(),g.clearRect(0,0,m,y),g.globalAlpha=vB,lv({ctx:g,prevColor:t,nextColor:n,fraction:o}),g.beginPath(),g.ellipse(p,h,d*a/2,f*a/2,0,0,2*Math.PI),g.strokeStyle="white",g.lineWidth=8,g.stroke(),g.clip(),g.clearRect(0,0,m,y),g.globalAlpha=bB,lv({ctx:g,prevColor:t,nextColor:n,fraction:o}),g.restore();else throw new Error("Cannot find Overlay Canvas.")}const SB=e=>!!e;function xB(e){return(e.Challenge.FaceMovementAndLightChallenge.ColorSequences??[]).map(({FreshnessColor:r,DownscrollDuration:s,FlatDisplayDuration:o})=>{const a=r.RGB,i=`rgb(${a[0]},${a[1]},${a[2]})`;return typeof i<"u"&&typeof s<"u"&&typeof o<"u"?{color:i,downscrollDuration:s,flatDisplayDuration:o}:void 0}).filter(SB)}function Zx(e){return e.slice(e.indexOf("(")+1,e.indexOf(")")).split(",").map(t=>parseInt(t))}async function kB(e,t){const n=await e.detectFaces(t);let r;switch(n.length){case 0:{r=ht.CANT_IDENTIFY;break}case 1:{r=ht.FACE_IDENTIFIED;break}default:{r=ht.TOO_MANY;break}}return r}async function Jx({faceDetector:e,videoEl:t,ovalDetails:n,reduceThreshold:r=!1,isMobile:s=!1}){const o=await e.detectFaces(t);let a,i=!1,u;switch(o.length){case 0:{u=Rt.FACE_DISTANCE_ERROR;break}case 1:{a=o[0];const{width:c}=n,{pupilDistance:l,faceHeight:d}=zC(a),f=(H0*l+OC*d)/2/H0;c&&(i=f/c<(r?s?cB:uB:lB),i||(u=Rt.FACE_DISTANCE_ERROR));break}default:{u=Rt.MULTIPLE_FACES_ERROR;break}}return{isDistanceBelowThreshold:i,error:u}}function uv({deviceHeight:e,deviceWidth:t,height:n,width:r,top:s,left:o}){return{Height:n/e,Width:r/t,Top:s/e,Left:o/t}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IB=1e-7,_B=1e-4;class WC{constructor(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,n){this.dataIdsCount++,this.data.set(t,n)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class dw{refCount(t){return Nr("refCount")}incRef(t){return Nr("incRef")}timerAvailable(){return!0}time(t){return Nr("time")}read(t){return Nr("read")}readSync(t){return Nr("readSync")}readToGPU(t,n){return Nr("readToGPU")}numDataIds(){return Nr("numDataIds")}disposeData(t,n){return Nr("disposeData")}write(t,n,r){return Nr("write")}move(t,n,r,s,o){return Nr("move")}createTensorFromGPUData(t,n,r){return Nr("createTensorFromGPUData")}memory(){return Nr("memory")}floatPrecision(){return Nr("floatPrecision")}epsilon(){return this.floatPrecision()===32?IB:_B}dispose(){return Nr("dispose")}}function Nr(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fw(e,t,n){return Math.max(e,Math.min(t,n))}function Gu(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function D(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function Lr(e,t,n=""){D(ws(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function gu(e){D(e!=null,()=>"The input to the tensor constructor must be a non-null value.")}function ee(e){if(e.length===0)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function EB(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==null&&t[n]!==null&&e[n]!==t[n])return!1;return!0}function ws(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function sd(e){return e%1===0}function fp(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function UC(e,t){let n=1,r=-1;for(let o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(e[o]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${o}`);r=o}else if(e[o]<0)throw Error(`Shapes can not be < 0. Found ${e[o]} at dim ${o}`);if(r===-1){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(n===0)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const s=e.slice();return s[r]=t/n,s}function Kt(e,t){const n=t.length;return e=e==null?t.map((r,s)=>s):[].concat(e),D(e.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),D(e.every(r=>sd(r)),()=>`All values in axis param must be integers but got axis ${e}`),e.map(r=>r<0?n+r:r)}function CB(e,t){const n=[],r=[],s=t!=null&&Array.isArray(t)&&t.length===0,o=t==null||s?null:Kt(t,e).sort();let a=0;for(let i=0;i<e.length;++i){if(o!=null){if(o[a]===i&&e[i]!==1)throw new Error(`Can't squeeze axis ${i} since its dim '${e[i]}' is not 1`);(o[a]==null||o[a]>i)&&e[i]===1&&(n.push(e[i]),r.push(i)),o[a]<=i&&a++}e[i]!==1&&(n.push(e[i]),r.push(i))}return{newShape:n,keptDims:r}}function nr(e,t){return un(e,t)}function un(e,t){let n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else if(e==="string")n=new Array(t);else throw new Error(`Unknown data type ${e}`);return n}function TB(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function NB(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function AB(e,t){return!(t==="complex64"||t==="float32"&&e!=="complex64"||t==="int32"&&e!=="float32"&&e!=="complex64"||t==="bool"&&e==="bool")}function od(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error(`Unknown dtype ${e}`)}function DB(e){if(e==null)return 0;let t=0;return e.forEach(n=>t+=n.length),t}function tm(e){return typeof e=="string"||e instanceof String}function $B(e){return typeof e=="boolean"}function RB(e){return typeof e=="number"}function $d(e){return Array.isArray(e)?$d(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":RB(e)?"float32":tm(e)?"string":$B(e)?"bool":"float32"}function K0(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Ee(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function VC(e,t,n,r=!1){const s=new Array;if(t.length===1){const o=t[0]*(r?2:1);for(let a=0;a<o;a++)s[a]=n[e+a]}else{const o=t[0],a=t.slice(1),i=a.reduce((u,c)=>u*c)*(r?2:1);for(let u=0;u<o;u++)s[u]=VC(e+u*i,a,n,r)}return s}function ys(e,t,n=!1){if(e.length===0)return t[0];const r=e.reduce((s,o)=>s*o)*(n?2:1);if(r===0)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return VC(0,e,t,n)}function FB(e,t){if(Array.isArray(e))return e;if(t==="float32")return e instanceof Float32Array?e:new Float32Array(e);if(t==="int32")return e instanceof Int32Array?e:new Int32Array(e);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(e));throw new Error(`Unknown dtype ${t}`)}function pw(e,t){const n=Vn(e,t);for(let r=0;r<n.length;r++)n[r]=1;return n}function Vn(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function HC(e,t){const n=e.reduce((r,s)=>r*s,1);if(t==null||t==="float32")return ys(e,new Float32Array(n));if(t==="int32")return ys(e,new Int32Array(n));if(t==="bool")return ys(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function es(e){e.forEach(t=>{D(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function so(e,t,n){if(t===0)return 0;if(t===1)return e[0];let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=n[s]*e[s];return r}function yu(e,t,n){if(t===0)return[];if(t===1)return[e];const r=new Array(t);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(e/n[s]),e-=r[s]*n[s];return r[r.length-1]=e,r}function $i(e){return e&&e.then&&typeof e.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ek="tfjsflags";class MB{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=OB,this.populateURLFlags()}setPlatform(t,n){this.platform!=null&&(Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=n}registerFlag(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){const s=this.urlFlags[t];Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${s}.`),this.set(t,s)}}async getAsync(t){return t in this.flags?this.flags[t]:(this.flags[t]=await this.evaluateFlag(t),this.flags[t])}get(t){if(t in this.flags)return this.flags[t];const n=this.evaluateFlag(t);if($i(n))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=n,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,n){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const t=this.getQueryParams(this.global.location.search);ek in t&&t[ek].split(",").forEach(r=>{const[s,o]=r.split(":");this.urlFlags[s]=BB(s,o)})}}function OB(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(PB(t,r[0],r[1]),r.join("="))),t}function PB(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function BB(e,t){const n=t.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:t}function Ye(){return jC}let jC=null;function LB(e){jC=e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let cv;function GC(){if(cv==null){let e;if(typeof window<"u")e=window;else if(typeof global<"u")e=global;else if(typeof process<"u")e=process;else if(typeof self<"u")e=self;else throw new Error("Could not find a global object");cv=e}return cv}function zB(){const e=GC();return e._tfGlobals==null&&(e._tfGlobals=new Map),e._tfGlobals}function hw(e,t){const n=zB();if(n.has(e))return n.get(e);{const r=t();return n.set(e,r),n.get(e)}}const mw="Abs",nm="Acos",rm="Acosh",Rd="Add",sm="AddN",om="All",am="Any",gw="ArgMax",yw="ArgMin",im="Asin",lm="Asinh",um="Atan",cm="Atanh",dm="Atan2",fm="AvgPool",qC="AvgPoolGrad",vw="AvgPool3D",KC="AvgPool3DGrad",pm="BatchMatMul",bw="BatchToSpaceND",hm="Bincount",mm="BitwiseAnd",ww="BroadcastArgs",gm="Cast",ym="Ceil",Fd="ClipByValue",XC="Complex",YC="ComplexAbs",Sw="Concat",vm="Conv2D",QC="Conv2DBackpropFilter",bm="Conv2DBackpropInput",wm="Conv3D",xw="Conv3DBackpropFilterV2",Sm="Conv3DBackpropInputV2",xm="Cos",km="Cosh",Im="Cumprod",_m="Cumsum",Em="CropAndResize",kw="DenseBincount",Cm="DepthToSpace",Tm="DepthwiseConv2dNative",ZC="DepthwiseConv2dNativeBackpropFilter",JC="DepthwiseConv2dNativeBackpropInput",Iw="Diag",Nm="Dilation2D",nh="Dilation2DBackpropInput",rh="Dilation2DBackpropFilter",WB="Draw",Am="RealDiv",eT="Einsum",Dm="Elu",_w="EluGrad",$m="Erf",Rm="Equal",Fm="Exp",Ew="ExpandDims",Mm="Expm1",tT="FFT",Cw="Fill",Om="FlipLeftRight",Pm="Floor",Bm="FloorDiv",Lm="FusedBatchNorm",Tw="GatherV2",zm="GatherNd",Wm="Greater",Um="GreaterEqual",Vm="Identity",nT="IFFT",rT="Imag",Hm="IsFinite",jm="IsInf",Gm="IsNan",qm="LeakyRelu",Km="Less",Xm="LessEqual",Ym="LinSpace",Qm="Log",Zm="Log1p",Jm="LogicalAnd",eg="LogicalNot",tg="LogicalOr",UB="LogicalXor",ng="LRN",Nw="LRNGrad",rg="Max",sg="Maximum",og="MaxPool",sT="MaxPoolGrad",Aw="MaxPool3D",oT="MaxPool3DGrad",Dw="MaxPoolWithArgmax",ag="Mean",ig="Min",lg="Minimum",ug="MirrorPad",cg="Mod",dg="Multinomial",fg="Multiply",$w="Neg",pg="NotEqual",hg="NonMaxSuppressionV3",mg="NonMaxSuppressionV4",gg="NonMaxSuppressionV5",Rw="OnesLike",yg="OneHot",Fw="Pack",vg="PadV2",bg="Pow",wg="Prelu",Sg="Prod",aT="RaggedGather",iT="RaggedRange",lT="RaggedTensorToTensor",Mw="Range",uT="Real",xg="Reciprocal",kg="Relu",Ow="Reshape",Ig="ResizeNearestNeighbor",Pw="ResizeNearestNeighborGrad",_g="ResizeBilinear",Bw="ResizeBilinearGrad",Eg="Relu6",Cg="Reverse",Tg="Round",Ng="Rsqrt",Ag="ScatterNd",Dg="TensorScatterUpdate",$g="SearchSorted",Lw="Select",Rg="Selu",zw="Slice",Fg="Sin",Mg="Sinh",Og="Sign",Pg="Sigmoid",Bg="Softplus",Lg="Sqrt",zg="Sum",Ww="SpaceToBatchND",Uw="SplitV",Wg="Softmax",Vw="SparseFillEmptyRows",Ug="SparseReshape",Hw="SparseSegmentMean",jw="SparseSegmentSum",Vg="SparseToDense",Hg="SquaredDifference",cT="Square",Gw="StaticRegexReplace",jg="StridedSlice",qw="StringNGrams",Kw="StringSplit",Xw="StringToHashBucketFast",Gg="Sub",qg="Tan",Kg="Tanh",Md="Tile",Xg="TopK",Yg="Transform",Bl="Transpose",Yw="Unique",Qw="Unpack",dT="UnsortedSegmentSum",Zw="ZerosLike",Od="Step",tk="FromPixels",Qg="RotateWithOffset",ad="_FusedMatMul",id="FusedConv2D",ld="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ui(...e){Ye().getBool("IS_TEST")||Ye().getBool("PROD")||console.warn(...e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sh=hw("kernelRegistry",()=>new Map),VB=hw("gradRegistry",()=>new Map);function X0(e,t){const n=pT(e,t);return sh.get(n)}function nk(e){return VB.get(e)}function rk(e){const t=sh.entries(),n=[];for(;;){const{done:r,value:s}=t.next();if(r)break;const[o,a]=s,[i]=o.split("_");i===e&&n.push(a)}return n}function fT(e){const{kernelName:t,backendName:n}=e,r=pT(t,n);sh.has(r)&&ui(`The kernel '${t}' for backend '${n}' is already registered`),sh.set(r,e)}function pT(e,t){return`${t}_${e}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hT(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}var mT=Ot,fs=null;try{fs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Ot(e,t,n){this.low=e|0,this.high=t|0,this.unsigned=!!n}Ot.prototype.__isLong__;Object.defineProperty(Ot.prototype,"__isLong__",{value:!0});function zr(e){return(e&&e.__isLong__)===!0}Ot.isLong=zr;var sk={},ok={};function Hi(e,t){var n,r,s;return t?(e>>>=0,(s=0<=e&&e<256)&&(r=ok[e],r)?r:(n=Pt(e,(e|0)<0?-1:0,!0),s&&(ok[e]=n),n)):(e|=0,(s=-128<=e&&e<128)&&(r=sk[e],r)?r:(n=Pt(e,e<0?-1:0,!1),s&&(sk[e]=n),n))}Ot.fromInt=Hi;function ps(e,t){if(isNaN(e))return t?gi:hs;if(t){if(e<0)return gi;if(e>=gT)return bT}else{if(e<=-ik)return Mr;if(e+1>=ik)return vT}return e<0?ps(-e,t).neg():Pt(e%eu|0,e/eu|0,t)}Ot.fromNumber=ps;function Pt(e,t,n){return new Ot(e,t,n)}Ot.fromBits=Pt;var oh=Math.pow;function Jw(e,t,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return hs;if(typeof t=="number"?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return Jw(e.substring(1),t,n).neg();for(var s=ps(oh(n,8)),o=hs,a=0;a<e.length;a+=8){var i=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+i),n);if(i<8){var c=ps(oh(n,i));o=o.mul(c).add(ps(u))}else o=o.mul(s),o=o.add(ps(u))}return o.unsigned=t,o}Ot.fromString=Jw;function Ls(e,t){return typeof e=="number"?ps(e,t):typeof e=="string"?Jw(e,t):Pt(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}Ot.fromValue=Ls;var ak=65536,HB=1<<24,eu=ak*ak,gT=eu*eu,ik=gT/2,lk=Hi(HB),hs=Hi(0);Ot.ZERO=hs;var gi=Hi(0,!0);Ot.UZERO=gi;var Nl=Hi(1);Ot.ONE=Nl;var yT=Hi(1,!0);Ot.UONE=yT;var Y0=Hi(-1);Ot.NEG_ONE=Y0;var vT=Pt(-1,2147483647,!1);Ot.MAX_VALUE=vT;var bT=Pt(-1,-1,!0);Ot.MAX_UNSIGNED_VALUE=bT;var Mr=Pt(0,-2147483648,!1);Ot.MIN_VALUE=Mr;var be=Ot.prototype;be.toInt=function(){return this.unsigned?this.low>>>0:this.low};be.toNumber=function(){return this.unsigned?(this.high>>>0)*eu+(this.low>>>0):this.high*eu+(this.low>>>0)};be.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Mr)){var n=ps(t),r=this.div(n),s=r.mul(n).sub(this);return r.toString(t)+s.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=ps(oh(t,6),this.unsigned),a=this,i="";;){var u=a.div(o),c=a.sub(u.mul(o)).toInt()>>>0,l=c.toString(t);if(a=u,a.isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}};be.getHighBits=function(){return this.high};be.getHighBitsUnsigned=function(){return this.high>>>0};be.getLowBits=function(){return this.low};be.getLowBitsUnsigned=function(){return this.low>>>0};be.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Mr)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,n=31;n>0&&!(t&1<<n);n--);return this.high!=0?n+33:n+1};be.isZero=function(){return this.high===0&&this.low===0};be.eqz=be.isZero;be.isNegative=function(){return!this.unsigned&&this.high<0};be.isPositive=function(){return this.unsigned||this.high>=0};be.isOdd=function(){return(this.low&1)===1};be.isEven=function(){return(this.low&1)===0};be.equals=function(t){return zr(t)||(t=Ls(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};be.eq=be.equals;be.notEquals=function(t){return!this.eq(t)};be.neq=be.notEquals;be.ne=be.notEquals;be.lessThan=function(t){return this.comp(t)<0};be.lt=be.lessThan;be.lessThanOrEqual=function(t){return this.comp(t)<=0};be.lte=be.lessThanOrEqual;be.le=be.lessThanOrEqual;be.greaterThan=function(t){return this.comp(t)>0};be.gt=be.greaterThan;be.greaterThanOrEqual=function(t){return this.comp(t)>=0};be.gte=be.greaterThanOrEqual;be.ge=be.greaterThanOrEqual;be.compare=function(t){if(zr(t)||(t=Ls(t)),this.eq(t))return 0;var n=this.isNegative(),r=t.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};be.comp=be.compare;be.negate=function(){return!this.unsigned&&this.eq(Mr)?Mr:this.not().add(Nl)};be.neg=be.negate;be.add=function(t){zr(t)||(t=Ls(t));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,o=this.low&65535,a=t.high>>>16,i=t.high&65535,u=t.low>>>16,c=t.low&65535,l=0,d=0,f=0,p=0;return p+=o+c,f+=p>>>16,p&=65535,f+=s+u,d+=f>>>16,f&=65535,d+=r+i,l+=d>>>16,d&=65535,l+=n+a,l&=65535,Pt(f<<16|p,l<<16|d,this.unsigned)};be.subtract=function(t){return zr(t)||(t=Ls(t)),this.add(t.neg())};be.sub=be.subtract;be.multiply=function(t){if(this.isZero())return hs;if(zr(t)||(t=Ls(t)),fs){var n=fs.mul(this.low,this.high,t.low,t.high);return Pt(n,fs.get_high(),this.unsigned)}if(t.isZero())return hs;if(this.eq(Mr))return t.isOdd()?Mr:hs;if(t.eq(Mr))return this.isOdd()?Mr:hs;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(lk)&&t.lt(lk))return ps(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,o=this.low>>>16,a=this.low&65535,i=t.high>>>16,u=t.high&65535,c=t.low>>>16,l=t.low&65535,d=0,f=0,p=0,h=0;return h+=a*l,p+=h>>>16,h&=65535,p+=o*l,f+=p>>>16,p&=65535,p+=a*c,f+=p>>>16,p&=65535,f+=s*l,d+=f>>>16,f&=65535,f+=o*c,d+=f>>>16,f&=65535,f+=a*u,d+=f>>>16,f&=65535,d+=r*l+s*c+o*u+a*i,d&=65535,Pt(p<<16|h,d<<16|f,this.unsigned)};be.mul=be.multiply;be.divide=function(t){if(zr(t)||(t=Ls(t)),t.isZero())throw Error("division by zero");if(fs){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var n=(this.unsigned?fs.div_u:fs.div_s)(this.low,this.high,t.low,t.high);return Pt(n,fs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?gi:hs;var r,s,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return gi;if(t.gt(this.shru(1)))return yT;o=gi}else{if(this.eq(Mr)){if(t.eq(Nl)||t.eq(Y0))return Mr;if(t.eq(Mr))return Nl;var a=this.shr(1);return r=a.div(t).shl(1),r.eq(hs)?t.isNegative()?Nl:Y0:(s=this.sub(t.mul(r)),o=r.add(s.div(t)),o)}else if(t.eq(Mr))return this.unsigned?gi:hs;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=hs}for(s=this;s.gte(t);){r=Math.max(1,Math.floor(s.toNumber()/t.toNumber()));for(var i=Math.ceil(Math.log(r)/Math.LN2),u=i<=48?1:oh(2,i-48),c=ps(r),l=c.mul(t);l.isNegative()||l.gt(s);)r-=u,c=ps(r,this.unsigned),l=c.mul(t);c.isZero()&&(c=Nl),o=o.add(c),s=s.sub(l)}return o};be.div=be.divide;be.modulo=function(t){if(zr(t)||(t=Ls(t)),fs){var n=(this.unsigned?fs.rem_u:fs.rem_s)(this.low,this.high,t.low,t.high);return Pt(n,fs.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};be.mod=be.modulo;be.rem=be.modulo;be.not=function(){return Pt(~this.low,~this.high,this.unsigned)};be.and=function(t){return zr(t)||(t=Ls(t)),Pt(this.low&t.low,this.high&t.high,this.unsigned)};be.or=function(t){return zr(t)||(t=Ls(t)),Pt(this.low|t.low,this.high|t.high,this.unsigned)};be.xor=function(t){return zr(t)||(t=Ls(t)),Pt(this.low^t.low,this.high^t.high,this.unsigned)};be.shiftLeft=function(t){return zr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Pt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Pt(0,this.low<<t-32,this.unsigned)};be.shl=be.shiftLeft;be.shiftRight=function(t){return zr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Pt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Pt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};be.shr=be.shiftRight;be.shiftRightUnsigned=function(t){if(zr(t)&&(t=t.toInt()),t&=63,t===0)return this;var n=this.high;if(t<32){var r=this.low;return Pt(r>>>t|n<<32-t,n>>>t,this.unsigned)}else return t===32?Pt(n,0,this.unsigned):Pt(n>>>t-32,0,this.unsigned)};be.shru=be.shiftRightUnsigned;be.shr_u=be.shiftRightUnsigned;be.toSigned=function(){return this.unsigned?Pt(this.low,this.high,!1):this};be.toUnsigned=function(){return this.unsigned?this:Pt(this.low,this.high,!0)};be.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};be.toBytesLE=function(){var t=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};be.toBytesBE=function(){var t=this.high,n=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};Ot.fromBytes=function(t,n,r){return r?Ot.fromBytesLE(t,n):Ot.fromBytesBE(t,n)};Ot.fromBytesLE=function(t,n){return new Ot(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,n)};Ot.fromBytesBE=function(t,n){return new Ot(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],n)};const wT=Wi(mT),jB=Dh({__proto__:null,default:wT},[mT]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ci=wT||jB;function Zg(e){return ci.fromString(e,!0,16)}const ST=Zg("c3a5c85c97cb3127"),ii=Zg("b492b66fbe98f273"),Jn=Zg("9ae16a3b2f90404f");function Q0(e){return e.xor(e.shru(47))}function xT(e,t,n){const r=e.slice(t,t+n);return ci.fromBytes(Array.from(r),!0,!0)}function Tt(e,t){return xT(e,t,8)}function uk(e,t){return xT(e,t,4)}function kn(e,t){return t===0?e:e.shru(t).or(e.shl(64-t))}function Sa(e,t,n=Zg("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let s=t.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function GB(e,t,n,r,s,o){s=s.add(e),o=kn(o.add(s).add(r),21);const a=s;return s=s.add(t),s=s.add(n),o=o.add(kn(s,44)),[s.add(r),o.add(a)]}function Of(e,t,n,r){return GB(Tt(e,t),Tt(e,t+8),Tt(e,t+16),Tt(e,t+24),n,r)}function qB(e,t=e.length){if(t>=8){const n=Jn.add(t*2),r=Tt(e,0).add(Jn),s=Tt(e,t-8),o=kn(s,37).mul(n).add(r),a=kn(r,25).add(s).mul(n);return Sa(o,a,n)}if(t>=4){const n=Jn.add(t*2),r=uk(e,0);return Sa(r.shl(3).add(t),uk(e,t-4),n)}if(t>0){const n=e[0],r=e[t>>1],s=e[t-1],o=n+(r<<8),a=t+(s<<2);return Q0(Jn.mul(o).xor(ST.mul(a))).mul(Jn)}return Jn}function KB(e,t=e.length){const n=Jn.add(t*2),r=Tt(e,0).mul(ii),s=Tt(e,8),o=Tt(e,t-8).mul(n),a=Tt(e,t-16).mul(Jn);return Sa(kn(r.add(s),43).add(kn(o,30)).add(a),r.add(kn(s.add(Jn),18)).add(o),n)}function XB(e,t=e.length){const n=Jn.add(t*2),r=Tt(e,0).mul(Jn),s=Tt(e,8),o=Tt(e,t-8).mul(n),a=Tt(e,t-16).mul(Jn),i=kn(r.add(s),43).add(kn(o,30)).add(a),u=Sa(i,r.add(kn(s.add(Jn),18)).add(o),n),c=Tt(e,16).mul(n),l=Tt(e,24),d=i.add(Tt(e,t-32)).mul(n),f=u.add(Tt(e,t-24)).mul(n);return Sa(kn(c.add(l),43).add(kn(d,30)).add(f),c.add(kn(l.add(r),18)).add(d),n)}function YB(e,t=e.length){const n=ci.fromNumber(81,!0);if(t<=32)return t<=16?qB(e,t):KB(e,t);if(t<=64)return XB(e,t);let r=n,s=n.mul(ii).add(113),o=Q0(s.mul(Jn).add(113)).mul(Jn),a=[ci.UZERO,ci.UZERO],i=[ci.UZERO,ci.UZERO];r=r.mul(Jn).add(Tt(e,0));let u=0;const c=(t-1>>6)*64,l=c+(t-1&63)-63;do r=kn(r.add(s).add(a[0]).add(Tt(e,u+8)),37).mul(ii),s=kn(s.add(a[1]).add(Tt(e,u+48)),42).mul(ii),r=r.xor(i[1]),s=s.add(a[0]).add(Tt(e,u+40)),o=kn(o.add(i[0]),33).mul(ii),a=Of(e,u,a[1].mul(ii),r.add(i[0])),i=Of(e,u+32,o.add(i[1]),s.add(Tt(e,u+16))),[o,r]=[r,o],u+=64;while(u!==c);const d=ii.add(o.and(255).shl(1));return u=l,i[0]=i[0].add(t-1&63),a[0]=a[0].add(i[0]),i[0]=i[0].add(a[0]),r=kn(r.add(s).add(a[0]).add(Tt(e,u+8)),37).mul(d),s=kn(s.add(a[1]).add(Tt(e,u+48)),42).mul(d),r=r.xor(i[1].mul(9)),s=s.add(a[0].mul(9).add(Tt(e,u+40))),o=kn(o.add(i[0]),33).mul(d),a=Of(e,u,a[1].mul(d),r.add(i[0])),i=Of(e,u+32,o.add(i[1]),s.add(Tt(e,u+16))),[o,r]=[r,o],Sa(Sa(a[0],i[0],d).add(Q0(s).mul(ST)).add(o),Sa(a[1],i[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e2(e,t){return t==="string"?ki(e):ji([e],t)}function QB(e,t){return e instanceof Float32Array&&t==="float32"||e instanceof Int32Array&&t==="int32"||e instanceof Uint8Array&&t==="bool"}function ji(e,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=cd(e)),Ye().getBool("DEBUG")&&TB(e,t),QB(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){const n=new Uint8Array(e.length);for(let r=0;r<n.length;++r)Math.round(e[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${t}`)}function Ca(){return Ye().platform.now()}function ZB(e,t){return Ye().platform.fetch(e,t)}function ki(e,t="utf-8"){return t=t||"utf-8",Ye().platform.encode(e,t)}function ud(e,t="utf-8"){return t=t||"utf-8",Ye().platform.decode(e,t)}function Ss(e){return Ye().platform.isTypedArray!=null?Ye().platform.isTypedArray(e):hT(e)}function cd(e,t=[],n=!1){if(t==null&&(t=[]),typeof e=="boolean"||typeof e=="number"||typeof e=="string"||$i(e)||e==null||Ss(e)&&n)t.push(e);else if(Array.isArray(e)||Ss(e))for(let r=0;r<e.length;++r)cd(e[r],t,n);else{let r=-1;for(const s of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)cd(e[s],t,n)}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JB{constructor(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new tL)}profileKernel(t,n,r){let s;const o=()=>{s=r()};let a;const i=Ca();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(o);else{o();for(const c of s)c.dataSync();a=Promise.resolve({kernelMs:Ca()-i})}if(Ye().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const l=s[c];l.data().then(d=>{eL(d,l.dtype,t)})}return{kernelName:t,outputs:s,inputs:n,timeMs:a.then(c=>c.kernelMs),extraInfo:a.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(t){const{kernelName:n,outputs:r,timeMs:s,inputs:o,extraInfo:a}=t;r.forEach(i=>{Promise.all([i.data(),s,a]).then(u=>{this.logger.logKernelProfile(n,i,u[0],u[1],o,u[2])})})}}function eL(e,t,n){if(t!=="float32")return!1;for(let r=0;r<e.length;r++){const s=e[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}class tL{logKernelProfile(t,n,r,s,o,a){const i=typeof s=="number"?fp(`${s}ms`,9):s.error,u=fp(t,25),c=n.rank,l=n.size,d=fp(n.shape.toString(),14);let f="";for(const p in o){const h=o[p];if(h!=null){const m=h.shape||n.shape,y=m.length;f+=`${p}: ${y}D ${y>0?m:""} `}}console.log(`%c${u}	%c${i}	%c${c}D ${d}	%c${l}	%c${f}	%c${a}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nL(e,t,n){const r={},s={};for(let u=0;u<t.length;u++)r[t[u].id]=!0;for(let u=0;u<e.length;u++){const c=e[u],l=c.inputs;for(const d in l){const f=l[d];let p=!1;for(let h=0;h<t.length;h++)if(r[f.id]){c.outputs.forEach(m=>r[m.id]=!0),p=!0,s[c.id]=!0;break}if(p)break}}const o={};o[n.id]=!0;const a={};for(let u=e.length-1;u>=0;u--){const c=e[u],l=c.inputs;for(let d=0;d<c.outputs.length;d++)if(o[c.outputs[d].id]){for(const f in l)o[l[f].id]=!0,a[c.id]=!0;break}}const i=[];for(let u=0;u<e.length;u++){const c=e[u];if(s[c.id]&&a[c.id]){const l={};for(const f in c.inputs){const p=c.inputs[f];r[p.id]&&(l[f]=p)}const d=Object.assign({},c);d.inputs=l,d.outputs=c.outputs,i.push(d)}}return i}function rL(e,t,n,r){for(let s=t.length-1;s>=0;s--){const o=t[s],a=[];if(o.outputs.forEach(u=>{const c=e[u.id];c!=null?a.push(c):a.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const i=o.gradient(a);for(const u in o.inputs){if(!(u in i))throw new Error(`Cannot backprop through input ${u}. Available gradients found: ${Object.keys(i)}.`);const c=n(()=>i[u]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${u} must have 'float32' dtype, but has '${c.dtype}'`);const l=o.inputs[u];if(!ws(c.shape,l.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${u}' has shape '${c.shape}', which does not match the shape of the input '${l.shape}'`);if(e[l.id]==null)e[l.id]=c;else{const d=e[l.id];e[l.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ck=20,qu=3,dv=7;function sL(e,t,n,r){const s=Ee(t),o=oL(e,t,n,s),a=t.length,i=pp(e,t,n,s,o),u=["Tensor"];return r&&(u.push(`  dtype: ${n}`),u.push(`  rank: ${a}`),u.push(`  shape: [${t}]`),u.push("  values:")),u.push(i.map(c=>"    "+c).join(`
`)),u.join(`
`)}function oL(e,t,n,r){const s=ee(t),o=r[r.length-1],a=new Array(o).fill(0),i=t.length,u=n==="complex64"?uc(e):e;if(i>1)for(let c=0;c<s/o;c++){const l=c*o;for(let d=0;d<o;d++)a[d]=Math.max(a[d],lc(u[l+d],0,n).length)}return a}function lc(e,t,n){let r;return Array.isArray(e)?r=`${parseFloat(e[0].toFixed(dv))} + ${parseFloat(e[1].toFixed(dv))}j`:tm(e)?r=`'${e}'`:n==="bool"?r=kT(e):r=parseFloat(e.toFixed(dv)).toString(),fp(r,t)}function kT(e){return e===0?"false":"true"}function pp(e,t,n,r,s,o=!0){const a=n==="complex64"?2:1,i=t[0],u=t.length;if(u===0){if(n==="complex64"){const m=uc(e);return[lc(m[0],0,n)]}return n==="bool"?[kT(e[0])]:[e[0].toString()]}if(u===1){if(i>ck){const y=qu*a;let g=Array.from(e.slice(0,y)),b=Array.from(e.slice((i-qu)*a,i*a));return n==="complex64"&&(g=uc(g),b=uc(b)),["["+g.map((w,S)=>lc(w,s[S],n)).join(", ")+", ..., "+b.map((w,S)=>lc(w,s[i-qu+S],n)).join(", ")+"]"]}return["["+(n==="complex64"?uc(e):Array.from(e)).map((y,g)=>lc(y,s[g],n)).join(", ")+"]"]}const c=t.slice(1),l=r.slice(1),d=r[0]*a,f=[];if(i>ck){for(let m=0;m<qu;m++){const y=m*d,g=y+d;f.push(...pp(e.slice(y,g),c,n,l,s,!1))}f.push("...");for(let m=i-qu;m<i;m++){const y=m*d,g=y+d;f.push(...pp(e.slice(y,g),c,n,l,s,m===i-1))}}else for(let m=0;m<i;m++){const y=m*d,g=y+d;f.push(...pp(e.slice(y,g),c,n,l,s,m===i-1))}const p=u===2?",":"";f[0]="["+(i>0?f[0]+p:"");for(let m=1;m<f.length-1;m++)f[m]=" "+f[m]+p;let h=`,
`;for(let m=2;m<u;m++)h+=`
`;return f[f.length-1]=" "+f[f.length-1]+"]"+(o?"":h),f}function uc(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mn{constructor(t,n,r){if(this.dtype=n,this.shape=t.slice(),this.size=ee(t),r!=null){const s=r.length;D(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||un(n,this.size),this.strides=Ee(t)}set(t,...n){n.length===0&&(n=[0]),D(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=t}get(...t){t.length===0&&(t=[0]);let n=0;for(const s of t){if(s<0||s>=this.shape[n]){const o=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(o)}n++}let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=this.strides[s]*t[s];return this.values[r]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n}get rank(){return this.shape.length}toTensor(){return Ds().makeTensor(this.values,this.shape,this.dtype)}}let Ds=null,fl=null;function aL(e){Ds=e}function iL(e){fl=e}class ln{constructor(t,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=ee(t),this.strides=Ee(t),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const t=await this.data();return fl.buffer(this.shape,this.dtype,t)}bufferSync(){return fl.buffer(this.shape,this.dtype,this.dataSync())}async array(){const t=await this.data();return ys(this.shape,t,this.dtype==="complex64")}arraySync(){return ys(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const t=Ds().read(this.dataId);if(this.dtype==="string"){const n=await t;try{return n.map(r=>ud(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t}dataToGPU(t){return this.throwIfDisposed(),Ds().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();const t=Ds().readSync(this.dataId);if(this.dtype==="string")try{return t.map(n=>ud(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}async bytes(){this.throwIfDisposed();const t=await Ds().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ds().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return fl.print(this,t)}clone(){return this.throwIfDisposed(),fl.clone(this)}toString(t=!1){const n=this.dataSync();return sL(n,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),fl.cast(this,t)}variable(t=!0,n,r){return this.throwIfDisposed(),Ds().makeVariable(this,t,n,r)}}Object.defineProperty(ln,Symbol.hasInstance,{value:e=>!!e&&e.data!=null&&e.dataSync!=null&&e.throwIfDisposed!=null});function lL(){return hw("Tensor",()=>ln)}lL();class ah extends ln{constructor(t,n,r,s){super(t.shape,t.dtype,t.dataId,s),this.trainable=n,this.name=r}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!ws(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);Ds().disposeTensor(this),this.dataId=t.dataId,Ds().incRef(this,null)}dispose(){Ds().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(ah,Symbol.hasInstance,{value:e=>e instanceof ln&&e.assign!=null&&e.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var dk;(function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"})(dk||(dk={}));var Z0;(function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"})(Z0||(Z0={}));var J0;(function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"})(J0||(J0={}));var e1;(function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"})(e1||(e1={}));var t1;(function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"})(t1||(t1={}));const uL={float32:e1,int32:Z0,bool:J0,complex64:t1};function vu(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return uL[e][t]}function IT(e){return e!=null&&typeof e=="object"&&"texture"in e&&e.texture instanceof WebGLTexture}function _T(e){return typeof GPUBuffer<"u"&&e!=null&&typeof e=="object"&&"buffer"in e&&e.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tn(e,t){if(e.dtype===t.dtype)return[e,t];const n=vu(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function cL(e,t){D(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function ET(e){const t=[];return CT(e,t,new Set),t}function CT(e,t,n){if(e==null)return;if(e instanceof ln){t.push(e);return}if(!dL(e))return;const r=e;for(const s in r){const o=r[s];n.has(o)||(n.add(o),CT(o,t,n))}}function dL(e){return Array.isArray(e)||typeof e=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fv(e){return e.kernelName!=null}class fk{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class tu{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new fk}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:t,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry))if(t in this.registryFactory){const{asyncInit:n}=this.initializeBackend(t);if(n)return null}else return null;return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,n,r=1){return t in this.registryFactory?(ui(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:n,priority:r},!0)}async setBackend(t){if(this.registryFactory[t]==null)throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,this.registry[t]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(t);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new JB(this.backendInstance),!0}setupRegisteredKernels(){rk(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(t){rk(t).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[t])})}initializeBackend(t){const n=this.registryFactory[t];if(n==null)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof dw)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,o=r.then(a=>s<this.pendingBackendInitId?!1:(this.registry[t]=a,this.pendingBackendInit=null,!0)).catch(a=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,ui(`Initialization of backend ${t} failed`),ui(a.stack||a.message)),!1));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}else return this.registry[t]=r,{success:!0,asyncInit:!1}}catch(r){return ui(`Initialization of backend ${t} failed`),ui(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((t,n)=>this.registryFactory[n].priority-this.registryFactory[t].priority)}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let n=0;n<t.length;n++){const r=t[n],{success:s,asyncInit:o}=this.initializeBackend(r);if(o||s)return{name:r,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,n){const r=this.state.tensorInfo.get(n),s=r.backend,o=this.readSync(n),a=s.refCount(n);s.disposeData(n,!0),r.backend=t,t.move(n,o,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,n){let r=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(t,n,r){t();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return tu.nextTensorId++}nextVariableId(){return tu.nextVariableId++}clone(t){const n=W.runKernel(Vm,{x:t}),r={x:t},s=a=>({x:()=>{const i="float32",u={x:a},c={dtype:i};return W.runKernel(gm,u,c)}}),o=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,o,{}),n}runKernel(t,n,r){if(this.backendName==null&&this.backend,!(X0(t,this.backendName)!=null))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,n,r){const s=this.backend.numDataIds();let o=0;r.forEach(u=>{o+=u.dtype==="complex64"?3:1});const a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=s-n-o-a;if(i>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${i} data ids) after running '${t}'`)}runKernelFunc(t){let n,r=[];const s=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let i;this.backendName==null&&this.backend;let u;const c=fv(t)?t.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(fv(t)){const{kernelName:h,inputs:m,attrs:y}=t;this.backendName==null&&this.backend;const g=X0(h,this.backendName);D(g!=null,()=>`Cannot find registered kernel '${h}' for backend '${this.backendName}'`),i=()=>{const b=this.backend.numDataIds();u=g.kernelFunc({inputs:m,attrs:y,backend:this.backend});const w=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(h,b,w);const S=w.map(I=>I.rank!=null?I:this.makeTensorFromTensorInfo(I));if(s){const I=this.getTensorsForGradient(h,m,S);r=this.saveTensorsForBackwardMode(I)}return S}}else{const{forwardFunc:h}=t,m=y=>{s&&(r=y.map(g=>this.keep(this.clone(g))))};i=()=>{const y=this.backend.numDataIds();u=this.tidy(()=>h(this.backend,m));const g=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,y,g),g}}const{inputs:l,attrs:d}=t,f=fv(t)?null:t.backwardsFunc;let p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=i():(p=this.profiler.profileKernel(c,l,()=>i()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),s&&this.addTapeNode(c,l,n,f,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(l).map(h=>l[h]!=null?l[h].shape:null),outputShapes:n.map(h=>h.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(u)?n:n[0]}saveTensorsForBackwardMode(t){return t.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(t,n,r){const s=nk(t);if(s!=null){const o=s.inputsToSave||[],a=s.outputsToSave||[];let i;s.saveAllInputs?(D(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),i=Object.keys(n).map(c=>n[c])):i=o.map(c=>n[c]);const u=r.filter((c,l)=>a[l]);return i.concat(u)}return[]}makeTensor(t,n,r,s){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let o=t;r==="string"&&tm(t[0])&&(o=t.map(u=>ki(u)));const a=s.write(o,n,r),i=new ln(n,r,a,this.nextTensorId());if(this.trackTensor(i,s),r==="string"){const u=this.state.tensorInfo.get(a),c=DB(o);this.state.numBytes+=c-u.bytes,u.bytes=c}return i}makeTensorFromDataId(t,n,r,s){r=r||"float32";const o={dataId:t,shape:n,dtype:r};return this.makeTensorFromTensorInfo(o,s)}makeTensorFromTensorInfo(t,n){const{dataId:r,shape:s,dtype:o}=t,a=new ln(s,o,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(t,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==t.dtype&&(t=t.cast(s));const o=new ah(t,n,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(t,n){this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++;let r=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(r=t.size*od(t.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:r})),t instanceof ah||this.track(t)}incRef(t,n){this.trackTensor(t,n),this.backend.incRef(t.dataId)}removeDataId(t,n){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===n&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const n=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,t.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),t.dtype!=="complex64"&&t.dtype!=="string"){const r=t.size*od(t.dtype);this.state.numBytes-=r}n.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,n.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const n=this.state.registeredVariables[t];this.disposeVariable(n)}}disposeVariable(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(t,n,r,s,o,a){const i={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:o},u=nk(t);u!=null&&(s=u.gradFunc),s!=null&&(i.gradient=c=>(c=c.map((l,d)=>{if(l==null){const f=r[d],p=Vn(f.size,f.dtype);return this.makeTensor(p,f.shape,f.dtype)}return l}),s(c.length>1?c:c[0],o,a))),this.state.activeTape.push(i)}keep(t){return t.kept=!0,t}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(t){const n=ET(t),r=new Set(n.map(o=>o.id));for(let o=0;o<this.state.activeScope.track.length;o++){const a=this.state.activeScope.track[o];!a.kept&&!r.has(a.id)&&a.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(o=>{!o.kept&&o.scopeId===s.id&&this.track(o)})}gradients(t,n,r,s=!1){if(D(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const o=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",t));D(o instanceof ln,()=>"The result y returned by f() must be a tensor.");const a=nL(this.state.activeTape,n,o);if(!s&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const i={};i[o.id]=r??fL(o.shape),rL(i,a,c=>this.tidy(c),pL);const u=n.map(c=>i[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const l of c.saved)l.dispose()}),this.state.activeTape=null),{value:o,grads:u}})}customGrad(t){return D(K0(t),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{D(n.every(i=>i instanceof ln),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((i,u)=>{s[u]=i});const o=(i,u)=>(r=t(...n,u),D(r.value instanceof ln,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),D(K0(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(i,u)=>{const c=r.gradFunc(i,u),l=Array.isArray(c)?c:[c];D(l.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),D(l.every(f=>f instanceof ln),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return l.forEach((f,p)=>{d[p]=()=>f}),d};return this.runKernelFunc({forwardFunc:o,backwardsFunc:a,inputs:s})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}readToGPU(t,n){return this.state.tensorInfo.get(t).backend.readToGPU(t,n)}async time(t){const n=Ca(),r=await this.backend.time(t);return r.wallMs=Ca()-n,r}track(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new fk;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}tu.nextTensorId=0;tu.nextVariableId=0;function fL(e){const t=pw(ee(e),"float32");return W.makeTensor(t,e,"float32")}function TT(){const e=GC();if(e._tfengine==null){const t=new MB(e);e._tfengine=new tu(t)}return LB(e._tfengine.ENV),aL(()=>e._tfengine),e._tfengine}const W=TT();function pL(e,t){const n={a:e,b:t};return W.runKernel(Rd,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hL(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yr=Ye();yr.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});yr.registerFlag("IS_BROWSER",()=>hL());yr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");yr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));yr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));yr.registerFlag("PROD",()=>!1);yr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>yr.getBool("DEBUG"));yr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);yr.registerFlag("IS_TEST",()=>!1);yr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>yr.getBool("DEBUG"));yr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);yr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);yr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ba(e,t){let n=e;if(Ss(e))return t==="string"?[]:[e.length];if(IT(e)){const s=e.channels||"RGBA";return[e.height,e.width*s.length]}else if(_T(e))return[e.buffer.size/(t==null?4:od(t))];if(!Array.isArray(e))return[];const r=[];for(;Array.isArray(n)||Ss(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&Ye().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&NT(e,r,[]),r}function NT(e,t,n){if(n=n||[],!Array.isArray(e)&&!Ss(e)){D(t.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}D(t.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`),D(e.length===t[0],()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`);const r=t.slice(1);for(let s=0;s<e.length;++s)NT(e[s],r,n.concat(s))}function pk(e,t,n,r){if(e!=="string_or_numeric"){if(e==null)throw new Error("Expected dtype cannot be null.");if(e!=="numeric"&&e!==t||e==="numeric"&&t==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function T(e,t,n,r="numeric"){if(e instanceof ln)return pk(r,e.dtype,t,n),e;let s=$d(e);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),pk(r,s,t,n),e==null||!Ss(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){const u=e==null?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${u}'`)}const o=Ba(e,s);!Ss(e)&&!Array.isArray(e)&&(e=[e]);const i=s!=="string"?ji(e,s):cd(e,[],!0);return W.makeTensor(i,o,s)}function ih(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((o,a)=>T(o,`${t}[${a}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AT="__op";function B(e){const t=Object.keys(e);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+AT;const s=(...o)=>{W.startScope(n);try{const a=r(...o);return $i(a)&&console.error("Cannot return a Promise inside of tidy."),W.endScope(a),a}catch(a){throw W.endScope(null),a}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mL(e,t){const n=T(e,"real","complex"),r=T(t,"imag","complex");Lr(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return W.runKernel(XC,s)}const Ta=B({complex_:mL});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function La(e,t,n,r){if(r==null)r=$d(e);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(_T(e)||IT(e)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return W.backend.createTensorFromGPUData(e,t||n,r)}if(!Ss(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){es(t);const s=ee(t),o=ee(n);D(s===o,()=>`Based on the provided shape, [${t}], the tensor should have ${s} values but has ${o}`);for(let a=0;a<n.length;++a){const i=n[a],u=a===n.length-1?i!==ee(t.slice(a)):!0;D(n[a]===t[a]||!u,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Ss(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e=r!=="string"?ji(e,r):cd(e,[],!0),W.makeTensor(e,t,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fs(e,t,n){const r=Ba(e,n);return La(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n1={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class zs{static join(t){return new zs(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(r=>Ss(r)?r.buffer:r),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let n=0;for(let r=0;r<t.length;r++){const s=t[r];r!==t.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const o=n+s.byteLength;this.shards.push({buffer:s,start:n,end:o}),n=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,n=isNaN(Number(n))?0:n,t=Math.max(0,t),n=Math.min(this.byteLength,n),n<=t)return new ArrayBuffer(0);const r=this.findShardForByte(t);if(r===-1)throw new Error(`Could not find start shard for byte ${t}`);const s=n-t,o=new ArrayBuffer(s),a=new Uint8Array(o);let i=0;for(let u=r;u<this.shards.length;u++){const c=this.shards[u],d=t+i-c.start,f=i,h=Math.min(n,c.end)-c.start,m=new Uint8Array(c.buffer,d,h-d);if(a.set(m,f),i+=m.length,n<c.end)break}return o}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function n(s){return t<s.start?-1:t>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=gL(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function gL(e,t){let n=0,r=e.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,o=t(e[s]);if(o===0)return s;o<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lh=4;async function yL(e,t){const n=[],r=[],s=Array.isArray(e)?e.map(a=>a.name):Object.keys(e);for(let a=0;a<s.length;++a){const i=s[a],u=Array.isArray(e)?e[a].tensor:e[i];if(u.dtype!=="float32"&&u.dtype!=="int32"&&u.dtype!=="bool"&&u.dtype!=="string"&&u.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${i}': ${u.dtype}`);const c={name:i,shape:u.shape,dtype:u.dtype};if(u.dtype==="string"){const l=new Promise(async d=>{const f=await u.bytes(),p=f.reduce((y,g)=>y+g.length,0)+lh*f.length,h=new Uint8Array(p);let m=0;for(let y=0;y<f.length;y++){const g=f[y],b=new Uint8Array(new Uint32Array([g.length]).buffer);h.set(b,m),m+=lh,h.set(g,m),m+=g.length}d(h)});r.push(l)}else r.push(u.data());t!=null&&(c.group=t),n.push(c)}const o=await Promise.all(r);return{data:vL(o),specs:n}}function DT(e,t){const n=new zs(e),r={};let s,o=0;for(const a of t){const i=a.name,u=a.dtype,c=a.shape,l=ee(c);let d;if("quantization"in a){const f=a.quantization;if(f.dtype==="uint8"||f.dtype==="uint16"){if(!("min"in f&&"scale"in f))throw new Error(`Weight ${a.name} with quantization ${f.dtype} doesn't have corresponding metadata min and scale.`)}else if(f.dtype==="float16"){if(u!=="float32")throw new Error(`Weight ${a.name} is quantized with ${f.dtype} which only supports weights of type float32 not ${u}.`)}else throw new Error(`Weight ${a.name} has unknown quantization dtype ${f.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const p=n1[f.dtype],h=n.slice(o,o+l*p),m=f.dtype==="uint8"?new Uint8Array(h):new Uint16Array(h);if(u==="float32")if(f.dtype==="uint8"||f.dtype==="uint16"){d=new Float32Array(m.length);for(let y=0;y<m.length;y++){const g=m[y];d[y]=g*f.scale+f.min}}else if(f.dtype==="float16")s===void 0&&(s=_L()),d=s(m);else throw new Error(`Unsupported quantization type ${f.dtype} for weight type float32.`);else if(u==="int32"){if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error(`Unsupported quantization type ${f.dtype} for weight type int32.`);d=new Int32Array(m.length);for(let y=0;y<m.length;y++){const g=m[y];d[y]=Math.round(g*f.scale+f.min)}}else throw new Error(`Unsupported dtype in weight '${i}': ${u}`);o+=l*p}else if(u==="string"){const f=ee(a.shape);d=[];for(let p=0;p<f;p++){const h=new Uint32Array(n.slice(o,o+lh))[0];o+=lh;const m=new Uint8Array(n.slice(o,o+h));d.push(m),o+=h}}else{const f=n1[u],p=n.slice(o,o+l*f);if(u==="float32")d=new Float32Array(p);else if(u==="int32")d=new Int32Array(p);else if(u==="bool")d=new Uint8Array(p);else if(u==="complex64"){d=new Float32Array(p);const h=new Float32Array(d.length/2),m=new Float32Array(d.length/2);for(let b=0;b<h.length;b++)h[b]=d[b*2],m[b]=d[b*2+1];const y=Fs(h,c,"float32"),g=Fs(m,c,"float32");r[i]=Ta(y,g),y.dispose(),g.dispose()}else throw new Error(`Unsupported dtype in weight '${i}': ${u}`);o+=l*f}u!=="complex64"&&(r[i]=Fs(d,c,u))}return r}function vL(e){if(e===null)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach(o=>{if(t+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});const r=new Uint8Array(t);let s=0;return n.forEach(o=>{r.set(new Uint8Array(o.buffer),s),s+=o.byteLength}),r.buffer}const t2=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function hk(e){return t2?Buffer.byteLength(e,"utf8"):new Blob([e]).size}function bL(e){if(t2)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let r=0,s=t.length;r<s;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function wL(e){if(t2){const r=Buffer.from(e,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n.set([t.charCodeAt(r)],r);return n.buffer}function SL(e){return zs.join(e)}function mk(e){const t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);const n=e.split(t);return n[n.length-1]}function $T(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return e.signature!=null&&(n.signature=e.signature),e.userDefinedMetadata!=null&&(n.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(n.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(n.initializerSignature=e.initializerSignature),e.trainingConfig!=null&&(n.trainingConfig=e.trainingConfig),n}function RT(e,t,n){const r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(e.trainingConfig!=null&&(r.trainingConfig=e.trainingConfig),e.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return e.signature!=null&&(r.signature=e.signature),e.userDefinedMetadata!=null&&(r.userDefinedMetadata=e.userDefinedMetadata),e.modelInitializer!=null&&(r.modelInitializer=e.modelInitializer),e.initializerSignature!=null&&(r.initializerSignature=e.initializerSignature),r}async function n2(e,t){let n,r;return e.weightsManifest!=null&&([n,r]=await t(e.weightsManifest)),RT(e,n,r)}function Pd(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:hk(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:hk(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:new zs(e.weightData).byteLength}}function FT(e){const t=[];for(const n of e)t.push(...n.weights);return t}function xL(){const e=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let n=1024;n<2048;n++)t[n]=939524096+(n-1024<<13);return t}function kL(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}function IL(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}function _L(){const e=xL(),t=kL(),n=IL();return r=>{const s=new ArrayBuffer(4*r.length),o=new Uint32Array(s);for(let a=0;a<r.length;a++){const i=r[a],u=e[n[i>>10]+(i&1023)]+t[i>>10];o[a]=u}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jt{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return jt.instance==null&&(jt.instance=new jt),jt.instance}static registerSaveRouter(t){jt.getInstance().saveRouters.push(t)}static registerLoadRouter(t){jt.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return jt.getHandlers(t,"save")}static getLoadHandlers(t,n){return jt.getHandlers(t,"load",n)}static getHandlers(t,n,r){const s=[];return(n==="load"?jt.getInstance().loadRouters:jt.getInstance().saveRouters).forEach(a=>{const i=a(t,r);i!==null&&s.push(i)}),s}}const EL=e=>jt.registerSaveRouter(e),CL=e=>jt.registerLoadRouter(e),TL=e=>jt.getSaveHandlers(e),NL=(e,t)=>jt.getLoadHandlers(e,t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r1="tensorflowjs",s1=1,yi="models_store",da="model_info_store";function MT(){if(!Ye().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e=typeof window>"u"?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function o1(e){const t=e.result;t.createObjectStore(yi,{keyPath:"modelPath"}),t.createObjectStore(da,{keyPath:"modelPath"})}class Ri{constructor(t){if(this.indexedDB=MT(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,n){return new Promise((r,s)=>{const o=this.indexedDB.open(r1,s1);o.onupgradeneeded=()=>o1(o),o.onsuccess=()=>{const a=o.result;if(n==null){const i=a.transaction(yi,"readonly"),c=i.objectStore(yi).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return a.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=l=>(a.close(),s(c.error)),i.oncomplete=()=>a.close()}else{n.weightData=zs.join(n.weightData);const i=Pd(n),u=a.transaction(da,"readwrite");let c=u.objectStore(da),l;try{l=c.put({modelPath:this.modelPath,modelArtifactsInfo:i})}catch(f){return s(f)}let d;l.onsuccess=()=>{d=a.transaction(yi,"readwrite");const f=d.objectStore(yi);let p;try{p=f.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:i})}catch(h){return s(h)}p.onsuccess=()=>r({modelArtifactsInfo:i}),p.onerror=h=>{c=u.objectStore(da);const m=c.delete(this.modelPath);m.onsuccess=()=>(a.close(),s(p.error)),m.onerror=y=>(a.close(),s(p.error))}},l.onerror=f=>(a.close(),s(l.error)),u.oncomplete=()=>{d==null?a.close():d.oncomplete=()=>a.close()}}},o.onerror=a=>s(o.error)})}}Ri.URL_SCHEME="indexeddb://";const OT=e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ri.URL_SCHEME)?AL(e.slice(Ri.URL_SCHEME.length)):null;jt.registerSaveRouter(OT);jt.registerLoadRouter(OT);function AL(e){return new Ri(e)}function DL(e){return e.startsWith(Ri.URL_SCHEME)?e.slice(Ri.URL_SCHEME.length):e}class $L{constructor(){this.indexedDB=MT()}async listModels(){return new Promise((t,n)=>{const r=this.indexedDB.open(r1,s1);r.onupgradeneeded=()=>o1(r),r.onsuccess=()=>{const s=r.result,o=s.transaction(da,"readonly"),i=o.objectStore(da).getAll();i.onsuccess=()=>{const u={};for(const c of i.result)u[c.modelPath]=c.modelArtifactsInfo;t(u)},i.onerror=u=>(s.close(),n(i.error)),o.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(t){return t=DL(t),new Promise((n,r)=>{const s=this.indexedDB.open(r1,s1);s.onupgradeneeded=()=>o1(s),s.onsuccess=()=>{const o=s.result,a=o.transaction(da,"readwrite"),i=a.objectStore(da),u=i.get(t);let c;u.onsuccess=()=>{if(u.result==null)return o.close(),r(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const l=i.delete(t),d=()=>{c=o.transaction(yi,"readwrite");const p=c.objectStore(yi).delete(t);p.onsuccess=()=>n(u.result.modelArtifactsInfo),p.onerror=h=>r(u.error)};l.onsuccess=d,l.onerror=f=>(d(),o.close(),r(u.error))}},u.onerror=l=>(o.close(),r(u.error)),a.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}},s.onerror=o=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ko="/",pl="tensorflowjs_models",PT="info",RL="model_topology",FL="weight_specs",ML="weight_data",OL="model_metadata";function BT(e){return{info:[pl,e,PT].join(ko),topology:[pl,e,RL].join(ko),weightSpecs:[pl,e,FL].join(ko),weightData:[pl,e,ML].join(ko),modelMetadata:[pl,e,OL].join(ko)}}function LT(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function PL(e){const t=e.split(ko);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(ko)}function BL(e){return e.startsWith(Fi.URL_SCHEME)?e.slice(Fi.URL_SCHEME.length):e}class Fi{constructor(t){if(!Ye().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=BT(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),s=Pd(t),o=zs.join(t.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,bL(o));const a={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:t.signature!=null?t.signature:void 0,userDefinedMetadata:t.userDefinedMetadata!=null?t.userDefinedMetadata:void 0,modelInitializer:t.modelInitializer!=null?t.modelInitializer:void 0,initializerSignature:t.initializerSignature!=null?t.initializerSignature:void 0,trainingConfig:t.trainingConfig!=null?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:s}}catch{throw LT(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(t==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const o=this.LS.getItem(this.keys.modelMetadata);if(o!=null){const i=JSON.parse(o);n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,i.signature!=null&&(n.signature=i.signature),i.userDefinedMetadata!=null&&(n.userDefinedMetadata=i.userDefinedMetadata),i.modelInitializer!=null&&(n.modelInitializer=i.modelInitializer),i.initializerSignature!=null&&(n.initializerSignature=i.initializerSignature),i.trainingConfig!=null&&(n.trainingConfig=i.trainingConfig)}const a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=wL(a),n}}Fi.URL_SCHEME="localstorage://";const zT=e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Fi.URL_SCHEME)?LL(e.slice(Fi.URL_SCHEME.length)):null;jt.registerSaveRouter(zT);jt.registerLoadRouter(zT);function LL(e){return new Fi(e)}class zL{constructor(){D(Ye().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),D(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const t={},n=pl+ko,r=ko+PT;for(let s=0;s<this.LS.length;++s){const o=this.LS.key(s);if(o.startsWith(n)&&o.endsWith(r)){const a=PL(o);t[a]=JSON.parse(this.LS.getItem(o))}}return t}async removeModel(t){t=BL(t);const n=BT(t);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return LT(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ll="://";class Qn{constructor(){this.managers={}}static getInstance(){return Qn.instance==null&&(Qn.instance=new Qn),Qn.instance}static registerManager(t,n){D(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Ll)&&(t=t.slice(0,t.indexOf(Ll))),D(t.length>0,()=>"scheme must not be an empty string.");const r=Qn.getInstance();D(r.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),r.managers[t]=n}static getManager(t){const n=Qn.getInstance().managers[t];if(n==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return n}static getSchemes(){return Object.keys(Qn.getInstance().managers)}}function hp(e){if(e.indexOf(Ll)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Qn.getSchemes().join(",")}`);return{scheme:e.split(Ll)[0],path:e.split(Ll)[1]}}async function WT(e,t,n=!1){D(e!==t,()=>`Old path and new path are the same: '${e}'`);const r=jt.getLoadHandlers(e);D(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),D(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);const s=r[0],o=jt.getSaveHandlers(t);D(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),D(o.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);const a=o[0],i=hp(e).scheme,u=hp(e).path,c=i===hp(e).scheme,l=await s.load();n&&c&&await Qn.getManager(i).removeModel(u);const d=await a.save(l);return n&&!c&&await Qn.getManager(i).removeModel(u),d.modelArtifactsInfo}async function WL(){const e=Qn.getSchemes(),t={};for(const n of e){const r=await Qn.getManager(n).listModels();for(const s in r){const o=n+Ll+s;t[o]=r[s]}}return t}async function UL(e){const t=hp(e);return Qn.getManager(t.scheme).removeModel(t.path)}async function VL(e,t){return WT(e,t,!1)}async function HL(e,t){return WT(e,t,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jL{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,n){return fetch(t,n)}now(){return performance.now()}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,n){return new TextDecoder(n).decode(t)}setTimeoutCustom(t,n){if(typeof window>"u"||!Ye().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,n);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return hT(t)}}if(Ye().get("IS_BROWSER")){Ye().setPlatform("browser",new jL);try{Qn.registerManager(Fi.URL_SCHEME,new zL)}catch{}try{Qn.registerManager(Ri.URL_SCHEME,new $L)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GL={importFetch:()=>require("node-fetch")};let pv;class qL{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(t,n){return Ye().global.fetch!=null?Ye().global.fetch(t,n):(pv==null&&(pv=GL.importFetch()),pv(t,n))}now(){const t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(t)}decode(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}}Ye().get("IS_NODE")&&!Ye().get("IS_BROWSER")&&Ye().setPlatform("node",new qL);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rt(e,t="float32",n){return t=t||"float32",es(e),new mn(e,t,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KL(e,t){const n=T(e,"x","cast");if(!NB(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:t};return W.runKernel(gm,r,s)}const qt=B({cast_:KL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XL(e){const n={x:T(e,"x","clone","string_or_numeric")};return W.runKernel(Vm,n)}const xa=B({clone_:XL});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UT(e,t=!1){console.log(e.toString(t))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */TT();const YL={buffer:rt,cast:qt,clone:xa,print:UT};iL(YL);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1(){return W}function nt(e,t){return W.tidy(e,t)}function gn(e){ET(e).forEach(n=>n.dispose())}function to(e){return W.keep(e)}function gk(e){return W.setBackend(e)}function QL(){return W.ready()}function VT(e,t,n=1){return W.registerBackend(e,t,n)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZL(e,t){let n=T(e,"a","add"),r=T(t,"b","add");[n,r]=tn(n,r);const s={a:n,b:r};return W.runKernel(Rd,s)}const Oe=B({add_:ZL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JL(e,t){let n=T(e,"a","floorDiv"),r=T(t,"b","floorDiv");[n,r]=tn(n,r);const s={a:n,b:r};return W.runKernel(Bm,s)}const HT=B({floorDiv_:JL});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e7(e,t){let n=T(e,"a","div"),r=T(t,"b","div");if([n,r]=tn(n,r),n.dtype==="int32"&&r.dtype==="int32")return HT(n,r);const s={a:n,b:r},o={};return W.runKernel(Am,s,o)}const tt=B({div_:e7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t7(e,t){let n=T(e,"a","mul"),r=T(t,"b","mul");[n,r]=tn(n,r);const s={a:n,b:r};return W.runKernel(fg,s)}const me=B({mul_:t7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n7(e){const t=T(e,"x","abs");if(t.dtype==="complex64"){const n={x:t};return W.runKernel(YC,n)}else{const n={x:t};return W.runKernel(mw,n)}}const jr=B({abs_:n7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r7(e){const n={x:T(e,"x","acos")};return W.runKernel(nm,n)}const s7=B({acos_:r7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o7(e){const n={x:T(e,"x","acosh")};return W.runKernel(rm,n)}const a7=B({acosh_:o7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i7(e){D(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),D(e.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${e.length}`);const t=e.map((s,o)=>T(s,`tensors${o}`,"addN")),n=t[0];t.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(s=>{if(!ws(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=t;return W.runKernel(sm,r)}const l7=B({addN_:i7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u7(e,t=null,n=!1){const s={x:T(e,"x","all","bool")},o={axis:t,keepDims:n};return W.runKernel(om,s,o)}const c7=B({all_:u7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d7(e,t=null,n=!1){const s={x:T(e,"x","any","bool")},o={axis:t,keepDims:n};return W.runKernel(am,s,o)}const f7=B({any_:d7});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p7(e,t=0){const r={x:T(e,"x","argMax")},s={axis:t};return W.runKernel(gw,r,s)}const h7=B({argMax_:p7});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m7(e,t=0){const r={x:T(e,"x","argMin")},s={axis:t};return W.runKernel(yw,r,s)}const g7=B({argMin_:m7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y7(e){const n={x:T(e,"x","asin")};return W.runKernel(im,n)}const v7=B({asin_:y7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function b7(e){const n={x:T(e,"x","asinh")};return W.runKernel(lm,n)}const w7=B({asinh_:b7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S7(e){const n={x:T(e,"x","atan")};return W.runKernel(um,n)}const x7=B({atan_:S7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k7(e,t){let n=T(e,"a","atan2"),r=T(t,"b","atan2");[n,r]=tn(n,r);const s={a:n,b:r};return W.runKernel(dm,s)}const I7=B({atan2_:k7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _7(e){const n={x:T(e,"x","atanh")};return W.runKernel(cm,n)}const E7=B({atanh_:_7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bu(e,t,n,r,s="NHWC",o){const a=e[3],i=[...t,a],u=wu(s);return xr(e,i,n,o,r,null,null,u)}function Ws(e,t,n,r,s,o,a="channelsLast"){const[i,u]=dd(t);let c;if(a==="channelsLast")c=[i,u,e[3],e[3]];else if(a==="channelsFirst")c=[i,u,e[1],e[1]];else throw new Error(`Unknown dataFormat ${a}`);return xr(e,c,n,r,s,o,!1,a)}function za(e,t,n,r,s,o,a="NDHWC"){const[i,u,c]=i1(t);let l,d;if(a==="NDHWC")d="channelsLast",l=[i,u,c,e[4],e[4]];else if(a==="NCDHW")d="channelsFirst",l=[i,u,c,e[1],e[1]];else throw new Error(`Unknown dataFormat ${a}`);return Gi(e,l,n,r,s,!1,d,o)}function xr(e,t,n,r,s,o,a=!1,i="channelsLast"){let[u,c,l,d]=[-1,-1,-1,-1];if(i==="channelsLast")[u,c,l,d]=e;else if(i==="channelsFirst")[u,d,c,l]=e;else throw new Error(`Unknown dataFormat ${i}`);const[f,p,,h]=t,[m,y]=dd(n),[g,b]=dd(r),w=zl(f,g),S=zl(p,b),{padInfo:I,outHeight:_,outWidth:C}=N7(s,c,l,m,y,w,S,o,i),N=a?h*d:h;let $;return i==="channelsFirst"?$=[u,N,_,C]:i==="channelsLast"&&($=[u,_,C,N]),{batchSize:u,dataFormat:i,inHeight:c,inWidth:l,inChannels:d,outHeight:_,outWidth:C,outChannels:N,padInfo:I,strideHeight:m,strideWidth:y,filterHeight:f,filterWidth:p,effectiveFilterHeight:w,effectiveFilterWidth:S,dilationHeight:g,dilationWidth:b,inShape:e,outShape:$,filterShape:t}}function Gi(e,t,n,r,s,o=!1,a="channelsLast",i){let[u,c,l,d,f]=[-1,-1,-1,-1,-1];if(a==="channelsLast")[u,c,l,d,f]=e;else if(a==="channelsFirst")[u,f,c,l,d]=e;else throw new Error(`Unknown dataFormat ${a}`);const[p,h,m,,y]=t,[g,b,w]=i1(n),[S,I,_]=i1(r),C=zl(p,S),N=zl(h,I),$=zl(m,_),{padInfo:R,outDepth:F,outHeight:U,outWidth:L}=A7(s,c,l,d,g,b,w,C,N,$,i),H=o?y*f:y;let j;return a==="channelsFirst"?j=[u,H,F,U,L]:a==="channelsLast"&&(j=[u,F,U,L,H]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:l,inWidth:d,inChannels:f,outDepth:F,outHeight:U,outWidth:L,outChannels:H,padInfo:R,strideDepth:g,strideHeight:b,strideWidth:w,filterDepth:p,filterHeight:h,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:N,effectiveFilterWidth:$,dilationDepth:S,dilationHeight:I,dilationWidth:_,inShape:e,outShape:j,filterShape:t}}function C7(e,t,n,r,s){r==null&&(r=jT(e,t,n));const o=e[0],a=e[1],i=fd((o-t+2*r)/n+1,s),u=fd((a-t+2*r)/n+1,s);return[i,u]}function T7(e,t,n,r,s,o){s==null&&(s=jT(e,t[0],r[0]));const a=[0,0,0,n];for(let i=0;i<3;i++)e[i]+2*s>=t[i]&&(a[i]=fd((e[i]-t[i]+2*s)/r[i]+1,o));return a}function jT(e,t,n,r=1){const s=zl(t,r);return Math.floor((e[0]*(n-1)-n+s)/2)}function dd(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function i1(e){return typeof e=="number"?[e,e,e]:e}function zl(e,t){return t<=1?e:e+(e-1)*(t-1)}function N7(e,t,n,r,s,o,a,i,u){let c,l,d;if(typeof e=="number"){c={top:e,bottom:e,left:e,right:e,type:e===0?"VALID":"NUMBER"};const p=C7([t,n],o,r,e,i);l=p[0],d=p[1]}else if(e==="same"){l=Math.ceil(t/r),d=Math.ceil(n/s);const f=Math.max(0,(l-1)*r+o-t),p=Math.max(0,(d-1)*s+a-n),h=Math.floor(f/2),m=f-h,y=Math.floor(p/2),g=p-y;c={top:h,bottom:m,left:y,right:g,type:"SAME"}}else if(e==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-o+1)/r),d=Math.ceil((n-a+1)/s);else if(typeof e=="object"){const f=u==="channelsLast"?e[1][0]:e[2][0],p=u==="channelsLast"?e[1][1]:e[2][1],h=u==="channelsLast"?e[2][0]:e[3][0],m=u==="channelsLast"?e[2][1]:e[3][1];c={top:f,bottom:p,left:h,right:m,type:f===0&&p===0&&h===0&&m===0?"VALID":"EXPLICIT"},l=fd((t-o+f+p)/r+1,i),d=fd((n-a+h+m)/s+1,i)}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:c,outHeight:l,outWidth:d}}function A7(e,t,n,r,s,o,a,i,u,c,l){let d,f,p,h;if(e==="valid"&&(e=0),typeof e=="number"){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:e===0?"VALID":"NUMBER"};const y=T7([t,n,r,1],[i,u,c],1,[s,o,a],e,l);f=y[0],p=y[1],h=y[2]}else if(e==="same"){f=Math.ceil(t/s),p=Math.ceil(n/o),h=Math.ceil(r/a);const m=(f-1)*s+i-t,y=(p-1)*o+u-n,g=(h-1)*a+c-r,b=Math.floor(m/2),w=m-b,S=Math.floor(y/2),I=y-S,_=Math.floor(g/2),C=g-_;d={top:S,bottom:I,left:_,right:C,front:b,back:w,type:"SAME"}}else throw Error(`Unknown padding parameter: ${e}`);return{padInfo:d,outDepth:f,outHeight:p,outWidth:h}}function fd(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function uh(e){const[t,n,r]=dd(e);return t===1&&n===1&&r===1}function xs(e,t){return uh(e)||uh(t)}function nu(e){return dd(e).every(t=>t>0)}function wu(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function Us(e,t,n){if(n!=null){if(typeof t=="string")throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if(typeof t=="number")D(sd(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else if(typeof t=="object")t.forEach(r=>{r.forEach(s=>{D(sd(s),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${e}: Unknown padding parameter: ${t}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D7(e,t){const r={x:T(e,"x","reshape","string_or_numeric")},s={shape:t};return W.runKernel(Ow,r,s)}const oe=B({reshape_:D7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $7(e,t,n,r,s){const o=T(e,"x","avgPool","float32"),a=1;D(xs(n,a),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`);let i=o,u=!1;o.rank===3&&(u=!0,i=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),D(i.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${i.rank}.`),Us("avgPool",r,s);const c={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:s};let d=W.runKernel(fm,c,l);return d=qt(d,o.dtype),u?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const GT=B({avgPool_:$7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R7(e,t,n,r,s,o="NDHWC"){const a=T(e,"x","avgPool3d","float32");let i=a,u=!1;a.rank===4&&(u=!0,i=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),D(i.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${i.rank}.`),D(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),D(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Us("avgPool3d",r,s);const c={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:s,dataFormat:o};let d=W.runKernel(vw,c,l);return d=qt(d,i.dtype),u?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const F7=B({avgPool3d_:R7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M7(e,t=0){D(e.length>=1,()=>"Pass at least one tensor to concat");const n=ih(e,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),n.length===1)return xa(n[0]);const r=n,s={axis:t};return W.runKernel(Sw,r,s)}const $n=B({concat_:M7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O7(e,t,n=!1,r=!1){let s=T(e,"a","matMul"),o=T(t,"b","matMul");[s,o]=tn(s,o);const a={a:s,b:o},i={transposeA:n,transposeB:r};return W.runKernel(pm,a,i)}const St=B({matMul_:O7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P7(e){const n={x:T(e,"x","sigmoid","float32")};return W.runKernel(Pg,n)}const Ii=B({sigmoid_:P7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B7(e,t,n){const r=T(e,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},o={begin:t,size:n};return W.runKernel(zw,s,o)}const Ke=B({slice_:B7});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L7(e){const n={x:T(e,"x","tanh","float32")};return W.runKernel(Kg,n)}const l1=B({tanh_:L7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function z7(e,t,n,r,s,o){const a=T(e,"forgetBias","basicLSTMCell"),i=T(t,"lstmKernel","basicLSTMCell"),u=T(n,"lstmBias","basicLSTMCell"),c=T(r,"data","basicLSTMCell"),l=T(s,"c","basicLSTMCell"),d=T(o,"h","basicLSTMCell"),f=$n([c,d],1),p=St(f,i),h=Oe(p,u),m=h.shape[0],y=h.shape[1]/4,g=[m,y],b=Ke(h,[0,0],g),w=Ke(h,[0,y],g),S=Ke(h,[0,y*2],g),I=Ke(h,[0,y*3],g),_=Oe(me(Ii(b),l1(w)),me(l,Ii(Oe(a,S)))),C=me(l1(_),Ii(I));return[_,C]}const W7=B({basicLSTMCell_:z7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function U7(e,t,n){const r=T(e,"x","batchToSpaceND"),s=t.reduce((i,u)=>i*u);D(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),D(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),D(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${s}`);const o={x:r},a={blockShape:t,crops:n};return W.runKernel(bw,o,a)}const qT=B({batchToSpaceND_:U7});function V7(e){let t;return e.rank===0||e.rank===1?t=oe(e,[1,1,1,e.size]):e.rank===2?t=oe(e,[1,1,e.shape[0],e.shape[1]]):e.rank===3?t=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]):t=e,t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H7(e,t,n,r,s,o){o==null&&(o=.001);const a=T(e,"x","batchNorm"),i=T(t,"mean","batchNorm"),u=T(n,"variance","batchNorm");let c;s!=null&&(c=T(s,"scale","batchNorm"));let l;r!=null&&(l=T(r,"offset","batchNorm")),D(i.rank===u.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(l==null||i.rank===l.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(c==null||i.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const f={x:V7(a),scale:c,offset:l,mean:i,variance:u},p={varianceEpsilon:o},h=W.runKernel(Lm,f,p);return oe(h,a.shape)}const Jg=B({batchNorm_:H7});function j7(e,t,n,r,s,o){const a=T(e,"x","batchNorm"),i=T(t,"mean","batchNorm"),u=T(n,"variance","batchNorm");let c;s!=null&&(c=T(s,"scale","batchNorm"));let l;return r!=null&&(l=T(r,"offset","batchNorm")),D(a.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${a.rank}.`),D(i.rank===2||i.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${i.rank}.`),D(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),l!=null&&D(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${l.rank}.`),Jg(a,i,u,l,c,o)}const G7=B({batchNorm2d_:j7});function q7(e,t,n,r,s,o){const a=T(e,"x","batchNorm"),i=T(t,"mean","batchNorm"),u=T(n,"variance","batchNorm");let c;s!=null&&(c=T(s,"scale","batchNorm"));let l;return r!=null&&(l=T(r,"offset","batchNorm")),D(a.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${a.rank}.`),D(i.rank===3||i.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${i.rank}.`),D(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),l!=null&&D(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${l.rank}.`),Jg(a,i,u,l,c,o)}const K7=B({batchNorm3d_:q7});function X7(e,t,n,r,s,o){const a=T(e,"x","batchNorm"),i=T(t,"mean","batchNorm"),u=T(n,"variance","batchNorm");let c;s!=null&&(c=T(s,"scale","batchNorm"));let l;return r!=null&&(l=T(r,"offset","batchNorm")),D(a.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${a.rank}.`),D(i.rank===4||i.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${i.rank}.`),D(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${u.rank}.`),c!=null&&D(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),l!=null&&D(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${l.rank}.`),Jg(a,i,u,l,c,o)}const Y7=B({batchNorm4d_:X7});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q7(e,t,n){const r=T(e,"x","bincount"),s=T(t,"weights","bincount");D(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),D(n>=0,()=>`size must be non-negative, but got ${n}.`),D(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const o={x:r,weights:s},a={size:n};return W.runKernel(hm,o,a)}const KT=B({bincount_:Q7});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z7(e,t){const n=T(e,"x","bitwiseAnd"),r=T(t,"y","bitwiseAnd");if(!ws(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return W.runKernel(mm,s)}const J7=B({bitwiseAnd_:Z7});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e9(e,t){const n=T(e,"s0","broadcastArgs","int32"),r=T(t,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return W.runKernel(ww,s)}const t9=B({broadcastArgs_:e9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n9(e,t){let n=T(e,"broadcastTo","x");const r=n.shape;if(es(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const c=n.shape.slice();for(;c.length<t.length;)c.unshift(1);n=oe(n,c)}const s=n.shape,o=Array.from(t);for(let c=t.length-1;c>=0;c--)if(s[c]===t[c])o[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(o.map((c,l)=>c>1?l:-1).filter(c=>c>=0).length===0)return xa(n);const i={x:n},u={reps:o};return W.runKernel(Md,i,u)}const Cc=B({broadcastTo_:n9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r9(e){const n={x:T(e,"x","ceil","float32")};return W.runKernel(ym,n)}const s9=B({ceil_:r9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bd(e,t,n){es(e),n=n||$d(t);const r={shape:e,value:t,dtype:n};return W.runKernel(Cw,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function o9(e,t,n){const r=T(e,"x","clipByValue");if(D(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return Bd(r.shape,t,r.dtype);const s={x:r},o={clipValueMin:t,clipValueMax:n};return W.runKernel(Fd,s,o)}const XT=B({clipByValue_:o9});function a9(e){return $n(e,0)}const i9=B({concat1d_:a9});function l9(e,t){return $n(e,t)}const u9=B({concat2d_:l9});function c9(e,t){return $n(e,t)}const d9=B({concat3d_:c9});function f9(e,t){return $n(e,t)}const p9=B({concat4d_:f9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h9(e,t,n,r,s="NHWC",o=[1,1],a){const i=T(e,"x","conv2d","float32"),u=T(t,"filter","conv2d","float32");let c=i,l=!1;i.rank===3&&(l=!0,c=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),D(u.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${u.rank}.`),Us("conv2d",r,a);const d=s==="NHWC"?c.shape[3]:c.shape[1];D(d===u.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${u.shape[2]}.`),D(xs(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),D(nu(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),D(nu(n),()=>"Error in conv2D: Strides should be larger than 0.");const f={x:c,filter:u},p={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:a},h=W.runKernel(vm,f,p);return l?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const ey=B({conv2d_:h9});function m9(e,t,n,r,s="NWC",o=1,a){const i=T(e,"x","conv1d"),u=T(t,"filter","conv1d");let c=i,l=!1;i.rank===2&&(l=!0,c=oe(i,[1,i.shape[0],i.shape[1]])),D(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),D(u.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${u.rank}.`),Us("conv1d",r,a),D(c.shape[2]===u.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${u.shape[1]}.`),D(xs(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),D(nu(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),D(nu(n),()=>"Error in conv1D: Stride should be larger than 0."),D(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=oe(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=oe(c,[c.shape[0],1,c.shape[1],c.shape[2]]),y=ey(f,d,[1,n],r,"NHWC",[1,o],a);return l?oe(y,[y.shape[2],y.shape[3]]):oe(y,[y.shape[0],y.shape[2],y.shape[3]])}const g9=B({conv1d_:m9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y9(e,t,n,r,s,o="NHWC",a){D(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let i=e,u=t,c=!1;t.rank===3&&(c=!0,u=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]),i=[1,e[0],e[1],e[2]]),D(i.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${i.length}.`),D(u.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${u.rank}`),D(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const l=o==="NHWC"?i[3]:i[1],d=o==="NHWC"?u.shape[3]:u.shape[1];D(l===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[2]}.`),D(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Us("conv2dDerInput",s,a);const f={dy:u,filter:n},p={strides:r,pad:s,dataFormat:o,dimRoundingMode:a,inputShape:i},h=W.runKernel(bm,f,p);return c?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const YT=B({conv2DBackpropInput_:y9});function v9(e,t,n,r,s,o){const a=T(e,"x","conv2dTranspose"),i=T(t,"filter","conv2dTranspose");return YT(n,a,i,r,s,"NHWC",o)}const b9=B({conv2dTranspose_:v9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function w9(e,t,n,r,s="NDHWC",o=[1,1,1]){const a=T(e,"x","conv3d"),i=T(t,"filter","conv3d");let u=a,c=!1;a.rank===4&&(c=!0,u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),D(u.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${u.rank}.`),D(i.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${i.rank}.`),D(u.shape[4]===i.shape[3],()=>`Error in conv3d: depth of input (${u.shape[4]}) must match input depth for filter ${i.shape[3]}.`),D(xs(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),D(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),D(nu(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),D(nu(n),()=>"Error in conv3D: Strides should be larger than 0.");const l={x:u,filter:i},d={strides:n,pad:r,dataFormat:s,dilations:o},f=W.runKernel(wm,l,d);return c?oe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const S9=B({conv3d_:w9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x9(e,t,n,r,s){D(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,a=t,i=!1;t.rank===4&&(i=!0,a=oe(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const u=o[4],c=a.shape[4];D(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),D(a.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${a.rank}`),D(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),D(u===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[3]}.`),D(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const l={dy:a,filter:n},d={pad:s,strides:r,inputShape:o},f=W.runKernel(Sm,l,d);return i?oe(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const k9=B({conv3DBackpropInput_:x9});function I9(e,t,n,r,s){const o=T(e,"x","conv3dTranspose"),a=T(t,"filter","conv3dTranspose");return k9(n,o,a,r,s)}const _9=B({conv3dTranspose_:I9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function E9(e){const n={x:T(e,"x","cos","float32")};return W.runKernel(xm,n)}const C9=B({cos_:E9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T9(e){const n={x:T(e,"x","cosh","float32")};return W.runKernel(km,n)}const N9=B({cosh_:T9});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A9(e,t=0,n=!1,r=!1){const o={x:T(e,"x","cumprod")},a={axis:t,exclusive:n,reverse:r};return W.runKernel(Im,o,a)}const D9=B({cumprod_:A9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $9(e,t=0,n=!1,r=!1){const o={x:T(e,"x","cumsum")},a={axis:t,exclusive:n,reverse:r};return W.runKernel(_m,o,a)}const R9=B({cumsum_:$9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F9(e,t,n,r=!1){const s=T(e,"x","denseBincount"),o=T(t,"weights","denseBincount");D(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),D(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),D(n>=0,()=>`size must be non-negative, but got ${n}.`),D(o.size===s.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${o.shape}.`);const a={x:s,weights:o},i={size:n,binaryOutput:r};return W.runKernel(kw,a,i)}const M9=B({denseBincount_:F9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O9(e,t,n="NHWC"){const r=T(e,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],a=n==="NHWC"?r.shape[3]:r.shape[1];D(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),D(s*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${t}  for depthToSpace with input shape
    ${r.shape}`),D(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t} for depthToSpace with input shape
        ${r.shape}`),D(a%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${r.shape}`);const i={x:r},u={blockSize:t,dataFormat:n};return W.runKernel(Cm,i,u)}const P9=B({depthToSpace_:O9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B9(e,t,n,r,s="NHWC",o=[1,1],a){const i=T(e,"x","depthwiseConv2d","float32"),u=T(t,"filter","depthwiseConv2d","float32");let c=i,l=!1;i.rank===3&&(l=!0,c=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),D(u.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${u.rank}.`);const d=s==="NHWC"?c.shape[3]:c.shape[1];D(d===u.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${u.shape[2]}.`),Us("depthwiseConv2d",r,a);const f={x:c,filter:u},p={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:a},h=W.runKernel(Tm,f,p);return l?oe(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const r2=B({depthwiseConv2d_:B9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L9(e){const n={x:T(e,"x","diag")};return W.runKernel(Iw,n)}const z9=B({diag_:L9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W9(e,t,n,r,s=[1,1],o="NHWC"){const a=T(e,"x","dilation2d"),i=T(t,"filter","dilation2d");D(a.rank===3||a.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),D(i.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${i.rank}.`),D(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let u=a,c=!1;a.rank===3&&(u=oe(a,[1,a.shape[0],a.shape[1],a.shape[2]]),c=!0),D(u.shape[3]===i.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${u.shape[3]} vs ${i.shape[2]}`);const l={x:u,filter:i},d={strides:n,pad:r,dilations:s},f=W.runKernel(Nm,l,d);return c?oe(f,[f.shape[1],f.shape[2],f.shape[3]]):f}const U9=B({dilation2d_:W9});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ch(e,t){const n=e.length,r=[];for(let s=0;s<n;s++){const o=n-1-s,a=e[o]||1;(t[t.length-1-s]||1)>1&&a===1&&r.unshift(o)}return r}function V9(e,t){const n=[];for(let r=0;r<t.length;r++){const s=e[e.length-r-1],o=t.length-r-1,a=t[o];(s==null||s===1&&a>1)&&n.unshift(o)}return n}function At(e,t){const n=Math.max(e.length,t.length),r=new Array(n);for(let s=0;s<n;s++){let o=e[e.length-s-1];o==null&&(o=1);let a=t[t.length-s-1];if(a==null&&(a=1),o===1)r[n-s-1]=a;else if(a===1)r[n-s-1]=o;else if(o!==a){const i=`Operands could not be broadcast together with shapes ${e} and ${t}.`;throw Error(i)}else r[n-s-1]=o}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H9(e,t){let n=T(e,"a","equal","string_or_numeric"),r=T(t,"b","equal","string_or_numeric");[n,r]=tn(n,r),At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(Rm,s)}const QT=B({equal_:H9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j9(e,t,n){const r=T(t,"a","where"),s=T(n,"b","where"),o=T(e,"condition","where","bool"),a=At(At(o.shape,r.shape),s.shape),i=Cc(o,a),u=Cc(r,a),c=Cc(s,a),l={condition:i,t:u,e:c};return W.runKernel(Lw,l)}const ka=B({where_:j9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G9(e){const n={x:T(e,"x","zerosLike")};return W.runKernel(Zw,n)}const Kr=B({zerosLike_:G9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q9(e,t){let n=T(e,"a","div"),r=T(t,"b","div");[n,r]=tn(n,r);const s=tt(n,r),o=Kr(s),a=QT(r,o);return ka(a,o,s)}const K9=B({divNoNan_:q9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X9(e,t){const n=T(e,"t1","dot"),r=T(t,"t2","dot");D((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];if(D(s===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${o}.`),n.rank===1&&r.rank===1){const a=oe(n,[1,-1]),i=oe(r,[-1,1]),u=St(a,i);return oe(u,[])}else if(n.rank===1&&r.rank===2){const a=oe(n,[1,-1]),i=oe(r,[r.shape[0],r.shape[1]]),u=St(a,i);return oe(u,[u.size])}else if(n.rank===2&&r.rank===1){const a=oe(r,[-1,1]),i=St(n,a);return oe(i,[i.size])}else{const a=oe(r,[r.shape[0],r.shape[1]]);return St(n,a)}}const Y9=B({dot_:X9});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q9(e,...t){const n=t.map((s,o)=>T(s,`tensors${o}`,"einsum")),r={equation:e};return W.runKernel(eT,n,r)}const hl=B({einsum_:Q9});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z9(e){const n={x:T(e,"x","elu","float32")};return W.runKernel(Dm,n)}const ZT=B({elu_:Z9});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function J9(e,t){const n=T(e,"x","ensureShape","string_or_numeric");if(!EB(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}const ez=B({ensureShape_:J9});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tz(e){let t=T(e,"x","erf");D(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=qt(t,"float32"));const n={x:t};return W.runKernel($m,n)}const nz=B({erf_:tz});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JT(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function rz(e,t,n){const r=e.length+t.length,s=[];let o=0,a=0;for(let i=0;i<r;i++)n.indexOf(i)===-1?s.push(e[o++]):s.push(t[a++]);return s}function sr(e,t){const n=[],r=e.length;for(let o=0;o<r;o++)t.indexOf(o)===-1&&n.push(e[o]);const s=t.map(o=>e[o]);return[n,s]}function Rn(e,t){const n=t.map(r=>1);return rz(e,n,t)}function or(e,t,n){D(JT(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function ts(e,t){if(JT(e,t))return null;const n=[];for(let r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(r=>n.push(r)),n}function ty(e){return e.map((t,n)=>[n,t]).sort((t,n)=>t[1]-n[1]).map(t=>t[0])}function ar(e,t){const n=[];for(let r=t-e;r<t;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sz(e,t=null,n=!1){const s={x:T(e,"x","max")},o={reductionIndices:t,keepDims:n};return W.runKernel(rg,s,o)}const Wl=B({max_:sz});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oz(e,t=null,n=!1){const s={x:T(e,"x","min")},o={axis:t,keepDims:n};return W.runKernel(ig,s,o)}const u1=B({min_:oz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function az(e,t){let n=T(e,"base","pow"),r=T(t,"exp","pow");[n,r]=tn(n,r);const s={a:n,b:r};return W.runKernel(bg,s)}const pd=B({pow_:az});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lt(e,t){if((Ss(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Ss(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return La(e,[],[],t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iz(e){const n={x:T(e,"x","sqrt","float32")};return W.runKernel(Lg,n)}const Fo=B({sqrt_:iz});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lz(e){const t=T(e,"x","square"),n={};return W.runKernel("Square",{x:t},n)}const Ms=B({square_:lz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uz(e,t=null,n=!1){let r=T(e,"x","sum");r.dtype==="bool"&&(r=qt(r,"int32"));const s={x:r},o={axis:t,keepDims:n};return W.runKernel(zg,s,o)}const Ft=B({sum_:uz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cz(e,t="euclidean",n=null,r=!1){e=T(e,"x","norm");const s=eN(e,t,n);let o=s.shape;if(r){const a=Kt(n,e.shape);o=Rn(s.shape,a)}return oe(s,o)}function eN(e,t,n=null){if(e.rank===0)return jr(e);if(e.rank!==1&&n===null)return eN(oe(e,[-1]),t,n);if(e.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(t===1)return Ft(jr(e),n);if(t===1/0)return Wl(jr(e),n);if(t===-1/0)return u1(jr(e),n);if(t==="euclidean"||t===2)return Fo(Ft(pd(jr(e),lt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&n.length===2){if(t===1)return Wl(Ft(jr(e),n[0]),n[1]-1);if(t===1/0)return Wl(Ft(jr(e),n[1]),n[0]);if(t===-1/0)return u1(Ft(jr(e),n[1]),n[0]);if(t==="fro"||t==="euclidean")return Fo(Ft(Ms(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const ny=B({norm_:cz});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dz(e,t=null,n=!1){return ny(e,"euclidean",t,n)}const fz=B({euclideanNorm_:dz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pz(e){const n={x:T(e,"x","exp")};return W.runKernel(Fm,n)}const Mo=B({exp_:pz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hz(e,t=0){const n=T(e,"x","expandDims","string_or_numeric");D(t<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:t};return W.runKernel(Ew,r,s)}const Zs=B({expandDims_:hz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mz(e){const n={x:T(e,"x","expm1")};return W.runKernel(Mm,n)}const gz=B({expm1_:mz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yz(e,t){const n=T(e,"x","tile","string_or_numeric");D(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);const r={x:n},s={reps:t};return W.runKernel(Md,r,s)}const Tc=B({tile_:yz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vz(e,t,n,r="float32"){t==null&&(t=e);const s=rt([e,t],r),o=e<=t?e:t;for(let i=0;i<o;++i)s.set(1,i,i);const a=oe(s.toTensor(),[e,t]);if(n==null)return a;if(n.length===1)return Tc(Zs(a,0),[n[0],1,1]);if(n.length===2)return Tc(Zs(Zs(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return Tc(Zs(Zs(Zs(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const tN=B({eye_:vz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bz(e){const n={x:T(e,"x","floor","float32")};return W.runKernel(Pm,n)}const nN=B({floor_:bz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wz(e,t,n=0,r=0){const s=T(e,"x","gather"),o=T(t,"indices","gather","int32"),a={x:s,indices:o},i={axis:n,batchDims:r};return W.runKernel(Tw,a,i)}const rN=B({gather_:wz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sz(e,t){let n=T(e,"a","greater","string_or_numeric"),r=T(t,"b","greater","string_or_numeric");[n,r]=tn(n,r),At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(Wm,s)}const ry=B({greater_:Sz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xz(e,t){let n=T(e,"a","greaterEqual","string_or_numeric"),r=T(t,"b","greaterEqual","string_or_numeric");[n,r]=tn(n,r),At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(Um,s)}const sN=B({greaterEqual_:xz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kz(e){const n={input:T(e,"input","imag")};return W.runKernel(rT,n)}const sy=B({imag_:kz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iz(e){const n={x:T(e,"x","isFinite")};return W.runKernel(Hm,n)}const _z=B({isFinite_:Iz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ez(e){const n={x:T(e,"x","isInf")};return W.runKernel(jm,n)}const Cz=B({isInf_:Ez});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tz(e){const n={x:T(e,"x","isNaN")};return W.runKernel(Gm,n)}const Nz=B({isNaN_:Tz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Az(e,t=.2){const r={x:T(e,"x","leakyRelu")},s={alpha:t};return W.runKernel(qm,r,s)}const oN=B({leakyRelu_:Az});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dz(e,t){let n=T(e,"a","less","string_or_numeric"),r=T(t,"b","less","string_or_numeric");[n,r]=tn(n,r),At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(Km,s)}const c1=B({less_:Dz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $z(e,t){let n=T(e,"a","lessEqual","string_or_numeric"),r=T(t,"b","lessEqual","string_or_numeric");[n,r]=tn(n,r),At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(Xm,s)}const s2=B({lessEqual_:$z});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rz(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:e,stop:t,num:n};return W.runKernel(Ym,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fz(e,t=5,n=1,r=1,s=.5){const o=T(e,"x","localResponseNormalization");D(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),D(sd(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let a=o,i=!1;o.rank===3&&(i=!0,a=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const u={x:a},c={depthRadius:t,bias:n,alpha:r,beta:s},l=W.runKernel(ng,u,c);return i?oe(l,[l.shape[1],l.shape[2],l.shape[3]]):l}const Mz=B({localResponseNormalization_:Fz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oz(e){const n={x:T(e,"x","log","float32")};return W.runKernel(Qm,n)}const hd=B({log_:Oz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pz(e){const n={x:T(e,"x","log1p")};return W.runKernel(Zm,n)}const aN=B({log1p_:Pz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bz(e,t){D(K0(e),()=>"The f passed in variableGrads(f) must be a function"),D(t==null||Array.isArray(t)&&t.every(c=>c instanceof ah),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=t!=null;if(!n){t=[];for(const c in W.registeredVariables)t.push(W.registeredVariables[c])}const r=n?t.filter(c=>!c.trainable):null,s=t.length;t=t.filter(c=>c.trainable),D(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const o=!0,{value:a,grads:i}=W.gradients(e,t,null,o);D(i.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),D(a.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${a.rank} tensor`);const u={};return t.forEach((c,l)=>{i[l]!=null&&(u[c.name]=i[l])}),r!=null&&r.forEach(c=>u[c.name]=null),{value:a,grads:u}}function Oo(e){return W.customGrad(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lz(e){const n={x:T(e,"x","neg")};return W.runKernel($w,n)}const oo=B({neg_:Lz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zz(e){const n={x:T(e,"x","softplus")};return W.runKernel(Bg,n)}const iN=B({softplus_:zz});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wz(e){const t=T(e,"x","logSigmoid");return Oo(r=>({value:oo(iN(oo(r))),gradFunc:a=>me(a,Ii(oo(r)))}))(t)}const Uz=B({logSigmoid_:Wz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vz(e,t){let n=T(e,"a","sub"),r=T(t,"b","sub");[n,r]=tn(n,r);const s={a:n,b:r};return W.runKernel(Gg,s)}const Xe=B({sub_:Vz});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hz(e,t=-1){const n=T(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Oo((s,o)=>{const i=Wl(s,t,!0),u=Xe(s,i),c=Xe(qt(u,"float32"),hd(Ft(Mo(u),t,!0)));return o([c]),{value:c,gradFunc:(d,f)=>{const[p]=f,h=!0,m=Mo(p);return Xe(d,me(Ft(d,t,h),m))}}})(n)}const jz=B({logSoftmax_:Hz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gz(e,t=null,n=!1){const r=T(e,"x","logSumExp"),s=Kt(t,r.shape),o=Wl(r,s,!0),a=Xe(r,o),i=Mo(a),u=Ft(i,s),c=hd(u),l=Oe(oe(o,c.shape),c);if(n){const d=Rn(l.shape,s);return oe(l,d)}return l}const lN=B({logSumExp_:Gz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qz(e,t){const n=T(e,"a","logicalAnd","bool"),r=T(t,"b","logicalAnd","bool");At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(Jm,s)}const dh=B({logicalAnd_:qz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kz(e){const n={x:T(e,"x","logicalNot","bool")};return W.runKernel(eg,n)}const uN=B({logicalNot_:Kz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xz(e,t){const n=T(e,"a","logicalOr","bool"),r=T(t,"b","logicalOr","bool");At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(tg,s)}const cN=B({logicalOr_:Xz});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yz(e,t){const n=T(e,"a","logicalXor","bool"),r=T(t,"b","logicalXor","bool");return At(n.shape,r.shape),dh(cN(e,t),uN(dh(e,t)))}const Qz=B({logicalXor_:Yz});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pf=2147483648;function Zz(e,t,n="left"){const r=T(e,"sortedSequence","searchSorted"),s=T(t,"values","searchSorted"),o=r.shape[r.shape.length-1],a=s.shape[s.shape.length-1],i=oe(r,[-1,o]),u=oe(s,[-1,a]);if(i.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(i.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ee(u.shape)>=Pf)throw new Error(`values tensor size must less than ${Pf}`);if(i.shape[1]>=Pf)throw new Error(`trailing dim_size must less than ${Pf} for int32 output type, was ${i.shape[1]}`);const c={sortedSequence:i,values:u},l={side:n};return W.runKernel($g,c,l)}const o2=B({searchSorted_:Zz});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jz(e,t){return o2(e,t,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eW(e,t,n,r,s){const o=T(e,"x","maxPool"),a=1;let i=o,u=!1;o.rank===3&&(u=!0,i=oe(o,[1,o.shape[0],o.shape[1],o.shape[2]])),D(i.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.rank}.`),D(xs(n,a),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${a}'`),Us("maxPool",r,s);const c={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:s},d=W.runKernel(og,c,l);return u?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const dN=B({maxPool_:eW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tW(e,t=[1,1,1],n,r,s,o="NDHWC"){const a=T(e,"x","maxPool3d");let i=a,u=!1;a.rank===4&&(u=!0,i=oe(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),D(i.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${i.rank}.`),D(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),Us("maxPool3d",r,s);const c={x:i},l={filterSize:t,strides:n,pad:r,dimRoundingMode:s,dataFormat:o},d=W.runKernel(Aw,c,l);return u?oe(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const nW=B({maxPool3d_:tW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rW(e,t,n,r,s=!1){const a={x:T(e,"x","maxPoolWithArgmax")},i={filterSize:t,strides:n,pad:r,includeBatchInIndex:s},u=W.runKernel(Dw,a,i);return{result:u[0],indexes:u[1]}}const sW=B({maxPoolWithArgmax_:rW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oW(e,t){let n=T(e,"a","maximum"),r=T(t,"b","maximum");[n,r]=tn(n,r),n.dtype==="bool"&&(n=qt(n,"int32"),r=qt(r,"int32")),At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(sg,s)}const fN=B({maximum_:oW});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aW(e,t=null,n=!1){const s={x:T(e,"x","mean")},o={axis:t,keepDims:n};return W.runKernel(ag,s,o)}const fh=B({mean_:aW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ru(e,t="float32"){if(es(e),t==="complex64"){const r=ru(e,"float32"),s=ru(e,"float32");return Ta(r,s)}const n=Vn(ee(e),t);return W.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vi(e,t="float32"){if(es(e),t==="complex64"){const r=vi(e,"float32"),s=ru(e,"float32");return Ta(r,s)}const n=pw(ee(e),t);return W.makeTensor(n,e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iW(e,t,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(e===void 0)return[];let r=T(e,"x","meshgrid",e instanceof ln?e.dtype:"float32");if(t===void 0)return[r];let s=T(t,"y","meshgrid",t instanceof ln?t.dtype:"float32");const o=ee(r.shape),a=ee(s.shape);return n==="xy"?(r=oe(r,[1,-1]),s=oe(s,[-1,1]),[St(vi([a,1],r.dtype),r),St(s,vi([1,o],s.dtype))]):(r=oe(r,[-1,1]),s=oe(s,[1,-1]),[St(r,vi([1,a],r.dtype)),St(vi([o,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lW(e,t){let n=T(e,"a","minimum"),r=T(t,"b","minimum");[n,r]=tn(n,r),n.dtype==="bool"&&(n=qt(n,"int32"),r=qt(r,"int32")),At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(lg,s)}const ph=B({minimum_:lW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uW(e,t,n){D(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=T(e,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");D(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);const s=n==="reflect"?1:0;for(let i=0;i<r.rank;i++)D(t[i].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),D(t[i][0]>=0&&t[i][0]<=r.shape[i]-s&&t[i][1]>=0&&t[i][1]<=r.shape[i]-s,()=>`Padding in dimension ${i} cannot be greater than or equal to ${r.shape[i]-s} or less than 0 for input of shape ${r.shape}`);const o={paddings:t,mode:n},a={x:r};return W.runKernel(ug,a,o)}const cW=B({mirrorPad_:uW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dW(e,t){let n=T(e,"a","mod"),r=T(t,"b","mod");[n,r]=tn(n,r);const s={a:n,b:r};return W.runKernel(cg,s)}const fW=B({mod_:dW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pW(e,t=null,n=!1){e=T(e,"x","moments");const r=Kt(t,e.shape),s=fh(e,r,n);let o=s.shape;n||(o=Rn(s.shape,r));const a=Ms(Xe(qt(e,"float32"),oe(s,o))),i=fh(a,r,n);return{mean:s,variance:i}}const hW=B({moments_:pW});function mW(e,t,n,r){const s=T(t,"data","multiRNNCell"),o=ih(n,"c","multiRNNCell"),a=ih(r,"h","multiRNNCell");let i=s;const u=[];for(let d=0;d<e.length;d++){const f=e[d](i,o[d],a[d]);u.push(f[0]),u.push(f[1]),i=f[1]}const c=[],l=[];for(let d=0;d<u.length;d+=2)c.push(u[d]),l.push(u[d+1]);return[c,l]}const gW=B({multiRNNCell_:mW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yW(e,t,n,r=!1){const s=T(e,"logits","multinomial"),o=s.size,a=s.rank;if(o<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${o}.`);if(a>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${a}`);n=n||Math.random();const u={logits:a===1?oe(s,[1,-1]):s},c={numSamples:t,seed:n,normalized:r},l=W.runKernel(dg,u,c);return a===1?oe(l,[l.size]):l}const vW=B({multinomial_:yW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bW(e,t){let n=T(e,"a","notEqual","string_or_numeric"),r=T(t,"b","notEqual","string_or_numeric");[n,r]=tn(n,r),At(n.shape,r.shape);const s={a:n,b:r};return W.runKernel(pg,s)}const pN=B({notEqual_:bW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wW(e,t,n=1,r=0,s="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const a={indices:T(e,"indices","oneHot","int32")},i={dtype:s,depth:t,onValue:n,offValue:r};return W.runKernel(yg,a,i)}const SW=B({oneHot_:wW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xW(e){const n={x:T(e,"x","onesLike")};return W.runKernel(Rw,n)}const kW=B({onesLike_:xW});function IW(e,t){const n=T(e,"v1","outerProduct"),r=T(t,"v2","outerProduct");D(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=oe(n,[-1,1]),o=oe(r,[1,-1]);return St(s,o)}const _W=B({outerProduct_:IW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EW(e,t,n=0){const r=T(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:t,constantValue:n},o={x:r};return W.runKernel(vg,o,s)}const Ld=B({pad_:EW});function CW(e,t,n=0){return D(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),Ld(e,[t],n)}const TW=B({pad1d_:CW});function NW(e,t,n=0){return D(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ld(e,t,n)}const AW=B({pad2d_:NW});function DW(e,t,n=0){return D(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ld(e,t,n)}const $W=B({pad3d_:DW});function RW(e,t,n=0){return D(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),Ld(e,t,n)}const FW=B({pad4d_:RW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MW(e,t,n){const r=T(e,"x","spaceToBatchND");D(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),D(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),D(r.shape.reduce((a,i,u)=>u>0&&u<=t.length?a&&(i+n[u-1][0]+n[u-1][1])%t[u-1]===0:a,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);const s={x:r},o={blockShape:t,paddings:n};return W.runKernel(Ww,s,o)}const hN=B({spaceToBatchND_:MW});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OW(e,t,n,r,s,o,a){s==null&&(s=[1,1]),o==null&&(o=1),r===0&&(r="valid");const i=T(e,"x","maxPool");let u=i,c=!1;i.rank===3&&(c=!0,u=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),D(xs(o,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${s}'`);const l=Ws(u.shape,t,o,s,r),d=[l.dilationHeight,l.dilationWidth];let f;r==="same"?f=BW([l.filterHeight,l.filterWidth],d):f=[[0,0],[0,0]];const p=d[0]===1&&d[1]===1,[h,m]=PW([l.inHeight,l.inWidth],d,f),y=p?r:"valid",g=p?u:hN(u,d,h),w=(n==="avg"?()=>GT(g,t,o,y,a):()=>dN(g,t,o,y,a))(),S=p?w:qT(w,d,m);return c?oe(S,[S.shape[1],S.shape[2],S.shape[3]]):S}function PW(e,t,n){const r=n.map(l=>l[0]),s=n.map(l=>l[1]),o=e.concat(r,s),a=t.map((l,d)=>(l-o[d]%l)%l),i=s.map((l,d)=>l+a[d]),u=t.map((l,d)=>[r[d],i[d]]),c=t.map((l,d)=>[0,a[d]]);return[u,c]}function BW(e,t){const r=e.map((a,i)=>a+(a-1)*(t[i]-1)).map(a=>a-1),s=r.map(a=>Math.floor(a/2)),o=r.map((a,i)=>a-s[i]);return r.map((a,i)=>[s[i],o[i]])}const LW=B({pool_:OW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zW(e,t){const n=T(e,"x","prelu"),r=T(t,"alpha","prelu"),s={x:n,alpha:r};return W.runKernel(wg,s)}const mN=B({prelu_:zW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WW(e,t=null,n=!1){let r=T(e,"x","prod");r.dtype==="bool"&&(r=qt(r,"int32"));const s={x:r},o={axis:t,keepDims:n};return W.runKernel(Sg,s,o)}const UW=B({prod_:WW});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VW(e,t,n,r){const s=e.map((l,d)=>T(l,`tensors${d}`,"raggedGather","int32")),o=T(t,"paramsDenseValues","raggedGather"),a=T(n,"indices","raggedGather","int32"),i={paramsNestedSplits:s,paramsDenseValues:o,indices:a},u={outputRaggedRank:r},c=W.runKernel(aT,i,u);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const HW=B({raggedGather_:VW});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jW(e,t,n){const r=T(e,"starts","raggedRange"),s=T(t,"limits","raggedRange",r.dtype),o=T(n,"deltas","raggedRange",r.dtype),a={starts:r,limits:s,deltas:o},i=W.runKernel(iT,a);return{rtNestedSplits:i[0],rtDenseValues:i[1]}}const GW=B({raggedRange_:jW});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qW(e,t,n,r,s){const o=T(e,"shape","raggedTensorToTensor","int32"),a=T(t,"values","raggedTensorToTensor"),i=T(n,"defaultValue","raggedTensorToTensor",a.dtype),u=r.map((d,f)=>T(d,`tensors${f}`,"raggedTensorToTensor","int32")),c={shape:o,values:a,defaultValue:i,rowPartitionTensors:u},l={rowPartitionTypes:s};return W.runKernel(lT,c,l)}const KW=B({raggedTensorToTensor_:qW});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XW(e,t,n){es(e);const r=ee(e);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let o=0;o<r;o++)s[o]=t();return W.makeTensor(s,e,n)}const YW=B({rand_:XW});var a2={exports:{}};a2.exports;(function(e){(function(t,n,r){function s(u){var c=this,l=i();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(u),c.s0<0&&(c.s0+=1),c.s1-=l(u),c.s1<0&&(c.s1+=1),c.s2-=l(u),c.s2<0&&(c.s2+=1),l=null}function o(u,c){return c.c=u.c,c.s0=u.s0,c.s1=u.s1,c.s2=u.s2,c}function a(u,c){var l=new s(u),d=c&&c.state,f=l.next;return f.int32=function(){return l.next()*4294967296|0},f.double=function(){return f()+(f()*2097152|0)*11102230246251565e-32},f.quick=f,d&&(typeof d=="object"&&o(d,l),f.state=function(){return o(l,{})}),f}function i(){var u=4022871197,c=function(l){l=String(l);for(var d=0;d<l.length;d++){u+=l.charCodeAt(d);var f=.02519603282416938*u;u=f>>>0,f-=u,f*=u,u=f>>>0,f-=u,u+=f*4294967296}return(u>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=a:this.alea=a})(er,e)})(a2);var QW=a2.exports,i2={exports:{}};i2.exports;(function(e){(function(t,n,r){function s(i){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},i===(i|0)?u.x=i:c+=i;for(var l=0;l<c.length+64;l++)u.x^=c.charCodeAt(l)|0,u.next()}function o(i,u){return u.x=i.x,u.y=i.y,u.z=i.z,u.w=i.w,u}function a(i,u){var c=new s(i),l=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,l&&(typeof l=="object"&&o(l,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=a:this.xor128=a})(er,e)})(i2);var ZW=i2.exports,l2={exports:{}};l2.exports;(function(e){(function(t,n,r){function s(i){var u=this,c="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^(d^d<<1))|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,i===(i|0)?u.x=i:c+=i;for(var l=0;l<c.length+64;l++)u.x^=c.charCodeAt(l)|0,l==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(i,u){return u.x=i.x,u.y=i.y,u.z=i.z,u.w=i.w,u.v=i.v,u.d=i.d,u}function a(i,u){var c=new s(i),l=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,l&&(typeof l=="object"&&o(l,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=a:this.xorwow=a})(er,e)})(l2);var JW=l2.exports,u2={exports:{}};u2.exports;(function(e){(function(t,n,r){function s(i){var u=this;u.next=function(){var l=u.x,d=u.i,f,p;return f=l[d],f^=f>>>7,p=f^f<<24,f=l[d+1&7],p^=f^f>>>10,f=l[d+3&7],p^=f^f>>>3,f=l[d+4&7],p^=f^f<<7,f=l[d+7&7],f=f^f<<13,p^=f^f<<9,l[d]=p,u.i=d+1&7,p};function c(l,d){var f,p=[];if(d===(d|0))p[0]=d;else for(d=""+d,f=0;f<d.length;++f)p[f&7]=p[f&7]<<15^d.charCodeAt(f)+p[f+1&7]<<13;for(;p.length<8;)p.push(0);for(f=0;f<8&&p[f]===0;++f);for(f==8?p[7]=-1:p[f],l.x=p,l.i=0,f=256;f>0;--f)l.next()}c(u,i)}function o(i,u){return u.x=i.x.slice(),u.i=i.i,u}function a(i,u){i==null&&(i=+new Date);var c=new s(i),l=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,l&&(l.x&&o(l,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=a:this.xorshift7=a})(er,e)})(u2);var eU=u2.exports,c2={exports:{}};c2.exports;(function(e){(function(t,n,r){function s(i){var u=this;u.next=function(){var l=u.w,d=u.X,f=u.i,p,h;return u.w=l=l+1640531527|0,h=d[f+34&127],p=d[f=f+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=d[f]=h^p,u.i=f,h+(l^l>>>16)|0};function c(l,d){var f,p,h,m,y,g=[],b=128;for(d===(d|0)?(p=d,d=null):(d=d+"\0",p=0,b=Math.max(b,d.length)),h=0,m=-32;m<b;++m)d&&(p^=d.charCodeAt((m+32)%d.length)),m===0&&(y=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(y=y+1640531527|0,f=g[m&127]^=p+y,h=f==0?h+1:0);for(h>=128&&(g[(d&&d.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=g[h+34&127],f=g[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,g[h]=p^f;l.w=y,l.X=g,l.i=h}c(u,i)}function o(i,u){return u.i=i.i,u.w=i.w,u.X=i.X.slice(),u}function a(i,u){i==null&&(i=+new Date);var c=new s(i),l=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,l&&(l.X&&o(l,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=a:this.xor4096=a})(er,e)})(c2);var tU=c2.exports,d2={exports:{}};d2.exports;(function(e){(function(t,n,r){function s(i){var u=this,c="";u.next=function(){var d=u.b,f=u.c,p=u.d,h=u.a;return d=d<<25^d>>>7^f,f=f-p|0,p=p<<24^p>>>8^h,h=h-d|0,u.b=d=d<<20^d>>>12^f,u.c=f=f-p|0,u.d=p<<16^f>>>16^h,u.a=h-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,i===Math.floor(i)?(u.a=i/4294967296|0,u.b=i|0):c+=i;for(var l=0;l<c.length+20;l++)u.b^=c.charCodeAt(l)|0,u.next()}function o(i,u){return u.a=i.a,u.b=i.b,u.c=i.c,u.d=i.d,u}function a(i,u){var c=new s(i),l=u&&u.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var f=c.next()>>>11,p=(c.next()>>>0)/4294967296,h=(f+p)/(1<<21);while(h===0);return h},d.int32=c.next,d.quick=d,l&&(typeof l=="object"&&o(l,c),d.state=function(){return o(c,{})}),d}n&&n.exports?n.exports=a:this.tychei=a})(er,e)})(d2);var nU=d2.exports,gN={exports:{}};const rU={},sU=Object.freeze(Object.defineProperty({__proto__:null,default:rU},Symbol.toStringTag,{value:"Module"})),ia=tb(sU);(function(e){(function(t,n,r){var s=256,o=6,a=52,i="random",u=r.pow(s,o),c=r.pow(2,a),l=c*2,d=s-1,f;function p(S,I,_){var C=[];I=I==!0?{entropy:!0}:I||{};var N=g(y(I.entropy?[S,w(n)]:S??b(),3),C),$=new h(C),R=function(){for(var F=$.g(o),U=u,L=0;F<c;)F=(F+L)*s,U*=s,L=$.g(1);for(;F>=l;)F/=2,U/=2,L>>>=1;return(F+L)/U};return R.int32=function(){return $.g(4)|0},R.quick=function(){return $.g(4)/4294967296},R.double=R,g(w($.S),n),(I.pass||_||function(F,U,L,H){return H&&(H.S&&m(H,$),F.state=function(){return m($,{})}),L?(r[i]=F,U):F})(R,N,"global"in I?I.global:this==r,I.state)}function h(S){var I,_=S.length,C=this,N=0,$=C.i=C.j=0,R=C.S=[];for(_||(S=[_++]);N<s;)R[N]=N++;for(N=0;N<s;N++)R[N]=R[$=d&$+S[N%_]+(I=R[N])],R[$]=I;(C.g=function(F){for(var U,L=0,H=C.i,j=C.j,X=C.S;F--;)U=X[H=d&H+1],L=L*s+X[d&(X[H]=X[j=d&j+U])+(X[j]=U)];return C.i=H,C.j=j,L})(s)}function m(S,I){return I.i=S.i,I.j=S.j,I.S=S.S.slice(),I}function y(S,I){var _=[],C=typeof S,N;if(I&&C=="object")for(N in S)try{_.push(y(S[N],I-1))}catch{}return _.length?_:C=="string"?S:S+"\0"}function g(S,I){for(var _=S+"",C,N=0;N<_.length;)I[d&N]=d&(C^=I[d&N]*19)+_.charCodeAt(N++);return w(I)}function b(){try{var S;return f&&(S=f.randomBytes)?S=S(s):(S=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(S)),w(S)}catch{var I=t.navigator,_=I&&I.plugins;return[+new Date,t,_,t.screen,w(n)]}}function w(S){return String.fromCharCode.apply(0,S)}if(g(r.random(),n),e.exports){e.exports=p;try{f=ia}catch{}}else r["seed"+i]=p})(typeof self<"u"?self:er,[],Math)})(gN);var oU=gN.exports,aU=QW,iU=ZW,lU=JW,uU=eU,cU=tU,dU=nU,qi=oU;qi.alea=aU;qi.xor128=iU;qi.xorwow=lU;qi.xorshift7=uU;qi.xor4096=cU;qi.tychei=dU;var oy=qi;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class f2{constructor(t,n,r,s,o){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const a=o||Math.random();this.random=oy.alea(a.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let t,n,r=!1;for(;!r;){let s,o,a;do s=2*this.random()-1,o=2*this.random()-1,a=s*s+o*o;while(a>=1||a===0);const i=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*s*i,n=this.mean+this.stdDev*o*i,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}}class fU{constructor(t,n,r,s){this.alpha=t,this.beta=1/n,this.dtype=r;const o=s||Math.random();this.randu=oy.alea(o.toString()),this.randn=new f2(0,1,r,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,n,r,s,o,a;for(;;){do s=this.randn.nextValue(),a=1+this.c*s;while(a<=0);if(a*=a*a,t=s*s,n=1-.331*t*t,r=.5*t+this.d*(1-a+Math.log(a)),o=this.randu(),o<n||Math.log(o)<r)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}}class pU{constructor(t=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=n-t,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${n} <= 1 and dtype is not float`);this.random=oy.alea(s)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hU(e,t,n=1,r="float32",s){if(es(e),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const o=new fU(t,n,r,s),a=rt(e,r);for(let i=0;i<a.values.length;i++)a.values[i]=o.nextValue();return a.toTensor()}const mU=B({randomGamma_:hU});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gU(e,t=0,n=1,r,s){if(es(e),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const o=new f2(t,n,r,!1,s),a=rt(e,r);for(let i=0;i<a.values.length;i++)a.values[i]=o.nextValue();return a.toTensor()}const yN=B({randomNormal_:gU});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yU(e,t,n){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return yN(e,0,1,t,n)}const vU=B({randomStandardNormal_:yU});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bU(e,t=0,n=1,r="float32",s){es(e);const o=rt(e,r),a=new pU(t,n,null,s);for(let i=0;i<o.values.length;i++)o.values[i]=a.nextValue();return o.toTensor()}const p2=B({randomUniform_:bU});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wU(e,t,n,r){return p2(e,t,n,"int32",r)}const SU=B({randomUniformInt_:wU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function md(e,t,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:e,stop:t,step:n,dtype:r};return W.runKernel(Mw,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xU(e){const n={input:T(e,"input","real")};return W.runKernel(uT,n)}const gd=B({real_:xU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kU(e){const n={x:T(e,"x","reciprocal")};return W.runKernel(xg,n)}const IU=B({reciprocal_:kU});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _U(e){const n={x:T(e,"x","relu")};return W.runKernel(kg,n)}const ay=B({relu_:_U});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EU(e){const n={x:T(e,"x","relu6")};return W.runKernel(Eg,n)}const vN=B({relu6_:EU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CU(e,t){const r={x:T(e,"x","reverse")},s={dims:t};return W.runKernel(Cg,r,s)}const Mi=B({reverse_:CU});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TU(e){const t=T(e,"x","reverse");return D(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),Mi(t,0)}const NU=B({reverse1d_:TU});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AU(e,t){const n=T(e,"x","reverse");return D(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Mi(n,t)}const DU=B({reverse2d_:AU});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $U(e,t){const n=T(e,"x","reverse");return D(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Mi(n,t)}const RU=B({reverse3d_:$U});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FU(e,t){const n=T(e,"x","reverse");return D(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Mi(n,t)}const MU=B({reverse4d_:FU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OU(e){const n={x:T(e,"x","round")};return W.runKernel(Tg,n)}const bN=B({round_:OU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PU(e){const n={x:T(e,"x","rsqrt","float32")};return W.runKernel(Ng,n)}const BU=B({rsqrt_:PU});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LU(e){const n={x:T(e,"x","selu")};return W.runKernel(Rg,n)}const zU=B({selu_:LU});function WU(e,t,n,r,s,o=[1,1],a="NHWC"){const i=T(e,"x","separableConv2d"),u=T(t,"depthwiseFilter","separableConv2d"),c=T(n,"pointwiseFilter","separableConv2d");let l=i,d=!1;if(i.rank===3&&(d=!0,l=oe(i,[1,i.shape[0],i.shape[1],i.shape[2]])),a==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");D(l.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${l.rank}.`),D(u.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${u.rank}.`),D(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${u.rank}.`),D(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),D(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const f=u.shape[2],p=u.shape[3];D(c.shape[2]===f*p,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${f*p}, but got ${c.shape[2]}.`);const h=r2(l,u,r,s,a,o),y=ey(h,c,1,"valid",a);return d?oe(y,[y.shape[1],y.shape[2],y.shape[3]]):y}const UU=B({separableConv2d_:WU});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function VU(e,t){const n=T(e,"x","setdiff1d"),r=T(t,"y","setdiff1d");D(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),D(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),D(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),o=await r.data(),a=new Set(o);let i=0;for(let l=0;l<s.length;l++)a.has(s[l])||i++;const u=new mn([i],n.dtype),c=new mn([i],"int32");for(let l=0,d=0;l<s.length;l++)a.has(s[l])||(u.values[d]=s[l],c.values[d]=l,d++);return[u.toTensor(),c.toTensor()]}const HU=VU;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jU(e){const n={x:T(e,"x","sign")};return W.runKernel(Og,n)}const GU=B({sign_:jU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qU(e){const n={x:T(e,"x","sin","float32")};return W.runKernel(Fg,n)}const KU=B({sin_:qU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function XU(e){const n={x:T(e,"x","sinh")};return W.runKernel(Mg,n)}const YU=B({sinh_:XU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QU(e,t,n){const r=T(e,"x","slice1d");return D(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Ke(r,[t],[n])}const ZU=B({slice1d_:QU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JU(e,t,n){const r=T(e,"x","slice2d");return D(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Ke(r,t,n)}const eV=B({slice2d_:JU});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tV(e,t,n){const r=T(e,"x","slice3d");return D(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Ke(r,t,n)}const nV=B({slice3d_:tV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rV(e,t,n){const r=T(e,"x","slice4d");return D(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Ke(r,t,n)}const sV=B({slice4d_:rV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oV(e,t=-1){const n=T(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const r={logits:n},s={dim:t};return W.runKernel(Wg,r,s)}const aV=B({softmax_:oV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iV(e){D(e.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);const t={input:e};return W.runKernel(tT,t)}const h2=B({fft_:iV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lV(e){D(e.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);const t={input:e};return W.runKernel(nT,t)}const hh=B({ifft_:lV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uV(e){const t=e.shape[e.shape.length-1],n=e.size/t;let r;if(t<=2){const s=oe(e,[n,t]);r=hh(s)}else{const s=[n,2*(t-1)],o=oe(gd(e),[n,t]),a=oe(sy(e),[n,t]),i=Mi(Ke(o,[0,1],[n,t-2]),1),u=me(Mi(Ke(a,[0,1],[n,t-2]),1),lt(-1)),c=$n([o,i],1),l=$n([a,u],1),d=oe(Ta(c,l),[s[0],s[1]]);r=hh(d)}if(r=gd(r),e.rank===3&&e.shape[0]!==0){const s=r,o=e.shape[0];r=oe(r,[o,r.shape[0]/o,r.shape[1]]),s.dispose()}return r}const wN=B({irfft_:uV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cV(e,t,n=0){const s={x:T(e,"x","split")},o={numOrSizeSplits:t,axis:n};return W.runKernel(Uw,s,o)}const yd=B({split_:cV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dV(e,t){D(e.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${e.dtype}`);let n=e.shape[e.shape.length-1];const r=e.size/n;let s;if(t!=null&&t<n){const h=e.shape.map(y=>0),m=e.shape.map(y=>y);m[e.shape.length-1]=t,s=Ke(e,h,m),n=t}else if(t!=null&&t>n){const h=e.shape.map(m=>m);h[e.shape.length-1]=t-n,s=$n([e,ru(h)],e.shape.length-1),n=t}else s=e;const o=Kr(s),a=oe(Ta(s,o),[r,n]),i=h2(a),u=Math.floor(n/2)+1,c=gd(i),l=sy(i),d=yd(c,[u,n-u],c.shape.length-1),f=yd(l,[u,n-u],l.shape.length-1),p=s.shape.slice();return p[s.shape.length-1]=u,oe(Ta(d[0],f[0]),p)}const m2=B({rfft_:dV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fV(e,t){let n=T(e,"a","squaredDifference"),r=T(t,"b","squaredDifference");[n,r]=tn(n,r),At(n.shape,r.shape);const s={a:n,b:r},o={};return W.runKernel(Hg,s,o)}const SN=B({squaredDifference_:fV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pV(e,t){const n=T(e,"x","squeeze","string_or_numeric");return oe(n,CB(n.shape,t).newShape)}const Tn=B({squeeze_:pV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hV(e,t=0){const n=ih(e,"tensors","stack","string_or_numeric");D(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&D(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:t};return W.runKernel(Fw,r,s)}const Po=B({stack_:hV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mV(e,t=0){const r={x:T(e,"x","step")},s={alpha:t};return W.runKernel(Od,r,s)}const xN=B({step_:mV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gV(e,t,n,r,s=0,o=0,a=0,i=0,u=0){const l={x:T(e,"x","stridedSlice","string_or_numeric")},d={begin:t,end:n,strides:r,beginMask:s,endMask:o,ellipsisMask:a,newAxisMask:i,shrinkAxisMask:u};return W.runKernel(jg,l,d)}const yV=B({stridedSlice_:gV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vV(e){const n={x:T(e,"x","tan","float32")};return W.runKernel(qg,n)}const bV=B({tan_:vV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zn(e,t){gu(e);const n=Ba(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return La(e,null,n,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _i(e,t,n){if(gu(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=Ba(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return La(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kN(e,t,n){if(gu(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=Ba(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return La(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wV(e,t,n){if(gu(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=Ba(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return La(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SV(e,t,n){if(gu(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=Ba(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return La(e,t,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xV(e,t,n){if(gu(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=Ba(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||r,La(e,t,r,n)}function kV(e,t,n){const r=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(o+` update.rank < ${s}. `);if(e.length<r+(n.rank-s))throw new Error(o+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+e.length-r)throw new Error(o+` update.rank != ${s+e.length-r}`);for(let a=0;a<s;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+` updates.shape[${a}] (${n.shape[a]}) != indices.shape[${a}] (${t.shape[a]}).`);for(let a=0;a<n.rank-s;++a)if(n.shape[a+s]!==e[a+r])throw new Error(o+` updates.shape[${a+s}] (${n.shape[a+s]}) != shape[${a+s}] (${e[a+s]})`)}function IN(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(e.size===0)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}kV(n,t,e)}function Su(e,t,n){const r=t.shape.length,s=r>1?t.shape[r-1]:1,o=n.length;let a=1;for(let d=s;d<o;++d)a*=n[d];const i=s<1?1:s,u=ee(t.shape)/i,c=[...Ee(n.slice(0,s)),1],l=ee(n);return{sliceRank:s,numUpdates:u,sliceSize:a,strides:c,outputSize:l}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IV(e,t,n){const r=T(e,"tensor","tensorScatterupdate"),s=T(t,"indices","tensorScatterupdate","int32"),o=T(n,"updates","tensorScatterupdate");if(IN(o,s,r.shape),r.dtype!==o.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${o.dtype}.`);const a={tensor:r,indices:s,updates:o},i={};return W.runKernel(Dg,a,i)}const _V=B({tensorScatterUpdate_:IV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EV(e,t=1,n=!0){const r=T(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${t}`);const o={x:r},a={k:t,sorted:n},[i,u]=W.runKernel(Xg,o,a);return{values:i,indices:u}}const CV=B({topk_:EV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TV(e,t=0,n=1,r,s){if(es(e),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const o=new f2(t,n,r,!0,s),a=rt(e,r);for(let i=0;i<a.values.length;i++)a.values[i]=o.nextValue();return a.toTensor()}const NV=B({truncatedNormal_:TV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AV(e,t=0){const n=T(e,"x","unique","string_or_numeric");D(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:t},[o,a]=W.runKernel(Yw,r,s);return{values:o,indices:a}}const DV=B({unique_:AV});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $V(e,t,n){const r=T(e,"x","unsortedSegmentSum"),s=T(t,"segmentIds","unsortedSegmentSum","int32");D(sd(n),()=>"numSegments must be of dtype int");const o={x:r,segmentIds:s},a={numSegments:n};return W.runKernel(dT,o,a)}const RV=B({unsortedSegmentSum_:$V});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FV(e,t=0){const n=T(e,"x","unstack","string_or_numeric");D(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:t};return W.runKernel(Qw,r,s)}const Ki=B({unstack_:FV});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MV(e,t){return o2(e,t,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OV(e,t=!0,n,r){return W.makeVariable(e,t,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _N(e,t){const n=[];for(let o=0;o<t.length;o++)t[o]&&n.push(o);const r=rt(e,"int32"),s=rt([n.length,e.length],"int32");for(let o=0;o<n.length;o++){const a=r.indexToLoc(n[o]),i=o*e.length;s.values.set(a,i)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function PV(e){const t=T(e,"condition","whereAsync","bool"),n=await t.data(),r=_N(t.shape,n);return e!==t&&t.dispose(),r}const EN=PV;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function BV(e,t,n){const r=T(e,"tensor","boolMask"),s=T(t,"mask","boolMask","bool"),o=n??0,a=s.rank,i=r.shape;D(a>0,()=>"mask cannot be scalar"),Lr(i.slice(o,o+a),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let u=1;for(let m=o;m<o+a;m++)u*=i[m];const c=i.slice(0,o).concat([u],i.slice(o+a)),l=oe(r,c),d=oe(s,[-1]),f=await EN(d),p=Tn(f,[1]),h=rN(l,p,o);return e!==r&&r.dispose(),t!==s&&s.dispose(),p.dispose(),l.dispose(),d.dispose(),f.dispose(),h}const LV=BV;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zV(e,t,n){const r=T(e,"x","transpose");if(t==null&&(t=r.shape.map((a,i)=>i).reverse()),D(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(a=>{D(a>=0&&a<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();const s={x:r},o={perm:t};return r.dtype==="complex64"?nt(()=>{let a=gd(r),i=sy(r);return a=W.runKernel(Bl,{x:a},o),i=W.runKernel(Bl,{x:i},o),n&&(i=oo(i)),Ta(a,i)}):W.runKernel(Bl,s,o)}const d1=B({transpose_:zV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WV(e,t,n,r,s=!0){const o=T(e,"v","movingAverage"),a=T(t,"x","movingAverage"),i=T(n,"decay","movingAverage");cL(o,a),D(ws(o.shape,a.shape),()=>"Shape mismatch in v and x");const u=lt(1),c=Xe(u,i);let l=me(Xe(a,o),c);if(s){D(r!=null,()=>"When using zeroDebias: true, step is required.");const d=T(r,"step","movingAverage");l=tt(l,Xe(u,pd(i,d)))}return Oe(o,l)}const UV=B({movingAverage_:WV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VV(e,t,n){es(n);const r=T(e,"indices","scatterND","int32"),s=T(t,"updates","scatterND");IN(s,r,n);const o={indices:r,updates:s},a={shape:n};return W.runKernel(Ag,o,a)}const HV=B({scatterND_:VV});function jV(e,t,n,r){if(e.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);const s=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${o}.`);const a=t.size;if(!(t.rank===0||t.rank===1&&a===s))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${s}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GV(e,t,n,r=0){es(n);const s=T(e,"sparseIndices","sparseToDense","int32"),o=T(t,"sparseValues","sparseToDense","string_or_numeric"),a=T(r,"defaultValue","sparseToDense",o.dtype);jV(s,o,n,a);const i={sparseIndices:s,sparseValues:o,defaultValue:a},u={outputShape:n};return W.runKernel(Vg,i,u)}const qV=B({sparseToDense_:GV});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KV(e,t){const n=T(t,"indices","gatherND","int32"),s={params:T(e,"x","gatherND","string_or_numeric"),indices:n};return W.runKernel(zm,s)}const XV=B({gatherND_:KV});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YV(e,t){if(t==null)return e.shape.slice();if(ws(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let r=0;r<e.shape.length;r++)t[r]==null&&e.shape[r]!=null?n.push(e.shape[r]):n.push(t[r]);return n}return t}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QV(e,t,n,r){const s=T(e,"x","dropout");if(D(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),D(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return e instanceof ln?s.clone():s;const o=YV(s,n),a=1-t,i=tt(nN(Oe(p2(o,0,1,"float32",r),a)),a);return me(s,i)}const ZV=B({dropout_:QV});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CN(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function g2(e,t,n){const r=1-e%2,s=new Float32Array(e);for(let o=0;o<e;++o){const a=2*Math.PI*o/(e+r-1);s[o]=t-n*Math.cos(a)}return zn(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function JV(e,t,n=1){const r=T(e,"predictions","inTopK"),s=T(t,"targets","inTopK");D(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),D(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),Lr(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const o=r.shape[r.shape.length-1];D(n>0&&n<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${n}`);const a=await r.data(),i=await s.data(),[u,c]=[a.length/o,o],l=nr("bool",u);for(let d=0;d<u;d++){const f=d*c,p=a.subarray(f,f+c),h=[];for(let m=0;m<p.length;m++)h.push({value:p[m],index:m});h.sort((m,y)=>y.value-m.value),l[d]=0;for(let m=0;m<n;m++)if(h[m].index===i[d]){l[d]=1;break}}return e!==r&&r.dispose(),t!==s&&s.dispose(),Fs(l,s.shape,"bool")}const eH=JV;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tH(e,t,n,r,s,o="NHWC",a){let i=e;e.rank===3&&(i=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]])),D(i.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${i.shape}.`),D(u.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${u.shape}.`),D(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=o==="NHWC"?i.shape[3]:i.shape[1],l=o==="NHWC"?u.shape[3]:u.shape[1];D(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),D(l===n[3],()=>`Error in conv2dDerFilter: depth of dy (${l}) must match output depth for filter (${n[3]}).`),Us("conv2dDerFilter",s,a);const d={x:i,dy:u},f={strides:r,pad:s,dataFormat:o,dimRoundingMode:a,filterShape:n};return W.runKernel(QC,d,f)}const nH=B({conv2DBackpropFilter_:tH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y2(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return me(e,xN(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function v2(e,t){let n=t;const r=V9(e.shape,t.shape);return r.length>0&&(n=Ft(n,r)),oe(n,e.shape)}function b2(e,t,n,r){if(t==="linear")return e;if(t==="relu")return ay(e);if(t==="elu")return ZT(e);if(t==="relu6")return vN(e);if(t==="prelu")return mN(e,n);if(t==="leakyrelu")return oN(e,r);if(t==="sigmoid")return Ii(e);throw new Error(`Unknown fused activation ${t}.`)}const w2=(e,t)=>!(e>0)||t==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rH({x:e,filter:t,strides:n,pad:r,dataFormat:s="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:i,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:l}){if(u=u||"linear",w2(W.state.gradientDepth,u)===!1){D(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let _=ey(e,t,n,r,s,o,a);return i!=null&&(_=Oe(_,i)),b2(_,u,c,l)}const d=T(e,"x","conv2d","float32"),f=T(t,"filter","conv2d","float32");let p=d,h=!1;d.rank===3&&(h=!0,p=oe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),D(p.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${p.rank}.`),D(f.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${f.rank}.`),Us("fused conv2d",r,a);const m=s==="NHWC"?p.shape[3]:p.shape[1];D(f.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${f.shape[2]}.`),D(xs(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);const y=xr(p.shape,f.shape,n,o,r,a);let g;i!=null&&(g=T(i,"bias","fused conv2d"),[g]=tn(g,d),s==="NHWC"?At(y.outShape,g.shape):(D(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),D(g.shape.length===0||g.shape[0]===y.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${y.outChannels})`)));let b;if(c!=null){const _=c.shape;if(D(_.length<=1||_.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${_.length}.`),_.length===1)D(_[0]===1||_[0]===y.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${_}) is not compatible with the number of output channels (${y.outChannels}).`);else if(_.length===3)try{At(_,y.outShape)}catch{const N=`Error in fused conv2d: PReLU activation weights (${_}) is not compatible with the output shape of the conv2d (${y.outShape}).`;throw Error(N)}b=T(c,"prelu weights","fused conv2d")}const w=(_,C)=>{D(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[N,$,R,F]=C,U=y2(_,R,u);D(uh(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);const L=YT($.shape,U,N,n,r),H=nH($,U,N.shape,n,r),j=[L,H];if(F!=null){const X=v2(F,U);j.push(X)}return j},S={x:p,filter:f,bias:g,preluActivationWeights:b},I={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:a,activation:u,leakyreluAlpha:l};return i==null?Oo((C,N,$)=>{let R=W.runKernel(id,S,I);return $([N,C,R]),h&&(R=oe(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:w}})(p,f):Oo((C,N,$,R)=>{let F=W.runKernel(id,S,I);return R([N,C,F,$]),h&&(F=oe(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:w}})(p,f,g)}const sH=B({fusedConv2d_:rH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oH(e,t,n,r,s,o=[1,1],a){let i=e;e.rank===3&&(i=oe(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let u=t;u.rank===3&&(u=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={x:i,dy:u},l={strides:r,pad:s,dimRoundingMode:a,dilations:o,filterShape:n};return W.runKernel(ZC,c,l)}const aH=B({depthwiseConv2dNativeBackpropFilter_:oH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iH(e,t,n,r,s,o=[1,1],a){let i=t,u=!1;t.rank===3&&(u=!0,i=oe(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const c={dy:i,filter:n},l={strides:r,pad:s,dimRoundingMode:a,dilations:o,inputShape:e},d=W.runKernel(JC,c,l);return u?oe(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const lH=B({depthwiseConv2dNativeBackpropInput_:iH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uH({x:e,filter:t,strides:n,pad:r,dataFormat:s="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:i,activation:u="linear",preluActivationWeights:c,leakyreluAlpha:l}){if(w2(W.state.gradientDepth,u)===!1){let I=r2(e,t,n,r,s,o,a);return i!=null&&(I=Oe(I,i)),b2(I,u,c,l)}const d=T(e,"x","depthwiseConv2d","float32"),f=T(t,"filter","depthwiseConv2d","float32");let p=d,h=!1;d.rank===3&&(h=!0,p=oe(d,[1,d.shape[0],d.shape[1],d.shape[2]])),D(p.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${p.rank}.`),D(f.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${f.rank}.`),D(p.shape[3]===f.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${p.shape[3]}) must match the inChannels dimension in filter ${f.shape[2]}.`),o==null&&(o=[1,1]),D(xs(n,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Us("fused depthwiseConv2d",r,a);const m=xr(p.shape,f.shape,n,o,r,a,!0);let y;i!=null&&(y=T(i,"bias","fused conv2d"),[y]=tn(y,d),At(m.outShape,y.shape));let g;c!=null&&(g=T(c,"prelu weights","fused depthwiseConv2d"));const b=(I,_)=>{D(uh(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);const[C,N,$,R]=_,F=y2(I,$,u),U=lH(N.shape,F,C,n,r,o,a),L=aH(N,F,C.shape,n,r,o,a);if(R!=null){const H=v2(y,F);return[U,L,H]}return[U,L]},w={x:p,filter:f,bias:y,preluActivationWeights:g},S={strides:n,pad:r,dataFormat:s,dilations:o,dimRoundingMode:a,activation:u,leakyreluAlpha:l};return i==null?Oo((_,C,N)=>{let $=W.runKernel(ld,w,S);return N([C,_,$]),h&&($=oe($,[$.shape[1],$.shape[2],$.shape[3]])),{value:$,gradFunc:b}})(p,f):Oo((_,C,N,$)=>{let R=W.runKernel(ld,w,S);return $([C,_,R,N]),h&&(R=oe(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:b}})(p,f,y)}const cH=B({fusedDepthwiseConv2d_:uH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dH({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:s,activation:o="linear",preluActivationWeights:a,leakyreluAlpha:i=.2}){if(w2(W.state.gradientDepth,o)===!1){let F=St(e,t,n,r);return s!=null&&(F=Oe(F,s)),b2(F,o,a,i)}let u=T(e,"a","fused matMul"),c=T(t,"b","fused matMul");[u,c]=tn(u,c);const l=n?u.shape[u.rank-2]:u.shape[u.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],f=n?u.shape[u.rank-1]:u.shape[u.rank-2],p=r?c.shape[c.rank-2]:c.shape[c.rank-1],h=u.shape.slice(0,-2),m=c.shape.slice(0,-2),y=ee(h),g=ee(m);D(l===d,()=>`Error in fused matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${u.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const w=At(u.shape.slice(0,-2),c.shape.slice(0,-2)).concat([f,p]),S=n?oe(u,[y,l,f]):oe(u,[y,f,l]),I=r?oe(c,[g,p,d]):oe(c,[g,d,p]);let _;s!=null&&(_=T(s,"bias","fused matMul"),[_]=tn(_,u),At(w,_.shape));let C;a!=null&&(C=T(a,"prelu weights","fused matMul"));const N=(F,U)=>{const[L,H,j,X]=U,Q=y2(oe(F,j.shape),j,o);let P,G;if(!n&&!r?(P=St(Q,H,!1,!0),G=St(L,Q,!0,!1)):!n&&r?(P=St(Q,H,!1,!1),G=St(Q,L,!0,!1)):n&&!r?(P=St(H,Q,!1,!0),G=St(L,Q,!1,!1)):(P=St(H,Q,!0,!0),G=St(Q,L,!0,!0)),s!=null){const Y=v2(X,Q);return[P,G,Y]}else return[P,G]},$={a:S,b:I,bias:_,preluActivationWeights:C},R={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:i};return s==null?Oo((U,L,H)=>{const j=W.runKernel(ad,$,R);return H([U,L,j]),{value:oe(j,w),gradFunc:N}})(S,I):Oo((U,L,H,j)=>{const X=W.runKernel(ad,$,R);return j([U,L,X,H]),{value:oe(X,w),gradFunc:N}})(S,I,_)}const fH=B({fusedMatMul_:dH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pH=Object.freeze(Object.defineProperty({__proto__:null,conv2d:sH,depthwiseConv2d:cH,matMul:fH},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hH(e){return g2(e,.54,.46)}const mH=B({hammingWindow_:hH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gH(e){return g2(e,.5,.5)}const TN=B({hannWindow_:gH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yH(e,t,n,r=!1,s=0){let o=0;const a=[];for(;o+t<=e.size;)a.push(Ke(e,o,t)),o+=n;if(r)for(;o<e.size;){const i=o+t-e.size,u=$n([Ke(e,o,t-i),Bd([i],s)]);a.push(u),o+=n}return a.length===0?_i([],[0,t]):oe($n(a),[a.length,t])}const NN=B({frame_:yH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vH(e,t,n,r,s=TN){r==null&&(r=CN(t));const o=NN(e,t,n),a=me(o,s(t));return m2(a,r)}const bH=B({stft_:vH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wH(e,t,n,r,s="bilinear",o=0){const a=T(e,"image","cropAndResize"),i=T(t,"boxes","cropAndResize","float32"),u=T(n,"boxInd","cropAndResize","int32"),c=i.shape[0];D(a.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),D(i.rank===2&&i.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${i.shape}.`),D(u.rank===1&&u.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${i.shape}.`),D(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),D(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),D(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const l={image:a,boxes:i,boxInd:u},d={method:s,extrapolationValue:o,cropSize:r};return W.runKernel(Em,l,d)}const SH=B({cropAndResize_:wH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xH(e){const t=T(e,"image","flipLeftRight","float32");D(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);const n={image:t};return W.runKernel(Om,n,{})}const kH=B({flipLeftRight_:xH});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function IH(e){const t=T(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];D(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),D(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(t.rank);return s.fill(1,0,n),s[n]=3,Tc(t,s)}const _H=B({grayscaleToRGB_:IH});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EH(e){const t=T(e,"image","RGBToGrayscale"),n=t.rank-1,r=t.shape[n];D(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),D(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=t.dtype,o=qt(t,"float32"),a=zn([.2989,.587,.114]);let i;switch(t.rank){case 2:i=hl("ij,j->i",o,a);break;case 3:i=hl("ijk,k->ij",o,a);break;case 4:i=hl("ijkl,l->ijk",o,a);break;case 5:i=hl("ijklm,m->ijkl",o,a);break;case 6:i=hl("ijklmn,n->ijklm",o,a);break;default:throw new Error("Not a valid tensor rank.")}return i=Zs(i,-1),qt(i,s)}const CH=B({rgbToGrayscale_:EH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TH(e,t,n=0,r=.5){const s=T(e,"image","rotateWithOffset","float32");D(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const o={image:s},a={radians:t,fillValue:n,center:r};return W.runKernel(Qg,o,a)}const NH=B({rotateWithOffset_:TH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xu(e,t,n,r,s,o){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),o==null&&(o=0);const a=e.shape[0];return n=Math.min(n,a),D(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),D(e.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),D(e.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`),D(t.rank===1,()=>"scores must be a 1D tensor"),D(t.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${t.shape[0]}`),D(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AH(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=T(e,"boxes","nonMaxSuppression","float32"),a=T(t,"scores","nonMaxSuppression","float32"),i=xu(o,a,n,r,s);n=i.maxOutputSize,r=i.iouThreshold,s=i.scoreThreshold;const u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return W.runKernel(hg,{boxes:o,scores:a},u)}const DH=B({nonMaxSuppression_:AH});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $H(e,t,n){const r=RH(e,t,n),s=r<0?-(r+1):r;e.splice(s,0,t)}function RH(e,t,n){return MH(e,t,n||FH)}function FH(e,t){return e>t?1:e<t?-1:0}function MH(e,t,n){let r=0,s=e.length,o=0,a=!1;for(;r<s;){o=r+(s-r>>>1);const i=n(t,e[o]);i>0?r=o+1:(s=o,a=!i)}return a?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AN(e,t,n,r,s){return S2(e,t,n,r,s,0)}function DN(e,t,n,r,s,o){return S2(e,t,n,r,s,0,!1,o,!0)}function $N(e,t,n,r,s,o){return S2(e,t,n,r,s,o,!0)}function S2(e,t,n,r,s,o,a=!1,i=!1,u=!1){const c=[];for(let y=0;y<t.length;y++)t[y]>s&&c.push({score:t[y],boxIndex:y,suppressBeginIndex:0});c.sort(yk);const l=o>0?-.5/o:0,d=[],f=[];for(;d.length<n&&c.length>0;){const y=c.pop(),{score:g,boxIndex:b,suppressBeginIndex:w}=y;if(g<s)break;let S=!1;for(let I=d.length-1;I>=w;--I){const _=OH(e,b,d[I]);if(_>=r){S=!0;break}if(y.score=y.score*PH(r,l,_),y.score<=s)break}y.suppressBeginIndex=d.length,S||(y.score===g?(d.push(b),f.push(y.score)):y.score>s&&$H(c,y,yk))}const p=d.length,h=n-p;i&&h>0&&(d.push(...new Array(h).fill(0)),f.push(...new Array(h).fill(0)));const m={selectedIndices:d};return a&&(m.selectedScores=f),u&&(m.validOutputs=p),m}function OH(e,t,n){const r=e.subarray(t*4,t*4+4),s=e.subarray(n*4,n*4+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),i=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),l=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),f=Math.max(s[1],s[3]),p=(i-o)*(u-a),h=(d-c)*(f-l);if(p<=0||h<=0)return 0;const m=Math.max(o,c),y=Math.max(a,l),g=Math.min(i,d),b=Math.min(u,f),w=Math.max(g-m,0)*Math.max(b-y,0);return w/(p+h-w)}function PH(e,t,n){const r=Math.exp(t*n*n);return n<=e?r:0}function yk(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function BH(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY){const o=T(e,"boxes","nonMaxSuppressionAsync"),a=T(t,"scores","nonMaxSuppressionAsync"),i=xu(o,a,n,r,s);n=i.maxOutputSize,r=i.iouThreshold,s=i.scoreThreshold;const u=await Promise.all([o.data(),a.data()]),c=u[0],l=u[1],{selectedIndices:d}=AN(c,l,n,r,s);return o!==e&&o.dispose(),a!==t&&a.dispose(),zn(d,"int32")}const LH=BH;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zH(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const a=T(e,"boxes","nonMaxSuppression"),i=T(t,"scores","nonMaxSuppression"),u=xu(a,i,n,r,s,o);n=u.maxOutputSize,r=u.iouThreshold,s=u.scoreThreshold,o=u.softNmsSigma;const c={boxes:a,scores:i},l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:o},d=W.runKernel(gg,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}const WH=B({nonMaxSuppressionWithScore_:zH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function UH(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY,o=0){const a=T(e,"boxes","nonMaxSuppressionAsync"),i=T(t,"scores","nonMaxSuppressionAsync"),u=xu(a,i,n,r,s,o);n=u.maxOutputSize,r=u.iouThreshold,s=u.scoreThreshold,o=u.softNmsSigma;const c=await Promise.all([a.data(),i.data()]),l=c[0],d=c[1],{selectedIndices:f,selectedScores:p}=$N(l,d,n,r,s,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),{selectedIndices:zn(f,"int32"),selectedScores:zn(p)}}const VH=UH;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HH(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const a=T(e,"boxes","nonMaxSuppression"),i=T(t,"scores","nonMaxSuppression"),u=xu(a,i,n,r,s,null),c=u.maxOutputSize,l=u.iouThreshold,d=u.scoreThreshold,f={boxes:a,scores:i},p={maxOutputSize:c,iouThreshold:l,scoreThreshold:d,padToMaxOutputSize:o},h=W.runKernel(mg,f,p);return{selectedIndices:h[0],validOutputs:h[1]}}const jH=B({nonMaxSuppressionPadded_:HH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function GH(e,t,n,r=.5,s=Number.NEGATIVE_INFINITY,o=!1){const a=T(e,"boxes","nonMaxSuppressionAsync"),i=T(t,"scores","nonMaxSuppressionAsync"),u=xu(a,i,n,r,s,null),c=u.maxOutputSize,l=u.iouThreshold,d=u.scoreThreshold,[f,p]=await Promise.all([a.data(),i.data()]),{selectedIndices:h,validOutputs:m}=DN(f,p,c,l,d,o);return a!==e&&a.dispose(),i!==t&&i.dispose(),{selectedIndices:zn(h,"int32"),validOutputs:lt(m,"int32")}}const qH=GH;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KH(e,t,n=!1,r=!1){const s=T(e,"images","resizeBilinear");D(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),D(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),D(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=s,a=!1;s.rank===3&&(a=!0,o=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const i={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},c=W.runKernel(_g,i,u);return a?oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const XH=B({resizeBilinear_:KH});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YH(e,t,n=!1,r=!1){const s=T(e,"images","resizeNearestNeighbor");D(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),D(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),D(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),D(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=s,a=!1;s.rank===3&&(a=!0,o=oe(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const i={images:o},u={alignCorners:n,halfPixelCenters:r,size:t},c=W.runKernel(Ig,i,u);return a?oe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const QH=B({resizeNearestNeighbor_:YH});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZH(e,t="binary",n=!1,r=.5){const s=T(e,"image","threshold"),o=.2989,a=.587,i=.114,u=s.shape[0]*s.shape[1];let c=me(zn([r]),255),l,d,f,p;if(D(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),D(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),D(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),D(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),s.shape[2]===3){[l,d,f]=yd(s,[1,1,1],-1);const y=me(l,o),g=me(d,a),b=me(f,i);p=Oe(Oe(y,g),b)}else p=e;if(t==="otsu"){const y=KT(qt(bN(p),"int32"),Fs([]),256);c=JH(y,u)}const h=n?s2(p,c):ry(p,c);return qt(me(h,255),"int32")}function JH(e,t){let n=zn([-1]),r=zn([0]),s=zn([0]),o,a,i,u,c,l;for(let d=0;d<e.size-1;d++){o=Ke(e,0,d+1),a=Ke(e,d+1),c=tt(Ft(o),t),l=tt(Ft(a),t);const f=Ft(me(o,md(0,o.size)));i=tt(f,Ft(o));const p=Bd(a.shape,o.size),h=Oe(md(0,a.size),p),m=me(a,h);u=tt(Ft(m),Ft(a));const y=Xe(i,u),g=Xe(i,u),b=me(c,l);s=me(me(b,y),g);const w=ry(s,r);r=ka(w,s,r),n=ka(w,zn([d]),n)}return n}const ej=B({threshold_:ZH});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tj(e,t,n="nearest",r="constant",s=0,o){const a=T(e,"image","transform","float32"),i=T(t,"transforms","transform","float32");D(a.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),D(i.rank===2&&(i.shape[0]===a.shape[0]||i.shape[0]===1)&&i.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),D(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);const u={image:a,transforms:i},c={interpolation:n,fillMode:r,fillValue:s,outputShape:o};return W.runKernel(Yg,u,c)}const nj=B({transform_:tj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rj(e,t,n){const r=T(e,"a","bandPart");D(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[o,a]=r.shape.slice(-2);let i,u;typeof t=="number"?(D(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),D(t<=o,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${o}).`),i=T(t<0?o:t,"numLower","bandPart")):(D(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),i=ka(c1(t,0),o,ph(t,o))),typeof n=="number"?(D(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),D(n<=a,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${a}).`),u=T(n<0?a:n,"numUpper","bandPart")):(D(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),u=ka(c1(n,0),a,ph(n,a)));const c=oe(md(0,o,1,"int32"),[-1,1]),l=md(0,a,1,"int32"),d=Xe(c,l),f=dh(s2(d,i),sN(d,oo(u))),p=ru([o,a],r.dtype);return oe(Po(Ki(oe(r,[-1,o,a])).map(h=>ka(f,h,p))),s)}const sj=B({bandPart_:rj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oj(e){let t;if(Array.isArray(e)){t=!1,D(e!=null&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=e[0].shape[0];for(let o=1;o<e.length;++o)D(e[o].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[o].shape[0]} vs. ${s})`)}else t=!0,e=yd(e,e.shape[0],0).map(s=>Tn(s,[0]));D(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);const n=[],r=e;for(let s=0;s<e.length;++s)n.push(W.tidy(()=>{let o=r[s];if(s>0)for(let a=0;a<s;++a){const i=me(Ft(me(n[a],o)),n[a]);o=Xe(o,i)}return tt(o,ny(o,"euclidean"))}));return t?Po(n,0):n}const aj=B({gramSchmidt_:oj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ij(e,t=!1){if(D(e.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`),e.rank===2)return vk(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce((u,c)=>u*c),r=Ki(oe(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],o=[];r.forEach(u=>{const[c,l]=vk(u,t);s.push(c),o.push(l)});const a=oe(Po(s,0),e.shape),i=oe(Po(o,0),e.shape);return[a,i]}}function vk(e,t=!1){return W.tidy(()=>{D(e.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);const n=e.shape[0],r=e.shape[1];let s=tN(n),o=xa(e);const a=_i([[1]],[1,1]);let i=xa(a);const u=n>=r?r:n;for(let c=0;c<u;++c){const l=o,d=i,f=s;[i,o,s]=W.tidy(()=>{const p=Ke(o,[c,c],[n-c,1]),h=ny(p),m=Ke(o,[c,c],[1,1]),y=ka(ry(m,0),_i([[-1]]),_i([[1]])),g=Xe(m,me(y,h)),b=tt(p,g);b.shape[0]===1?i=xa(a):i=$n([a,Ke(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const w=oo(tt(St(y,g),h)),S=Ke(o,[c,0],[n-c,r]),I=me(w,i),_=d1(i);if(c===0)o=Xe(S,St(I,St(_,S)));else{const $=Xe(S,St(I,St(_,S)));o=$n([Ke(o,[0,0],[c,r]),$],0)}const C=d1(I),N=Ke(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=Xe(N,St(St(N,i),C));else{const $=Xe(N,St(St(N,i),C));s=$n([Ke(s,[0,0],[n,c]),$],1)}return[i,o,s]}),gn([l,d,f])}return!t&&n>r&&(s=Ke(s,[0,0],[n,r]),o=Ke(o,[0,0],[r,r])),[s,o]})}const lj=B({qr_:ij});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var hr;(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(hr||(hr={}));function uj(e,t,n=hr.SUM_BY_NONZERO_WEIGHTS){const r=T(e,"losses","computeWeightedLoss");let s=null;t!=null&&(s=T(t,"weights","computeWeightedLoss"));const o=s==null?r:me(r,s);if(n===hr.NONE)return o;if(n===hr.SUM)return Ft(o);if(n===hr.MEAN){if(s==null)return fh(o);{const a=r.size/s.size,i=tt(Ft(o),Ft(s));return a>1?tt(i,lt(a)):i}}if(n===hr.SUM_BY_NONZERO_WEIGHTS){if(s==null)return tt(Ft(o),lt(r.size));{const a=me(s,vi(r.shape)),i=qt(Ft(pN(a,lt(0))),"float32");return tt(Ft(o),i)}}throw Error(`Unknown reduction: ${n}`)}const Uo=B({computeWeightedLoss_:uj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cj(e,t,n,r=hr.SUM_BY_NONZERO_WEIGHTS){const s=T(e,"labels","absoluteDifference"),o=T(t,"predictions","absoluteDifference");let a=null;n!=null&&(a=T(n,"weights","absoluteDifference")),Lr(s.shape,o.shape,"Error in absoluteDifference: ");const i=jr(Xe(s,o));return Uo(i,a,r)}const dj=B({absoluteDifference_:cj});function fj(e,t,n,r,s=hr.SUM_BY_NONZERO_WEIGHTS){const o=T(e,"labels","cosineDistance"),a=T(t,"predictions","cosineDistance");let i=null;r!=null&&(i=T(r,"weights","cosineDistance")),Lr(o.shape,a.shape,"Error in cosineDistance: ");const u=lt(1),c=Xe(u,Ft(me(o,a),n,!0));return Uo(c,i,s)}const pj=B({cosineDistance_:fj});function hj(e,t,n,r=hr.SUM_BY_NONZERO_WEIGHTS){let s=T(e,"labels","hingeLoss");const o=T(t,"predictions","hingeLoss");let a=null;n!=null&&(a=T(n,"weights","hingeLoss")),Lr(s.shape,o.shape,"Error in hingeLoss: ");const i=lt(1);s=Xe(me(lt(2),s),i);const u=ay(Xe(i,me(s,o)));return Uo(u,a,r)}const mj=B({hingeLoss_:hj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gj(e,t,n,r=1,s=hr.SUM_BY_NONZERO_WEIGHTS){const o=T(e,"labels","huberLoss"),a=T(t,"predictions","huberLoss");let i=null;n!=null&&(i=T(n,"weights","huberLoss")),Lr(o.shape,a.shape,"Error in huberLoss: ");const u=lt(r),c=jr(Xe(a,o)),l=ph(c,u),d=Xe(c,l),f=Oe(me(lt(.5),Ms(l)),me(u,d));return Uo(f,i,s)}const yj=B({huberLoss_:gj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vj(e,t,n,r=1e-7,s=hr.SUM_BY_NONZERO_WEIGHTS){const o=T(e,"labels","logLoss"),a=T(t,"predictions","logLoss");let i=null;n!=null&&(i=T(n,"weights","logLoss")),Lr(o.shape,a.shape,"Error in logLoss: ");const u=lt(1),c=lt(r),l=oo(me(o,hd(Oe(a,c)))),d=me(Xe(u,o),hd(Oe(Xe(u,a),c))),f=Xe(l,d);return Uo(f,i,s)}const bj=B({logLoss_:vj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wj(e,t,n,r=hr.SUM_BY_NONZERO_WEIGHTS){const s=T(e,"labels","meanSquaredError"),o=T(t,"predictions","meanSquaredError");let a=null;n!=null&&(a=T(n,"weights","meanSquaredError")),Lr(s.shape,o.shape,"Error in meanSquaredError: ");const i=SN(s,o);return Uo(i,a,r)}const Sj=B({meanSquaredError_:wj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xj(e,t){const n=T(e,"labels","sigmoidCrossEntropyWithLogits"),r=T(t,"logits","sigmoidCrossEntropyWithLogits");Lr(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=ay(r),o=me(r,n),a=aN(Mo(oo(jr(r))));return Oe(Xe(s,o),a)}function kj(e,t,n,r=0,s=hr.SUM_BY_NONZERO_WEIGHTS){let o=T(e,"multiClassLabels","sigmoidCrossEntropy");const a=T(t,"logits","sigmoidCrossEntropy");let i=null;if(n!=null&&(i=T(n,"weights","sigmoidCrossEntropy")),Lr(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=lt(r),l=lt(1),d=lt(.5);o=Oe(me(o,Xe(l,c)),me(d,c))}const u=xj(o,a);return Uo(u,i,s)}const Ij=B({sigmoidCrossEntropy_:kj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _j(e,t,n=-1){if(n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Oo((s,o,a)=>{const u=lN(o,[n],!0),c=Xe(qt(o,"float32"),u);a([s,c]);const l=oo(me(c,s));return{value:Ft(l,[n]),gradFunc:(p,h)=>{const[m,y]=h,g=Rn(p.shape,[n]);return[me(oe(p,g),Xe(qt(m,"float32"),Mo(y))),me(oe(p,g),Xe(Mo(y),qt(m,"float32")))]}}})(e,t)}function Ej(e,t,n,r=0,s=hr.SUM_BY_NONZERO_WEIGHTS){let o=T(e,"onehotLabels","softmaxCrossEntropy");const a=T(t,"logits","softmaxCrossEntropy");let i=null;if(n!=null&&(i=T(n,"weights","softmaxCrossEntropy")),Lr(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){const c=lt(r),l=lt(1),d=lt(o.shape[1]);o=Oe(me(o,Xe(l,c)),tt(c,d))}const u=_j(o,a);return Uo(u,i,s)}const Cj=B({softmaxCrossEntropy_:Ej});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tj(e,t,n,r){const s=T(e,"indices","sparseFillEmptyRows","int32"),o=T(t,"values","sparseFillEmptyRows"),a=T(n,"denseShape","sparseFillEmptyRows","int32"),i=T(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(o.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${o.shape}`);if(a.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${a.shape}`);if(i.rank!==0)throw new Error(`Default value should be a scalar but received shape ${i.shape}`);const u={indices:s,values:o,denseShape:a,defaultValue:i},c=W.runKernel(Vw,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const Nj=B({sparseFillEmptyRows_:Tj});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aj(e,t,n){const r=T(e,"inputIndices","sparseReshape","int32"),s=T(t,"inputShape","sparseReshape","int32"),o=T(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(o.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${o.shape}`);const a={inputIndices:r,inputShape:s,newShape:o},i=W.runKernel(Ug,a);return{outputIndices:i[0],outputShape:i[1]}}const Dj=B({sparseReshape_:Aj});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $j(e,t,n){const r=T(e,"data","sparseSegmentMean"),s=T(t,"indices","sparseSegmentMean","int32"),o=T(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${o.shape}`);const a={data:r,indices:s,segmentIds:o};return W.runKernel(Hw,a)}const Rj=B({sparseSegmentMean_:$j});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fj(e,t,n){const r=T(e,"data","sparseSegmentSum"),s=T(t,"indices","sparseSegmentSum","int32"),o=T(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${o.shape}`);const a={data:r,indices:s,segmentIds:o};return W.runKernel(jw,a)}const Mj=B({sparseSegmentSum_:Fj});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oj(e,t,n,r,s,o,a,i){const u=T(e,"data","stringNGrams","string");if(u.dtype!=="string")throw new Error("Data must be of datatype string");if(u.shape.length!==1)throw new Error(`Data must be a vector, saw: ${u.shape}`);const c=T(t,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const l={separator:n,nGramWidths:r,leftPad:s,rightPad:o,padWidth:a,preserveShortSequences:i},d={data:u,dataSplits:c},f=W.runKernel(qw,d,l);return{nGrams:f[0],nGramsSplits:f[1]}}const Pj=B({stringNGrams_:Oj});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bj(e,t,n=!0){const r=T(e,"input","stringSplit","string"),s=T(t,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const o={skipEmpty:n},a={input:r,delimiter:s},i=W.runKernel(Kw,a,o);return{indices:i[0],values:i[1],shape:i[2]}}const Lj=B({stringSplit_:Bj});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zj(e,t){const n=T(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return W.runKernel(Xw,s,r)}const Wj=B({stringToHashBucketFast_:zj});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uj(e,t,n,r=!0){const s=T(e,"input","staticRegexReplace","string"),o={pattern:t,rewrite:n,replaceGlobal:r};return W.runKernel(Gw,{x:s},o)}const Vj=B({staticRegexReplace_:Uj});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hj={fft:h2,ifft:hh,rfft:m2,irfft:wN},jj={hammingWindow:mH,hannWindow:TN,frame:NN,stft:bH},iy={flipLeftRight:kH,grayscaleToRGB:_H,resizeNearestNeighbor:QH,resizeBilinear:XH,rgbToGrayscale:CH,rotateWithOffset:NH,cropAndResize:SH,nonMaxSuppression:DH,nonMaxSuppressionAsync:LH,nonMaxSuppressionWithScore:WH,nonMaxSuppressionWithScoreAsync:VH,nonMaxSuppressionPadded:jH,nonMaxSuppressionPaddedAsync:qH,threshold:ej,transform:nj},Gj={bandPart:sj,gramSchmidt:aj,qr:lj},qj={absoluteDifference:dj,computeWeightedLoss:Uo,cosineDistance:pj,hingeLoss:mj,huberLoss:yj,logLoss:bj,meanSquaredError:Sj,sigmoidCrossEntropy:Ij,softmaxCrossEntropy:Cj},Kj={sparseFillEmptyRows:Nj,sparseReshape:Dj,sparseSegmentMean:Rj,sparseSegmentSum:Mj},Xj={stringNGrams:Pj,stringSplit:Lj,stringToHashBucketFast:Wj,staticRegexReplace:Vj};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yj=new Map,Qj=new Map;class Zj{getClassName(){return this.constructor.className}static fromConfig(t,n){return new t(n)}}class di{constructor(){this.classNameMap={}}static getMap(){return di.instance==null&&(di.instance=new di),di.instance}static register(t){di.getMap().classNameMap[t.className]=[t,t.fromConfig]}}function Jj(e,t,n){D(e.className!=null,()=>"Class being registered does not have the static className property defined."),D(typeof e.className=="string",()=>"className is required to be a string, but got type "+typeof e.className),D(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof n>"u"&&(n=e.className);const r=n,s=t+">"+r;return di.register(e),Yj.set(s,e),Qj.set(e,s),e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Xi extends Zj{minimize(t,n=!1,r){const{value:s,grads:o}=this.computeGradients(t,r);if(r!=null){const a=r.map(i=>({name:i.name,tensor:o[i.name]}));this.applyGradients(a)}else this.applyGradients(o);return gn(o),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,n){return Bz(t,n)}dispose(){this.iterations_!=null&&gn(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:lt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(t){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(t){return this.iterations_=(await t[0].tensor.data())[0],t.slice(1)}}Object.defineProperty(Xi,Symbol.hasInstance,{value:e=>e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eG extends Xi{static get className(){return"Adadelta"}constructor(t,n,r=null){super(),this.learningRate=t,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=W.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=W.registeredVariables[r],a=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:nt(()=>Kr(o).variable(a))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:nt(()=>Kr(o).variable(a))});const i=Array.isArray(t)?t[s].tensor:t[r];if(i==null)return;const u=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;nt(()=>{const l=Oe(me(u,this.rho),me(Ms(i),1-this.rho)),d=me(tt(Fo(Oe(c,this.epsilon)),Fo(Oe(u,this.epsilon))),i),f=Oe(me(c,this.rho),me(Ms(d),1-this.rho));u.assign(l),c.assign(f);const p=Oe(me(d,-this.learningRate),o);o.assign(p)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(gn(this.accumulatedGrads.map(t=>t.variable)),gn(this.accumulatedUpdates.map(t=>t.variable)))}async getWeights(){const t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=t.length/2,r=!1;this.accumulatedGrads=t.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=t.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tG extends Xi{static get className(){return"Adagrad"}constructor(t,n=.1){super(),this.learningRate=t,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=W.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:nt(()=>Bd(o.shape,this.initialAccumulatorValue).variable(!1))});const a=Array.isArray(t)?t[s].tensor:t[r];if(a==null)return;const i=this.accumulatedGrads[s].variable;nt(()=>{const u=Oe(i,Ms(a));i.assign(u);const c=Oe(me(tt(a,Fo(Oe(u,W.backend.epsilon()))),-this.learningRate),o);o.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&gn(this.accumulatedGrads.map(t=>t.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulatedGrads=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,n){return new t(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nG extends Xi{static get className(){return"Adam"}constructor(t,n,r,s=null){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],nt(()=>{this.accBeta1=lt(n).variable(),this.accBeta2=lt(r).variable()}),s==null&&(this.epsilon=W.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);nt(()=>{const r=Xe(1,this.accBeta1),s=Xe(1,this.accBeta2);n.forEach((o,a)=>{const i=W.registeredVariables[o],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${o}/m`,variable:nt(()=>Kr(i).variable(u))}),this.accumulatedSecondMoment[a]==null&&(this.accumulatedSecondMoment[a]={originalName:`${o}/v`,variable:nt(()=>Kr(i).variable(u))});const c=Array.isArray(t)?t[a].tensor:t[o];if(c==null)return;const l=this.accumulatedFirstMoment[a].variable,d=this.accumulatedSecondMoment[a].variable,f=Oe(me(l,this.beta1),me(c,1-this.beta1)),p=Oe(me(d,this.beta2),me(Ms(c),1-this.beta2)),h=tt(f,r),m=tt(p,s);l.assign(f),d.assign(p);const y=Oe(me(tt(h,Oe(Fo(m),this.epsilon)),-this.learningRate),i);i.assign(y)}),this.accBeta1.assign(me(this.accBeta1,this.beta1)),this.accBeta2.assign(me(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&gn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&gn(this.accumulatedSecondMoment.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t),nt(()=>{this.accBeta1.assign(pd(this.beta1,this.iterations_+1)),this.accBeta2.assign(pd(this.beta2,this.iterations_+1))});const n=t.length/2,r=!1;this.accumulatedFirstMoment=t.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=t.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rG extends Xi{static get className(){return"Adamax"}constructor(t,n,r,s=null,o=0){super(),this.learningRate=t,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],nt(()=>{this.iteration=lt(0).variable(),this.accBeta1=lt(n).variable()}),s==null&&(this.epsilon=W.backend.epsilon())}applyGradients(t){const n=Array.isArray(t)?t.map(r=>r.name):Object.keys(t);nt(()=>{const r=Xe(1,this.accBeta1),s=tt(-this.learningRate,Oe(me(this.iteration,this.decay),1));n.forEach((o,a)=>{const i=W.registeredVariables[o],u=!1;this.accumulatedFirstMoment[a]==null&&(this.accumulatedFirstMoment[a]={originalName:`${o}/m`,variable:Kr(i).variable(u)}),this.accumulatedWeightedInfNorm[a]==null&&(this.accumulatedWeightedInfNorm[a]={originalName:`${o}/v`,variable:Kr(i).variable(u)});const c=Array.isArray(t)?t[a].tensor:t[o];if(c==null)return;const l=this.accumulatedFirstMoment[a].variable,d=this.accumulatedWeightedInfNorm[a].variable,f=Oe(me(l,this.beta1),me(c,1-this.beta1)),p=me(d,this.beta2),h=jr(c),m=fN(p,h);l.assign(f),d.assign(m);const y=Oe(me(tt(s,r),tt(f,Oe(m,this.epsilon))),i);i.assign(y)}),this.iteration.assign(Oe(this.iteration,1)),this.accBeta1.assign(me(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&gn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&gn(this.accumulatedWeightedInfNorm.map(t=>t.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(t){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,n){return new t(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RN extends Xi{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=Array.isArray(t)?t[s].tensor:t[r];if(o==null)return;const a=W.registeredVariables[r];nt(()=>{const i=Oe(me(this.c,o),a);a.assign(i)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=to(lt(-t))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(t){if(t=await this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,n){return new t(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sG extends RN{static get className(){return"Momentum"}constructor(t,n,r=!1){super(t),this.learningRate=t,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=lt(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=W.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:nt(()=>Kr(o).variable(!1))});const a=this.accumulations[s].variable,i=Array.isArray(t)?t[s].tensor:t[r];i!=null&&nt(()=>{let u;const c=Oe(me(this.m,a),i);this.useNesterov?u=Oe(me(this.c,Oe(i,me(c,this.m))),o):u=Oe(me(this.c,c),o),a.assign(c),o.assign(u)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&gn(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=!1;this.accumulations=t.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,n){return new t(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oG extends Xi{static get className(){return"RMSProp"}constructor(t,n=.9,r=0,s=null,o=!1){if(super(),this.learningRate=t,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,s==null&&(this.epsilon=W.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(r=>r.name):Object.keys(t)).forEach((r,s)=>{const o=W.registeredVariables[r],a=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:nt(()=>Kr(o).variable(a))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:nt(()=>Kr(o).variable(a))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:nt(()=>Kr(o).variable(a))});const i=Array.isArray(t)?t[s].tensor:t[r];if(i==null)return;const u=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;nt(()=>{const l=Oe(me(u,this.decay),me(Ms(i),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,f=Oe(me(d,this.decay),me(i,1-this.decay)),p=tt(me(i,this.learningRate),Fo(Xe(l,Oe(Ms(f),this.epsilon)))),h=Oe(me(c,this.momentum),p);u.assign(l),d.assign(f),c.assign(h);const m=Xe(o,h);o.assign(m)}else{const d=Oe(me(u,this.decay),me(Ms(i),1-this.decay)),f=Oe(me(c,this.momentum),tt(me(i,this.learningRate),Fo(Oe(d,this.epsilon))));u.assign(d),c.assign(f);const p=Xe(o,f);o.assign(p)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&gn(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&gn(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&gn(this.accumulatedMoments.map(t=>t.variable))}async getWeights(){const t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(t.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(t){t=await this.extractIterations(t);const n=this.centered?t.length/3:t.length/2,r=!1;this.accumulatedMeanSquares=t.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=t.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=t.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,n){return new t(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aG=[eG,tG,nG,rG,sG,oG,RN];function iG(){for(const e of aG)Jj(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lG="model",uG=".json",cG=".weights.bin";function bk(e){return new Promise(t=>setTimeout(t)).then(e)}class Oi{constructor(t){if(!Ye().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(Oi.URL_SCHEME)&&(t=t.slice(Oi.URL_SCHEME.length)),(t==null||t.length===0)&&(t=lG),this.modelJsonFileName=t+uG,this.weightDataFileName=t+cG}async save(t){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=zs.join(t.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o=$T(t,s),a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),i=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=a,await bk(()=>i.dispatchEvent(new MouseEvent("click"))),t.weightData!=null){const u=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;u.download=this.weightDataFileName,u.href=r,await bk(()=>u.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:Pd(t)}}}}Oi.URL_SCHEME="downloads://";class dG{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{const o=JSON.parse(s.target.result),a=o.modelTopology;if(a==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(o.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:a});return}const u=n2(o,c=>this.loadWeights(c));t(u)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(t){const n=[],r=[];for(const a of t)n.push(...a.weights),r.push(...a.paths);const s=this.checkManifestAndWeightFiles(t),o=r.map(a=>this.loadWeightsFile(a,s[a]));return Promise.all(o).then(a=>[n,a])}loadWeightsFile(t,n){return new Promise((r,s)=>{const o=new FileReader;o.onload=a=>{const i=a.target.result;r(i)},o.onerror=a=>s(`Failed to weights data from file of path '${t}'.`),o.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(t){const n=[],r=this.weightsFiles.map(o=>mk(o.name)),s={};for(const o of t)o.paths.forEach(a=>{const i=mk(a);if(n.indexOf(i)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(n.push(i),r.indexOf(i)===-1)throw new Error(`Weight file with basename '${i}' is not provided.`);s[a]=this.weightsFiles[r.indexOf(i)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const fG=e=>Ye().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Oi.URL_SCHEME)?pG(e.slice(Oi.URL_SCHEME.length)):null;jt.registerSaveRouter(fG);function pG(e="model"){return new Oi(e)}function hG(e){return new dG(e)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wk(e,t,n,r){a(e),n=n??0,r=r??1,i(n,r);let s=0;const o=u=>(u.then(c=>{const l=n+ ++s/e.length*(r-n);return t(l),c}),u);function a(u){D(u!=null&&Array.isArray(u)&&u.length>0,()=>"promises must be a none empty array")}function i(u,c){D(u>=0&&u<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${u}`),D(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),D(c>=u,()=>`startFraction must be no more than endFraction, but got startFraction ${u} and endFraction ${c}`)}return Promise.all(e.map(o))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function FN(e,t){t==null&&(t={});const n=t.fetchFunc==null?Ye().platform.fetch:t.fetchFunc,r=e.map(d=>n(d,t.requestInit,{isBinary:!0})),i=(t.onProgress==null?await Promise.all(r):await wk(r,t.onProgress,0,.5)).map(d=>d.arrayBuffer());return t.onProgress==null?await Promise.all(i):await wk(i,t.onProgress,.5,1)}async function mG(e,t="",n,r){return MN(a=>FN(a,{requestInit:r}))(e,t,n)}function MN(e){return async(t,n="",r)=>{const s=t.map(()=>!1),o={},a=r!=null?r.map(()=>!1):[],i=[];if(t.forEach((p,h)=>{let m=0;p.weights.forEach(y=>{const g="quantization"in y?y.quantization.dtype:y.dtype,b=n1[g]*ee(y.shape),w=()=>{s[h]=!0,o[h]==null&&(o[h]=[]),o[h].push({manifestEntry:y,groupOffset:m,sizeBytes:b})};r!=null?r.forEach((S,I)=>{S===y.name&&(w(),a[I]=!0)}):w(),i.push(y.name),m+=b})}),!a.every(p=>p)){const p=r.filter((h,m)=>!a[m]);throw new Error(`Could not find weights in manifest with names: ${p.join(", ")}. 
Manifest JSON has weights with names: ${i.join(", ")}.`)}const u=s.reduce((p,h,m)=>(h&&p.push(m),p),[]),c=[];u.forEach(p=>{t[p].paths.forEach(h=>{const m=n+(n.endsWith("/")?"":"/")+h;c.push(m)})});const l=await e(c),d={};let f=0;return u.forEach(p=>{const h=t[p].paths.length,m=new zs(l.slice(f,f+h));o[p].forEach(g=>{const b=m.slice(g.groupOffset,g.groupOffset+g.sizeBytes),w=DT(b,[g.manifestEntry]);for(const S in w)d[S]=w[S]}),f+=h}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gG="application/octet-stream",yG="application/json";class x2{constructor(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(D(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=Ye().platform.fetch,D(t!=null&&t.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(t)&&D(t.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],s=$T(t,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:yG}),"model.json"),t.weightData!=null){const a=zs.join(t.weightData);n.body.append("model.weights.bin",new Blob([a],{type:gG}),"model.weights.bin")}const o=await this.fetch(this.path,n);if(o.ok)return{modelArtifactsInfo:Pd(t),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await t.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n2(n,o=>this.loadWeights(o))}async loadWeights(t){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=vG(n),o=this.weightPathPrefix||r,a=FT(t),i=[],u=[];for(const l of t)for(const d of l.paths)this.weightUrlConverter!=null?u.push(this.weightUrlConverter(d)):i.push(o+d+s);this.weightUrlConverter&&i.push(...await Promise.all(u));const c=await FN(i,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[a,c]}}x2.URL_SCHEME_REGEX=/^https?:\/\//;function vG(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),s=n>t?e.substring(n):"";return[r+"/",s]}function f1(e){return e.match(x2.URL_SCHEME_REGEX)!=null}const ON=(e,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let n=!0;if(Array.isArray(e)?n=e.every(r=>f1(r)):n=f1(e),n)return k2(e,t)}return null};jt.registerSaveRouter(ON);jt.registerLoadRouter(ON);function k2(e,t){return new x2(e,t)}function bG(e,t){return k2(e,t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class hv{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}}class PN{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}}class wG{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=n=>Promise.resolve(t.save(n)))}}function SG(e,t,n,r){const s=arguments;return new wG(BN(...s))}function BN(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new hv(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new hv({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new hv({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function xG(e){return new PN(e)}function kG(e){return new PN(e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LN=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:zs,browserFiles:hG,browserHTTPRequest:bG,concatenateArrayBuffers:SL,copyModel:VL,decodeWeights:DT,encodeWeights:yL,fromMemory:SG,fromMemorySync:BN,getLoadHandlers:NL,getModelArtifactsForJSON:n2,getModelArtifactsForJSONSync:RT,getModelArtifactsInfoForJSON:Pd,getSaveHandlers:TL,getWeightSpecs:FT,http:k2,isHTTPScheme:f1,listModels:WL,loadWeights:mG,moveModel:HL,registerLoadRouter:CL,registerSaveRouter:EL,removeModel:UL,weightsLoaderFactory:MN,withSaveHandler:xG,withSaveHandlerSync:kG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ri;function IG(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,o=!1,a=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)o=!0;else if(e.getContext!=null)a=!0;else if(typeof ImageBitmap<"u"&&e instanceof ImageBitmap)i=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);if(X0(tk,W.backendName)!=null){const h={pixels:e},m={numChannels:t};return W.runKernel(tk,h,m)}const[c,l]=s?[e.videoWidth,e.videoHeight]:[e.width,e.height];let d;if(a)d=e.getContext("2d").getImageData(0,0,c,l).data;else if(r||n)d=e.data;else if(o||s||i){if(ri==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")ri=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else ri=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});ri.canvas.width=c,ri.canvas.height=l,ri.drawImage(e,0,0,c,l),d=ri.getImageData(0,0,c,l).data}let f;if(t===4)f=new Int32Array(d);else{const h=c*l;f=new Int32Array(h*t);for(let m=0;m<h;m++)for(let y=0;y<t;++y)f[m*t+y]=d[m*4+y]}return kN(f,[l,c,t],"int32")}function _G(e){if(e.rank!==2&&e.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);const t=e.rank===2?1:e.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(e.dtype!=="float32"&&e.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}async function EG(e,t){let n=T(e,"img","toPixels");if(!(e instanceof ln)){const c=n;n=qt(c,"int32"),c.dispose()}_G(n);const[r,s]=n.shape.slice(0,2),o=n.rank===2?1:n.shape[2],a=await n.data(),i=n.dtype==="float32"?255:1,u=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const l=[0,0,0,255];for(let f=0;f<o;f++){const p=a[c*o+f];if(n.dtype==="float32"){if(p<0||p>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${p}.`)}else if(n.dtype==="int32"&&(p<0||p>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${p}.`);o===1?(l[0]=p*i,l[1]=p*i,l[2]=p*i):l[f]=p*i}const d=c*4;u[d+0]=Math.round(l[0]),u[d+1]=Math.round(l[1]),u[d+2]=Math.round(l[2]),u[d+3]=Math.round(l[3])}return n!==e&&n.dispose(),u}const CG=B({fromPixels_:IG});function zN(e,t){const n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(ee(e.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const s=t.shape,o=s[s.length-1];let a=1;for(let d=0;d<s.length-1;++d)a*=s[d];const i=e.shape,u=s.slice();u.pop();let c=1;for(let d=o;d<n;++d)c*=i[d],u.push(i[d]);const l=[...Ee(e.shape).map(d=>d/c),1].slice(0,o);return[u,a,c,l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p1=-2,TG=-1;function NG(e,t,n){const r=e.shape.length;D(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),D(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)D(t[s]+n[s]<=e.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${t[s]+n[s]}) would overflow input.shape[${s}] (${e.shape[s]})`)}function WN(e,t,n){const r=[];for(let s=0;s<e.length;s++)r[s]=Math.ceil((t[s]-e[s])/n[s]);return r}function UN(e,t,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(t[s]>0||n[s]!==e[s])return!1;return!0}function VN(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function HN(e,t,n){let r;const s=e.shape.length;typeof t=="number"?r=[t,...new Array(s-1).fill(0)]:t.length<s?r=t.concat(new Array(s-t.length).fill(0)):r=t.slice(),r.forEach(a=>{D(a!==-1,()=>"slice() does not support negative begin indexing.")});let o;return n==null?o=new Array(s).fill(-1):typeof n=="number"?o=[n,...new Array(s-1).fill(-1)]:n.length<s?o=n.concat(new Array(s-n.length).fill(-1)):o=n,o=o.map((a,i)=>a>=0?a:(D(a===-1,()=>`Negative size values should be exactly -1 but got ${a} for the slice() size at index ${i}.`),e.shape[i]-r[i])),[r,o]}function jN(e,t,n,r,s,o,a,i,u){let c;if(r==null?(c=new Array(t.length),c.fill(1)):c=r,a!=null&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let l=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:o,ellipsisMask:a,newAxisMask:i,shrinkAxisMask:u};for(let w=0;w<d.dims;w++)l&&1<<w&i&&d.numAddAxisAfterEllipsis++,1<<w&a&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);const f={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};AG(d,f);let p=!0,h=!0,m=!0;const y=[],g=[];for(let w=0;w<e.length;++w){if(f.strides[w]===0)throw Error(`strides[${w}] must be non-zero`);const S=!!(f.shrinkAxisMask&1<<w),I=e[w];if(I===-1){y.push(S?1:-1);continue}const _=[f.beginMask&1<<w,f.endMask&1<<w],C=[f.strides[w]>0?0:-1,f.strides[w]>0?I:I-1];if(S&&f.strides[w]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&f.strides[w]===1;const N=!!(f.beginMask&1<<w&&f.endMask&1<<w);if(f.beginValid&&f.endValid){if(S){const U=f.begin[w]<0?I+f.begin[w]:f.begin[w];if(f.begin[w]=U,f.end[w]=f.begin[w]+1,U<0||U>=I)throw Error(`slice index ${f.begin[w]} of dimension ${w} out of bounds.`)}else f.begin[w]=Sk(f.begin[w],0,f.strides[w],I,_,C),f.end[w]=Sk(f.end[w],1,f.strides[w],I,_,C);const F=f.strides[w]===1&&f.begin[w]===0&&f.end[w]===I;p=p&&F,h=h&&(w===0&&f.strides[w]===1||F)}else p=p&&f.strides[w]===1&&N,h=h&&(w===0&&f.strides[w]===1||N);let $,R=!1;if(f.beginValid&&f.endValid?($=f.end[w]-f.begin[w],R=!0):S?($=1,R=!0):N&&I>=0&&(f.strides[w]<0?$=-I:$=I,R=!0),R){let F;$===0||$<0!=f.strides[w]<0?F=0:F=Math.trunc($/f.strides[w])+($%f.strides[w]!==0?1:0),y.push(F)}else y.push(-1)}for(let w=0;w<f.finalShapeGatherIndices.length;++w){const S=f.finalShapeGatherIndices[w];S>=0?g.push(y[S]):S===p1&&g.push(1)}return{finalShapeSparse:g.filter((w,S)=>f.finalShapeGatherIndices[S]!==p1),finalShape:g,isIdentity:p,sliceDim0:h,isSimpleSlice:m,begin:f.begin,end:f.end,strides:f.strides}}function AG(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=e.begin!=null,t.endValid=e.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){const s=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<s;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(p1),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);e.begin!=null&&(t.begin[n]=e.begin[r]),e.end!=null&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(TG),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}function Sk(e,t,n,r,s,o){if(s[t])return n>0?o[t]:o[t+1&1];{const a=e<0?r+e:e;return a<o[0]?o[0]:a>o[1]?o[1]:a}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GN(e,t){const n=e[0].length;e.forEach((s,o)=>{D(s.length===n,()=>`Error in concat${n}D: rank of tensors[${o}] must be the same as the rank of the rest (${n})`)}),D(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=e[0];e.forEach((s,o)=>{for(let a=0;a<n;a++)D(a===t||s[a]===r[a],()=>`Error in concat${n}D: Shape of tensors[${o}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`)})}function Ul(e,t){const n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Js;(function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"})(Js||(Js={}));function DG(e,t,n){let r=new Array;if(n==null&&t==null)return r;if(t==null)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(n==null)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const o=n[s],a=r[r.length-n.length+s],i=r[a];if(o>=0)if(i>=0){if(i!==o)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${s+e}] = ${o} but shape[${s+e}] = ${i}`)}else r[a]=o}return r}function $G(e){const t={FIRST_DIM_SIZE:Js.FIRST_DIM_SIZE,VALUE_ROWIDS:Js.VALUE_ROWIDS,ROW_LENGTHS:Js.ROW_LENGTHS,ROW_SPLITS:Js.ROW_SPLITS,ROW_LIMITS:Js.ROW_LIMITS,ROW_STARTS:Js.ROW_STARTS},n=[];for(const r of e)if(r in t)n.push(t[r]);else break;return n}function RG(e){return e.length===0?0:e[0]===Js.FIRST_DIM_SIZE?e.length-1:e.length}function FG(e,t){if(e==null||t==null)return;const n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const o=e[s],a=t[s+1];if(o>=0&&a>=0&&o!==1&&o!==a)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${s-e.length}] = ${o} but ragged tensor input.flatValues.shape[${s-e.length}] = ${a}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qN(e,t,n){const r=n*(typeof e=="number"?e:e[0]),s=t*(typeof e=="number"?e:e[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ly(e,t,n,r=!0){let s=[];if(r)s=s.concat(t.slice(0)),s.push(e[0]/n),s=s.concat(e.slice(1));else{s=s.concat(e[0]);const o=t.length;for(let a=0;a<o;++a)s=s.concat([e[a+1]/t[a],t[a]]);s=s.concat(e.slice(o+1))}return s}function uy(e,t,n=!0){const r=[];if(n){r.push(t);for(let s=t+1;s<e;++s)s<=2*t?(r.push(s),r.push(s-(t+1))):r.push(s)}else{const s=[],o=[];for(let a=1;a<e;++a)a>=t*2+1||a%2===1?o.push(a):s.push(a);r.push(...s),r.push(0),r.push(...o)}return r}function cy(e,t,n,r=!0){const s=[];r?s.push(e[0]/n):s.push(e[0]*n);for(let o=1;o<e.length;++o)o<=t.length?r?s.push(t[o-1]*e[o]):s.push(e[o]/t[o-1]):s.push(e[o]);return s}function KN(e,t){const n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function XN(e,t,n){const r=e.slice(0,1);for(let s=0;s<n;++s)r.push(e[s+1]-t[s][0]-t[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MG=1.7580993408473768,OG=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PG=.3275911,BG=.254829592,LG=-.284496736,zG=1.421413741,WG=-1.453152027,UG=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function su(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(e.length*2);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function VG(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function HG(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let s=0;s<e.length;s+=4)n[Math.floor(s/4)]=e[s],r[Math.floor(s/4)]=e[s+1];return{real:n,imag:r}}function jG(e){const t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let s=2;s<e.length;s+=4)n[Math.floor(s/4)]=e[s],r[Math.floor(s/4)]=e[s+1];return{real:n,imag:r}}function YN(e,t){const n=e[t*2],r=e[t*2+1];return{real:n,imag:r}}function GG(e,t,n,r){e[r*2]=t,e[r*2+1]=n}function qG(e,t){const n=new Float32Array(e/2),r=new Float32Array(e/2);for(let s=0;s<Math.ceil(e/2);s++){const o=(t?2:-2)*Math.PI*(s/e);n[s]=Math.cos(o),r[s]=Math.sin(o)}return{real:n,imag:r}}function KG(e,t,n){const r=(n?2:-2)*Math.PI*(e/t),s=Math.cos(r),o=Math.sin(r);return{real:s,imag:o}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mv="->",XG=/->/g,xk=",",kk="...";function YG(e,t){e=e.replace(/\s/g,"");const n=(e.length-e.replace(XG,"").length)/mv.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${mv}").`);const[r,s]=e.split(mv);D(r.indexOf(kk)===-1,()=>`The ellipsis notation ("${kk}") is not supported yet.`);const o=r.split(xk),a=o.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let f=0;f<s.length;++f){const p=s[f];if(!o.some(h=>h.indexOf(p)!==-1))throw new Error(`Output subscripts contain the label ${p} not present in the input subscripts.`);i.indexOf(p)===-1&&i.push(p)}for(let f=0;f<r.length;++f){const p=r[f];i.indexOf(p)===-1&&p!==xk&&i.push(p)}const u=new Array(o.length);for(let f=0;f<a;++f){if(new Set(o[f].split("")).size!==o[f].length)throw new Error(`Found duplicate axes in input component ${o[f]}. Support for duplicate axes in input is not implemented yet.`);u[f]=[];for(let p=0;p<o[f].length;++p)u[f].push(i.indexOf(o[f][p]))}const c=i.length,l=s.length,d=[];for(let f=l;f<c;++f)d.push(f);return{allDims:i,summedDims:d,idDims:u}}function QG(e,t){let n=new Array(e);n.fill(-1);for(let s=0;s<t.length;++s)n[t[s]]=s;const r=[];for(let s=0;s<e;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function ZG(e,t,n){const r=new Array(e);for(let s=0;s<n.length;++s){const o=n[s].shape;for(let a=0;a<t[s].length;++a)r[t[s][a]]===void 0?r[t[s][a]]=o[a]:D(r[t[s][a]]===o[a],()=>`Expected dimension ${r[t[s][a]]} at axis ${a} of input shaped ${JSON.stringify(o)}, but got dimension ${o[a]}`)}}function JG(e,t){const n=e,r=[];let s=0;e.length===0&&n.push(-1),s=e.length+1;for(let a=0;a<s;++a)r.push([]);const o=[];for(let a=0;a<n.length;++a){const i=n[a],u=tq(t,i);for(const c of u)o.indexOf(c)===-1&&(r[a].push(c),o.push(c))}return{path:n,steps:r}}function eq(e){return e.every((t,n)=>t===n)}function tq(e,t){const n=[];for(let r=0;r<e.length;++r)(e[r].length===0||e[r].indexOf(t)!==-1||t===-1)&&n.push(r);return n}function QN(e,t,n=0){let r=[];if(typeof t=="number")D(e.shape[n]%t===0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{const s=t.reduce((a,i)=>(i===-1&&(a+=1),a),0);D(s<=1,()=>"There should be only one negative value in split array.");const o=t.indexOf(-1);if(o!==-1){const a=t.reduce((i,u)=>u>0?i+u:i);t[o]=e.shape[n]-a}D(e.shape[n]===t.reduce((a,i)=>a+i),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZN(e){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${e}`}function JN(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function eA(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tA(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function nA(e,t){return`size ${e} must be non-negative, not ${t}`}function rA(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function sA(e,t){const n=ee(e),r=ee(t);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${e} outputShape= ${t}`}function oA(e,t){const n=ee(e),r=ee(t);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${e} outputShape=${t}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mh(){return"segment ids must be >= 0"}function aA(){return"segment ids are not increasing"}function iA(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function lA(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uA(e,t,n,r){const s=t.shape.length,o=e.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(e.shape[d]!==t.shape[d])throw new Error(`x.shape[${d}]: ${e.shape[d]} should be equal to indices.shape[${d}]: ${t.shape[d]}.`);const a=e.shape[n],i=[];let u=1,c=1,l=1;for(let d=0;d<r;++d)i.push(e.shape[d]),u*=e.shape[d];for(let d=r;d<n;d++)i.push(e.shape[d]),c*=e.shape[d];for(let d=r;d<s;d++)i.push(t.shape[d]);for(let d=n+1;d<o;d++)i.push(e.shape[d]),l*=e.shape[d];return{batchSize:u,sliceSize:l,outerSize:c,dimSize:a,outputShape:i}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vd(e){try{return e.map(t=>ud(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function cA(e){return e.map(t=>ki(t))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */iG();var nq={};(function(){var e;function t(v){var k=0;return function(){return k<v.length?{done:!1,value:v[k++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,k,E){return v==Array.prototype||v==Object.prototype||(v[k]=E.value),v};function r(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof er=="object"&&er];for(var k=0;k<v.length;++k){var E=v[k];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=r(this);function o(v,k){if(k)e:{var E=s;v=v.split(".");for(var A=0;A<v.length-1;A++){var O=v[A];if(!(O in E))break e;E=E[O]}v=v[v.length-1],A=E[v],k=k(A),k!=A&&k!=null&&n(E,v,{configurable:!0,writable:!0,value:k})}}o("Symbol",function(v){function k(q){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new E(A+(q||"")+"_"+O++,q)}function E(q,z){this.g=q,n(this,"description",{configurable:!0,writable:!0,value:z})}if(v)return v;E.prototype.toString=function(){return this.g};var A="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",O=0;return k}),o("Symbol.iterator",function(v){if(v)return v;v=Symbol("Symbol.iterator");for(var k="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),E=0;E<k.length;E++){var A=s[k[E]];typeof A=="function"&&typeof A.prototype[v]!="function"&&n(A.prototype,v,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return v});function a(v){return v={next:v},v[Symbol.iterator]=function(){return this},v}function i(v){var k=typeof Symbol<"u"&&Symbol.iterator&&v[Symbol.iterator];return k?k.call(v):{next:t(v)}}function u(v){if(!(v instanceof Array)){v=i(v);for(var k,E=[];!(k=v.next()).done;)E.push(k.value);v=E}return v}var c=typeof Object.create=="function"?Object.create:function(v){function k(){}return k.prototype=v,new k},l;if(typeof Object.setPrototypeOf=="function")l=Object.setPrototypeOf;else{var d;e:{var f={a:!0},p={};try{p.__proto__=f,d=p.a;break e}catch{}d=!1}l=d?function(v,k){if(v.__proto__=k,v.__proto__!==k)throw new TypeError(v+" is not extensible");return v}:null}var h=l;function m(v,k){if(v.prototype=c(k.prototype),v.prototype.constructor=v,h)h(v,k);else for(var E in k)if(E!="prototype")if(Object.defineProperties){var A=Object.getOwnPropertyDescriptor(k,E);A&&Object.defineProperty(v,E,A)}else v[E]=k[E];v.na=k.prototype}function y(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function g(v){if(v.l)throw new TypeError("Generator is already running");v.l=!0}y.prototype.s=function(v){this.h=v};function b(v,k){v.j={da:k,ea:!0},v.g=v.o||v.u}y.prototype.return=function(v){this.j={return:v},this.g=this.u};function w(v,k,E){return v.g=E,{value:k}}function S(v){this.g=new y,this.h=v}function I(v,k){g(v.g);var E=v.g.i;return E?_(v,"return"in E?E.return:function(A){return{value:A,done:!0}},k,v.g.return):(v.g.return(k),C(v))}function _(v,k,E,A){try{var O=k.call(v.g.i,E);if(!(O instanceof Object))throw new TypeError("Iterator result "+O+" is not an object");if(!O.done)return v.g.l=!1,O;var q=O.value}catch(z){return v.g.i=null,b(v.g,z),C(v)}return v.g.i=null,A.call(v.g,q),C(v)}function C(v){for(;v.g.g;)try{var k=v.h(v.g);if(k)return v.g.l=!1,{value:k.value,done:!1}}catch(E){v.g.h=void 0,b(v.g,E)}if(v.g.l=!1,v.g.j){if(k=v.g.j,v.g.j=null,k.ea)throw k.da;return{value:k.return,done:!0}}return{value:void 0,done:!0}}function N(v){this.next=function(k){return g(v.g),v.g.i?k=_(v,v.g.i.next,k,v.g.s):(v.g.s(k),k=C(v)),k},this.throw=function(k){return g(v.g),v.g.i?k=_(v,v.g.i.throw,k,v.g.s):(b(v.g,k),k=C(v)),k},this.return=function(k){return I(v,k)},this[Symbol.iterator]=function(){return this}}function $(v){function k(A){return v.next(A)}function E(A){return v.throw(A)}return new Promise(function(A,O){function q(z){z.done?A(z.value):Promise.resolve(z.value).then(k,E).then(q,O)}q(v.next())})}function R(v){return $(new N(new S(v)))}o("Promise",function(v){function k(z){this.h=0,this.i=void 0,this.g=[],this.s=!1;var J=this.j();try{z(J.resolve,J.reject)}catch(ne){J.reject(ne)}}function E(){this.g=null}function A(z){return z instanceof k?z:new k(function(J){J(z)})}if(v)return v;E.prototype.h=function(z){if(this.g==null){this.g=[];var J=this;this.i(function(){J.l()})}this.g.push(z)};var O=s.setTimeout;E.prototype.i=function(z){O(z,0)},E.prototype.l=function(){for(;this.g&&this.g.length;){var z=this.g;this.g=[];for(var J=0;J<z.length;++J){var ne=z[J];z[J]=null;try{ne()}catch(he){this.j(he)}}}this.g=null},E.prototype.j=function(z){this.i(function(){throw z})},k.prototype.j=function(){function z(he){return function(Ne){ne||(ne=!0,he.call(J,Ne))}}var J=this,ne=!1;return{resolve:z(this.D),reject:z(this.l)}},k.prototype.D=function(z){if(z===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(z instanceof k)this.H(z);else{e:switch(typeof z){case"object":var J=z!=null;break e;case"function":J=!0;break e;default:J=!1}J?this.A(z):this.o(z)}},k.prototype.A=function(z){var J=void 0;try{J=z.then}catch(ne){this.l(ne);return}typeof J=="function"?this.I(J,z):this.o(z)},k.prototype.l=function(z){this.u(2,z)},k.prototype.o=function(z){this.u(1,z)},k.prototype.u=function(z,J){if(this.h!=0)throw Error("Cannot settle("+z+", "+J+"): Promise already settled in state"+this.h);this.h=z,this.i=J,this.h===2&&this.G(),this.B()},k.prototype.G=function(){var z=this;O(function(){if(z.C()){var J=s.console;typeof J<"u"&&J.error(z.i)}},1)},k.prototype.C=function(){if(this.s)return!1;var z=s.CustomEvent,J=s.Event,ne=s.dispatchEvent;return typeof ne>"u"?!0:(typeof z=="function"?z=new z("unhandledrejection",{cancelable:!0}):typeof J=="function"?z=new J("unhandledrejection",{cancelable:!0}):(z=s.document.createEvent("CustomEvent"),z.initCustomEvent("unhandledrejection",!1,!0,z)),z.promise=this,z.reason=this.i,ne(z))},k.prototype.B=function(){if(this.g!=null){for(var z=0;z<this.g.length;++z)q.h(this.g[z]);this.g=null}};var q=new E;return k.prototype.H=function(z){var J=this.j();z.M(J.resolve,J.reject)},k.prototype.I=function(z,J){var ne=this.j();try{z.call(J,ne.resolve,ne.reject)}catch(he){ne.reject(he)}},k.prototype.then=function(z,J){function ne(Ve,Re){return typeof Ve=="function"?function(qe){try{he(Ve(qe))}catch(ct){Ne(ct)}}:Re}var he,Ne,Ue=new k(function(Ve,Re){he=Ve,Ne=Re});return this.M(ne(z,he),ne(J,Ne)),Ue},k.prototype.catch=function(z){return this.then(void 0,z)},k.prototype.M=function(z,J){function ne(){switch(he.h){case 1:z(he.i);break;case 2:J(he.i);break;default:throw Error("Unexpected state: "+he.h)}}var he=this;this.g==null?q.h(ne):this.g.push(ne),this.s=!0},k.resolve=A,k.reject=function(z){return new k(function(J,ne){ne(z)})},k.race=function(z){return new k(function(J,ne){for(var he=i(z),Ne=he.next();!Ne.done;Ne=he.next())A(Ne.value).M(J,ne)})},k.all=function(z){var J=i(z),ne=J.next();return ne.done?A([]):new k(function(he,Ne){function Ue(qe){return function(ct){Ve[qe]=ct,Re--,Re==0&&he(Ve)}}var Ve=[],Re=0;do Ve.push(void 0),Re++,A(ne.value).M(Ue(Ve.length-1),Ne),ne=J.next();while(!ne.done)})},k});function F(v,k){v instanceof String&&(v+="");var E=0,A=!1,O={next:function(){if(!A&&E<v.length){var q=E++;return{value:k(q,v[q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}var U=typeof Object.assign=="function"?Object.assign:function(v,k){for(var E=1;E<arguments.length;E++){var A=arguments[E];if(A)for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(v[O]=A[O])}return v};o("Object.assign",function(v){return v||U}),o("Object.is",function(v){return v||function(k,E){return k===E?k!==0||1/k===1/E:k!==k&&E!==E}}),o("Array.prototype.includes",function(v){return v||function(k,E){var A=this;A instanceof String&&(A=String(A));var O=A.length;for(E=E||0,0>E&&(E=Math.max(E+O,0));E<O;E++){var q=A[E];if(q===k||Object.is(q,k))return!0}return!1}}),o("String.prototype.includes",function(v){return v||function(k,E){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(k instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(k,E||0)!==-1}}),o("Array.prototype.keys",function(v){return v||function(){return F(this,function(k){return k})}});var L=this||self;function H(v,k){v=v.split(".");var E=L;v[0]in E||typeof E.execScript>"u"||E.execScript("var "+v[0]);for(var A;v.length&&(A=v.shift());)v.length||k===void 0?E[A]&&E[A]!==Object.prototype[A]?E=E[A]:E=E[A]={}:E[A]=k}function j(){throw Error("Invalid UTF8")}function X(v,k){return k=String.fromCharCode.apply(null,k),v==null?k:v+k}var Q,P=typeof TextDecoder<"u",G,Y=typeof TextEncoder<"u",Z={},se=null;function re(v){var k;k===void 0&&(k=0),ue(),k=Z[k];for(var E=Array(Math.floor(v.length/3)),A=k[64]||"",O=0,q=0;O<v.length-2;O+=3){var z=v[O],J=v[O+1],ne=v[O+2],he=k[z>>2];z=k[(z&3)<<4|J>>4],J=k[(J&15)<<2|ne>>6],ne=k[ne&63],E[q++]=he+z+J+ne}switch(he=0,ne=A,v.length-O){case 2:he=v[O+1],ne=k[(he&15)<<2]||A;case 1:v=v[O],E[q]=k[v>>2]+k[(v&3)<<4|he>>4]+ne+A}return E.join("")}function ae(v){var k=v.length,E=3*k/4;E%3?E=Math.floor(E):"=.".indexOf(v[k-1])!=-1&&(E="=.".indexOf(v[k-2])!=-1?E-2:E-1);var A=new Uint8Array(E),O=0;return ie(v,function(q){A[O++]=q}),O!==E?A.subarray(0,O):A}function ie(v,k){function E(ne){for(;A<v.length;){var he=v.charAt(A++),Ne=se[he];if(Ne!=null)return Ne;if(!/^[\s\xa0]*$/.test(he))throw Error("Unknown base64 encoding at char: "+he)}return ne}ue();for(var A=0;;){var O=E(-1),q=E(0),z=E(64),J=E(64);if(J===64&&O===-1)break;k(O<<2|q>>4),z!=64&&(k(q<<4&240|z>>2),J!=64&&k(z<<6&192|J))}}function ue(){if(!se){se={};for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),k=["+/=","+/","-_=","-_.","-_"],E=0;5>E;E++){var A=v.concat(k[E].split(""));Z[E]=A;for(var O=0;O<A.length;O++){var q=A[O];se[q]===void 0&&(se[q]=O)}}}}var ve=typeof Uint8Array=="function";function pe(v){return ve&&v!=null&&v instanceof Uint8Array}var xe;function Se(v){if(this.L=v,v!==null&&v.length===0)throw Error("ByteString should be constructed with non-empty values")}var Ce=typeof Uint8Array.prototype.slice=="function",$e=0,Fe=0;function Be(v,k){if(v.constructor===Uint8Array)return v;if(v.constructor===ArrayBuffer)return new Uint8Array(v);if(v.constructor===Array)return new Uint8Array(v);if(v.constructor===String)return ae(v);if(v.constructor===Se)return!k&&(k=v.L)&&k.constructor===Uint8Array?k:(k=v.L,k=k==null||pe(k)?k:typeof k=="string"?ae(k):null,(v=v.L=k)?new Uint8Array(v):xe||(xe=new Uint8Array(0)));if(v instanceof Uint8Array)return new Uint8Array(v.buffer,v.byteOffset,v.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Le(v,k){return Error("Invalid wire type: "+v+" (at position "+k+")")}function Ae(){return Error("Failed to read varint, encoding is invalid.")}function st(v,k){k=k===void 0?{}:k,k=k.v===void 0?!1:k.v,this.h=null,this.g=this.i=this.j=0,this.v=k,v&&Ze(this,v)}function Ze(v,k){v.h=Be(k,v.v),v.j=0,v.i=v.h.length,v.g=v.j}st.prototype.reset=function(){this.g=this.j};function Je(v){if(v.g>v.i)throw Error("Tried to read past the end of the data "+v.g+" > "+v.i)}function et(v){var k=v.h,E=k[v.g],A=E&127;if(128>E)return v.g+=1,Je(v),A;if(E=k[v.g+1],A|=(E&127)<<7,128>E)return v.g+=2,Je(v),A;if(E=k[v.g+2],A|=(E&127)<<14,128>E)return v.g+=3,Je(v),A;if(E=k[v.g+3],A|=(E&127)<<21,128>E)return v.g+=4,Je(v),A;if(E=k[v.g+4],v.g+=5,A|=(E&15)<<28,128>E)return Je(v),A;if(128<=k[v.g++]&&128<=k[v.g++]&&128<=k[v.g++]&&128<=k[v.g++]&&128<=k[v.g++])throw Ae();return Je(v),A}var vn=[];function Ut(){this.g=[]}Ut.prototype.length=function(){return this.g.length},Ut.prototype.end=function(){var v=this.g;return this.g=[],v};function sn(v,k){for(;127<k;)v.g.push(k&127|128),k>>>=7;v.g.push(k)}function bn(v){var k={},E=k.W===void 0?!1:k.W;this.l={v:k.v===void 0?!1:k.v},this.W=E,k=this.l,vn.length?(E=vn.pop(),k&&(E.v=k.v),v&&Ze(E,v),v=E):v=new st(v,k),this.g=v,this.j=this.g.g,this.h=this.i=-1}bn.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function Mn(v){var k=v.g;if(k.g==k.i)return!1;v.j=v.g.g;var E=et(v.g)>>>0;if(k=E>>>3,E&=7,!(0<=E&&5>=E))throw Le(E,v.j);if(1>k)throw Error("Invalid field number: "+k+" (at position "+v.j+")");return v.i=k,v.h=E,!0}function En(v){switch(v.h){case 0:if(v.h!=0)En(v);else e:{v=v.g;for(var k=v.g,E=k+10;k<E;)if(!(v.h[k++]&128)){v.g=k,Je(v);break e}throw Ae()}break;case 1:v=v.g,v.g+=8,Je(v);break;case 2:v.h!=2?En(v):(k=et(v.g)>>>0,v=v.g,v.g+=k,Je(v));break;case 5:v=v.g,v.g+=4,Je(v);break;case 3:k=v.i;do{if(!Mn(v))throw Error("Unmatched start-group tag: stream EOF");if(v.h==4){if(v.i!=k)throw Error("Unmatched end-group tag");break}En(v)}while(!0);break;default:throw Le(v.h,v.j)}}var Vt=[];function Cn(){this.i=[],this.h=0,this.g=new Ut}function Hn(v,k){k.length!==0&&(v.i.push(k),v.h+=k.length)}function fo(v,k){if(k=k.ba){Hn(v,v.g.end());for(var E=0;E<k.length;E++)Hn(v,k[E])}}var jn=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Vo(v,k){Object.isFrozen(v)||(jn?v[jn]|=k:v.N!==void 0?v.N|=k:Object.defineProperties(v,{N:{value:k,configurable:!0,writable:!0,enumerable:!1}}))}function Wr(v){var k;return jn?k=v[jn]:k=v.N,k??0}function Ir(v){return Vo(v,1),v}function Ht(v){return Array.isArray(v)?!!(Wr(v)&2):!1}function Ho(v){if(!Array.isArray(v))throw Error("cannot mark non-array as immutable");Vo(v,2)}function Ka(v){return v!==null&&typeof v=="object"&&!Array.isArray(v)&&v.constructor===Object}var po=Object.freeze(Ir([]));function Xa(v){if(Ht(v.m))throw Error("Cannot mutate an immutable Message")}var ns=typeof Symbol<"u"&&typeof Symbol.hasInstance<"u";function ho(v){return{value:v,configurable:!1,writable:!1,enumerable:!1}}function Gn(v,k,E){return k===-1?null:k>=v.i?v.g?v.g[k]:void 0:E!==void 0&&E&&v.g&&(E=v.g[k],E!=null)?E:v.m[k+v.h]}function _t(v,k,E,A){A=A===void 0?!1:A,Xa(v),k<v.i&&!A?v.m[k+v.h]=E:(v.g||(v.g=v.m[v.i+v.h]={}))[k]=E}function Vs(v,k,E,A){E=E===void 0?!0:E,A=A===void 0?!1:A;var O=Gn(v,k,A);return O==null&&(O=po),Ht(v.m)?E&&(Ho(O),Object.freeze(O)):(O===po||Ht(O))&&(O=Ir(O.slice()),_t(v,k,O,A)),O}function ir(v,k,E){return v=Gn(v,k),v=v==null?v:+v,v??(E===void 0?0:E)}function te(v,k,E,A){v.j||(v.j={});var O=Ht(v.m),q=v.j[E];if(!q){A=Vs(v,E,!0,A===void 0?!1:A),q=[],O=O||Ht(A);for(var z=0;z<A.length;z++)q[z]=new k(A[z]),O&&Ho(q[z].m);O&&(Ho(q),Object.freeze(q)),v.j[E]=q}return q}function ce(v,k,E,A,O){var q=q===void 0?!1:q;return Xa(v),q=te(v,E,k,q),E=A||new E,v=Vs(v,k),O!=null?(q.splice(O,0,E),v.splice(O,0,E.m)):(q.push(E),v.push(E.m)),E}function Me(v,k){return v=Gn(v,k),v??0}function we(v,k){return v=Gn(v,k),v??""}function bt(v){switch(typeof v){case"number":return isFinite(v)?v:String(v);case"object":if(v&&!Array.isArray(v)){if(pe(v))return re(v);if(v instanceof Se){var k=v.L;return k=k==null||typeof k=="string"?k:ve&&k instanceof Uint8Array?re(k):null,(v.L=k)||""}}}return v}function kt(v){var k=Xt;return k=k===void 0?lr:k,We(v,k)}function Ge(v,k){if(v!=null){if(Array.isArray(v))v=We(v,k);else if(Ka(v)){var E={},A;for(A in v)E[A]=Ge(v[A],k);v=E}else v=k(v);return v}}function We(v,k){for(var E=v.slice(),A=0;A<E.length;A++)E[A]=Ge(E[A],k);return Array.isArray(v)&&Wr(v)&1&&Ir(E),E}function Xt(v){return v&&typeof v=="object"&&v.toJSON?v.toJSON():(v=bt(v),Array.isArray(v)?kt(v):v)}function lr(v){return pe(v)?new Uint8Array(v):v}function _r(v,k,E){v||(v=Ya),Ya=null;var A=this.constructor.h;v||(v=A?[A]:[]),this.h=(A?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=v;e:{if(A=this.m.length,v=A-1,A&&(A=this.m[v],Ka(A))){this.i=v-this.h,this.g=A;break e}k!==void 0&&-1<k?(this.i=Math.max(k,v+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(E)for(k=0;k<E.length;k++)if(v=E[k],v<this.i)v+=this.h,(A=this.m[v])?Array.isArray(A)&&Ir(A):this.m[v]=po;else{A=this.g||(this.g=this.m[this.i+this.h]={});var O=A[v];O?Array.isArray(O)&&Ir(O):A[v]=po}}_r.prototype.toJSON=function(){return kt(this.m)},_r.prototype.toString=function(){return this.m.toString()};var Ya;function Hs(){_r.apply(this,arguments)}if(m(Hs,_r),ns){var Qa={};Object.defineProperties(Hs,(Qa[Symbol.hasInstance]=ho(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),Qa))}function dn(v,k,E){if(E){var A={},O;for(O in E){var q=E[O],z=q.ha;z||(A.F=q.la||q.fa.P,q.aa?(A.U=jo(q.aa),z=function(J){return function(ne,he,Ne){return J.F(ne,he,Ne,J.U)}}(A)):q.ca?(A.T=jd(q.X.g,q.ca),z=function(J){return function(ne,he,Ne){return J.F(ne,he,Ne,J.T)}}(A)):z=A.F,q.ha=z),z(k,v,q.X),A={F:A.F,U:A.U,T:A.T}}}fo(k,v)}var Ur=Symbol();function Za(v,k,E){return v[Ur]||(v[Ur]=function(A,O){return k(A,O,E)})}function Vd(v){var k=v[Ur];if(!k){var E=Yd(v);k=function(A,O){return Qd(A,O,E)},v[Ur]=k}return k}function _u(v){var k=v.aa;if(k)return Vd(k);if(k=v.ka)return Za(v.X.g,k,v.ca)}function Ey(v){var k=_u(v),E=v.X,A=v.fa.O;return k?function(O,q){return A(O,q,E,k)}:function(O,q){return A(O,q,E)}}function Hd(v,k,E,A,O,q){v=v();var z=0;for(v.length&&typeof v[0]!="number"&&(E(k,v[0]),z++);z<v.length;){E=v[z++];for(var J=z+1;J<v.length&&typeof v[J]!="number";)J++;var ne=v[z++];switch(J-=z,J){case 0:A(k,E,ne);break;case 1:A(k,E,ne,v[z++]);break;case 2:O(k,E,ne,v[z++],v[z++]);break;case 3:J=v[z++];var he=v[z++],Ne=v[z++];Array.isArray(Ne)?O(k,E,ne,J,he,Ne):q(k,E,ne,J,he,Ne);break;case 4:q(k,E,ne,v[z++],v[z++],v[z++],v[z++]);break;default:throw Error("unexpected number of binary field arguments: "+J)}}return k}var Yi=Symbol();function jo(v){var k=v[Yi];if(!k){var E=Kd(v);k=function(A,O){return Tu(A,O,E)},v[Yi]=k}return k}function jd(v,k){var E=v[Yi];return E||(E=function(A,O){return dn(A,O,k)},v[Yi]=E),E}var Gd=Symbol();function qd(v,k){v.push(k)}function Cy(v,k,E){v.push(k,E.P)}function Eu(v,k,E,A,O){var q=jo(O),z=E.P;v.push(k,function(J,ne,he){return z(J,ne,he,A,q)})}function Ty(v,k,E,A,O,q){var z=jd(A,q),J=E.P;v.push(k,function(ne,he,Ne){return J(ne,he,Ne,A,z)})}function Kd(v){var k=v[Gd];return k||Hd(v,v[Gd]=[],qd,Cy,Eu,Ty)}var Xd=Symbol();function Go(v,k){v[0]=k}function Cu(v,k,E,A){var O=E.O;v[k]=A?function(q,z,J){return O(q,z,J,A)}:O}function Ny(v,k,E,A,O,q){var z=E.O,J=Vd(O);v[k]=function(ne,he,Ne){return z(ne,he,Ne,A,J,q)}}function Ay(v,k,E,A,O,q,z){var J=E.O,ne=Za(A,O,q);v[k]=function(he,Ne,Ue){return J(he,Ne,Ue,A,ne,z)}}function Yd(v){var k=v[Xd];return k||Hd(v,v[Xd]={},Go,Cu,Ny,Ay)}function Qd(v,k,E){for(;Mn(k)&&k.h!=4;){var A=k.i,O=E[A];if(!O){var q=E[0];q&&(q=q[A])&&(O=E[A]=Ey(q))}if((!O||!O(k,v,A))&&(O=k,A=v,q=O.j,En(O),!O.W)){var z=O.g.h;O=O.g.g,O=q===O?xe||(xe=new Uint8Array(0)):Ce?z.slice(q,O):new Uint8Array(z.subarray(q,O)),(q=A.ba)?q.push(O):A.ba=[O]}}return v}function Qi(v,k,E){if(Vt.length){var A=Vt.pop();v&&(Ze(A.g,v),A.i=-1,A.h=-1),v=A}else v=new bn(v);try{return Qd(new k,v,Yd(E))}finally{k=v.g,k.h=null,k.j=0,k.i=0,k.g=0,k.v=!1,v.i=-1,v.h=-1,100>Vt.length&&Vt.push(v)}}function Tu(v,k,E){for(var A=E.length,O=A%2==1,q=O?1:0;q<A;q+=2)(0,E[q+1])(k,v,E[q]);dn(v,k,O?E[0]:void 0)}function Nu(v,k){var E=new Cn;Tu(v,E,Kd(k)),Hn(E,E.g.end()),v=new Uint8Array(E.h),k=E.i;for(var A=k.length,O=0,q=0;q<A;q++){var z=k[q];v.set(z,O),O+=z.length}return E.i=[v],v}function Ja(v,k){return{O:v,P:k}}var Er=Ja(function(v,k,E){if(v.h!==5)return!1;v=v.g;var A=v.h[v.g],O=v.h[v.g+1],q=v.h[v.g+2],z=v.h[v.g+3];return v.g+=4,Je(v),O=(A<<0|O<<8|q<<16|z<<24)>>>0,v=2*(O>>31)+1,A=O>>>23&255,O&=8388607,_t(k,E,A==255?O?NaN:1/0*v:A==0?v*Math.pow(2,-149)*O:v*Math.pow(2,A-150)*(O+Math.pow(2,23))),!0},function(v,k,E){if(k=Gn(k,E),k!=null){sn(v.g,8*E+5),v=v.g;var A=k;A=(E=0>A?1:0)?-A:A,A===0?0<1/A?$e=Fe=0:(Fe=0,$e=2147483648):isNaN(A)?(Fe=0,$e=2147483647):34028234663852886e22<A?(Fe=0,$e=(E<<31|2139095040)>>>0):11754943508222875e-54>A?(A=Math.round(A/Math.pow(2,-149)),Fe=0,$e=(E<<31|A)>>>0):(k=Math.floor(Math.log(A)/Math.LN2),A*=Math.pow(2,-k),A=Math.round(8388608*A),16777216<=A&&++k,Fe=0,$e=(E<<31|k+127<<23|A&8388607)>>>0),E=$e,v.g.push(E>>>0&255),v.g.push(E>>>8&255),v.g.push(E>>>16&255),v.g.push(E>>>24&255)}}),Zd=Ja(function(v,k,E){if(v.h!==0)return!1;for(var A=v.g,O=128,q=0,z=v=0;4>z&&128<=O;z++)O=A.h[A.g++],Je(A),q|=(O&127)<<7*z;if(128<=O&&(O=A.h[A.g++],Je(A),q|=(O&127)<<28,v|=(O&127)>>4),128<=O)for(z=0;5>z&&128<=O;z++)O=A.h[A.g++],Je(A),v|=(O&127)<<7*z+3;if(128>O)A=q>>>0,O=v>>>0,(v=O&2147483648)&&(A=~A+1>>>0,O=~O>>>0,A==0&&(O=O+1>>>0)),A=4294967296*O+(A>>>0);else throw Ae();return _t(k,E,v?-A:A),!0},function(v,k,E){if(k=Gn(k,E),k!=null&&k!=null){sn(v.g,8*E),v=v.g;var A=k;for(E=0>A,A=Math.abs(A),k=A>>>0,A=Math.floor((A-k)/4294967296),A>>>=0,E&&(A=~A>>>0,k=(~k>>>0)+1,4294967295<k&&(k=0,A++,4294967295<A&&(A=0))),$e=k,Fe=A,E=$e,k=Fe;0<k||127<E;)v.g.push(E&127|128),E=(E>>>7|k<<25)>>>0,k>>>=7;v.g.push(E)}}),Dy=Ja(function(v,k,E){return v.h!==0?!1:(_t(k,E,et(v.g)),!0)},function(v,k,E){if(k=Gn(k,E),k!=null&&k!=null)if(sn(v.g,8*E),v=v.g,E=k,0<=E)sn(v,E);else{for(k=0;9>k;k++)v.g.push(E&127|128),E>>=7;v.g.push(1)}}),Jd=Ja(function(v,k,E){if(v.h!==2)return!1;var A=et(v.g)>>>0;v=v.g;var O=v.g;v.g+=A,Je(v),v=v.h;var q;if(P)(q=Q)||(q=Q=new TextDecoder("utf-8",{fatal:!0})),q=q.decode(v.subarray(O,O+A));else{A=O+A;for(var z=[],J=null,ne,he,Ne;O<A;)ne=v[O++],128>ne?z.push(ne):224>ne?O>=A?j():(he=v[O++],194>ne||(he&192)!==128?(O--,j()):z.push((ne&31)<<6|he&63)):240>ne?O>=A-1?j():(he=v[O++],(he&192)!==128||ne===224&&160>he||ne===237&&160<=he||((q=v[O++])&192)!==128?(O--,j()):z.push((ne&15)<<12|(he&63)<<6|q&63)):244>=ne?O>=A-2?j():(he=v[O++],(he&192)!==128||(ne<<28)+(he-144)>>30||((q=v[O++])&192)!==128||((Ne=v[O++])&192)!==128?(O--,j()):(ne=(ne&7)<<18|(he&63)<<12|(q&63)<<6|Ne&63,ne-=65536,z.push((ne>>10&1023)+55296,(ne&1023)+56320))):j(),8192<=z.length&&(J=X(J,z),z.length=0);q=X(J,z)}return _t(k,E,q),!0},function(v,k,E){if(k=Gn(k,E),k!=null){var A=!1;if(A=A===void 0?!1:A,Y){if(A&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(k))throw Error("Found an unpaired surrogate");k=(G||(G=new TextEncoder)).encode(k)}else{for(var O=0,q=new Uint8Array(3*k.length),z=0;z<k.length;z++){var J=k.charCodeAt(z);if(128>J)q[O++]=J;else{if(2048>J)q[O++]=J>>6|192;else{if(55296<=J&&57343>=J){if(56319>=J&&z<k.length){var ne=k.charCodeAt(++z);if(56320<=ne&&57343>=ne){J=1024*(J-55296)+ne-56320+65536,q[O++]=J>>18|240,q[O++]=J>>12&63|128,q[O++]=J>>6&63|128,q[O++]=J&63|128;continue}else z--}if(A)throw Error("Found an unpaired surrogate");J=65533}q[O++]=J>>12|224,q[O++]=J>>6&63|128}q[O++]=J&63|128}}k=q.subarray(0,O)}sn(v.g,8*E+2),sn(v.g,k.length),Hn(v,v.g.end()),Hn(v,k)}}),ef=Ja(function(v,k,E,A,O){if(v.h!==2)return!1;k=ce(k,E,A),E=v.g.i,A=et(v.g)>>>0;var q=v.g.g+A,z=q-E;if(0>=z&&(v.g.i=q,O(k,v),z=q-v.g.g),z)throw Error("Message parsing ended unexpectedly. Expected to read "+(A+" bytes, instead read "+(A-z)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return v.g.g=q,v.g.i=E,!0},function(v,k,E,A,O){if(k=te(k,A,E),k!=null)for(A=0;A<k.length;A++){var q=v;sn(q.g,8*E+2);var z=q.g.end();Hn(q,z),z.push(q.h),q=z,O(k[A],v),z=v;var J=q.pop();for(J=z.h+z.g.length()-J;127<J;)q.push(J&127|128),J>>>=7,z.h++;q.push(J),z.h++}});function Cr(){Hs.apply(this,arguments)}if(m(Cr,Hs),ns){var Au={};Object.defineProperties(Cr,(Au[Symbol.hasInstance]=ho(Object[Symbol.hasInstance]),Au))}function js(v){Cr.call(this,v)}m(js,Cr);function Du(){return[1,Dy,2,Er,3,Jd,4,Jd]}function Zi(v){Cr.call(this,v,-1,$u)}m(Zi,Cr),Zi.prototype.addClassification=function(v,k){return ce(this,1,js,v,k),this};function tf(){return[1,ef,js,Du]}var $u=[1];function ei(v){Cr.call(this,v)}m(ei,Cr);function Ru(){return[1,Er,2,Er,3,Er,4,Er,5,Er]}function Ji(v){Cr.call(this,v,-1,tl)}m(Ji,Cr);function el(){return[1,ef,ei,Ru]}var tl=[1];function qo(v){Cr.call(this,v)}m(qo,Cr);function Fu(){return[1,Er,2,Er,3,Er,4,Er,5,Er,6,Zd]}var ti=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],ni=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],nf=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],M=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],K=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],de=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],Pe=[].concat(u(ti),u(ni),u(nf),u(M),u(K),u(de));function ze(v,k,E){if(E=v.createShader(E===0?v.VERTEX_SHADER:v.FRAGMENT_SHADER),v.shaderSource(E,k),v.compileShader(E),!v.getShaderParameter(E,v.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+v.getShaderInfoLog(E));return E}function He(v){return te(v,js,1).map(function(k){return{index:Me(k,1),ga:ir(k,2),label:Gn(k,3)!=null?we(k,3):void 0,displayName:Gn(k,4)!=null?we(k,4):void 0}})}function ke(v){return{x:ir(v,1),y:ir(v,2),z:ir(v,3),visibility:Gn(v,4)!=null?ir(v,4):void 0}}function Te(v,k){this.h=v,this.g=k,this.l=0}function Et(v,k,E){return ur(v,k),typeof v.g.canvas.transferToImageBitmap=="function"?Promise.resolve(v.g.canvas.transferToImageBitmap()):E?Promise.resolve(v.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(v.g.canvas):(v.i===void 0&&(v.i=document.createElement("canvas")),new Promise(function(A){v.i.height=v.g.canvas.height,v.i.width=v.g.canvas.width,v.i.getContext("2d",{}).drawImage(v.g.canvas,0,0,v.g.canvas.width,v.g.canvas.height),A(v.i)}))}function ur(v,k){var E=v.g;if(v.o===void 0){var A=ze(E,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),O=ze(E,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),q=E.createProgram();if(E.attachShader(q,A),E.attachShader(q,O),E.linkProgram(q),!E.getProgramParameter(q,E.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+E.getProgramInfoLog(q));A=v.o=q,E.useProgram(A),O=E.getUniformLocation(A,"sampler0"),v.j={K:E.getAttribLocation(A,"aVertex"),J:E.getAttribLocation(A,"aTex"),ma:O},v.u=E.createBuffer(),E.bindBuffer(E.ARRAY_BUFFER,v.u),E.enableVertexAttribArray(v.j.K),E.vertexAttribPointer(v.j.K,2,E.FLOAT,!1,0,0),E.bufferData(E.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),E.STATIC_DRAW),E.bindBuffer(E.ARRAY_BUFFER,null),v.s=E.createBuffer(),E.bindBuffer(E.ARRAY_BUFFER,v.s),E.enableVertexAttribArray(v.j.J),E.vertexAttribPointer(v.j.J,2,E.FLOAT,!1,0,0),E.bufferData(E.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),E.STATIC_DRAW),E.bindBuffer(E.ARRAY_BUFFER,null),E.uniform1i(O,0)}A=v.j,E.useProgram(v.o),E.canvas.width=k.width,E.canvas.height=k.height,E.viewport(0,0,k.width,k.height),E.activeTexture(E.TEXTURE0),v.h.bindTexture2d(k.glName),E.enableVertexAttribArray(A.K),E.bindBuffer(E.ARRAY_BUFFER,v.u),E.vertexAttribPointer(A.K,2,E.FLOAT,!1,0,0),E.enableVertexAttribArray(A.J),E.bindBuffer(E.ARRAY_BUFFER,v.s),E.vertexAttribPointer(A.J,2,E.FLOAT,!1,0,0),E.bindFramebuffer(E.DRAW_FRAMEBUFFER?E.DRAW_FRAMEBUFFER:E.FRAMEBUFFER,null),E.clearColor(0,0,0,0),E.clear(E.COLOR_BUFFER_BIT),E.colorMask(!0,!0,!0,!0),E.drawArrays(E.TRIANGLE_FAN,0,4),E.disableVertexAttribArray(A.K),E.disableVertexAttribArray(A.J),E.bindBuffer(E.ARRAY_BUFFER,null),v.h.bindTexture2d(0)}function ks(v){this.g=v}var rf=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Mu(v,k){return k+v}function sf(v,k){window[v]=k}function qn(v){var k=document.createElement("script");return k.setAttribute("src",v),k.setAttribute("crossorigin","anonymous"),new Promise(function(E){k.addEventListener("load",function(){E()},!1),k.addEventListener("error",function(){E()},!1),document.body.appendChild(k)})}function Ko(){return R(function(v){switch(v.g){case 1:return v.o=2,w(v,WebAssembly.instantiate(rf),4);case 4:v.g=3,v.o=0;break;case 2:return v.o=0,v.j=null,v.return(!1);case 3:return v.return(!0)}})}function nl(v){if(this.g=v,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=Promise.resolve(),this.Y="",this.C={},this.locateFile=v&&v.locateFile||Mu,typeof window=="object")var k=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")k=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.$=k,v.options){k=i(Object.keys(v.options));for(var E=k.next();!E.done;E=k.next()){E=E.value;var A=v.options[E].default;A!==void 0&&(this.j[E]=typeof A=="function"?A():A)}}}e=nl.prototype,e.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function HR(v){var k,E,A,O,q,z,J,ne,he,Ne,Ue;return R(function(Ve){switch(Ve.g){case 1:return v.Z?(k=v.g.files===void 0?[]:typeof v.g.files=="function"?v.g.files(v.j):v.g.files,w(Ve,Ko(),2)):Ve.return();case 2:if(E=Ve.h,typeof window=="object")return sf("createMediapipeSolutionsWasm",{locateFile:v.locateFile}),sf("createMediapipeSolutionsPackedAssets",{locateFile:v.locateFile}),z=k.filter(function(Re){return Re.data!==void 0}),J=k.filter(function(Re){return Re.data===void 0}),ne=Promise.all(z.map(function(Re){var qe=of(v,Re.url);if(Re.path!==void 0){var ct=Re.path;qe=qe.then(function(Bt){return v.overrideFile(ct,Bt),Promise.resolve(Bt)})}return qe})),he=Promise.all(J.map(function(Re){return Re.simd===void 0||Re.simd&&E||!Re.simd&&!E?qn(v.locateFile(Re.url,v.$)):Promise.resolve()})).then(function(){var Re,qe,ct;return R(function(Bt){if(Bt.g==1)return Re=window.createMediapipeSolutionsWasm,qe=window.createMediapipeSolutionsPackedAssets,ct=v,w(Bt,Re(qe),2);ct.h=Bt.h,Bt.g=0})}),Ne=function(){return R(function(Re){return v.g.graph&&v.g.graph.url?Re=w(Re,of(v,v.g.graph.url),0):(Re.g=0,Re=void 0),Re})}(),w(Ve,Promise.all([he,ne,Ne]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return A=k.filter(function(Re){return Re.simd===void 0||Re.simd&&E||!Re.simd&&!E}).map(function(Re){return v.locateFile(Re.url,v.$)}),importScripts.apply(null,u(A)),O=v,w(Ve,createMediapipeSolutionsWasm(Module),6);case 6:O.h=Ve.h,v.l=new OffscreenCanvas(1,1),v.h.canvas=v.l,q=v.h.GL.createContext(v.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),v.h.GL.makeContextCurrent(q),Ve.g=4;break;case 7:if(v.l=document.createElement("canvas"),Ue=v.l.getContext("webgl2",{}),!Ue&&(Ue=v.l.getContext("webgl",{}),!Ue))return alert("Failed to create WebGL canvas context when passing video frame."),Ve.return();v.G=Ue,v.h.canvas=v.l,v.h.createContext(v.l,!0,!0,{});case 4:v.i=new v.h.SolutionWasm,v.Z=!1,Ve.g=0}})}function jR(v){var k,E,A,O,q,z,J,ne;return R(function(he){if(he.g==1){if(v.g.graph&&v.g.graph.url&&v.Y===v.g.graph.url)return he.return();if(v.s=!0,!v.g.graph||!v.g.graph.url){he.g=2;return}return v.Y=v.g.graph.url,w(he,of(v,v.g.graph.url),3)}for(he.g!=2&&(k=he.h,v.i.loadGraph(k)),E=i(Object.keys(v.C)),A=E.next();!A.done;A=E.next())O=A.value,v.i.overrideFile(O,v.C[O]);if(v.C={},v.g.listeners)for(q=i(v.g.listeners),z=q.next();!z.done;z=q.next())J=z.value,XR(v,J);ne=v.j,v.j={},v.setOptions(ne),he.g=0})}e.reset=function(){var v=this;return R(function(k){v.i&&(v.i.reset(),v.o={},v.u={}),k.g=0})},e.setOptions=function(v,k){var E=this;if(k=k||this.g.options){for(var A=[],O=[],q={},z=i(Object.keys(v)),J=z.next();!J.done;q={R:q.R,S:q.S},J=z.next()){var ne=J.value;ne in this.j&&this.j[ne]===v[ne]||(this.j[ne]=v[ne],J=k[ne],J!==void 0&&(J.onChange&&(q.R=J.onChange,q.S=v[ne],A.push(function(he){return function(){var Ne;return R(function(Ue){if(Ue.g==1)return w(Ue,he.R(he.S),2);Ne=Ue.h,Ne===!0&&(E.s=!0),Ue.g=0})}}(q))),J.graphOptionXref&&(ne={valueNumber:J.type===1?v[ne]:0,valueBoolean:J.type===0?v[ne]:!1,valueString:J.type===2?v[ne]:""},J=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),J.graphOptionXref),ne),O.push(J))))}(A.length!==0||O.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(O),this.A=(this.A===void 0?[]:this.A).concat(A))}};function GR(v){var k,E,A,O,q,z,J;return R(function(ne){switch(ne.g){case 1:if(!v.s)return ne.return();if(!v.A){ne.g=2;break}k=i(v.A),E=k.next();case 3:if(E.done){ne.g=5;break}return A=E.value,w(ne,A(),4);case 4:E=k.next(),ne.g=3;break;case 5:v.A=void 0;case 2:if(v.B){for(O=new v.h.GraphOptionChangeRequestList,q=i(v.B),z=q.next();!z.done;z=q.next())J=z.value,O.push_back(J);v.i.changeOptions(O),O.delete(),v.B=void 0}v.s=!1,ne.g=0}})}e.initialize=function(){var v=this;return R(function(k){return k.g==1?w(k,HR(v),2):k.g!=3?w(k,jR(v),3):w(k,GR(v),0)})};function of(v,k){var E,A;return R(function(O){return k in v.H?O.return(v.H[k]):(E=v.locateFile(k,""),A=fetch(E).then(function(q){return q.arrayBuffer()}),v.H[k]=A,O.return(A))})}e.overrideFile=function(v,k){this.i?this.i.overrideFile(v,k):this.C[v]=k},e.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},e.send=function(v,k){var E=this,A,O,q,z,J,ne,he,Ne,Ue;return R(function(Ve){switch(Ve.g){case 1:return E.g.inputs?(A=1e3*(k??performance.now()),w(Ve,E.D,2)):Ve.return();case 2:return w(Ve,E.initialize(),3);case 3:for(O=new E.h.PacketDataList,q=i(Object.keys(v)),z=q.next();!z.done;z=q.next())if(J=z.value,ne=E.g.inputs[J]){e:{var Re=v[J];switch(ne.type){case"video":var qe=E.o[ne.stream];if(qe||(qe=new Te(E.h,E.G),E.o[ne.stream]=qe),qe.l===0&&(qe.l=qe.h.createTexture()),typeof HTMLVideoElement<"u"&&Re instanceof HTMLVideoElement)var ct=Re.videoWidth,Bt=Re.videoHeight;else typeof HTMLImageElement<"u"&&Re instanceof HTMLImageElement?(ct=Re.naturalWidth,Bt=Re.naturalHeight):(ct=Re.width,Bt=Re.height);Bt={glName:qe.l,width:ct,height:Bt},ct=qe.g,ct.canvas.width=Bt.width,ct.canvas.height=Bt.height,ct.activeTexture(ct.TEXTURE0),qe.h.bindTexture2d(qe.l),ct.texImage2D(ct.TEXTURE_2D,0,ct.RGBA,ct.RGBA,ct.UNSIGNED_BYTE,Re),qe.h.bindTexture2d(0),qe=Bt;break e;case"detections":for(qe=E.o[ne.stream],qe||(qe=new ks(E.h),E.o[ne.stream]=qe),qe.data||(qe.data=new qe.g.DetectionListData),qe.data.reset(Re.length),Bt=0;Bt<Re.length;++Bt){ct=Re[Bt];var $t=qe.data,On=$t.setBoundingBox,rs=Bt,Tr=ct.boundingBox,ft=new qo;if(_t(ft,1,Tr.xCenter),_t(ft,2,Tr.yCenter),_t(ft,3,Tr.height),_t(ft,4,Tr.width),_t(ft,5,Tr.rotation),_t(ft,6,Tr.rectId),Tr=Nu(ft,Fu),On.call($t,rs,Tr),ct.landmarks)for($t=0;$t<ct.landmarks.length;++$t){ft=ct.landmarks[$t];var wn=!!ft.visibility;On=qe.data,rs=On.addNormalizedLandmark,Tr=Bt,ft=Object.assign(Object.assign({},ft),{visibility:wn?ft.visibility:0}),wn=new ei,_t(wn,1,ft.x),_t(wn,2,ft.y),_t(wn,3,ft.z),ft.visibility&&_t(wn,4,ft.visibility),ft=Nu(wn,Ru),rs.call(On,Tr,ft)}if(ct.V)for($t=0;$t<ct.V.length;++$t)On=qe.data,rs=On.addClassification,Tr=Bt,ft=ct.V[$t],wn=new js,_t(wn,2,ft.ga),ft.index&&_t(wn,1,ft.index),ft.label&&_t(wn,3,ft.label),ft.displayName&&_t(wn,4,ft.displayName),ft=Nu(wn,Du),rs.call(On,Tr,ft)}qe=qe.data;break e;default:qe={}}}switch(he=qe,Ne=ne.stream,ne.type){case"video":O.pushTexture2d(Object.assign(Object.assign({},he),{stream:Ne,timestamp:A}));break;case"detections":Ue=he,Ue.stream=Ne,Ue.timestamp=A,O.pushDetectionList(Ue);break;default:throw Error("Unknown input config type: '"+ne.type+"'")}}return E.i.send(O),w(Ve,E.D,4);case 4:O.delete(),Ve.g=0}})};function qR(v,k,E){var A,O,q,z,J,ne,he,Ne,Ue,Ve,Re,qe,ct,Bt;return R(function($t){switch($t.g){case 1:if(!E)return $t.return(k);for(A={},O=0,q=i(Object.keys(E)),z=q.next();!z.done;z=q.next())J=z.value,ne=E[J],typeof ne!="string"&&ne.type==="texture"&&k[ne.stream]!==void 0&&++O;1<O&&(v.I=!1),he=i(Object.keys(E)),z=he.next();case 2:if(z.done){$t.g=4;break}if(Ne=z.value,Ue=E[Ne],typeof Ue=="string")return ct=A,Bt=Ne,w($t,KR(v,Ne,k[Ue]),14);if(Ve=k[Ue.stream],Ue.type==="detection_list"){if(Ve){for(var On=Ve.getRectList(),rs=Ve.getLandmarksList(),Tr=Ve.getClassificationsList(),ft=[],wn=0;wn<On.size();++wn){var Xo=Qi(On.get(wn),qo,Fu);Xo={boundingBox:{xCenter:ir(Xo,1),yCenter:ir(Xo,2),height:ir(Xo,3),width:ir(Xo,4),rotation:ir(Xo,5,0),rectId:Me(Xo,6)},landmarks:te(Qi(rs.get(wn),Ji,el),ei,1).map(ke),V:He(Qi(Tr.get(wn),Zi,tf))},ft.push(Xo)}On=ft}else On=[];A[Ne]=On,$t.g=7;break}if(Ue.type==="proto_list"){if(Ve){for(On=Array(Ve.size()),rs=0;rs<Ve.size();rs++)On[rs]=Ve.get(rs);Ve.delete()}else On=[];A[Ne]=On,$t.g=7;break}if(Ve===void 0){$t.g=3;break}if(Ue.type==="float_list"){A[Ne]=Ve,$t.g=7;break}if(Ue.type==="proto"){A[Ne]=Ve,$t.g=7;break}if(Ue.type!=="texture")throw Error("Unknown output config type: '"+Ue.type+"'");return Re=v.u[Ne],Re||(Re=new Te(v.h,v.G),v.u[Ne]=Re),w($t,Et(Re,Ve,v.I),13);case 13:qe=$t.h,A[Ne]=qe;case 7:Ue.transform&&A[Ne]&&(A[Ne]=Ue.transform(A[Ne])),$t.g=3;break;case 14:ct[Bt]=$t.h;case 3:z=he.next(),$t.g=2;break;case 4:return $t.return(A)}})}function KR(v,k,E){var A;return R(function(O){return typeof E=="number"||E instanceof Uint8Array||E instanceof v.h.Uint8BlobList?O.return(E):E instanceof v.h.Texture2dDataOut?(A=v.u[k],A||(A=new Te(v.h,v.G),v.u[k]=A),O.return(Et(A,E,v.I))):O.return(void 0)})}function XR(v,k){for(var E=k.name||"$",A=[].concat(u(k.wants)),O=new v.h.StringList,q=i(k.wants),z=q.next();!z.done;z=q.next())O.push_back(z.value);q=v.h.PacketListener.implement({onResults:function(J){for(var ne={},he=0;he<k.wants.length;++he)ne[A[he]]=J.get(he);var Ne=v.listeners[E];Ne&&(v.D=qR(v,ne,k.outs).then(function(Ue){Ue=Ne(Ue);for(var Ve=0;Ve<k.wants.length;++Ve){var Re=ne[A[Ve]];typeof Re=="object"&&Re.hasOwnProperty&&Re.hasOwnProperty("delete")&&Re.delete()}Ue&&(v.D=Ue)}))}}),v.i.attachMultiListener(O,q),O.delete()}e.onResults=function(v,k){this.listeners[k||"$"]=v},H("Solution",nl),H("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"});function nS(v){var k=this;v=v||{};var E={url:"face_detection_short.binarypb"},A={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new nl({locateFile:v.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:E,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(O){var q,z,J,ne,he,Ne;return R(function(Ue){switch(Ue.g){case 1:q=O==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"],z=i(q),J=z.next();case 2:if(J.done){Ue.g=4;break}return ne=J.value,he="third_party/mediapipe/modules/face_detection/"+ne,w(Ue,of(k.g,ne),5);case 5:Ne=Ue.h,k.g.overrideFile(he,Ne),J=z.next(),Ue.g=2;break;case 4:return E.url=O==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",A.graphOptionXref.calculatorName=O==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",Ue.return(!0)}})}},minDetectionConfidence:A}})}e=nS.prototype,e.close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(v){this.g.onResults(v)},e.initialize=function(){var v=this;return R(function(k){return w(k,v.g.initialize(),0)})},e.reset=function(){this.g.reset()},e.send=function(v){var k=this;return R(function(E){return w(E,k.g.send(v),0)})},e.setOptions=function(v){this.g.setOptions(v)},H("FaceDetection",nS),H("FACEDETECTION_LIPS",ti),H("FACEDETECTION_LEFT_EYE",ni),H("FACEDETECTION_LEFT_EYEBROW",nf),H("FACEDETECTION_RIGHT_EYE",M),H("FACEDETECTION_RIGHT_EYEBROW",K),H("FACEDETECTION_FACE_OVAL",de),H("FACEDETECTION_CONTOURS",Pe),H("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),H("VERSION","0.4.1646425229")}).call(er);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rq=Ye();rq.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var os;(function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"})(os||(os={}));var Ik;(function(e){(function(t){t[t.LEGACY=0]="LEGACY",t[t.V1=1]="V1",t[t.V2=2]="V2"})(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))})(Ik||(Ik={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sq={};function dA(e){return sq[e]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x(e,t,n,r,s){const o=t.inputParams[e];if(o&&o.inputIndexStart!==void 0){const i=o.inputIndexStart,u=o.inputIndexEnd===0?void 0:o.inputIndexEnd===void 0?i+1:o.inputIndexEnd,c=i<0?t.inputNames.length+i:i;if(o.type==="tensor")return An(t.inputNames[c],n,r,s);if(o.type==="tensors"){const f=t.inputs.slice(i,u);return t.inputNames.slice(i,u).filter((h,m)=>{var y;return((y=f[m])===null||y===void 0?void 0:y.op)!=="NoOp"}).map(h=>An(h,n,r,s))}const l=An(t.inputNames[c],n,r,s),d=l.dataSync();return o.type==="number"?d[0]:ys(l.shape,d)}const a=t.attrParams[e];return a&&a.value}function An(e,t,n,r){const[s,o]=Dr(e,n);if(r!=null){const i=r.getHashTableHandleByName(s);if(i!=null)return i}const a=n.currentContextIds.find(i=>!!t[gh(s,i)]);return a!==void 0?t[gh(s,a)][o]:void 0}function _k(e,t,n){return t[gh(e,n.currentContextId)]}function wo(e,t){const[n,r,s]=Dr(e,t);return[gh(n,t&&t.currentContextId),r,s]}function gh(e,t){return t?`${e}-${t}`:e}function Dr(e,t){if(e==="")return["",0,void 0];const n=t!=null&&t.parseNodeNameCache!=null;if(n){const o=t.parseNodeNameCache.get(e);if(o!=null)return o}const r=e.split(":");let s;if(r.length===1)s=[e,0,void 0];else{const o=r[0],a=r.length===3?r[1]:void 0,i=Number(r[r.length-1]);s=[o,i,a]}return n&&t.parseNodeNameCache.set(e,s),s}function mp(e,t,n){let r=x("pad",e,t,n);if(r==="explicit"){r=x("explicitPaddings",e,t,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let o=0;o<4;o++)s[o][0]=r[o*2],s[o][1]=r[o*2+1];return s}return r}function So(e){return e.kept?e:xa(e)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oq=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],aq=Object.freeze(Object.defineProperty({__proto__:null,json:oq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iq=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],lq=Object.freeze(Object.defineProperty({__proto__:null,json:iq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uq=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],cq=Object.freeze(Object.defineProperty({__proto__:null,json:uq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dq=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],fq=Object.freeze(Object.defineProperty({__proto__:null,json:dq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pq=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],hq=Object.freeze(Object.defineProperty({__proto__:null,json:pq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mq=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gq=Object.freeze(Object.defineProperty({__proto__:null,json:mq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yq=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],vq=Object.freeze(Object.defineProperty({__proto__:null,json:yq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bq=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],wq=Object.freeze(Object.defineProperty({__proto__:null,json:bq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sq=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],xq=Object.freeze(Object.defineProperty({__proto__:null,json:Sq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kq=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Iq=Object.freeze(Object.defineProperty({__proto__:null,json:kq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _q=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Eq=Object.freeze(Object.defineProperty({__proto__:null,json:_q},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cq=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Tq=Object.freeze(Object.defineProperty({__proto__:null,json:Cq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nq=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Aq=Object.freeze(Object.defineProperty({__proto__:null,json:Nq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dq=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],$q=Object.freeze(Object.defineProperty({__proto__:null,json:Dq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rq=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Fq=Object.freeze(Object.defineProperty({__proto__:null,json:Rq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mq=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Oq=Object.freeze(Object.defineProperty({__proto__:null,json:Mq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pq=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Bq=Object.freeze(Object.defineProperty({__proto__:null,json:Pq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lq=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],zq=Object.freeze(Object.defineProperty({__proto__:null,json:Lq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wq=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Uq=Object.freeze(Object.defineProperty({__proto__:null,json:Wq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ek{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const t=[aq,lq,cq,fq,hq,gq,vq,wq,xq,Iq,Eq,Tq,Aq,$q,Fq,Oq,Bq,zq,Uq],n=[].concat(...t.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(t,n={}){const r=t.node,s=[],o=[],a=[],i=r.reduce((m,y)=>(m[y.name]=this.mapNode(y),y.op.startsWith("Placeholder")?s.push(m[y.name]):y.op==="Const"?o.push(m[y.name]):(y.input==null||y.input.length===0)&&a.push(m[y.name]),m),{});let u=[];const c=[];let l={},d={};n!=null&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const f=Object.keys(i);f.forEach(m=>{const y=i[m];y.inputNames.forEach((g,b)=>{const[w,,S]=wo(g),I=i[w];if(I.outputs!=null){const _=I.outputs.indexOf(S);if(_!==-1){const C=`${w}:${_}`;y.inputNames[b]=C}}y.inputs.push(I),I.children.push(y)})}),Object.keys(d).length===0?f.forEach(m=>{const y=i[m];y.children.length===0&&c.push(y)}):Object.keys(d).forEach(m=>{const[y]=wo(m),g=i[y];g!=null&&(g.signatureKey=d[m],c.push(g))}),Object.keys(l).length>0?Object.keys(l).forEach(m=>{const[y]=wo(m),g=i[y];g&&(g.signatureKey=l[m],u.push(g))}):u=s;let p={};t.library!=null&&t.library.function!=null&&(p=t.library.function.reduce((m,y)=>(m[y.signature.name]=this.mapFunction(y),m),{}));const h={nodes:i,inputs:u,outputs:c,weights:o,placeholders:s,signature:n,functions:p};return a.length>0&&(h.initNodes=a),h}mapSignatureEntries(t){return Object.keys(t||{}).reduce((n,r)=>(n[t[r].name]=r,n),{})}mapNode(t){const n=dA(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});const r={name:t.name,op:t.op,category:n.category,inputNames:(t.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,o)=>(s[o.name]={type:o.type,inputIndexStart:o.start,inputIndexEnd:o.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,o)=>{const a=o.type;let i;switch(o.type){case"string":i=h1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=h1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"string[]":i=S1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=S1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"number":i=g1(t.attr,o.tfName,o.defaultValue||0),i===void 0&&o.tfDeprecatedName&&(i=g1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"number[]":i=w1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=w1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool":i=m1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=m1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool[]":i=k1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=k1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape":i=b1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=b1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape[]":i=x1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=x1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype":i=y1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=y1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype[]":i=v1(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=v1(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"func":i=Ck(t.attr,o.tfName,o.defaultValue),i===void 0&&o.tfDeprecatedName&&(i=Ck(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${o.type} for op: ${t.op}`)}return s[o.name]={value:i,type:a},s},{})),r}mapFunction(t){const n=t.nodeDef,r=[],s=[];let o={};n!=null&&(o=n.reduce((d,f)=>(d[f.name]=this.mapNode(f),f.op==="Const"&&s.push(d[f.name]),d),{}));const a=[],i=[];t.signature.inputArg.forEach(d=>{const[f]=wo(d.name),p={name:f,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:I2(d.type),type:"dtype"}},children:[]};p.signatureKey=d.name,a.push(p),o[f]=p}),Object.keys(o).forEach(d=>{const f=o[d];f.inputNames.forEach((p,h)=>{const[m,,y]=wo(p),g=o[m];if(g.outputs!=null){const b=g.outputs.indexOf(y);if(b!==-1){const w=`${m}:${b}`;f.inputNames[h]=w}}f.inputs.push(g),g.children.push(f)})});const c=t.ret;t.signature.outputArg.forEach(d=>{const[f,p]=wo(c[d.name]),h=o[f];h!=null&&(h.defaultOutput=p,i.push(h))});const l=this.mapArgsToSignature(t);return{nodes:o,inputs:a,outputs:i,weights:s,placeholders:r,signature:l}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:t.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,t.ret),n),{})}}mapArgToTensorInfo(t,n){let r=t.name;return n!=null&&(r=n[r]),{name:r,dtype:t.type}}}function Vq(e){const t=Ye().global;if(typeof t.atob<"u")return t.atob(e);if(typeof Buffer<"u")return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function fA(e,t){const n=Array.isArray(e)?String.fromCharCode.apply(null,e):Vq(e);return t?n:n.toLowerCase()}function h1(e,t,n,r=!1){const s=e[t];return s!=null?fA(s.s,r):n}function m1(e,t,n){const r=e[t];return r?r.b:n}function g1(e,t,n){const r=e[t]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function I2(e){switch(typeof e=="string"&&(e=os[e]),e){case os.DT_FLOAT:case os.DT_HALF:return"float32";case os.DT_INT32:case os.DT_INT64:case os.DT_INT8:case os.DT_UINT8:return"int32";case os.DT_BOOL:return"bool";case os.DT_DOUBLE:return"float32";case os.DT_STRING:return"string";default:return null}}function Ck(e,t,n){const r=e[t];return r&&r.func?r.func.name:n}function y1(e,t,n){const r=e[t];return r&&r.type?I2(r.type):n}function v1(e,t,n){const r=e[t];return r&&r.list&&r.list.type?r.list.type.map(s=>I2(s)):n}function pA(e){if(!e.unknownRank)return e.dim!=null?e.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function b1(e,t,n){const r=e[t];return r&&r.shape?pA(r.shape):n}function w1(e,t,n){const r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function S1(e,t,n,r=!1){const s=e[t];return s&&s.list&&s.list.s?s.list.s.map(o=>fA(o,r)):n}function x1(e,t,n){const r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(s=>pA(s)):n}function k1(e,t,n){const r=e[t];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Hq{constructor(t,n,r){this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(s=>this.getInput(s)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((s,o)=>(s[o]=this.getAttr(o),s),{}))}getInput(t){return An(t,this.tensorMap,this.context)}getAttr(t,n){const r=this.node.rawAttrs[t];if(r.tensor!=null)return An(t,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return g1(this.node.rawAttrs,t,n);if(r.s!=null)return h1(this.node.rawAttrs,t,n);if(r.b!=null)return m1(this.node.rawAttrs,t,n);if(r.shape!=null)return b1(this.node.rawAttrs,t,n);if(r.type!=null)return y1(this.node.rawAttrs,t,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return w1(this.node.rawAttrs,t,n);if(r.list.s!=null)return S1(this.node.rawAttrs,t,n);if(r.list.shape!=null)return x1(this.node.rawAttrs,t,n);if(r.list.b!=null)return k1(this.node.rawAttrs,t,n);if(r.list.type!=null)return v1(this.node.rawAttrs,t,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fn=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:AT,abs:jr,acos:s7,acosh:a7,add:Oe,addN:l7,all:c7,any:f7,argMax:h7,argMin:g7,asin:v7,asinh:w7,atan:x7,atan2:I7,atanh:E7,avgPool:GT,avgPool3d:F7,basicLSTMCell:W7,batchNorm:Jg,batchNorm2d:G7,batchNorm3d:K7,batchNorm4d:Y7,batchToSpaceND:qT,bincount:KT,bitwiseAnd:J7,booleanMaskAsync:LV,broadcastArgs:t9,broadcastTo:Cc,buffer:rt,cast:qt,ceil:s9,clipByValue:XT,clone:xa,complex:Ta,concat:$n,concat1d:i9,concat2d:u9,concat3d:d9,concat4d:p9,conv1d:g9,conv2d:ey,conv2dTranspose:b9,conv3d:S9,conv3dTranspose:_9,cos:C9,cosh:N9,cosineWindow:g2,cumprod:D9,cumsum:R9,denseBincount:M9,depthToSpace:P9,depthwiseConv2d:r2,diag:z9,dilation2d:U9,div:tt,divNoNan:K9,dot:Y9,dropout:ZV,einsum:hl,elu:ZT,enclosingPowerOfTwo:CN,ensureShape:ez,equal:QT,erf:nz,euclideanNorm:fz,exp:Mo,expandDims:Zs,expm1:gz,eye:tN,fft:h2,fill:Bd,floor:nN,floorDiv:HT,fused:pH,gather:rN,gatherND:XV,greater:ry,greaterEqual:sN,ifft:hh,imag:sy,image:iy,inTopKAsync:eH,irfft:wN,isFinite:_z,isInf:Cz,isNaN:Nz,leakyRelu:oN,less:c1,lessEqual:s2,linalg:Gj,linspace:Rz,localResponseNormalization:Mz,log:hd,log1p:aN,logSigmoid:Uz,logSoftmax:jz,logSumExp:lN,logicalAnd:dh,logicalNot:uN,logicalOr:cN,logicalXor:Qz,losses:qj,lowerBound:Jz,matMul:St,max:Wl,maxPool:dN,maxPool3d:nW,maxPoolWithArgmax:sW,maximum:fN,mean:fh,meshgrid:iW,min:u1,minimum:ph,mirrorPad:cW,mod:fW,moments:hW,movingAverage:UV,mul:me,multiRNNCell:gW,multinomial:vW,neg:oo,norm:ny,notEqual:pN,oneHot:SW,ones:vi,onesLike:kW,op:B,outerProduct:_W,pad:Ld,pad1d:TW,pad2d:AW,pad3d:$W,pad4d:FW,pool:LW,pow:pd,prelu:mN,print:UT,prod:UW,raggedGather:HW,raggedRange:GW,raggedTensorToTensor:KW,rand:YW,randomGamma:mU,randomNormal:yN,randomStandardNormal:vU,randomUniform:p2,randomUniformInt:SU,range:md,real:gd,reciprocal:IU,relu:ay,relu6:vN,reshape:oe,reverse:Mi,reverse1d:NU,reverse2d:DU,reverse3d:RU,reverse4d:MU,rfft:m2,round:bN,rsqrt:BU,scalar:lt,scatterND:HV,searchSorted:o2,selu:zU,separableConv2d:UU,setdiff1dAsync:HU,sigmoid:Ii,sign:GU,signal:jj,sin:KU,sinh:YU,slice:Ke,slice1d:ZU,slice2d:eV,slice3d:nV,slice4d:sV,softmax:aV,softplus:iN,spaceToBatchND:hN,sparse:Kj,sparseToDense:qV,spectral:Hj,split:yd,sqrt:Fo,square:Ms,squaredDifference:SN,squeeze:Tn,stack:Po,step:xN,stridedSlice:yV,string:Xj,sub:Xe,sum:Ft,tan:bV,tanh:l1,tensor:Fs,tensor1d:zn,tensor2d:_i,tensor3d:kN,tensor4d:wV,tensor5d:SV,tensor6d:xV,tensorScatterUpdate:_V,tile:Tc,topk:CV,transpose:d1,truncatedNormal:NV,unique:DV,unsortedSegmentSum:RV,unstack:Ki,upperBound:MV,variable:OV,where:ka,whereAsync:EN,zeros:ru,zerosLike:Kr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jq=(e,t,n,r=Fn)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(x("a",e,t,n),x("b",e,t,n))];case"AddN":return[r.addN(x("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(x("a",e,t,n),x("b",e,t,n))];case"Mul":return[r.mul(x("a",e,t,n),x("b",e,t,n))];case"RealDiv":case"Div":return[r.div(x("a",e,t,n),x("b",e,t,n))];case"DivNoNan":return[r.divNoNan(x("a",e,t,n),x("b",e,t,n))];case"FloorDiv":return[r.floorDiv(x("a",e,t,n),x("b",e,t,n))];case"Sub":return[r.sub(x("a",e,t,n),x("b",e,t,n))];case"Minimum":return[r.minimum(x("a",e,t,n),x("b",e,t,n))];case"Maximum":return[r.maximum(x("a",e,t,n),x("b",e,t,n))];case"Pow":return[r.pow(x("a",e,t,n),x("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(x("a",e,t,n),x("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gq=(e,t,n,r=Fn)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(x("x",e,t,n))];case"Acos":return[r.acos(x("x",e,t,n))];case"Acosh":return[r.acosh(x("x",e,t,n))];case"Asin":return[r.asin(x("x",e,t,n))];case"Asinh":return[r.asinh(x("x",e,t,n))];case"Atan":return[r.atan(x("x",e,t,n))];case"Atan2":return[r.atan2(x("x",e,t,n),x("y",e,t,n))];case"Atanh":return[r.atanh(x("x",e,t,n))];case"Ceil":return[r.ceil(x("x",e,t,n))];case"Complex":return[r.complex(x("real",e,t,n),x("imag",e,t,n))];case"Cos":return[r.cos(x("x",e,t,n))];case"Cosh":return[r.cosh(x("x",e,t,n))];case"Elu":return[r.elu(x("x",e,t,n))];case"Erf":return[r.erf(x("x",e,t,n))];case"Exp":return[r.exp(x("x",e,t,n))];case"Expm1":return[r.expm1(x("x",e,t,n))];case"Floor":return[r.floor(x("x",e,t,n))];case"Log":return[r.log(x("x",e,t,n))];case"Log1p":return[r.log1p(x("x",e,t,n))];case"Imag":return[r.imag(x("x",e,t,n))];case"Neg":return[r.neg(x("x",e,t,n))];case"Reciprocal":return[r.reciprocal(x("x",e,t,n))];case"Real":return[r.real(x("x",e,t,n))];case"Relu":return[r.relu(x("x",e,t,n))];case"Round":return[r.round(x("x",e,t,n))];case"Selu":return[r.selu(x("x",e,t,n))];case"Sigmoid":return[r.sigmoid(x("x",e,t,n))];case"Sin":return[r.sin(x("x",e,t,n))];case"Sign":return[r.sign(x("x",e,t,n))];case"Sinh":return[r.sinh(x("x",e,t,n))];case"Softplus":return[r.softplus(x("x",e,t,n))];case"Sqrt":return[r.sqrt(x("x",e,t,n))];case"Square":return[r.square(x("x",e,t,n))];case"Tanh":return[r.tanh(x("x",e,t,n))];case"Tan":return[r.tan(x("x",e,t,n))];case"ClipByValue":return[r.clipByValue(x("x",e,t,n),x("clipValueMin",e,t,n),x("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(x("x",e,t,n))];case"Rsqrt":return[r.rsqrt(An(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(x("x",e,t,n),x("alpha",e,t,n))];case"Prelu":return[r.prelu(x("x",e,t,n),x("alpha",e,t,n))];case"IsNan":return[r.isNaN(An(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(An(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(An(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function is(e,t,n=""){if(!(typeof e=="number"||typeof t=="number")){D(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){const s=e[r],o=t[r];D(s<0||o<0||s===o,()=>n+` Shapes ${e} and ${t} must match`)}}}function Tk(e){return!(typeof e=="number"||e.some(t=>t<0))}function Ku(e,t,n){let r=I1(e,n);const s=!Tk(r);if(s&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&t.forEach(o=>{r=I1(o.shape,r)}),!Tk(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function I1(e,t){if(typeof e=="number")return t;if(typeof t=="number")return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);const n=[];for(let r=0;r<e.length;++r){const s=e[r],o=t[r];if(s>=0&&o>=0&&s!==o)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=s>=0?s:o}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class qq{constructor(t,n,r,s,o,a,i){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.idTensor=lt(0),to(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);const n=this.tensors[t];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(t){return t.map(n=>this.read(n))}write(t,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[t]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),is(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);r.tensor=n,to(n),r.written=!0,this.tensors[t]=r}writeMany(t,n){if(t.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${n.length}.`);t.forEach((r,s)=>this.write(r,n[s]))}gather(t,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(t)t=t.slice(0,this.size());else{t=[];for(let s=0;s<this.size();s++)t.push(s)}if(t.length===0)return Fs([],[0].concat(this.elementShape));const r=this.readMany(t);return is(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Po(r,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return Fs([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return is(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),$n(r,0)}scatter(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(t.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${n.shape[0]}`);const r=Math.max(...t);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(t,Ki(n,0))}split(t,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=t.map(u=>(r+=u,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);const o=r===0?0:n.size/r,a=[];nt(()=>{n=oe(n,[1,r,o]);for(let u=0;u<t.length;++u){const l=[0,u===0?0:s[u-1],0],d=[1,t[u],o];a[u]=oe(Ke(n,l,d),this.elementShape)}return a});const i=[];for(let u=0;u<t.length;u++)i[u]=u;this.writeMany(i,a)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pi{get id(){return this.idTensor.id}constructor(t,n,r,s=-1){this.tensors=t,this.elementShape=n,this.elementDtype=r,t!=null&&t.forEach(o=>{if(r!==o.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${o.dtype}`);is(n,o.shape,"TensorList shape mismatch: "),to(o)}),this.idTensor=lt(0),this.maxNumElements=s,to(this.idTensor)}copy(){return new Pi([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(n=>{(t==null||!t.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);is(t,this.elementShape,"TensorList shape mismatch: ");const s=Ku(this.elementShape,this.tensors,t);return nt(()=>{const o=this.tensors.map(a=>oe(a,s));return Po(o,0)})}popBack(t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=Ku(this.elementShape,this.tensors,t),s=this.tensors.pop();return s.kept=!1,is(s.shape,t,"TensorList shape mismatch: "),oe(s,r)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(is(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");to(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);const n=new Pi([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(let r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}getItem(t,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);is(this.tensors[t].shape,n,"TensorList shape mismatch: ");const s=Ku(this.elementShape,this.tensors,n);return oe(this.tensors[t],s)}setItem(t,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);is(this.elementShape,n.shape,"TensorList shape mismatch: "),to(n),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=n}gather(t,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);is(this.elementShape,r,"TensorList shape mismatch: "),t=t.slice(0,this.size());const s=Ku(this.elementShape,this.tensors,r);return t.length===0?Fs([],[0].concat(s)):nt(()=>{const o=t.map(a=>oe(this.tensors[a],s));return Po(o,0)})}concat(t,n){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);is(this.elementShape,n,"TensorList shape mismatch: ");const r=Ku(this.elementShape,this.tensors,n);return this.size()===0?Fs([],[0].concat(r)):nt(()=>{const s=this.tensors.map(o=>oe(o,r));return $n(s,0)})}}function Kq(e,t,n){const r=e.dtype;if(e.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${e.shape}`);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);const s=e.shape.slice(1);is(s,t,"TensorList shape mismatch: ");const o=Ki(e);return new Pi(o,t,r)}function Xq(e,t,n,r){return new Pi([],e,t,r)}function Yq(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);const s=Math.max(...t);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const o=new Pi([],n,e.dtype,r),a=Ki(e,0);return t.forEach((i,u)=>{o.setItem(i,a[u])}),o}function Qq(e,t,n){let r=0;const s=t.map(l=>(r+=l,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${e.shape}`);const o=e.shape.slice(1),a=I1(o,n),i=r===0?0:e.size/r,u=nt(()=>{const l=[];e=oe(e,[1,r,i]);for(let d=0;d<t.length;++d){const p=[0,d===0?0:s[d-1],0],h=[1,t[d],i];l[d]=oe(Ke(e,p,h),a)}return e.dispose(),l}),c=new Pi([],n,e.dtype,t.length);for(let l=0;l<u.length;l++)c.setItem(l,u[l]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zq=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{const r=x("thenBranch",e,t,n),s=x("elseBranch",e,t,n),o=x("cond",e,t,n),a=x("args",e,t,n);return(await o.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=x("body",e,t,n),s=x("cond",e,t,n),o=x("args",e,t,n),a=await n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),i=o.map(l=>l.id);let u=await a[0].data();a.forEach(l=>{!l.kept&&i.indexOf(l.id)===-1&&l.dispose()});let c=o;for(;u[0];){const l=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const d=c.map(p=>p.id);l.forEach(p=>{!p.kept&&i.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()});const f=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);u=await f[0].data(),f.forEach(p=>{!p.kept&&i.indexOf(p.id)===-1&&d.indexOf(p.id)===-1&&p.dispose()})}return c}case"LoopCond":{const r=x("pred",e,t,n);return[So(r)]}case"Switch":{const r=x("pred",e,t,n);let s=x("data",e,t,n);return s.kept||(s=So(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=e.inputNames.find(s=>An(s,t,n)!==void 0);if(r){const s=An(r,t,n);return[So(s)]}return}case"Enter":{const r=x("frameName",e,t,n),s=x("tensor",e,t,n);return n.enterFrame(r),[So(s)]}case"Exit":{const r=x("tensor",e,t,n);return n.exitFrame(),[So(r)]}case"NextIteration":{const r=x("tensor",e,t,n);return n.nextIteration(),[So(r)]}case"TensorArrayV3":{const r=x("size",e,t,n),s=x("dtype",e,t,n),o=x("elementShape",e,t,n),a=x("dynamicSize",e,t,n),i=x("clearAfterRead",e,t,n),u=x("identicalElementShapes",e,t,n),c=x("name",e,t,n),l=new qq(c,s,r,o,u,a,i);return n.addTensorArray(l),[l.idTensor,lt(1)]}case"TensorArrayWriteV3":{const r=x("tensorArrayId",e,t,n),s=x("index",e,t,n),o=x("tensor",e,t,n),a=n.getTensorArray(r.id);return a.write(s,o),[a.idTensor]}case"TensorArrayReadV3":{const r=x("tensorArrayId",e,t,n),s=x("index",e,t,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=x("tensorArrayId",e,t,n),s=x("indices",e,t,n),o=x("dtype",e,t,n);return[n.getTensorArray(r.id).gather(s,o)]}case"TensorArrayScatterV3":{const r=x("tensorArrayId",e,t,n),s=x("indices",e,t,n),o=x("tensor",e,t,n),a=n.getTensorArray(r.id);return a.scatter(s,o),[a.idTensor]}case"TensorArrayConcatV3":{const r=x("tensorArrayId",e,t,n),s=n.getTensorArray(r.id),o=x("dtype",e,t,n);return[s.concat(o)]}case"TensorArraySplitV3":{const r=x("tensorArrayId",e,t,n),s=x("tensor",e,t,n),o=x("lengths",e,t,n),a=n.getTensorArray(r.id);return a.split(o,s),[a.idTensor]}case"TensorArraySizeV3":{const r=x("tensorArrayId",e,t,n),s=n.getTensorArray(r.id);return[lt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=x("tensorArrayId",e,t,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=x("tensorListId",e,t,n),s=x("index",e,t,n),o=x("tensor",e,t,n),a=n.getTensorList(r.id);return a.setItem(s,o),[a.idTensor]}case"TensorListGetItem":{const r=x("tensorListId",e,t,n),s=x("index",e,t,n),o=x("elementShape",e,t,n),a=x("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(s,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{const r=x("indices",e,t,n),s=x("tensor",e,t,n),o=x("elementShape",e,t,n),a=x("numElements",e,t,n),i=Yq(s,r,o,a);return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=x("elementShape",e,t,n),s=x("elementDType",e,t,n);let o;e.op==="TensorListReserve"?o="numElements":o="maxNumElements";const a=x(o,e,t,n),i=e.op==="TensorListReserve"?-1:a,u=Xq(r,s,a,i);return n.addTensorList(u),[u.idTensor]}case"TensorListGather":{const r=x("tensorListId",e,t,n),s=x("indices",e,t,n),o=x("elementShape",e,t,n),a=x("elementDType",e,t,n);return[n.getTensorList(r.id).gather(s,a,o)]}case"TensorListStack":{const r=x("tensorListId",e,t,n),s=x("elementShape",e,t,n),o=x("elementDType",e,t,n),a=x("numElements",e,t,n);return[n.getTensorList(r.id).stack(s,o,a)]}case"TensorListFromTensor":{const r=x("tensor",e,t,n),s=x("elementShape",e,t,n),o=x("elementDType",e,t,n),a=Kq(r,s,o);return n.addTensorList(a),[a.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=x("tensorListId",e,t,n),s=n.getTensorList(r.id),o=x("dtype",e,t,n),a=x("elementShape",e,t,n);return[s.concat(o,a)]}case"TensorListPushBack":{const r=x("tensorListId",e,t,n),s=x("tensor",e,t,n),o=n.getTensorList(r.id);return o.pushBack(s),[o.idTensor]}case"TensorListPopBack":{const r=x("tensorListId",e,t,n),s=x("elementShape",e,t,n),o=x("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(s,o)]}case"TensorListSplit":{const r=x("tensor",e,t,n),s=x("elementShape",e,t,n),o=x("lengths",e,t,n),a=Qq(r,o,s);return n.addTensorList(a),[a.idTensor]}case"TensorListLength":{const r=x("tensorListId",e,t,n),s=n.getTensorList(r.id);return[lt(s.size(),"int32")]}case"TensorListResize":{const r=x("tensorListId",e,t,n),s=x("size",e,t,n),a=n.getTensorList(r.id).resize(s);return n.addTensorList(a),[a.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nk(e,t,n){const[r,s]=x("fusedOps",e,t,n),o=r==="biasadd",a=!o,i=s==="prelu",u=r==="fusedbatchnorm",c=x("numArgs",e,t,n);if(o){if(i&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&o&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const l=x("strides",e,t,n),d=mp(e,t,n),f=x("dataFormat",e,t,n).toUpperCase(),p=x("dilations",e,t,n);let[h,m]=x("args",e,t,n);a&&(m=h,h=void 0);const y=x("leakyreluAlpha",e,t,n);return{stride:l,pad:d,dataFormat:f,dilations:p,biasArg:h,preluArg:m,activationFunc:s,leakyreluAlpha:y}}const Jq=(e,t,n,r=Fn)=>{switch(e.op){case"Conv1D":{const s=x("stride",e,t,n),o=x("pad",e,t,n),a=x("dataFormat",e,t,n).toUpperCase(),i=x("dilation",e,t,n);return[r.conv1d(x("x",e,t,n),x("filter",e,t,n),s,o,a,i)]}case"Conv2D":{const s=x("strides",e,t,n),o=mp(e,t,n),a=x("dataFormat",e,t,n).toUpperCase(),i=x("dilations",e,t,n);return[r.conv2d(x("x",e,t,n),x("filter",e,t,n),[s[1],s[2]],o,a,[i[1],i[2]])]}case"_FusedConv2D":{const{stride:s,pad:o,dataFormat:a,dilations:i,biasArg:u,preluArg:c,activationFunc:l,leakyreluAlpha:d}=Nk(e,t,n);return[r.fused.conv2d({x:x("x",e,t,n),filter:x("filter",e,t,n),strides:[s[1],s[2]],pad:o,dataFormat:a,dilations:[i[1],i[2]],bias:u,activation:l,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:o,dataFormat:a,dilations:i,biasArg:u,preluArg:c,activationFunc:l,leakyreluAlpha:d}=Nk(e,t,n);return[r.fused.depthwiseConv2d({x:x("x",e,t,n),filter:x("filter",e,t,n),strides:[s[1],s[2]],pad:o,dataFormat:a,dilations:[i[1],i[2]],bias:u,activation:l,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=x("outputShape",e,t,n),o=x("strides",e,t,n),a=mp(e,t,n);return[r.conv2dTranspose(x("x",e,t,n),x("filter",e,t,n),s,[o[1],o[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=x("strides",e,t,n),o=mp(e,t,n),a=x("dilations",e,t,n),i=x("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(x("input",e,t,n),x("filter",e,t,n),[s[1],s[2]],o,i,[a[1],a[2]])]}case"Conv3D":{const s=x("strides",e,t,n),o=x("pad",e,t,n),a=x("dataFormat",e,t,n).toUpperCase(),i=x("dilations",e,t,n);return[r.conv3d(x("x",e,t,n),x("filter",e,t,n),[s[1],s[2],s[3]],o,a,[i[1],i[2],i[3]])]}case"AvgPool":{const s=x("strides",e,t,n),o=x("pad",e,t,n),a=x("kernelSize",e,t,n);return[r.avgPool(x("x",e,t,n),[a[1],a[2]],[s[1],s[2]],o)]}case"MaxPool":{const s=x("strides",e,t,n),o=x("pad",e,t,n),a=x("kernelSize",e,t,n);return[r.maxPool(x("x",e,t,n),[a[1],a[2]],[s[1],s[2]],o)]}case"MaxPoolWithArgmax":{const s=x("strides",e,t,n),o=x("pad",e,t,n),a=x("kernelSize",e,t,n),i=x("includeBatchInIndex",e,t,n),{result:u,indexes:c}=r.maxPoolWithArgmax(x("x",e,t,n),[a[1],a[2]],[s[1],s[2]],o,i);return[u,c]}case"AvgPool3D":{const s=x("strides",e,t,n),o=x("pad",e,t,n),a=x("kernelSize",e,t,n);return[r.avgPool3d(x("x",e,t,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],o)]}case"MaxPool3D":{const s=x("strides",e,t,n),o=x("pad",e,t,n),a=x("kernelSize",e,t,n);return[r.maxPool3d(x("x",e,t,n),[a[1],a[2],a[3]],[s[1],s[2],s[3]],o)]}case"Dilation2D":{const s=x("strides",e,t,n),o=x("pad",e,t,n),a=x("dilations",e,t,n),i=s[1],u=s[2],c=a[1],l=a[2];return[r.dilation2d(x("x",e,t,n),x("filter",e,t,n),[i,u],o,[c,l],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eK=(e,t,n,r=Fn)=>{switch(e.op){case"Fill":{const s=x("shape",e,t,n),o=x("dtype",e,t,n),a=x("value",e,t,n);return[r.fill(s,a,o)]}case"LinSpace":{const s=x("start",e,t,n),o=x("stop",e,t,n),a=x("num",e,t,n);return[r.linspace(s,o,a)]}case"Multinomial":{const s=x("logits",e,t,n),o=x("numSamples",e,t,n),a=x("seed",e,t,n);return[r.multinomial(s,o,a)]}case"OneHot":{const s=x("indices",e,t,n),o=x("depth",e,t,n),a=x("onValue",e,t,n),i=x("offValue",e,t,n),u=x("dtype",e,t,n);return[r.oneHot(s,o,a,i,u)]}case"Ones":return[r.ones(x("shape",e,t,n),x("dtype",e,t,n))];case"OnesLike":return[r.onesLike(x("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(x("shape",e,t,n),x("dtype",e,t,n),x("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(x("shape",e,t,n),x("minval",e,t,n),x("maxval",e,t,n),x("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(x("shape",e,t,n),x("minval",e,t,n),x("maxval",e,t,n),x("seed",e,t,n))];case"Range":{const s=x("start",e,t,n),o=x("stop",e,t,n),a=x("step",e,t,n);return[r.range(s,o,a,x("dtype",e,t,n))]}case"TruncatedNormal":{const s=x("shape",e,t,n),o=x("mean",e,t,n),a=x("stdDev",e,t,n),i=x("seed",e,t,n);return[r.truncatedNormal(s,o,a,x("dtype",e,t,n),i)]}case"Zeros":return[r.zeros(x("shape",e,t,n),x("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(x("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gv(e,t,n){const r=x("boxes",e,t,n),s=x("scores",e,t,n),o=x("maxOutputSize",e,t,n),a=x("iouThreshold",e,t,n),i=x("scoreThreshold",e,t,n),u=x("softNmsSigma",e,t,n);return{boxes:r,scores:s,maxOutputSize:o,iouThreshold:a,scoreThreshold:i,softNmsSigma:u}}const tK=async(e,t,n,r,s=Fn)=>{switch(e.op){case"NonMaxSuppressionV5":{const{boxes:o,scores:a,maxOutputSize:i,iouThreshold:u,scoreThreshold:c,softNmsSigma:l}=gv(e,t,n),d=await s.image.nonMaxSuppressionWithScoreAsync(o,a,i,u,c,l);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:o,scores:a,maxOutputSize:i,iouThreshold:u,scoreThreshold:c}=gv(e,t,n),l=x("padToMaxOutputSize",e,t,n),d=await s.image.nonMaxSuppressionPaddedAsync(o,a,i,u,c,l);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:o,scores:a,maxOutputSize:i,iouThreshold:u,scoreThreshold:c}=gv(e,t,n);return[await s.image.nonMaxSuppressionAsync(o,a,i,u,c)]}case"Where":{const o=s.cast(x("condition",e,t,n),"bool"),a=[await s.whereAsync(o)];return o.dispose(),a}case"ListDiff":return s.setdiff1dAsync(x("x",e,t,n),x("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nK=(e,t,n,r=Fn)=>{switch(e.op){case"LowerBound":{const s=x("sortedSequence",e,t,n),o=x("values",e,t,n);return[r.lowerBound(s,o)]}case"TopKV2":{const s=x("x",e,t,n),o=x("k",e,t,n),a=x("sorted",e,t,n),i=r.topk(s,o,a);return[i.values,i.indices]}case"UpperBound":{const s=x("sortedSequence",e,t,n),o=x("values",e,t,n);return[r.upperBound(s,o)]}case"Unique":{const s=x("x",e,t,n),o=r.unique(s);return[o.values,o.indices]}case"UniqueV2":{const s=x("x",e,t,n),o=x("axis",e,t,n),a=r.unique(s,o);return[a.values,a.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rK=(e,t,n,r=Fn)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":const s=x("default",e,t,n);return[An(e.name,t,n)||s];case"Placeholder":return[An(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const l=x("x",e,t,n);return[So(l)]}case"IdentityN":return x("x",e,t,n).map(l=>So(l));case"Snapshot":const o=x("x",e,t,n);return[So(o)];case"Shape":return[r.tensor1d(x("x",e,t,n).shape,"int32")];case"ShapeN":return x("x",e,t,n).map(l=>r.tensor1d(l.shape));case"Size":return[r.scalar(x("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(x("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const a=x("x",e,t,n),i=x("data",e,t,n),u=x("message",e,t,n),c=x("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(u);for(let l=0;l<i.length;l++)console.log(Array.prototype.slice.call(i[l].dataSync()).slice(0,c));return[a];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sK{get id(){return this.handle.id}constructor(t,n){this.keyDType=t,this.valueDType=n,this.handle=lt(0),this.tensorMap=new Map,to(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return lt(this.size(),"int32")}async import(t,n){this.checkKeyAndValueTensor(t,n);const r=await t.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),nt(()=>{const s=Ki(n),o=r.length,a=s.length;D(o===a,()=>`The number of elements doesn't match, keys has ${o} elements, the values has ${a} elements.`);for(let i=0;i<o;i++){const u=r[i],c=s[i];to(c),this.tensorMap.set(u,c)}return this.handle})}async find(t,n){this.checkKeyAndValueTensor(t,n);const r=await t.data();return nt(()=>{const s=[];for(let o=0;o<r.length;o++){const a=r[o],i=this.findWithDefault(a,n);s.push(i)}return Po(s)})}findWithDefault(t,n){const r=this.tensorMap.get(t);return r??n}checkKeyAndValueTensor(t,n){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oK=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(e.name);if(s!=null)return[s];{const o=x("keyDType",e,t,n),a=x("valueDType",e,t,n),i=new sK(o,a);return r.addHashTable(e.name,i),[i.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=x("tableHandle",e,t,n,r),o=x("keys",e,t,n),a=x("values",e,t,n);return[await r.getHashTableById(s.id).import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{const s=x("tableHandle",e,t,n,r),o=x("keys",e,t,n),a=x("defaultValue",e,t,n);return[await r.getHashTableById(s.id).find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=x("tableHandle",e,t,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aK=(e,t,n,r=Fn)=>{switch(e.op){case"ResizeBilinear":{const s=x("images",e,t,n),o=x("size",e,t,n),a=x("alignCorners",e,t,n),i=x("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(s,[o[0],o[1]],a,i)]}case"ResizeNearestNeighbor":{const s=x("images",e,t,n),o=x("size",e,t,n),a=x("alignCorners",e,t,n),i=x("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(s,[o[0],o[1]],a,i)]}case"CropAndResize":{const s=x("image",e,t,n),o=x("boxes",e,t,n),a=x("boxInd",e,t,n),i=x("cropSize",e,t,n),u=x("method",e,t,n),c=x("extrapolationValue",e,t,n);return[r.image.cropAndResize(s,o,a,i,u,c)]}case"ImageProjectiveTransformV3":{const s=x("images",e,t,n),o=x("transforms",e,t,n),a=x("outputShape",e,t,n),i=x("fillValue",e,t,n),u=x("interpolation",e,t,n),c=x("fillMode",e,t,n);return[r.image.transform(s,o,u.toLowerCase(),c.toLowerCase(),i,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iK=(e,t,n,r=Fn)=>{switch(e.op){case"Equal":return[r.equal(x("a",e,t,n),x("b",e,t,n))];case"NotEqual":return[r.notEqual(x("a",e,t,n),x("b",e,t,n))];case"Greater":return[r.greater(x("a",e,t,n),x("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(x("a",e,t,n),x("b",e,t,n))];case"Less":return[r.less(x("a",e,t,n),x("b",e,t,n))];case"LessEqual":return[r.lessEqual(x("a",e,t,n),x("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(x("a",e,t,n),x("b",e,t,n))];case"LogicalNot":return[r.logicalNot(x("a",e,t,n))];case"LogicalOr":return[r.logicalOr(x("a",e,t,n),x("b",e,t,n))];case"Select":case"SelectV2":return[r.where(x("condition",e,t,n),x("a",e,t,n),x("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(x("a",e,t,n),x("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lK=(e,t,n,r=Fn)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(x("a",e,t,n),x("b",e,t,n),x("transposeA",e,t,n),x("transposeB",e,t,n))];case"Einsum":return[r.einsum(x("equation",e,t,n),...x("tensors",e,t,n))];case"Transpose":return[r.transpose(x("x",e,t,n),x("perm",e,t,n))];case"_FusedMatMul":const[s,o]=x("fusedOps",e,t,n),a=s==="biasadd",i=o==="prelu",u=x("numArgs",e,t,n),c=x("leakyreluAlpha",e,t,n);if(a){if(i&&u!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!i&&u!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[l,d]=x("args",e,t,n);return[r.fused.matMul({a:x("a",e,t,n),b:x("b",e,t,n),transposeA:x("transposeA",e,t,n),transposeB:x("transposeB",e,t,n),bias:l,activation:o,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(x("a",e,t,n),x("numLower",e,t,n),x("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uK=(e,t,n,r=Fn)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(x("x",e,t,n),x("axis",e,t,n),x("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(x("x",e,t,n),x("mean",e,t,n),x("variance",e,t,n),x("offset",e,t,n),x("scale",e,t,n),x("epsilon",e,t,n))];case"FusedBatchNormV3":return[r.batchNorm(x("x",e,t,n),x("mean",e,t,n),x("variance",e,t,n),x("offset",e,t,n),x("scale",e,t,n),x("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(x("x",e,t,n),x("radius",e,t,n),x("bias",e,t,n),x("alpha",e,t,n),x("beta",e,t,n))];case"Softmax":return[r.softmax(x("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(x("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cK=(e,t,n,r=Fn)=>{switch(e.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:o}=r.raggedGather(x("paramsNestedSplits",e,t,n),x("paramsDenseValues",e,t,n),x("indices",e,t,n),x("outputRaggedRank",e,t,n));return s.concat(o)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:o}=r.raggedRange(x("starts",e,t,n),x("limits",e,t,n),x("splits",e,t,n));return[s,o]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(x("shape",e,t,n),x("values",e,t,n),x("defaultValue",e,t,n),x("rowPartitionTensors",e,t,n),x("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dK=(e,t,n,r=Fn)=>{switch(e.op){case"Max":{const i=x("axis",e,t,n),u=x("keepDims",e,t,n);return[r.max(x("x",e,t,n),i,u)]}case"Mean":{const i=x("axis",e,t,n),u=x("keepDims",e,t,n);return[r.mean(x("x",e,t,n),i,u)]}case"Min":{const i=x("axis",e,t,n),u=x("keepDims",e,t,n);return[r.min(x("x",e,t,n),i,u)]}case"Sum":{const i=x("axis",e,t,n),u=x("keepDims",e,t,n);return[r.sum(x("x",e,t,n),i,u)]}case"All":{const i=x("axis",e,t,n),u=x("keepDims",e,t,n);return[r.all(x("x",e,t,n),i,u)]}case"Any":{const i=x("axis",e,t,n),u=x("keepDims",e,t,n);return[r.any(x("x",e,t,n),i,u)]}case"ArgMax":{const i=x("axis",e,t,n);return[r.argMax(x("x",e,t,n),i)]}case"ArgMin":{const i=x("axis",e,t,n);return[r.argMin(x("x",e,t,n),i)]}case"Prod":{const i=x("axis",e,t,n),u=x("keepDims",e,t,n);return[r.prod(x("x",e,t,n),i,u)]}case"Cumprod":{const i=x("axis",e,t,n),u=x("exclusive",e,t,n),c=x("reverse",e,t,n);return[r.cumprod(x("x",e,t,n),i,u,c)]}case"Cumsum":{const i=x("axis",e,t,n),u=x("exclusive",e,t,n),c=x("reverse",e,t,n);return[r.cumsum(x("x",e,t,n),i,u,c)]}case"Bincount":const s=x("x",e,t,n),o=x("weights",e,t,n),a=x("size",e,t,n);return[r.bincount(s,o,a)];case"DenseBincount":{const i=x("x",e,t,n),u=x("weights",e,t,n),c=x("size",e,t,n),l=x("binaryOutput",e,t,n);return[r.denseBincount(i,u,c,l)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fK=(e,t,n,r=Fn)=>{switch(e.op){case"ConcatV2":case"Concat":{const s=x("n",e,t,n),o=x("axis",e,t,n);let a=x("tensors",e,t,n);return a=a.slice(0,s),[r.concat(a,o)]}case"Gather":{const s=x("x",e,t,n),o=x("indices",e,t,n);return[r.gather(s,r.cast(o,"int32"),0)]}case"GatherV2":{const s=x("axis",e,t,n),o=x("batchDims",e,t,n),a=x("x",e,t,n),i=x("indices",e,t,n);return[r.gather(a,r.cast(i,"int32"),s,o)]}case"Reverse":{const s=x("dims",e,t,n),o=[];for(let i=0;i<s.length;i++)s[i]&&o.push(i);const a=x("x",e,t,n);return[r.reverse(a,o)]}case"ReverseV2":{const s=x("axis",e,t,n),o=x("x",e,t,n);return[r.reverse(o,s)]}case"Slice":{const s=x("begin",e,t,n),o=x("size",e,t,n);return[r.slice(x("x",e,t,n),s,o)]}case"StridedSlice":{const s=x("begin",e,t,n),o=x("end",e,t,n),a=x("strides",e,t,n),i=x("beginMask",e,t,n),u=x("endMask",e,t,n),c=x("ellipsisMask",e,t,n),l=x("newAxisMask",e,t,n),d=x("shrinkAxisMask",e,t,n),f=x("x",e,t,n);return[r.stridedSlice(f,s,o,a,i,u,c,l,d)]}case"Pack":return nt(()=>{const s=x("axis",e,t,n),o=x("tensors",e,t,n),a=o[0].shape,i=r.squeeze(o[0]).shape,u=o.map(c=>{const l=ws(c.shape,a);if(!l&&!ws(r.squeeze(c).shape,i))throw new Error("the input tensors shape does not match");return l?c:r.reshape(c,a)});return[r.stack(u,s)]});case"Unpack":{const s=x("axis",e,t,n),o=x("tensor",e,t,n);return r.unstack(o,s)}case"Tile":{const s=x("reps",e,t,n);return[r.tile(x("x",e,t,n),s)]}case"Split":case"SplitV":{const s=x("axis",e,t,n),o=x("numOrSizeSplits",e,t,n),a=x("x",e,t,n);return r.split(a,o,s)}case"ScatterNd":{const s=x("indices",e,t,n),o=x("values",e,t,n),a=x("shape",e,t,n);return[r.scatterND(s,o,a)]}case"GatherNd":{const s=x("x",e,t,n),o=x("indices",e,t,n);return[r.gatherND(s,o)]}case"SparseToDense":{const s=x("sparseIndices",e,t,n),o=x("outputShape",e,t,n),a=x("sparseValues",e,t,n),i=x("defaultValue",e,t,n);return[r.sparseToDense(s,a,o,a.dtype===i.dtype?i:r.cast(i,a.dtype))]}case"TensorScatterUpdate":{const s=x("indices",e,t,n),o=x("values",e,t,n),a=x("tensor",e,t,n);return[r.tensorScatterUpdate(a,s,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pK=(e,t,n,r=Fn)=>{switch(e.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:o,emptyRowIndicator:a,reverseIndexMap:i}=r.sparse.sparseFillEmptyRows(x("indices",e,t,n),x("values",e,t,n),x("denseShape",e,t,n),x("defaultValue",e,t,n));return[s,o,a,i]}case"SparseReshape":{const{outputIndices:s,outputShape:o}=r.sparse.sparseReshape(x("inputIndices",e,t,n),x("inputShape",e,t,n),x("newShape",e,t,n));return[s,o]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(x("data",e,t,n),x("indices",e,t,n),x("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(x("data",e,t,n),x("indices",e,t,n),x("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hK=(e,t,n,r=Fn)=>{switch(e.op){case"FFT":return[r.fft(x("x",e,t,n))];case"IFFT":return[r.ifft(x("x",e,t,n))];case"RFFT":return[r.rfft(x("x",e,t,n))];case"IRFFT":return[r.irfft(x("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mK=(e,t,n,r=Fn)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(x("input",e,t,n),x("pattern",e,t,n),x("rewrite",e,t,n),x("replaceGlobal",e,t,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:o}=r.string.stringNGrams(x("data",e,t,n),x("dataSplits",e,t,n),x("separator",e,t,n),x("nGramWidths",e,t,n),x("leftPad",e,t,n),x("rightPad",e,t,n),x("padWidth",e,t,n),x("preserveShortSequences",e,t,n));return[s,o]}case"StringSplit":{const{indices:s,values:o,shape:a}=r.string.stringSplit(x("input",e,t,n),x("delimiter",e,t,n),x("skipEmpty",e,t,n));return[s,o,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(x("input",e,t,n),x("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gK=(e,t,n,r=Fn)=>{switch(e.op){case"Cast":return[r.cast(x("x",e,t,n),x("dtype",e,t,n))];case"ExpandDims":{const s=x("axis",e,t,n);return[r.expandDims(x("x",e,t,n),s)]}case"Squeeze":{const s=x("axis",e,t,n);return[r.squeeze(x("x",e,t,n),s)]}case"Reshape":return[r.reshape(x("x",e,t,n),x("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(x("x",e,t,n),x("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(x("x",e,t,n),x("padding",e,t,n),x("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(x("x",e,t,n),x("padding",e,t,n),x("constantValue",e,t,n))];case"SpaceToBatchND":{const s=x("blockShape",e,t,n),o=x("paddings",e,t,n);return[r.spaceToBatchND(x("x",e,t,n),s,o)]}case"BatchToSpaceND":{const s=x("blockShape",e,t,n),o=x("crops",e,t,n);return[r.batchToSpaceND(x("x",e,t,n),s,o)]}case"DepthToSpace":{const s=x("blockSize",e,t,n),o=x("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(x("x",e,t,n),s,o)]}case"BroadcastTo":return[r.broadcastTo(x("x",e,t,n),x("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(x("s0",e,t,n),x("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ak(e,t,n,r,s=nt){const o=((a,i,u)=>{switch(a.category){case"arithmetic":return s(()=>jq(a,i,u));case"basic_math":return s(()=>Gq(a,i,u));case"control":return Zq(a,i,u);case"convolution":return s(()=>Jq(a,i,u));case"creation":return s(()=>eK(a,i,u));case"dynamic":return tK(a,i,u);case"evaluation":return s(()=>nK(a,i,u));case"image":return s(()=>aK(a,i,u));case"graph":return s(()=>rK(a,i,u));case"logical":return s(()=>iK(a,i,u));case"matrices":return s(()=>lK(a,i,u));case"normalization":return s(()=>uK(a,i,u));case"ragged":return s(()=>cK(a,i,u));case"reduction":return s(()=>dK(a,i,u));case"slice_join":return s(()=>fK(a,i,u));case"sparse":return s(()=>pK(a,i,u));case"spectral":return s(()=>hK(a,i,u));case"string":return s(()=>mK(a,i,u));case"transformation":return s(()=>gK(a,i,u));case"hash_table":return oK(a,i,u,r);case"custom":const c=dA(a.op);if(c&&c.customExecutor)return c.customExecutor(new Hq(a,i,u));throw TypeError(`Custom op ${a.op} is not registered.`);default:throw TypeError(`Unknown op '${a.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return $i(o)?o.then(a=>[].concat(a)):[].concat(o)}class Dk{constructor(t={},n={},r={},s={},o){this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,n){return{id:t,frameName:n,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const t=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);t.push(this.contextIdforContexts(r))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(t);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(t)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $k(e,t,n,r){const s=new Set,o=[];let a=null,i=null;const u=new Set,c=new Set(Object.keys(e).map(f=>Dr(f)[0]));r=r||[];const l=new Set(r.map(f=>Dr(f.name)[0])),d=[...t];for(;d.length>0;){const f=d.pop();if((fi(f)||IK(f)||_K(f))&&a==null&&(a=f,i=a.children.map(p=>p.name).filter(p=>s.has(p))),s.add(f.name),n[f.name]==null&&!c.has(f.name)&&!l.has(f.name)){if(f.inputs.length===0){o.push(f.name);continue}f.inputs.forEach(p=>{u.has(p.name)||(u.add(p.name),d.push(p))})}}return{inputs:e,outputs:t,usedNodes:s,missingInputs:o,dynamicNode:a,syncInputs:i}}function yK(e,t){const{usedNodes:n,inputs:r}=t,s=Object.keys(r).map(y=>Dr(y)[0]).map(y=>e.nodes[y]),o=e.initNodes||[],a=y=>n.has(typeof y=="string"?y:y.name);function i(y){return[...new Map(y.map(g=>[g.name,g])).values()]}const u=i([...s,...e.weights,...o]).filter(a),c=i([...u,...Object.values(e.nodes)]).filter(a),l=new Map(c.map(y=>[y.name,y])),d={};for(const y of c){d[y.name]=d[y.name]||0;for(const g of y.children)a(g)||(d[g.name]=Number.POSITIVE_INFINITY),d[g.name]=(d[g.name]||0)+1}const f=Object.entries(d).filter(([,y])=>y===0).map(([y])=>y),p=[...f];for(;f.length>0;){const y=f.pop(),g=l.get(y);for(const b of g.children.filter(a))--d[b.name]===0&&(p.push(b.name),f.push(b.name))}const h=p.map(y=>l.get(y)),m=vK(h,u);return bK(m,u),m}function vK(e,t){const n=new Map(e.map(a=>[a.name,a])),r=t.map(a=>a.name),s=new Set(r);for(;r.length>0;){const a=r.pop(),i=n.get(a);for(const u of i.children)!n.has(u.name)||s.has(u.name)||(s.add(u.name),r.push(u.name))}return e.filter(a=>s.has(a.name))}class Bf extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}}function bK(e,t){const n=new Map(e.map((i,u)=>[i.name,u])),r=new Set(t.map(i=>i.name)),s=i=>r.has(typeof i=="string"?i:i.name),o=new Set(e.map(i=>i.name)),a=i=>o.has(typeof i=="string"?i:i.name);for(const i of e){for(const u of i.children.filter(a)){if(!n.has(u.name))throw new Bf(`Child ${u.name} of node ${i.name} is unreachable.`);if(n.get(i.name)>n.get(u.name))throw new Bf(`Node ${i.name} is scheduled to run after its child ${u.name}.`)}if(!s(i))for(const u of i.inputs){if(!n.has(u.name))throw new Bf(`Input ${u.name} of node ${i.name} is unreachable.`);if(n.get(u.name)>n.get(i.name))throw new Bf(`Node ${i.name} is scheduled to run before its input ${u.name}.`)}}}function wK(e){const t=new Map(e.map((i,u)=>[i.name,u])),n=Number.MAX_SAFE_INTEGER,r=e.map((i,u)=>fi(i)?n:u),s=i=>{const u=r[t.get(i.name)];return u??-1},o=e.map((i,u)=>i.children.map(s).reduce((c,l)=>Math.max(c,l),r[u])),a=new Map;for(let i=0;i<e.length;++i){const u=o[i];if(u===n)continue;const c=e[i],l=e[u];a.has(l.name)||a.set(l.name,[]),a.get(l.name).push(c)}return a}const SK=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),xK=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),kK=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function fi(e){return SK.has(e.op)}function IK(e){return xK.has(e.op)}function _K(e){return kK.has(e.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yh{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){const n=Object.keys(t).map(r=>t[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{const n=t.signatureKey||t.name;return t.defaultOutput?`${n}:${t.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((t,n)=>(t[n]=this._functions[n].signature,t),{})}constructor(t,n){this.graph=t,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(r=>{this._functionExecutorMap[r]=new yh(t.functions[r],this)})}getCompilationKey(t,n){const r=t.map(o=>o.name).sort(),s=n.map(o=>o.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(t,n){const r=$k(t,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:o,syncInputs:a}=r;if(o!=null)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${a}]`);if(s.length>0){const c=n.map(d=>d.name),l=Object.keys(t);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${l}]. Missing the following inputs: [${s}]`)}const i=yK(this.graph,r),u=wK(i);return{orderedNodes:i,nodeLiveUntilMap:u}}cloneAndKeepTensor(t){if(t==null)return null;const n=t.clone();return to(n),n}cloneTensorList(t){return t?t.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(t,n){this.disposeIntermediateTensors(),t=this.mapInputs(t);const r=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(f=>this.graph.nodes[Dr(f)[0]]),o=n.map(f=>Dr(f)[0]),a=new Set(o);let i=o.map(f=>this.graph.nodes[f]);i.length===0&&(i=this._outputs);const u=this.getCompilationKey(s,i);let c=this.compiledMap.get(u);c==null&&(c=this.compile(t,i),this.compiledMap.set(u,c));try{this.keepIntermediateTensors=Ye().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const l={},d={};return nt(()=>{const f=new Dk(this.weightMap,l,d,this.functionExecutorMap,this.parseNodeNameCache),p=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(g=>{const[b,w]=Dr(g,f),S=[];S[w]=t[g],p[b]=S,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(S))});const h=this.getFrozenTensorIds(p),{orderedNodes:m,nodeLiveUntilMap:y}=c;for(const g of m){if(p[g.name])continue;const b=Ak(g,p,f,this._resourceManager);if($i(b))throw new Error(`The execution of the op '${g.op}' returned a promise. Please use model.executeAsync() instead.`);p[g.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[g.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(g,p,f,h,a,y.get(g.name))}return this.parent==null&&f.dispose(h),n.map(g=>An(g,p,f))})}getFrozenTensorIds(t){const n=[].concat.apply([],Object.keys(t).map(r=>t[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(t,n,r,s,o,a,i){if(!(fi(n)||a.has(t))){for(const u of r[t])u!=null&&(i[u.id]=(i[u.id]||0)+n.children.length);for(const u of n.inputs){if(fi(u))continue;const c=_k(u.name,r,s);if(c!=null)for(const l of c){if(!l||l.kept||o.has(l.id))continue;const d=i[l.id];d===1?(l.dispose(),delete i[l.id]):d!=null&&i[l.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,n,r,s,o,a){function i(u){return fi(u)||o.has(u.name)}if(!(fi(t)||a==null))for(const u of a){if(i(u))continue;const c=_k(u.name,n,r);for(const l of c)!l||l.kept||s.has(l.id)||l.dispose()}}async executeAsync(t,n){return this._executeAsync(t,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(const n of t)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(t,n,r=!1,s={},o={}){this.disposeIntermediateTensors(),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=Ye().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){this.keepIntermediateTensors=!1,console.warn(f.message)}const a=new Dk(this.weightMap,s,o,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const i=await this.executeWithControlFlow(t,a,n,r),u=n.map(f=>An(f,i,a)),c=u.map(f=>f.id),l=Object.keys(t).map(f=>t[f].id),d=new Set([...c,...l,...this.weightIds]);return Object.values(i).forEach(f=>{f.forEach(p=>{p&&!p.isDisposed&&!d.has(p.id)&&p.dispose()})}),this.parent==null&&a.dispose(d),u}async executeFunctionAsync(t,n,r){const s=t.reduce((o,a,i)=>(o[this.inputs[i].name]=a,o),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(t,n,r,s){const o=Object.keys(t),a=o.map(S=>this.graph.nodes[Dr(S)[0]]),i=r.map(S=>Dr(S)[0]),u=new Set(i);let c=i.map(S=>this.graph.nodes[S]);c.length===0&&(c=this._outputs);const{usedNodes:l,missingInputs:d,dynamicNode:f,syncInputs:p}=$k(t,c,this.weightMap,this._initNodes),h=[...a,...this.graph.weights,...this._initNodes||[]].map(S=>({node:S,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(t).forEach(S=>{const[I,_]=Dr(S),C=[];C[_]=t[S],m[I]=C});const y={},g=this.getFrozenTensorIds(m),b={};for(;h.length>0;){const S=this.processStack(a,h,n,m,b,g,u,y,l);await Promise.all(S)}f==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const w=c.filter(S=>!fi(S)&&!An(S.name,m,n)).map(S=>S.name);if(w.length>0){let S="";throw f!=null&&(S=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${p}]`),new Error(`Cannot compute the outputs [${w}] from the provided inputs [${o}]. Consider providing the following inputs: [${d}]. ${S}`)}return m}processStack(t,n,r,s,o,a,i,u,c){const l=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let f="";if(d.node.op==="Enter"&&x("isConstant",d.node,s,r)&&([f]=wo(d.node.name,r)),s[d.node.name]==null){const p=Ak(d.node,s,r,this._resourceManager);f||([f]=wo(d.node.name,r));const h=r.currentContext;$i(p)?l.push(p.then(m=>(s[f]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(m)),r.currentContext=h,this.checkTensorForDisposal(f,d.node,s,r,a,i,u),this.processChildNodes(d.node,n,r,s,o,c),m))):(s[f]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[f]=this.cloneTensorList(p)),this.checkTensorForDisposal(f,d.node,s,r,a,i,u),this.processChildNodes(d.node,n,r,s,o,c))}else this.processChildNodes(d.node,n,r,s,o,c)}return l}processChildNodes(t,n,r,s,o,a){t.children.forEach(i=>{const[u]=wo(i.name,r);o[u]||!a.has(i.name)||(i.op==="Merge"?i.inputNames.some(c=>!!An(c,s,r))&&(o[u]=!0,n.push({contexts:r.currentContext,node:i})):i.inputNames.every(c=>!!An(c,s,r))&&(o[u]=!0,n.push({contexts:r.currentContext,node:i})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(n=>n.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(n=>{const r=t[n],[s]=Dr(n),o=this.graph.nodes[s];if(o.attrParams.shape&&o.attrParams.shape.value){const a=o.attrParams.shape.value,i=a.length===r.shape.length&&r.shape.every((u,c)=>a[c]===-1||a[c]===u);D(i,()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${a}], but was [${r.shape}]`)}o.attrParams.dtype&&o.attrParams.dtype.value&&D(r.dtype===o.attrParams.dtype.value,()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(t){var n,r;const s={};for(const o in t){const a=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[o];a!=null?s[a.name]=t[o]:s[o]=t[o]}return s}checkInputs(t){const n=Object.keys(t).filter(r=>{const[s]=Dr(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(t){return t.map(n=>{var r,s;const o=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return o!=null?o.name:n},{})}checkOutputs(t){t.forEach(n=>{const[r]=Dr(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class EK{constructor(t={},n={}){this.hashTableNameToHandle=t,this.hashTableMap=n}addHashTable(t,n){this.hashTableNameToHandle[t]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(const t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(const t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CK="?tfjs-format=file",TK="model.json";class NK{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,n={},r=LN){this.modelUrl=t,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new EK}findIOHandler(){const t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{const n=this.io.getLoadHandlers(t,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[t]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const t=this.handler.load();return $i(t)?t.then(n=>this.loadSync(n)):this.loadSync(t)}loadSync(t){this.artifacts=t;const n=this.artifacts.modelTopology;let r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const o=this.artifacts.userDefinedMetadata;o.signature!=null&&(r=o.signature),o.structuredOutputKeys!=null&&(this.structuredOutputKeys=o.structuredOutputKeys)}this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`;const s=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new yh(Ek.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(s),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){const o=Ek.Instance.transformGraph(t.modelInitializer);this.initializer=new yh(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}async save(t,n){if(typeof t=="string"){const r=this.io.getSaveHandlers(t);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${t}'`);t=r[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)}addStructuredOutputNames(t){if(this.structuredOutputKeys){const n=t instanceof ln?[t]:t,r={};return n.forEach((s,o)=>r[this.structuredOutputKeys[o]]=s),r}return t}predict(t,n){const r=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(t,n){const r=await this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(t){var n;if(!(t instanceof ln)&&!Array.isArray(t)){const o=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(o!=null)for(const a in o){const i=o[a];i.resourceId!=null&&(t[a]=this.resourceIdToCapturedInput[i.resourceId])}return t}t=Array.isArray(t)?t:[t];const r=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${t.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((o,a)=>{var i,u,c;const l=(c=(u=(i=this.signature)===null||i===void 0?void 0:i.inputs)===null||u===void 0?void 0:u[a])===null||c===void 0?void 0:c.resourceId;return l!=null?o[a]=this.resourceIdToCapturedInput[l]:o[a]=t[s++],o},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const o=r[s],a=n[o];this.resourceIdToCapturedInput[a.resourceId]=t[s]}}}execute(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);const r=this.executor.execute(t,n);return r.length>1?r:r[0]}async executeAsync(t,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(t,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((n,r)=>(n[r]=[t[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&gn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function AK(e,t={},n=LN){if(e==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof e=="string"&&(e=DK(e));const r=new NK(e,t,n);return await r.load(),r}function DK(e){return e.endsWith("/")||(e=e+"/"),`${e}${TK}${CK}`}/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var Na=function(){return Na=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Na.apply(this,arguments)};function Bo(e,t,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(l){o(l)}}function i(c){try{u(r.throw(c))}catch(l){o(l)}}function u(c){var l;c.done?s(c.value):(l=c.value,l instanceof n?l:new n(function(d){d(l)})).then(a,i)}u((r=r.apply(e,[])).next())})}function Lo(e,t){var n,r,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(u){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&l[0]?r.return:l[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,l[1])).done)return s;switch(r=0,s&&(l=[2&l[0],s.value]),l[0]){case 0:case 1:s=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,r=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!((s=s.length>0&&s[s.length-1])||l[0]!==6&&l[0]!==2)){a=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){a.label=l[1];break}if(l[0]===6&&a.label<s[1]){a.label=s[1],s=l;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(l);break}s[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(d){l=[6,d],r=0}finally{n=s=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}}var hA=["rightEye","leftEye","noseTip","mouthCenter","rightEarTragion","leftEarTragion"],yv={modelType:"short",runtime:"mediapipe",maxFaces:1},$K=function(){function e(t){var n=this;this.width=0,this.height=0,this.selfieMode=!1,this.faceDetectorSolution=new nq.FaceDetection({locateFile:function(r,s){if(t.solutionPath){var o=t.solutionPath.replace(/\/+$/,"");return"".concat(o,"/").concat(r)}return"".concat(s,"/").concat(r)}}),this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode,model:t.modelType}),this.faceDetectorSolution.onResults(function(r){if(n.height=r.image.height,n.width=r.image.width,n.faces=[],r.detections!==null)for(var s=0,o=r.detections;s<o.length;s++){var a=o[s];n.faces.push(n.normalizedToAbsolute(a.landmarks,(i=a.boundingBox,u=void 0,c=void 0,l=void 0,u=i.xCenter-i.width/2,c=u+i.width,l=i.yCenter-i.height/2,{xMin:u,xMax:c,yMin:l,yMax:l+i.height,width:i.width,height:i.height})))}var i,u,c,l})}return e.prototype.normalizedToAbsolute=function(t,n){var r=this;return{keypoints:t.map(function(s,o){return{x:s.x*r.width,y:s.y*r.height,name:hA[o]}}),box:{xMin:n.xMin*this.width,yMin:n.yMin*this.height,xMax:n.xMax*this.width,yMax:n.yMax*this.height,width:n.width*this.width,height:n.height*this.height}}},e.prototype.estimateFaces=function(t,n){return Bo(this,void 0,void 0,function(){var r,s;return Lo(this,function(o){switch(o.label){case 0:return n&&n.flipHorizontal&&n.flipHorizontal!==this.selfieMode&&(this.selfieMode=n.flipHorizontal,this.faceDetectorSolution.setOptions({selfieMode:this.selfieMode})),t instanceof ln?(s=ImageData.bind,[4,EG(t)]):[3,2];case 1:return r=new(s.apply(ImageData,[void 0,o.sent(),t.shape[1],t.shape[0]])),[3,3];case 2:r=t,o.label=3;case 3:return t=r,[4,this.faceDetectorSolution.send({image:t})];case 4:return o.sent(),[2,this.faces]}})})},e.prototype.dispose=function(){this.faceDetectorSolution.close()},e.prototype.reset=function(){this.faceDetectorSolution.reset(),this.width=0,this.height=0,this.faces=null,this.selfieMode=!1},e.prototype.initialize=function(){return this.faceDetectorSolution.initialize()},e}();function RK(e){return Bo(this,void 0,void 0,function(){var t,n;return Lo(this,function(r){switch(r.label){case 0:return t=function(s){if(s==null)return Na({},yv);var o=Na({},s);return o.runtime="mediapipe",o.modelType==null&&(o.modelType=yv.modelType),o.maxFaces==null&&(o.maxFaces=yv.maxFaces),o}(e),[4,(n=new $K(t)).initialize()];case 1:return r.sent(),[2,n]}})})}function FK(e,t,n,r){var s=e.width,o=e.height,a=1,i=Math.cos(e.rotation),u=Math.sin(e.rotation),c=e.xCenter,l=e.yCenter,d=1/t,f=1/n,p=new Array(16);return p[0]=s*i*a*d,p[1]=-o*u*d,p[2]=0,p[3]=(-.5*s*i*a+.5*o*u+c)*d,p[4]=s*u*a*f,p[5]=o*i*f,p[6]=0,p[7]=(-.5*o*i-.5*s*u*a+l)*f,p[8]=0,p[9]=0,p[10]=s*d,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,function(h){if(h.length!==16)throw new Error("Array length must be 16 but got ".concat(h.length));return[[h[0],h[1],h[2],h[3]],[h[4],h[5],h[6],h[7]],[h[8],h[9],h[10],h[11]],[h[12],h[13],h[14],h[15]]]}(p)}function mA(e){return e instanceof ln?{height:e.shape[0],width:e.shape[1]}:{height:e.height,width:e.width}}function gA(e){return e instanceof ln?e:CG(e)}function vv(e,t){D(e.width!==0,function(){return"".concat(t," width cannot be 0.")}),D(e.height!==0,function(){return"".concat(t," height cannot be 0.")})}function MK(e,t){var n=function(r,s,o,a){var i=s-r,u=a-o,c=u/i;return{scale:c,offset:o-r*c}}(0,255,t[0],t[1]);return nt(function(){return Oe(me(e,n.scale),n.offset)})}function OK(e,t,n){var r=t.outputTensorSize,s=t.keepAspectRatio,o=t.borderMode,a=t.outputTensorFloatRange,i=mA(e),u=function(f,p){return{xCenter:.5*f.width,yCenter:.5*f.height,width:f.width,height:f.height,rotation:0}}(i),c=function(f,p,h){if(h===void 0&&(h=!1),!h)return{top:0,left:0,right:0,bottom:0};var m=p.height,y=p.width;vv(p,"targetSize"),vv(f,"roi");var g,b,w=m/y,S=f.height/f.width,I=0,_=0;return w>S?(g=f.width,b=f.width*w,_=(1-S/w)/2):(g=f.height/w,b=f.height,I=(1-w/S)/2),f.width=g,f.height=b,{top:_,left:I,right:I,bottom:_}}(u,r,s),l=FK(u,i.width,i.height),d=nt(function(){var f=gA(e),p=_i(function(y,g,b){return vv(b,"inputResolution"),[1/b.width*y[0][0]*g.width,1/b.height*y[0][1]*g.width,y[0][3]*g.width,1/b.width*y[1][0]*g.height,1/b.height*y[1][1]*g.height,y[1][3]*g.height,0,0]}(l,i,r),[1,8]),h=o==="zero"?"constant":"nearest",m=iy.transform(Zs(qt(f,"float32")),p,"bilinear",h,0,[r.height,r.width]);return a!=null?MK(m,a):m});return{imageTensor:d,padding:c,transformationMatrix:l}}function Rk(e){e.reduceBoxesInLowestLayer==null&&(e.reduceBoxesInLowestLayer=!1),e.interpolatedScaleAspectRatio==null&&(e.interpolatedScaleAspectRatio=1),e.fixedAnchorSize==null&&(e.fixedAnchorSize=!1);for(var t=[],n=0;n<e.numLayers;){for(var r=[],s=[],o=[],a=[],i=n;i<e.strides.length&&e.strides[i]===e.strides[n];){var u=Fk(e.minScale,e.maxScale,i,e.strides.length);if(i===0&&e.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),a.push(.1),a.push(u),a.push(u);else{for(var c=0;c<e.aspectRatios.length;++c)o.push(e.aspectRatios[c]),a.push(u);if(e.interpolatedScaleAspectRatio>0){var l=i===e.strides.length-1?1:Fk(e.minScale,e.maxScale,i+1,e.strides.length);a.push(Math.sqrt(u*l)),o.push(e.interpolatedScaleAspectRatio)}}i++}for(var d=0;d<o.length;++d){var f=Math.sqrt(o[d]);r.push(a[d]/f),s.push(a[d]*f)}var p=0,h=0;if(e.featureMapHeight.length>0)p=e.featureMapHeight[n],h=e.featureMapWidth[n];else{var m=e.strides[n];p=Math.ceil(e.inputSizeHeight/m),h=Math.ceil(e.inputSizeWidth/m)}for(var y=0;y<p;++y)for(var g=0;g<h;++g)for(var b=0;b<r.length;++b){var w={xCenter:(g+e.anchorOffsetX)/h,yCenter:(y+e.anchorOffsetY)/p,width:0,height:0};e.fixedAnchorSize?(w.width=1,w.height=1):(w.width=s[b],w.height=r[b]),t.push(w)}n=i}return t}function Fk(e,t,n,r){return r===1?.5*(e+t):e+(t-e)*n/(r-1)}function Mk(e,t){var n=t[0],r=t[1];return[n*e[0]+r*e[1]+e[3],n*e[4]+r*e[5]+e[7]]}function PK(e){return nt(function(){var t=function(s){return nt(function(){return[Ke(s,[0,0,0],[1,-1,1]),Ke(s,[0,0,1],[1,-1,-1])]})}(e),n=t[0],r=t[1];return{boxes:Tn(r),logits:Tn(n)}})}function BK(e,t,n,r){return Bo(this,void 0,void 0,function(){var s,o,a,i,u;return Lo(this,function(c){switch(c.label){case 0:return e.sort(function(l,d){return Math.max.apply(Math,d.score)-Math.max.apply(Math,l.score)}),s=_i(e.map(function(l){return[l.locationData.relativeBoundingBox.yMin,l.locationData.relativeBoundingBox.xMin,l.locationData.relativeBoundingBox.yMax,l.locationData.relativeBoundingBox.xMax]})),o=zn(e.map(function(l){return l.score[0]})),[4,iy.nonMaxSuppressionAsync(s,o,t,n)];case 1:return[4,(a=c.sent()).array()];case 2:return i=c.sent(),u=e.filter(function(l,d){return i.indexOf(d)>-1}),gn([s,o,a]),[2,u]}})})}function LK(e,t,n){return Bo(this,void 0,void 0,function(){var r,s,o,a,i;return Lo(this,function(u){switch(u.label){case 0:return r=e[0],s=e[1],o=function(c,l,d){return nt(function(){var f,p,h,m;d.reverseOutputOrder?(p=Tn(Ke(c,[0,d.boxCoordOffset+0],[-1,1])),f=Tn(Ke(c,[0,d.boxCoordOffset+1],[-1,1])),m=Tn(Ke(c,[0,d.boxCoordOffset+2],[-1,1])),h=Tn(Ke(c,[0,d.boxCoordOffset+3],[-1,1]))):(f=Tn(Ke(c,[0,d.boxCoordOffset+0],[-1,1])),p=Tn(Ke(c,[0,d.boxCoordOffset+1],[-1,1])),h=Tn(Ke(c,[0,d.boxCoordOffset+2],[-1,1])),m=Tn(Ke(c,[0,d.boxCoordOffset+3],[-1,1]))),p=Oe(me(tt(p,d.xScale),l.w),l.x),f=Oe(me(tt(f,d.yScale),l.h),l.y),d.applyExponentialOnBoxSize?(h=me(Mo(tt(h,d.hScale)),l.h),m=me(Mo(tt(m,d.wScale)),l.w)):(h=me(tt(h,d.hScale),l.h),m=me(tt(m,d.wScale),l.h));var y=Xe(f,tt(h,2)),g=Xe(p,tt(m,2)),b=Oe(f,tt(h,2)),w=Oe(p,tt(m,2)),S=$n([oe(y,[d.numBoxes,1]),oe(g,[d.numBoxes,1]),oe(b,[d.numBoxes,1]),oe(w,[d.numBoxes,1])],1);if(d.numKeypoints)for(var I=0;I<d.numKeypoints;++I){var _=d.keypointCoordOffset+I*d.numValuesPerKeypoint,C=void 0,N=void 0;d.reverseOutputOrder?(C=Tn(Ke(c,[0,_],[-1,1])),N=Tn(Ke(c,[0,_+1],[-1,1]))):(N=Tn(Ke(c,[0,_],[-1,1])),C=Tn(Ke(c,[0,_+1],[-1,1])));var $=Oe(me(tt(C,d.xScale),l.w),l.x),R=Oe(me(tt(N,d.yScale),l.h),l.y);S=$n([S,oe($,[d.numBoxes,1]),oe(R,[d.numBoxes,1])],1)}return S})}(s,t,n),a=nt(function(){var c=r;return n.sigmoidScore?(n.scoreClippingThresh!=null&&(c=XT(r,-n.scoreClippingThresh,n.scoreClippingThresh)),c=Ii(c)):c}),[4,zK(o,a,n)];case 1:return i=u.sent(),gn([o,a]),[2,i]}})})}function zK(e,t,n){return Bo(this,void 0,void 0,function(){var r,s,o,a,i,u,c,l,d,f,p,h;return Lo(this,function(m){switch(m.label){case 0:return r=[],[4,e.data()];case 1:return s=m.sent(),[4,t.data()];case 2:for(o=m.sent(),a=0;a<n.numBoxes;++a)if(!(n.minScoreThresh!=null&&o[a]<n.minScoreThresh||(i=a*n.numCoords,u=WK(s[i+0],s[i+1],s[i+2],s[i+3],o[a],n.flipVertically,a),(c=u.locationData.relativeBoundingBox).width<0||c.height<0))){if(n.numKeypoints>0)for((l=u.locationData).relativeKeypoints=[],d=n.numKeypoints*n.numValuesPerKeypoint,f=0;f<d;f+=n.numValuesPerKeypoint)p=i+n.keypointCoordOffset+f,h={x:s[p+0],y:n.flipVertically?1-s[p+1]:s[p+1]},l.relativeKeypoints.push(h);r.push(u)}return[2,r]}})})}function WK(e,t,n,r,s,o,a){return{score:[s],ind:a,locationData:{relativeBoundingBox:{xMin:t,yMin:o?1-n:e,xMax:r,yMax:o?1-e:n,width:r-t,height:n-e}}}}var UK={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:128,inputSizeWidth:128,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},VK={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:0,featureMapHeight:[],featureMapWidth:[],numLayers:1,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[4],aspectRatios:[1],fixedAnchorSize:!0},bv={runtime:"tfjs",modelType:"short",maxFaces:1,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"},HK={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:896,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:128,yScale:128,hScale:128,wScale:128,minScoreThresh:.5},jK={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2304,numCoords:16,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:6,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.6},GK=.3,qK={outputTensorSize:{width:128,height:128},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},KK={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[-1,1],borderMode:"zero"},vh,XK=function(){function e(t,n,r){this.detectorModel=n,this.maxFaces=r,t==="full"?(this.imageToTensorConfig=KK,this.tensorsToDetectionConfig=jK,this.anchors=Rk(VK)):(this.imageToTensorConfig=qK,this.tensorsToDetectionConfig=HK,this.anchors=Rk(UK));var s=zn(this.anchors.map(function(u){return u.width})),o=zn(this.anchors.map(function(u){return u.height})),a=zn(this.anchors.map(function(u){return u.xCenter})),i=zn(this.anchors.map(function(u){return u.yCenter}));this.anchorTensor={x:a,y:i,w:s,h:o}}return e.prototype.dispose=function(){this.detectorModel.dispose(),gn([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},e.prototype.reset=function(){},e.prototype.detectFaces=function(t,n){return n===void 0&&(n=!1),Bo(this,void 0,void 0,function(){var r,s,o,a,i,u,c,l,d,f,p;return Lo(this,function(h){switch(h.label){case 0:return t==null?(this.reset(),[2,[]]):(r=nt(function(){var m=qt(gA(t),"float32");return n&&(m=Tn(iy.flipLeftRight(Zs(m,0)),[0])),m}),s=OK(r,this.imageToTensorConfig),o=s.imageTensor,a=s.transformationMatrix,i=this.detectorModel.execute(o,"Identity:0"),u=PK(i),c=u.boxes,[4,LK([l=u.logits,c],this.anchorTensor,this.tensorsToDetectionConfig)]);case 1:return(d=h.sent()).length===0?(gn([r,o,i,l,c]),[2,d]):[4,BK(d,this.maxFaces,GK)];case 2:return f=h.sent(),p=function(m,y){m===void 0&&(m=[]);var g,b=(g=y,[].concat.apply([],g));return m.forEach(function(w){var S=w.locationData;S.relativeKeypoints.forEach(function(R){var F=Mk(b,[R.x,R.y]),U=F[0],L=F[1];R.x=U,R.y=L});var I=S.relativeBoundingBox,_=Number.MAX_VALUE,C=Number.MAX_VALUE,N=Number.MIN_VALUE,$=Number.MIN_VALUE;[[I.xMin,I.yMin],[I.xMin+I.width,I.yMin],[I.xMin+I.width,I.yMin+I.height],[I.xMin,I.yMin+I.height]].forEach(function(R){var F=Mk(b,R),U=F[0],L=F[1];_=Math.min(_,U),N=Math.max(N,U),C=Math.min(C,L),$=Math.max($,L)}),S.relativeBoundingBox={xMin:_,xMax:N,yMin:C,yMax:$,width:N-_,height:$-C}}),m}(f,a),gn([r,o,i,l,c]),[2,p]}})})},e.prototype.estimateFaces=function(t,n){return Bo(this,void 0,void 0,function(){var r,s;return Lo(this,function(o){return r=mA(t),s=!!n&&n.flipHorizontal,[2,this.detectFaces(t,s).then(function(a){return a.map(function(i){for(var u=i.locationData.relativeKeypoints.map(function(h,m){return Na(Na({},h),{x:h.x*r.width,y:h.y*r.height,name:hA[m]})}),c=i.locationData.relativeBoundingBox,l=0,d=["width","xMax","xMin"];l<d.length;l++)c[d[l]]*=r.width;for(var f=0,p=["height","yMax","yMin"];f<p.length;f++)c[p[f]]*=r.height;return{keypoints:u,box:c}})})]})})},e}();function YK(e){return Bo(this,void 0,void 0,function(){var t,n,r;return Lo(this,function(s){switch(s.label){case 0:return t=function(o){if(o==null)return Na({},bv);var a=Na({},o);return a.modelType==null&&(a.modelType=bv.modelType),a.maxFaces==null&&(a.maxFaces=bv.maxFaces),a.detectorModelUrl==null&&(a.modelType==="full"?a.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/full/1":a.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/face_detection/short/1"),a}(e),n=typeof t.detectorModelUrl=="string"&&t.detectorModelUrl.indexOf("https://tfhub.dev")>-1,[4,AK(t.detectorModelUrl,{fromTFHub:n})];case 1:return r=s.sent(),[2,new XK(t.modelType,r,t.maxFaces)]}})})}function QK(e,t){return Bo(this,void 0,void 0,function(){var n,r;return Lo(this,function(s){if(e===vh.MediaPipeFaceDetector){if(r=void 0,(n=t)!=null){if(n.runtime==="tfjs")return[2,YK(n)];if(n.runtime==="mediapipe")return[2,RK(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' "+"or 'mediapipe', but got ".concat(r))}throw new Error("".concat(e," is not a supported model name."))})})}(function(e){e.MediaPipeFaceDetector="MediaPipeFaceDetector"})(vh||(vh={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ut;(function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"})(ut||(ut={}));var bd;(function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"})(bd||(bd={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let yA;function ZK(e){yA=e.wasm.cwrap(ad,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function JK(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:o,bias:a,preluActivationWeights:i}=t;if(s.dtype!=="float32"||o.dtype!=="float32")throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:u,transposeB:c,activation:l,leakyreluAlpha:d}=r,f=n.dataIdMap.get(s.dataId).id,p=n.dataIdMap.get(o.dataId).id;let h=0;if(a!=null){const N=n.dataIdMap.get(a.dataId);if(N.shape.length!==1)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${N.shape.length}.`);h=N.id}const m=i==null?0:n.dataIdMap.get(i.dataId).id,y=bd[l];if(y==null)throw new Error(`${l} activation not yet supported for FusedConv2D in the wasm backend.`);const g=u?s.shape[2]:s.shape[1],b=c?o.shape[1]:o.shape[2],w=At(s.shape.slice(0,-2),o.shape.slice(0,-2)),S=n.makeOutput([...w,g,b],s.dtype),I=n.dataIdMap.get(S.dataId).id,_=new Uint8Array(new Int32Array(s.shape).buffer),C=new Uint8Array(new Int32Array(o.shape).buffer);return yA(f,_,s.shape.length,p,C,o.shape.length,u,c,y,h,m,d||0,I),S}const eX={kernelName:ad,backendName:"wasm",setupFunc:ZK,kernelFunc:JK};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function at(e,t){let n;function r(o){n=o.wasm.cwrap(e,null,["number","number","number"])}function s(o){const{backend:a,inputs:{x:i}}=o,u=a.dataIdMap.get(i.dataId).id,c=a.makeOutput(i.shape,t||i.dtype),l=a.dataIdMap.get(c.dataId).id;return ee(c.shape)===0||n(u,ut[i.dtype],l),c}return{kernelName:e,backendName:"wasm",setupFunc:r,kernelFunc:s}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tX=at(mw);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nX=at(nm);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rX=at(rm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cn(e,t,n){let r;function s(a){r=a.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])}function o(a){const{backend:i,inputs:u}=a,{a:c,b:l}=u,d=i.dataIdMap.get(c.dataId).id,f=i.dataIdMap.get(l.dataId).id,p=n??c.dtype,h=At(c.shape,l.shape),m=i.makeOutput(h,p);if(ee(h)===0)return m;const y=new Uint8Array(new Int32Array(c.shape).buffer),g=new Uint8Array(new Int32Array(l.shape).buffer),b=i.dataIdMap.get(m.dataId).id;return r(d,y,c.shape.length,f,g,l.shape.length,ut[c.dtype],b),m}return{kernelName:e,backendName:"wasm",setupFunc:s,kernelFunc:o}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sX=cn(Rd);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let vA;function oX(e){vA=e.wasm.cwrap(sm,null,["array","number","number","number"])}function aX(e){const{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(ee(r.shape)===0)return r;const s=t.map(i=>n.dataIdMap.get(i.dataId).id),o=new Uint8Array(new Int32Array(s).buffer),a=n.dataIdMap.get(r.dataId).id;return vA(o,s.length,ut[r.dtype],a),r}const iX={kernelName:sm,backendName:"wasm",setupFunc:oX,kernelFunc:aX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dy(e){const{inputs:{x:t},backend:n}=e;if(t.dtype==="string")return Fs(n.readSync(t.dataId),t.shape,t.dtype);const r=n.makeOutput(t.shape,t.dtype),s=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(s),r}const lX={kernelName:Vm,backendName:"wasm",kernelFunc:dy};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let bA;function uX(e){bA=e.wasm.cwrap(Bl,null,["number","array","number","number","number","array","number"])}function Aa(e){const{inputs:t,backend:n,attrs:r}=e,[s,o]=dX(t.x.shape,r.perm);let a=!0;for(let h=0;h<o.length;h++)o[h]!==h&&(a=!1);const i=cX(t.x.shape,r.perm),u={dataId:t.x.dataId,shape:s,dtype:t.x.dtype};if(a){const h=dy({inputs:t,backend:n});return h.shape=i,h}const c=n.makeOutput(i,u.dtype),l=n.dataIdMap.get(u.dataId).id,d=n.dataIdMap.get(c.dataId).id,f=new Uint8Array(new Int32Array(o).buffer),p=new Uint8Array(new Int32Array(u.shape).buffer);return bA(l,p,u.shape.length,ut[u.dtype],d,f,o.length),c}function cX(e,t){const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}function dX(e,t){const n=[],r=[];for(let s=0;s<e.length;++s)e[s]!==1&&n.push(e[s]),e[t[s]]!==1&&r.push(t[s]);for(let s=0;s<r.length;++s){let o=-1;for(let a=0;a<r.length;++a)r[a]>=s&&(o===-1||r[o]>r[a])&&(o=a);r[o]=s}return[n,r]}const fX={kernelName:Bl,backendName:"wasm",kernelFunc:Aa,setupFunc:uX};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wa(e,t,n){const r=e.shape,s=e.shape.length,o=Kt(t,r);let a=o;const i=ts(a,s);let u=null,c=!1;if(i!=null){const l=new Array(s);for(let p=0;p<l.length;p++)l[p]=r[i[p]];a=ar(a.length,s),u=Aa({inputs:{x:e},attrs:{perm:i},backend:n});const d=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==d&&(c=!0)}return{transposed:u,originalAxes:o,axes:a,inputWasTransposed:c}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let wA;function pX(e){wA=e.wasm.cwrap(om,null,["number, number, number"])}function hX(e){const{backend:t,inputs:n,attrs:r}=e,{axis:s,keepDims:o}=r,{x:a}=n;let u=t.dataIdMap.get(a.dataId).id,c=a;const{transposed:l,axes:d,originalAxes:f,inputWasTransposed:p}=Wa(a,s,t);if(p){const w=t.dataIdMap.get(l.dataId).id;c=l,u=w}const h=c.shape.length;or("all",d,h);const[m,y]=sr(c.shape,d),g=ee(y),b=t.makeOutput(m,a.dtype);if(ee(c.shape)!==0){const w=t.dataIdMap.get(b.dataId).id;wA(u,g,w)}if(p&&t.disposeData(l.dataId),o){const w=Rn(b.shape,f);b.shape=w}return b}const mX={kernelName:om,backendName:"wasm",setupFunc:pX,kernelFunc:hX};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let SA;function gX(e){SA=e.wasm.cwrap(am,null,["number, number, number"])}function yX(e){const{backend:t,inputs:n,attrs:r}=e,{axis:s,keepDims:o}=r,{x:a}=n;let u=t.dataIdMap.get(a.dataId).id,c=a;const{transposed:l,axes:d,originalAxes:f,inputWasTransposed:p}=Wa(a,s,t);if(p){const w=t.dataIdMap.get(l.dataId).id;c=l,u=w}const h=c.shape.length;or("any",d,h);const[m,y]=sr(c.shape,d),g=ee(y),b=t.makeOutput(m,a.dtype);if(ee(c.shape)!==0){const w=t.dataIdMap.get(b.dataId).id;SA(u,g,w)}if(p&&t.disposeData(l.dataId),o){const w=Rn(b.shape,f);b.shape=w}return b}const vX={kernelName:am,backendName:"wasm",setupFunc:gX,kernelFunc:yX};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xA(e){let t;function n(s){t=s.wasm.cwrap(e,null,["number","number","number","number","number"])}function r(s){const{backend:o,inputs:a,attrs:i}=s,{axis:u}=i,{x:c}=a,l=o.dataIdMap.get(c.dataId).id;let d=l,f=c;const{transposed:p,axes:h,inputWasTransposed:m}=Wa(c,u,o);if(m){const I=o.dataIdMap.get(p.dataId).id;I!==l&&(f=p,d=I)}const y=f.shape.slice(0,-1),g=o.makeOutput(y,"int32"),b=o.dataIdMap.get(g.dataId).id,w=ee(g.shape),S=f.shape[h[0]];return t(d,ut[f.dtype],w,S,b),m&&o.disposeData(p.dataId),g}return{kernelName:e,backendName:"wasm",setupFunc:n,kernelFunc:r}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bX=xA(gw);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wX=xA(yw);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SX=at(im);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xX=at(lm);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kX=at(um);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IX=cn(dm);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _X=at(cm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let kA;function EX(e){kA=e.wasm.cwrap(fm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function CX(e){const{inputs:t,attrs:n,backend:r}=e,s=t.x,o=r.dataIdMap.get(s.dataId).id,{filterSize:a,strides:i,pad:u,dimRoundingMode:c}=n,l=Ws(s.shape,a,i,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,y=l.padInfo.left,g=l.strideHeight,b=l.strideWidth,w=l.inChannels;if(l.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);if(l.dilationWidth!==1||l.dilationHeight!==1)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${l.dilationHeight}, ${l.dilationWidth}].`);const S=r.makeOutput(l.outShape,"float32"),I=r.dataIdMap.get(S.dataId).id;return kA(o,s.shape[0],s.shape[1],s.shape[2],d,f,p,h,m,y,g,b,w,I),S}const TX={kernelName:fm,backendName:"wasm",setupFunc:EX,kernelFunc:CX};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let IA;function NX(e){IA=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function AX(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:a,pad:i,dimRoundingMode:u,dataFormat:c}=r,l=za(s.shape,o,a,1,i,u,c),d=n.makeOutput(l.outShape,s.dtype);return IA(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),d}const DX={kernelName:vw,backendName:"wasm",setupFunc:NX,kernelFunc:AX};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _A;function $X(e){_A=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function RX(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,{filterSize:a,strides:i,pad:u,dimRoundingMode:c}=r,l=za(o.shape,a,i,1,u,c),d=n.makeOutput(o.shape,o.dtype);return _A(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left,l.filterDepth,l.filterHeight,l.filterWidth),d}const FX={kernelName:KC,backendName:"wasm",setupFunc:$X,kernelFunc:RX};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let EA;function MX(e){EA=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function OX(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,{filterSize:a,strides:i,pad:u}=r,c=Ws(o.shape,a,i,1,u),l=n.makeOutput(o.shape,o.dtype);return EA(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(l.dataId).id,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left,c.filterHeight,c.filterWidth),l}const PX={kernelName:qC,backendName:"wasm",setupFunc:MX,kernelFunc:OX};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gr(e){const{inputs:t,attrs:n}=e,{x:r}=t,{shape:s}=n,o=ee(r.shape),a=UC(s,o);return D(o===ee(a),()=>`new shape: ${a}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:a,dtype:r.dtype}}const BX={kernelName:Ow,backendName:"wasm",kernelFunc:gr};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let CA;function LX(e){CA=e.wasm.cwrap(pm,null,["number","array","number","number","array","number","number","number","number"])}function zX(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:o}=t,{transposeA:a,transposeB:i}=r;if(s.dtype!=="float32"||o.dtype!=="float32")throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const u=s.shape.length,c=o.shape.length,l=a?s.shape[u-2]:s.shape[u-1],d=i?o.shape[c-1]:o.shape[c-2],f=a?s.shape[u-1]:s.shape[u-2],p=i?o.shape[c-2]:o.shape[c-1],h=s.shape.slice(0,-2),m=o.shape.slice(0,-2),y=ee(h),g=ee(m),w=At(s.shape.slice(0,-2),o.shape.slice(0,-2)).concat([f,p]);D(l===d,()=>`Error in matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${s.shape} and ${o.shape} and transposeA=${a} and transposeB=${i} must match.`);const S=a?[y,l,f]:[y,f,l],I=i?[g,p,d]:[g,d,p],_=gr({inputs:{x:s},backend:n,attrs:{shape:S}}),C=gr({inputs:{x:o},backend:n,attrs:{shape:I}}),N=n.dataIdMap.get(_.dataId).id,$=n.dataIdMap.get(C.dataId).id,R=a?_.shape[2]:_.shape[1],F=i?C.shape[1]:C.shape[2],U=Math.max(y,g),L=n.makeOutput([U,R,F],_.dtype),H=n.dataIdMap.get(L.dataId).id,j=new Uint8Array(new Int32Array(_.shape).buffer),X=new Uint8Array(new Int32Array(C.shape).buffer);return CA(N,j,_.shape.length,$,X,C.shape.length,a,i,H),n.disposeData(_.dataId),n.disposeData(C.dataId),L.shape=w,L}const WX={kernelName:pm,backendName:"wasm",setupFunc:LX,kernelFunc:zX};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _e(e,t){Array.isArray(e)||(e=[e]),e.forEach(n=>{n!=null&&D(n.dtype!=="complex64",()=>`${t} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function UX(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const VX=e=>{const{x:t}=e.inputs,n=e.backend;_e(t,"abs");let r=new Float32Array(ee(t.shape));const s=n.data.get(t.dataId).values;return r=UX(s),n.makeOutput(r,t.shape,t.dtype)},HX={kernelName:mw,backendName:"cpu",kernelFunc:VX};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rn(e){return(t,n,r,s,o)=>{const a=At(t,n),i=a.length,u=Ee(a),c=ee(a),l=nr(o,c),d=t.length,f=n.length,p=Ee(t),h=Ee(n),m=ch(t,a),y=ch(n,a);if(m.length+y.length===0)for(let g=0;g<l.length;++g)l[g]=e(r[g%r.length],s[g%s.length]);else for(let g=0;g<l.length;++g){const b=yu(g,i,u),w=b.slice(-d);m.forEach(C=>w[C]=0);const S=so(w,d,p),I=b.slice(-f);y.forEach(C=>I[C]=0);const _=so(I,f,h);l[g]=e(r[S],s[_])}return[l,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rr(e){const{inputs:t,backend:n}=e,{real:r,imag:s}=t,o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,i=n.makeTensorInfo(r.shape,"complex64"),u=n.data.get(i.dataId);return u.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(s.shape,"float32",a)},i}const jX={kernelName:XC,backendName:"cpu",kernelFunc:Rr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bh(e,t,n="float32"){if(n==="complex64"){const s=bh(e,t,"float32"),o=bh(e,t,"float32");return Rr({inputs:{real:s,imag:o},backend:e})}const r=Vn(ee(t),n);return e.makeTensorInfo(t,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function io(e){const{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const GX={kernelName:Vm,backendName:"cpu",kernelFunc:io};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bi(e){const{inputs:t,backend:n}=e,{input:r}=t,s=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,o)}const qX={kernelName:uT,backendName:"cpu",kernelFunc:Bi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KX(e,t,n,r){if(r==="int32"){const s=Int32Array.from(e);return[t,"int32",s]}if(r==="bool"){const s=ji([0],n),[o,a]=rn((i,u)=>i!==u?1:0)(t,[],e,s,"bool");return[a,"bool",o]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Da(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dtype:o}=r;if(o==="complex64"){if(s.dtype==="complex64")return io({inputs:{x:s},backend:n});const l=bh(n,s.shape,s.dtype),d=Da({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),f=Rr({inputs:{real:d,imag:l},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),f}if(s.dtype==="complex64"){const l=Bi({inputs:{input:s},backend:n}),d=Da({inputs:{x:l},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(l),d}if(!AB(s.dtype,o)){const l=io({inputs:{x:s},backend:n});return{dataId:l.dataId,shape:l.shape,dtype:o}}const a=n.data.get(s.dataId).values,[i,u,c]=KX(a,s.shape,s.dtype,o);return n.makeTensorInfo(i,u,c)}const XX={kernelName:gm,backendName:"cpu",kernelFunc:Da};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yn(e,t,n,r){return n==null?({inputs:s,backend:o})=>{const{a,b:i}=s,u=o;_e([a,i],e);const c=u.data.get(a.dataId).values,l=u.data.get(i.dataId).values,d=a.dtype==="string"?vd(c):c,f=a.dtype==="string"?vd(l):l,p=r||a.dtype,[h,m]=t(a.shape,i.shape,d,f,p);return u.makeTensorInfo(m,p,h)}:({inputs:s,backend:o})=>{const{a,b:i}=s,u=o;if(a.dtype==="complex64"||i.dtype==="complex64"){const c=Da({inputs:{x:a},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,f=l.complexTensorInfos.imag,p=u.data.get(d.dataId).values,h=u.data.get(f.dataId).values,m=Da({inputs:{x:i},backend:u,attrs:{dtype:"complex64"}}),y=u.data.get(m.dataId),g=y.complexTensorInfos.real,b=y.complexTensorInfos.imag,w=u.data.get(g.dataId).values,S=u.data.get(b.dataId).values,[I,_,C]=n(a.shape,i.shape,p,h,w,S),N=u.makeTensorInfo(C,"float32",I),$=u.makeTensorInfo(C,"float32",_),R=Rr({inputs:{real:N,imag:$},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(N),u.disposeIntermediateTensorInfo($),R}else{const c=u.data.get(a.dataId).values,l=u.data.get(i.dataId).values,d=r||a.dtype,[f,p]=t(a.shape,i.shape,c,l,d);return u.makeTensorInfo(p,d,f)}}}function _2(e){return(t,n,r,s,o,a)=>{const i=At(t,n),u=ee(i),c=i.length,l=Ee(i),d=nr("float32",u),f=nr("float32",u),p=ch(t,i),h=ch(n,i),m=su(r,s),y=su(o,a),g=t.length,b=Ee(t),w=n.length,S=Ee(n);if(p.length+h.length===0)for(let I=0;I<d.length;I++){const _=I%m.length,C=I%y.length,N=e(m[_*2],m[_*2+1],y[C*2],y[C*2+1]);d[I]=N.real,f[I]=N.imag}else for(let I=0;I<d.length;I++){const _=yu(I,c,l),C=_.slice(-g);p.forEach(U=>C[U]=0);const N=so(C,g,b),$=_.slice(-w);h.forEach(U=>$[U]=0);const R=so($,w,S),F=e(m[N*2],m[N*2+1],y[R*2],y[R*2+1]);d[I]=F.real,f[I]=F.imag}return[d,f,i]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const YX=rn((e,t)=>e+t),QX=_2((e,t,n,r)=>({real:e+n,imag:t+r})),ou=yn(Rd,YX,QX),ZX={kernelName:Rd,backendName:"cpu",kernelFunc:ou};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TA(e,t,n,r,s){const o=ee(r),a=Vn(s,n);for(let i=0;i<e.length;i++){const u=e[i];if(u<0)throw new Error("Input x must be non-negative!");u>=s||(o>0?a[u]+=t[i]:a[u]+=1)}return a}function JX(e,t,n,r=!1){const s=e.shape[0],o=e.shape[1],a=rt([s,n],t.dtype);for(let i=0;i<s;i++)for(let u=0;u<o;u++){const c=e.get(i,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?a.set(1,i,c):t.size>0?a.set(a.get(i,c)+t.get(i,u),i,c):a.set(a.get(i,c)+1,i,c))}return a}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eY=rn((e,t)=>e&t),tY=yn(mm,eY),nY={kernelName:mm,backendName:"cpu",kernelFunc:tY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ua(e){return(t,n,r)=>{const s=un(n,t.length);for(let o=0;o<t.length;++o)s[o]=e(t[o],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vt(e,t,n){const r=Ua(t);return Va(e,r,n)}function Va(e,t,n){return({inputs:r,attrs:s,backend:o})=>{const{x:a}=r;_e(a,e);const i=o,u=i.data.get(a.dataId).values;let c;if(a.dtype==="string"){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");c=vd(u)}else c=u;const l=n||a.dtype,d=t(c,l,s);return i.makeTensorInfo(a.shape,l,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rY=Ua(e=>Math.ceil(e)),sY=Va(ym,rY),oY={kernelName:ym,backendName:"cpu",kernelFunc:sY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NA(e,t,n,r){const s=un(n,ee(t));if(r&&n!=="string"){let o=0;e.forEach(a=>{const i=ee(a.shape);s.set(a.vals,o),o+=i})}else{let o=0;e.forEach(a=>{const i=n==="string"?vd(a.vals):a.vals;let u=0;for(let c=0;c<a.shape[0];++c){const l=c*t[1]+o;for(let d=0;d<a.shape[1];++d)s[l+d]=i[u++]}o+=a.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aY=rn((e,t)=>e===t?1:0),AA=yn(Rm,aY,null,"bool"),iY={kernelName:Rm,backendName:"cpu",kernelFunc:AA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lY=Ua(e=>Math.exp(e)),DA=Va(Fm,lY,"float32"),uY={kernelName:Fm,backendName:"cpu",kernelFunc:DA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cY=Ua(e=>Math.expm1(e)),dY=Va(Mm,cY),fY={kernelName:Mm,backendName:"cpu",kernelFunc:dY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pY=Ua(e=>Math.floor(e)),hY=Va(Pm,pY),mY={kernelName:Pm,backendName:"cpu",kernelFunc:hY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gY=rn((e,t)=>Math.floor(e/t)),yY=yn(Bm,gY,null,"int32"),vY={kernelName:Bm,backendName:"cpu",kernelFunc:yY};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bY(e,t,n,r,s,o,a,i,u){const c=rt([r,o],n);for(let l=0;l<r;l++){const d=[];let f=0;for(let p=0;p<s;p++){const h=e[l*s+p];f+=h*a[p],d.push(h)}if(f<0||f>=u/o)throw new Error(`Invalid indices: ${d} does not index into ${i}`);for(let p=0;p<o;p++)c.values[l*o+p]=t.get(...t.indexToLoc(f*o+p))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wY(e,t,n){const r=rt(n,e.dtype);for(let s=0;s<r.size;++s){const a=r.indexToLoc(s).slice(),i=a[0],u=a[2],c=t.locToIndex([i,u]);a[2]=t.values[c];const l=e.locToIndex(a);0<=l&&l<e.values.length&&(r.values[s]=e.values[l])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SY=rn((e,t)=>e>t?1:0),xY=yn(Wm,SY,null,"bool"),kY={kernelName:Wm,backendName:"cpu",kernelFunc:xY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IY=rn((e,t)=>e>=t?1:0),_Y=yn(Um,IY,null,"bool"),EY={kernelName:Um,backendName:"cpu",kernelFunc:_Y};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CY=rn((e,t)=>e<t?1:0),TY=yn(Km,CY,null,"bool"),NY={kernelName:Km,backendName:"cpu",kernelFunc:TY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AY=rn((e,t)=>e<=t?1:0),DY=yn(Xm,AY,null,"bool"),$Y={kernelName:Xm,backendName:"cpu",kernelFunc:DY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RY(e,t,n){const r=(t-e)/(n-1),s=Vn(n,"float32");s[0]=e;for(let o=1;o<s.length;o++)s[o]=s[o-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FY=Ua(e=>Math.log(e)),MY=Va(Qm,FY),OY={kernelName:Qm,backendName:"cpu",kernelFunc:MY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function PY(e,t,n,r){const s=nr(r,ee(n));for(let o=0;o<s.length;++o){const a=o*t;let i=e[a];for(let u=0;u<t;++u){const c=e[a+u];(Number.isNaN(c)||c>i)&&(i=c)}s[o]=i}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BY=rn((e,t)=>Math.max(e,t)),LY=yn(sg,BY),zY={kernelName:sg,backendName:"cpu",kernelFunc:LY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WY=rn((e,t)=>Math.min(e,t)),UY=yn(lg,WY),VY={kernelName:lg,backendName:"cpu",kernelFunc:UY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $A=rn((e,t)=>e*t),HY=_2((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),fy=yn(fg,$A,HY),jY={kernelName:fg,backendName:"cpu",kernelFunc:fy};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function GY(e,t,n){const r=e2(-1,n);return $A([],t,r,e,n)}function qY(e){const{inputs:t,backend:n}=e,{x:r}=t;_e(r,"neg");const s=n.data.get(r.dataId).values,[o,a]=GY(s,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}const KY={kernelName:$w,backendName:"cpu",kernelFunc:qY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XY=rn((e,t)=>e!==t?1:0),YY=yn(pg,XY,null,"bool"),QY={kernelName:pg,backendName:"cpu",kernelFunc:YY};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RA(e,t,n,r,s){const o=t.length,a=ee(t),i=Ee(t),u=Ee(s),c=nr(n,ee(s));for(let l=0;l<a;++l){const d=yu(l,o,i),f=new Array(d.length);for(let h=0;h<f.length;h++)f[h]=d[r[h]];const p=so(f,o,u);c[p]=e[l]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vr(e){const{inputs:t,attrs:n,backend:r}=e,{x:s}=t,{perm:o}=n;_e(s,"transpose");const a=s.shape.length,i=new Array(a);for(let d=0;d<i.length;d++)i[d]=s.shape[o[d]];const u=r.data.get(s.dataId).values,c=RA(u,s.shape,s.dtype,o,i);return{dataId:r.write(c,i,s.dtype),shape:i,dtype:s.dtype}}const ZY={kernelName:Bl,backendName:"cpu",kernelFunc:vr};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JY(e,t,n,r){const[s,o]=sr(e,r),a=vu(t,"int32"),i=Vn(ee(s),a),u=ee(o);for(let c=0;c<i.length;++c){const l=c*u;let d=1;for(let f=0;f<u;++f)d*=n[l+f];i[c]=d}return{outVals:i,outShape:s,outDtype:a}}function eQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r;_e(s,"prod");const i=s.shape.length,u=Kt(o,s.shape),c=ts(u,i);let l=u,d=s;const f=[];c!=null&&(d=vr({inputs:{x:s},backend:n,attrs:{perm:c}}),f.push(d),l=ar(l.length,i));const p=n.data.get(d.dataId).values,{outVals:h,outShape:m,outDtype:y}=JY(d.shape,d.dtype,p,l);let g=m;return a&&(g=Rn(m,u)),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(g,y,h)}const tQ={kernelName:Sg,backendName:"cpu",kernelFunc:eQ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nQ(e,t,n){e.forEach((r,s)=>{if(r<0||r>=n){const o=yu(s,t.length,Ee(t)).join(",");throw new Error(`indices[${o}] = ${r} is not in [0, ${n})`)}})}function rQ(e,t){for(let n=0;n<e.length;++n){const r=e[n],s=n===e.length-1?t:e[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let o=1;o<r.length;++o)if(r[o-1]>r[o])throw new Error("Ragged splits must be sorted in ascending order")}}function sQ(e,t,n,r){const s=[];let o=0;const a=t.length-1+n.length,i=new Array(a).fill(null).map(()=>[0]);rQ(n,r);let u=1;for(let c=0;c<t.length-1;++c){u*=t[c];const l=t[c+1];for(let d=1;d<u+1;++d)i[c].push(d*l)}for(let c=0;c<e.length;++c){let l=e[c],d=e[c]+1;for(let f=0;f<n.length;++f){const p=n[f],h=f+t.length-1;if(h>=0){const m=i[h],y=m[m.length-1]-p[l];for(let g=l;g<d;++g)i[h].push(p[g+1]+y)}l=p[l],d=p[d]}d!==l&&(s.push([l,d]),o+=d-l)}return{outSplits:i,valueSlices:s,numValues:o}}function oQ(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n].length,s=un("int32",r);t.push(s),e[n].forEach((o,a)=>s[a]=o)}return t}function Ok(e,t){const n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function aQ(e,t,n,r,s,o){const a=Ok(t,2)[1],i=Ok(o,2)[1];let u=0;for(const c of n)for(let l=c[0];l<c[1];++l){for(let d=0;d<r;++d)s[u*i+d]=e[l*a+d];++u}}function iQ(e,t,n,r,s){const o=t.slice();o[0]=s;const a=un(n,ee(o)),i=e.length,u=i===0?0:i/t[0];return aQ(e,t,r,u,a,o),[a,o]}function lQ(e,t,n,r,s,o,a,i){if(e.length===0)throw new Error("paramsNestedSplits must be non empty");if(t[0].length===0)throw new Error("Split tensors must not be scalars");const u=t[0][0]-1;if(nQ(o,a,u),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:l,valueSlices:d,numValues:f}=sQ(o,a,e,c),p=oQ(l),h=iQ(n,r,s,d,f);return[p,h[0],h[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pk=2147483647;function uQ(e,t,n,r,s,o,a){if(t.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");const i=t.length===0,u=s.length===0,c=a.length===0,l=[];i||l.push(t[0]),u||l.push(s[0]),c||l.push(a[0]);for(let y=1;y<l.length;++y)if(l[y]!==l[y-1])throw new Error("starts, limits, and deltas must have the same shape");const d=l.length===0?1:l[0],f=un("int32",d+1);f[0]=0;for(let y=0;y<d;++y){const g=i?e[0]:e[y],b=u?r[0]:r[y],w=c?o[0]:o[y];if(w===0)throw new Error("Requires delta != 0");let S;if(w>0&&b<g||w<0&&b>g)S=0;else if(S=Math.ceil(Math.abs((b-g)/w)),S>Pk)throw new Error(`Requires ((limit - start) / delta) <= ${Pk}`);f[y+1]=f[y]+S}const p=f[d],h=un(n,p);let m=0;for(let y=0;y<d;++y){const g=f[y+1]-f[y];let b=i?e[0]:e[y];const w=c?o[0]:o[y];for(let S=0;S<g;++S)h[m++]=b,b+=w}return[f,h]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ss=Js;class wh{constructor(t,n,r,s,o,a,i,u,c,l){this.shape=t,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=o,this.defaultValue=a,this.defaultValueShape=i,this.rowPartitionValues=u,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=$G(l),this.raggedRank=RG(this.rowPartitionTypes)}getRowPartitionTypeByDimension(t){return this.rowPartitionTypes[0]===ss.FIRST_DIM_SIZE?this.rowPartitionTypes[t+1]:this.rowPartitionTypes[t]}getRowPartitionTensor(t){return this.rowPartitionTypes[0]===ss.FIRST_DIM_SIZE?this.rowPartitionValues[t+1]:this.rowPartitionValues[t]}getMaxWidth(t){const n=this.getRowPartitionTensor(t-1);switch(this.getRowPartitionTypeByDimension(t-1)){case ss.VALUE_ROWIDS:return wh.getMaxWidthValueRowID(n);case ss.ROW_SPLITS:return wh.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${ss[this.getRowPartitionTypeByDimension(t-1)]}`)}}static getMaxWidthRowSplit(t){const n=t.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const o=t[s+1]-t[s];o>r&&(r=o)}return r}static getMaxWidthValueRowID(t){const n=t.length;if(n===0)return 0;let r=0,s=t[0],o=0;for(let a=1;a<n;++a){const i=t[a];i!==s&&(s=i,o=Math.max(a-r,o),r=a)}return Math.max(n-r,o)}tensorShapeFromTensor(t,n,r=!0){if(n.length===0){if(t[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return Lk(t,r)}calculateOutputSize(t){const n=this.valuesShape,r=this.defaultValueShape;FG(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),a=DG(this.raggedRank,s,n);a[0]<0&&(a[0]=t);for(let i=1;i<=this.raggedRank;++i)a[i]<0&&(a[i]=this.getMaxWidth(i));return a}calculateFirstParentOutputIndex(t,n,r){const s=Math.min(t,r),o=[];let a=0;for(let i=0;i<s;++i,a+=n)o.push(a);for(let i=s;i<t;++i)o.push(-1);return D(o.length===t,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(t,n,r,s){const o=t.length,a=[];for(let i=0;i<o-1;++i){const u=t[i+1]-t[i];let c=Math.min(s,u),l=n[i];l===-1&&(c=0);for(let d=0;d<c;++d)a.push(l),l+=r;for(let d=0;d<u-c;++d)a.push(-1)}if(o>0&&a.length!==t[o-1])throw new Error("Invalid row split size.");return a}calculateOutputIndexValueRowID(t,n,r,s){const o=t.length,a=[];if(o===0)return[];let i=0,u=t[0];if(u>=n.length)throw new Error(`Got currentValueRowId=${u}, which is not less than ${n.length}`);let c=n[u];a.push(c);for(let l=1;l<o;++l){const d=t[l];if(d===u)c>=0&&(++i,i<s?c+=r:c=-1);else{if(i=0,u=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}a.push(c)}if(a.length!==t.length)throw new Error("Invalid row ids.");return a}calculateOutputIndex(t,n,r,s){const o=this.getRowPartitionTensor(t),a=this.getRowPartitionTypeByDimension(t);switch(a){case ss.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,n,r,s);case ss.ROW_SPLITS:if(o.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(o,n,r,s);default:throw new Error(`Unsupported partition type: ${ss[a]}`)}}getFirstDimensionSize(){const t=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case ss.FIRST_DIM_SIZE:return t[0];case ss.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case ss.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${ss[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let u=s.length-2;u>=0;--u)s[u]=s[u+1]*r[u+1];const o=Lk(r,!1),a=un(this.valuesDType,ee(o));if(s[0]*r[0]>0){let u=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)u=this.calculateOutputIndex(c-1,u,s[c],r[c]);this.setOutput(this.raggedRank,u,a,o)}return[o,a]}setOutput(t,n,r,s){if(r.length===0)return;const o=this.values,a=r;let i=s.slice();i=i.slice(t+1);const u=ee(i),c=n.length;let l=this.defaultValue;if(l.length!==u&&l.length!==1){const h=this.defaultValueShape;nt(()=>{const m=oe(l,h);l=Cc(m,i).dataSync()})}let d=0,f=0,p=0;for(let h=0;h<=c;++h){let m=h<c?n[h]:-1;if(m===p){++p;continue}if(f<p){const y=o.subarray(d*u),g=a.subarray(f*u),b=(p-f)*u;Bk(g,y,b)}if(h>=c){const y=r.length;m=Math.floor(y/u)}if(m>p)if(this.defaultValue.length===1)a.subarray(p*u,m*u).fill(this.defaultValue[0]),p=m;else for(;m>p;){const y=a.slice(p*u);Bk(y,l,u),++p}m<0?(d=h+1,f=p):(d=h,f=p,p=f+1)}}}function Bk(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function Lk(e,t){const n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function cQ(e,t,n,r,s,o,a,i,u,c){return new wh(e,t,n,r,s,o,a,i,u,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FA(e,t,n,r){const s=e===t,o=e<t&&n<0,a=t<e&&n>1;if(s||o||a)return Vn(0,r);const i=Math.abs(Math.ceil((t-e)/n)),u=Vn(i,r);t<e&&n===1&&(n=-1),u[0]=e;for(let c=1;c<u.length;c++)u[c]=u[c-1]+n;return u}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dQ=Ua(e=>1/Math.sqrt(e)),fQ=Va(Ng,dQ),pQ={kernelName:Ng,backendName:"cpu",kernelFunc:fQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Al(e,t,n,r,s,o,a,i,u,c){const l=[r/s,s],d=e.values,f=t.values;if(r===0)return rt(n,t.dtype);const p=u instanceof mn?u:rt(l,t.dtype);typeof u=="string"||typeof u=="number"?p.values.fill(u):typeof u=="boolean"&&p.values.fill(+u);for(let h=0;h<o;h++){const m=[];let y=0;for(let g=0;g<a;g++){const b=d[h*a+g];m.push(b),y+=b*i[g]}if(y<0||y>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let g=0;g<s;g++)c?p.values[y*s+g]+=f[h*s+g]:p.values[y*s+g]=t.rank===0?f[0]:f[h*s+g]}return p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MA=vt(Pg,e=>1/(1+Math.exp(-e))),hQ={kernelName:Pg,backendName:"cpu",kernelFunc:MA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _1(e,t,n,r,s){const o=UN(r,t,n),a=ee(n),i=Ee(r);if(o){const d=VN(t,i);return s==="string"?e.slice(d,d+a):e.subarray(d,d+a)}const u=s==="string"?vd(e):e,c=rt(r,s,u),l=rt(n,s);for(let d=0;d<l.size;++d){const f=l.indexToLoc(d),p=f.map((h,m)=>h+t[m]);l.set(c.get(...p),...f)}return s==="string"?cA(l.values):l.values}function Li(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:o,size:a}=r;_e(s,"slice");const[i,u]=HN(s,o,a);NG(s,i,u);const c=n.data.get(s.dataId).values,l=_1(c,i,u,s.shape,s.dtype);return n.makeTensorInfo(u,s.dtype,l)}const mQ={kernelName:zw,backendName:"cpu",kernelFunc:Li};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gQ(e,t,n,r,s,o,a){const i=t[0],u=o[0],c=new Array(u),l=new Array(i),d=t[1];if(u===0){if(i!==0)throw new Error(ZN(i));const y=un(n,0),g=un(s,0);return[y,[0,d],g,c,l]}let f=!0,p=0;const h=new Array(u).fill(0);for(let y=0;y<i;++y){const g=e[y*d];if(g<0)throw new Error(JN(y,g));if(g>=u)throw new Error(eA(y,g,u));++h[g],f=f&&g>=p,p=g}let m=!0;for(let y=0;y<u;++y){const g=h[y]===0;c[y]=g,m=m&&!g,h[y]=Math.max(h[y],1),y>0&&(h[y]+=h[y-1])}if(m&&f){const y=e,g=r;for(let b=0;b<i;++b)l[b]=b;return[y,[i,d],g,c,l]}else{const y=h[u-1],g=un(n,y*d),b=un(s,y),w=new Array(u).fill(0);for(let S=0;S<i;++S){const I=e[S*d],_=w[I],C=(I===0?0:h[I-1])+_;w[I]++;for(let N=0;N<d;++N)g[C*d+N]=e[S*d+N];b[C]=r[S],l[S]=C}for(let S=0;S<u;++S)if(w[S]===0){const _=S===0?0:h[S-1];g[_*d+0]=S;for(let C=1;C<d;++C)g[_*d+C]=0;b[_]=a}return[g,[y,d],b,c,l]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yQ(e,t,n,r,s){const o=ee(r),a=t[0],i=s.length,u=[];let c=1,l=-1;for(let y=0;y<i;++y){const g=s[y];if(g===-1){if(l!==-1)throw new Error(tA(l,y));l=y,u.push(1)}else{if(g<0)throw new Error(nA(y,g));c*=g,u.push(g)}}if(l!==-1){if(c<=0)throw new Error(rA());const y=Math.trunc(o/c);if(c*y!==o)throw new Error(sA(r,u));u[l]=y}if(ee(u)!==o)throw new Error(oA(r,u));const f=r.length,p=[];if(f>0){p[f-1]=1;for(let y=f-2;y>=0;--y)p[y]=p[y+1]*r[y+1]}const h=[];if(i>0){h[i-1]=1;for(let y=i-2;y>=0;--y)h[y]=h[y+1]*u[y+1]}const m=un(n,a*i);for(let y=0;y<a;++y){let g=0;for(let b=0;b<f;++b)g+=e[y*f+b]*p[b];for(let b=0;b<i;++b)m[y*i+b]=Math.trunc(g/h[b]),g%=h[b]}return[m,[a,i],u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function OA(e,t,n,r,s,o=!1,a=0){const i=r.length,u=[t[0],e.length/t[0]],c=u[1],d=i>0?s[i-1]+1:0;if(d<0)throw new Error(mh());const f=t.slice();f[0]=d;const p=f.reduce((w,S)=>w*S,1),h=un(n,p);if(i===0)return d>0&&h.fill(a),[h,f];if(d<=0)throw new Error(mh());let m=0,y=1,g=0,b=s[m];for(;;){let w=0;if(y<i){if(w=s[y],b===w){++y;continue}if(b>=w)throw new Error(aA())}if(b<0||b>=d)throw new Error(iA(b,d));b>g&&h.fill(a,g*c,b*c);for(let S=m;S<y;++S){const I=r[S];if(I<0||I>=u[0])throw new Error(lA(S,r[S],u[0]));for(let _=0;_<c;_++)h[b*c+_]+=e[I*c+_]}if(o)for(let S=0;S<c;S++)h[b*c+S]/=y-m;if(m=y,++y,g=b+1,b=w,y>i)break}return g<d&&h.fill(a,g*c,d*c),[h,f]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vQ=vt(Lg,e=>Math.sqrt(e)),bQ={kernelName:Lg,backendName:"cpu",kernelFunc:vQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wQ=rn((e,t)=>{const n=e-t;return n*n}),SQ=yn(Hg,wQ),xQ={kernelName:Hg,backendName:"cpu",kernelFunc:SQ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kQ=Ua((e,t)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=t;return e.replace(new RegExp(n,r?"g":""),s)}),IQ=Va(Gw,kQ),_Q={kernelName:Gw,backendName:"cpu",kernelFunc:IQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function EQ(e,t,n,r){const s=rt(e,t.dtype);for(let o=0;o<s.size;o++){const a=s.indexToLoc(o),i=new Array(a.length);for(let u=0;u<i.length;u++)i[u]=a[u]*n[u]+r[u];s.set(t.get(...i),...a)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CQ{constructor(t,n,r,s,o,a){this.separator=ki(t),this.nGramWidths=n,this.leftPad=ki(r),this.rightPad=ki(s),this.padWidth=o,this.preserveShort=a}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,n){const r=this.getPadWidth(n);return Math.max(0,t+2*r-n+1)}createNGrams(t,n,r,s,o,a){for(let i=0;i<o;++i){const u=this.getPadWidth(a),c=Math.max(0,u-i),l=Math.max(0,u-(o-(i+1))),d=a-(c+l),f=n+(c>0?0:i-u);let p=0;p+=c*this.leftPad.length;for(let b=0;b<d;++b)p+=t[f+b].length;p+=l*this.rightPad.length;const h=c+l+d-1;p+=h*this.separator.length,r[s+i]=new Uint8Array(p);const m=r[s+i];let y=0;const g=b=>b.forEach(w=>m[y++]=w);for(let b=0;b<c;++b)g(this.leftPad),g(this.separator);for(let b=0;b<d-1;++b)g(t[f+b]),g(this.separator);if(d>0){g(t[f+d-1]);for(let b=0;b<l;++b)g(this.separator),g(this.rightPad)}else{for(let b=0;b<l-1;++b)g(this.rightPad),g(this.separator);g(this.rightPad)}}}compute(t,n){const r=t.length,s=n.length;if(s>0){let u=n[0];if(u!==0)throw new Error(`First split value must be 0, got ${u}`);for(let c=1;c<s;++c){let l=n[c]>=u;if(l=l&&n[c]<=r,!l)throw new Error(`Invalid split value ${n[c]}, must be in [${u}, ${r}]`);u=n[c]}if(u!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${u}`)}const o=s-1,a=un("int32",s);if(r===0||s===0){const u=new Array(r);for(let c=0;c<=o;++c)a[c]=0;return[u,a]}a[0]=0;for(let u=1;u<=o;++u){const c=n[u]-n[u-1];let l=0;this.nGramWidths.forEach(d=>{l+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&l===0&&(l=1),a[u]=a[u-1]+l}const i=new Array(a[o]);for(let u=0;u<o;++u){const c=n[u];let l=a[u];if(this.nGramWidths.forEach(d=>{const f=n[u+1]-n[u],p=this.getNumNGrams(f,d);this.createNGrams(t,c,i,l,p,d),l+=p}),this.preserveShort&&l===a[u]){const d=n[u+1]-n[u];if(d===0)continue;const f=d+2*this.padWidth;this.createNGrams(t,c,i,l,1,f)}}return[i,a]}}function PA(e,t,n,r,s,o,a,i){return new CQ(n,r,s,o,a,i).compute(e,t)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TQ(e,t,n,r){if(!e.length)return;if(t.length===0){for(let o=0;o<e.length;++o)r.push(e.subarray(o,o+1));return}if(t.length===1){const o=t[0];let a=e.indexOf(o);for(;a!==-1;){const i=e.subarray(0,a);(!n||i.length!==0)&&r.push(i),e=e.subarray(a+1),a=e.indexOf(o)}(!n||e.length!==0)&&r.push(e);return}let s=0;for(let o=0;o<e.length+1;o++)if(o===e.length||t.indexOf(e[o])!==-1){const a=e.subarray(s,o);(!n||a.length!==0)&&r.push(a),s=o+1}}function BA(e,t,n){const r=e.length,s=[];let o=0,a=0;const i=new Array(r);for(let f=0;f<r;++f){const p=s.length;TQ(e[f],t,n,s);const h=s.length-p;i[f]=h,o+=h,a=Math.max(a,h)}const u=un("int32",o*2),c=new Array(o),l=[r,a];let d=0;for(let f=0;f<r;++f)for(let p=0;p<i[f];++p)u[d*2]=f,u[d*2+1]=p,c[d]=s[d],++d;return[u,c,l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LA(e,t){const n=un("int32",e.length);for(let r=0;r<e.length;++r)n[r]=YB(e[r]).modulo(t).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NQ=rn((e,t)=>e-t),AQ=_2((e,t,n,r)=>({real:e-n,imag:t-r})),E2=yn(Gg,NQ,AQ),DQ={kernelName:Gg,backendName:"cpu",kernelFunc:E2};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $Q(e,t){const n=new Array(e.rank);for(let s=0;s<n.length;s++)n[s]=e.shape[s]*t[s];const r=rt(n,e.dtype);for(let s=0;s<r.values.length;++s){const o=r.indexToLoc(s),a=new Array(e.rank);for(let u=0;u<a.length;u++)a[u]=o[u]%e.shape[u];const i=e.locToIndex(a);r.values[s]=e.values[i]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cc=(e,t)=>{const n=t.value-e.value;return n===0?e.index-t.index:n};function zA(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){const i=r-n+1,u=t-n+1,c=Math.log(i),l=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*l*(i-l)/i)*Math.sign(u-i/2),f=Math.max(n,Math.floor(t-u*l/i+d)),p=Math.min(r,Math.floor(t+(i-u)*l/i+d));zA(e,t,f,p)}const s=e[t];let o=n,a=r;for(Gu(e,n,t),cc(e[r],s)>0&&Gu(e,n,r);o<a;){for(Gu(e,o,a),o++,a--;cc(e[o],s)<0;)o=o+1;for(;cc(e[a],s)>0;)a=a-1}cc(e[n],s)===0?Gu(e,n,a):(a=a+1,Gu(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function RQ(e,t,n,r,s){const o=t[t.length-1],[a,i]=[e.length/o,o],u=nr(n,a*r),c=nr("int32",a*r);for(let d=0;d<a;d++){const f=d*i,p=e.subarray(f,f+i);let h=new Array(p.length);p.forEach((b,w)=>h[w]={value:b,index:w}),r<h.length&&(zA(h,r),h=h.slice(0,r)),s&&h.sort(cc);const m=d*r,y=u.subarray(m,m+r),g=c.subarray(m,m+r);for(let b=0;b<r;b++)y[b]=h[b].value,g[b]=h[b].index}const l=t.slice();return l[l.length-1]=r,[rt(l,n,u),rt(l,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WA(e,t,n,r){const s=Kt(t,n)[0],o=[1,n[0],1];for(let h=0;h<s;h++)o[0]*=n[h];o[1]=n[s];for(let h=s+1;h<n.length;h++)o[2]*=n[h];const a=new Map,i=new Int32Array(n[s]),u=new mn(o,r,e),c=[],l=o[0]===1&&o[2]===1;for(let h=0;h<n[s];h++){let m;if(l)m=e[h].toString();else{const g=[];for(let b=0;b<o[0];b++)for(let w=0;w<o[2];w++)g.push(u.get(b,h,w));m=g.join(",")}const y=a.get(m);if(y!=null)i[h]=y;else{const g=a.size;a.set(m,g),i[h]=g,c.push(h)}}const d=o.slice();d[1]=a.size;const f=new mn(d,r);c.forEach((h,m)=>{for(let y=0;y<o[0];y++)for(let g=0;g<o[2];g++)f.set(u.get(y,h,g),y,m,g)});const p=n.slice();return p[s]=d[1],{outputValues:f.values,outputShape:p,indices:i}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zi(e){const{inputs:{x:t},attrs:{begin:n,size:r},backend:s}=e,[o,a]=HN(t,n,r),i=UN(t.shape,o,a),u=s.readSync(t.dataId),c=s.makeOutput(a,t.dtype),l=Ee(t.shape),d=s.dataIdMap.get(c.dataId);if(i){const h=VN(o,l);return t.dtype==="string"?d.stringBytes=u.slice(h,h+ee(a)):s.typedArrayFromHeap(c).set(u.subarray(h,h+ee(a))),c}if(t.dtype==="string"){const h=_1(u,o,a,t.shape,t.dtype);return d.stringBytes=h,c}const f=s.typedArrayFromHeap(c),p=t.shape.length;if(p===2)FQ(u,l[0],f,o,a);else if(p===3)MQ(u,l[0],l[1],f,o,a);else if(p===4)OQ(u,l[0],l[1],l[2],f,o,a);else{const h=_1(u,o,a,t.shape,t.dtype);f.set(h)}return c}function FQ(e,t,n,r,s){let o=0;const a=r[0],i=r[1],u=a+s[0];for(let c=a;c<u;c++){const l=c*t+i;n.set(e.subarray(l,l+s[1]),o),o+=s[1]}}function MQ(e,t,n,r,s,o){let a=0;const i=s[0],u=s[1],c=s[2],l=i+o[0],d=u+o[1];for(let f=i;f<l;f++)for(let p=u;p<d;p++){const h=f*t+p*n+c;r.set(e.subarray(h,h+o[2]),a),a+=o[2]}}function OQ(e,t,n,r,s,o,a){let i=0;const u=o[0],c=o[1],l=o[2],d=u+a[0],f=c+a[1],p=l+a[2],h=o[3];for(let m=u;m<d;m++)for(let y=c;y<f;y++)for(let g=l;g<p;g++){const b=m*t+y*n+g*r+h;s.set(e.subarray(b,b+a[3]),i),i+=a[3]}}const PQ={kernelName:zw,backendName:"wasm",kernelFunc:zi};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:o,crops:a}=r,i=o.reduce((g,b)=>g*b),u=ly(s.shape,o,i),c=uy(u.length,o.length),l=cy(s.shape,o,i),d=KN(a,o.length),f=XN(l,a,o.length),p=gr({inputs:{x:s},backend:n,attrs:{shape:u}}),h=Aa({inputs:{x:p},backend:n,attrs:{perm:c}}),m=gr({inputs:{x:h},backend:n,attrs:{shape:l}}),y=zi({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeData(p.dataId),n.disposeData(h.dataId),n.disposeData(m.dataId),y}const LQ={kernelName:bw,backendName:"wasm",kernelFunc:BQ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let UA;function zQ(e){UA=e.wasm.cwrap(hm,null,["number","number","boolean","number","number","number"])}function WQ(e){const{backend:t,inputs:n,attrs:r}=e,{x:s,weights:o}=n,{size:a}=r,i=o.shape.reduce((d,f)=>d*f,1)!==0,u=s.shape.length===1?[a]:[s.shape[0],a],c=t.makeOutput(u,o.dtype);function l(d){return t.dataIdMap.get(d.dataId).id}return UA(l(s),a,i,l(o),ut[o.dtype],l(c)),c}const UQ={kernelName:hm,backendName:"wasm",setupFunc:zQ,kernelFunc:WQ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VQ=cn(mm);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HQ(e){const{inputs:t,backend:n}=e,{s0:r,s1:s}=t,o=n.typedArrayFromHeap(r),a=n.typedArrayFromHeap(s),i=At(Array.from(o),Array.from(a));return n.makeOutput([i.length],"int32",void 0,new Int32Array(i))}const jQ={kernelName:ww,backendName:"wasm",kernelFunc:HQ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ha(e){const{inputs:{x:t},attrs:{dtype:n},backend:r}=e,s=r.makeOutput(t.shape,n),o=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(s).set(o),s}const GQ={kernelName:gm,backendName:"wasm",kernelFunc:Ha};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qQ=at(ym);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let VA;function KQ(e){VA=e.wasm.cwrap(Fd,null,["number","number","number","number"])}function XQ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{clipValueMin:o,clipValueMax:a}=r,i=n.dataIdMap.get(s.dataId).id,u=n.makeOutput(s.shape,s.dtype),c=n.dataIdMap.get(u.dataId).id;return VA(i,o,a,c),u}const YQ={kernelName:Fd,backendName:"wasm",setupFunc:KQ,kernelFunc:XQ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HA(e){const{inputs:t,backend:n}=e,r=Kt(e.attrs.axis,t[0].shape)[0],s=t.map(p=>p.shape);GN(s,r);let o=Ul(t.map(p=>p.shape),r);const a=t.filter(p=>ee(p.shape)>0);if(a.length===1)return dy({inputs:{x:a[0]},backend:n});const i=n.makeOutput(o,t[0].dtype);if(ee(o)===0)return i;if(a[0].dtype==="string"){const p=a.map(w=>{const I=[-1,ee(w.shape.slice(r))];return gr({inputs:{x:w},backend:n,attrs:{shape:I}})}),h=p.map(w=>({vals:n.readSync(w.dataId),shape:w.shape}));o=Ul(p.map(w=>w.shape),1);const m=p[0].shape[0]===1,y=NA(h,o,t[0].dtype,m),g=Ul(a.map(w=>w.shape),r);i.shape=g;const b=n.dataIdMap.get(i.dataId);return b.stringBytes=cA(y),p.forEach(w=>n.disposeData(w.dataId)),i}const u=ee(a[0].shape.slice(0,r));let c=0;const l=a.map(p=>{const h=ee(p.shape.slice(r));return c+=h,h}),d=a.map(p=>n.typedArrayFromHeap(p)),f=n.typedArrayFromHeap(i);for(let p=0;p<u;p++){let h=p*c;for(let m=0;m<d.length;m++){const y=l[m],g=p*y,b=d[m].subarray(g,g+y);f.set(b,h),h+=y}}return i}const QQ={kernelName:Sw,backendName:"wasm",kernelFunc:HA};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let jA;function ZQ(e){jA=e.wasm.cwrap(vm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function JQ(e){const{inputs:t,attrs:n,backend:r}=e,{x:s,filter:o}=t,a=r.dataIdMap.get(s.dataId).id,i=r.dataIdMap.get(o.dataId).id,{strides:u,dilations:c,pad:l,dimRoundingMode:d,dataFormat:f}=n,p=wu(f),h=xr(s.shape,o.shape,u,c,l,d,!1,p),m=h.filterHeight,y=h.filterWidth,g=h.padInfo.top,b=h.padInfo.right,w=h.padInfo.bottom,S=h.padInfo.left,I=h.dilationHeight,_=h.dilationWidth,C=h.strideHeight,N=h.strideWidth,$=h.inChannels,R=h.outChannels,F=h.padInfo.type==="SAME"?1:0;if(h.dataFormat!=="channelsLast")throw new Error(`wasm backend Conv2D does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);const U=r.makeOutput(h.outShape,"float32"),L=r.dataIdMap.get(U.dataId).id;return jA(a,s.shape[0],s.shape[1],s.shape[2],i,m,y,g,b,w,S,F,I,_,C,N,$,R,L),U}const eZ={kernelName:vm,backendName:"wasm",setupFunc:ZQ,kernelFunc:JQ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let GA;function tZ(e){GA=e.wasm.cwrap(bm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function nZ(e){const{backend:t,inputs:n,attrs:r}=e,{dy:s,filter:o}=n,{strides:a,pad:i,dataFormat:u,dimRoundingMode:c,inputShape:l}=r,d=1,f=wu(u),p=xr(l,o.shape,a,d,i,c,!1,f),{batchSize:h,filterHeight:m,filterWidth:y,inChannels:g,inHeight:b,inWidth:w,outChannels:S,outHeight:I,outWidth:_,strideHeight:C,strideWidth:N}=p,$=m-1-p.padInfo.top,R=y-1-p.padInfo.left,F=p.dataFormat==="channelsLast",U=Ee(p.inShape),L=Ee(s.shape),[H,j,X]=Ee(o.shape),Q=U[0],P=F?U[1]:U[2],G=F?U[2]:1,Y=F?1:U[1],Z=L[0],se=F?L[1]:L[2],re=F?L[2]:1,ae=F?1:L[1],ie=t.makeOutput(p.inShape,"float32"),ue=t.dataIdMap.get(ie.dataId).id,ve=t.dataIdMap.get(s.dataId).id,pe=t.dataIdMap.get(o.dataId).id;return GA(ve,pe,h,m,y,b,w,g,I,_,S,C,N,$,R,H,j,X,Q,P,G,Y,Z,se,re,ae,ue),ie}const rZ={kernelName:bm,backendName:"wasm",setupFunc:tZ,kernelFunc:nZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let qA;function sZ(e){qA=e.wasm.cwrap(wm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function oZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dilations:u}=r;if(s.dtype!=="float32")throw new Error(`Tensor x must have dtype float32, got ${s.dtype}`);if(o.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${o.dtype}`);const c=Gi(s.shape,o.shape,a,u,i),l=n.makeOutput(c.outShape,s.dtype);return qA(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(l.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),l}const aZ={kernelName:wm,backendName:"wasm",setupFunc:sZ,kernelFunc:oZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let KA;function iZ(e){KA=e.wasm.cwrap(xw,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function lZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:a,pad:i,filterShape:u}=r;if(s.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${s.dtype}`);if(o.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${o.dtype}`);const c=Gi(s.shape,u,a,1,i),l=n.makeOutput(c.filterShape,o.dtype);return KA(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(l.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),l}const uZ={kernelName:xw,backendName:"wasm",setupFunc:iZ,kernelFunc:lZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let XA;function cZ(e){XA=e.wasm.cwrap(Sm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function dZ(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{pad:a,strides:i,inputShape:u}=r;if(s.dtype!=="float32")throw new Error(`Tensor dy must have dtype float32, got ${s.dtype}`);if(o.dtype!=="float32")throw new Error(`Tensor filter must have dtype float32, got ${o.dtype}`);const c=Gi(u,o.shape,i,1,a),l=n.makeOutput(c.inShape,s.dtype);return XA(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(l.dataId).id,c.batchSize,c.inDepth,c.inHeight,c.inWidth,c.inChannels,c.outDepth,c.outHeight,c.outWidth,c.outChannels,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.filterDepth,c.filterHeight,c.filterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),l}const fZ={kernelName:Sm,backendName:"wasm",setupFunc:cZ,kernelFunc:dZ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pZ=at(xm);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hZ=at(km);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var E1;(function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"})(E1||(E1={}));let YA;function mZ(e){YA=e.wasm.cwrap(Em,null,["number","number","number","number","array","number","number","number","number","number"])}function gZ(e){const{backend:t,inputs:n,attrs:r}=e,{method:s,extrapolationValue:o,cropSize:a}=r,{image:i,boxes:u,boxInd:c}=n,l=u.shape[0],[d,f]=a,p=[l,d,f,i.shape[3]];let h=t.dataIdMap.get(i.dataId),m;i.dtype!=="float32"&&(m=Ha({backend:t,inputs:{x:i},attrs:{dtype:"float32"}}),h=t.dataIdMap.get(m.dataId));const y=h.id,g=t.dataIdMap.get(u.dataId).id,b=t.dataIdMap.get(c.dataId).id,w=t.makeOutput(p,"float32"),S=t.dataIdMap.get(w.dataId).id,I=new Uint8Array(new Int32Array(i.shape).buffer);return YA(y,g,b,l,I,d,f,E1[s],o,S),m!=null&&t.disposeData(m.dataId),w}const yZ={kernelName:Em,backendName:"wasm",setupFunc:mZ,kernelFunc:gZ};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let QA;function vZ(e){QA=e.wasm.cwrap(Im,null,["number","number","number","number","number","number"])}function bZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,exclusive:a,reverse:i}=r,u=s.shape.length;D(s.dtype==="float32"||s.dtype==="int32",()=>`cumprod does not support ${s.dtype} tensors in the WASM backend`);const c=ts([o],u);let l=s;c!==null&&(l=Aa({inputs:{x:s},attrs:{perm:c},backend:n}));const d=ar(1,u)[0];or("cumprod",[d],u);const f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(f.dataId).id;QA(h,a?1:0,i?1:0,p,m,ut[s.dtype]);let y=f;if(c!==null){const g=ty(c);y=Aa({inputs:{x:f},attrs:{perm:g},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)}return y}const wZ={kernelName:Im,backendName:"wasm",setupFunc:vZ,kernelFunc:bZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let ZA;function SZ(e){ZA=e.wasm.cwrap(_m,null,["number","number","number","number","number","number"])}function xZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,exclusive:a,reverse:i}=r,u=s.shape.length;D(s.dtype==="float32"||s.dtype==="int32",()=>`cumsum does not support ${s.dtype} tensors in the WASM backend`);const c=ts([o],u);let l=s;c!==null&&(l=Aa({inputs:{x:s},attrs:{perm:c},backend:n}));const d=ar(1,u)[0];or("cumsum",[d],u);const f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(f.dataId).id;ZA(h,a?1:0,i?1:0,p,m,ut[s.dtype]);let y=f;if(c!==null){const g=ty(c);y=Aa({inputs:{x:f},attrs:{perm:g},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)}return y}const kZ={kernelName:_m,backendName:"wasm",setupFunc:SZ,kernelFunc:xZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let JA;function IZ(e){JA=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function _Z(e){const{backend:t,inputs:n,attrs:r}=e,{x:s,weights:o}=n,{size:a,binaryOutput:i}=r,u=o.shape.reduce((f,p)=>f*p,1)!==0,c=s.shape.length===1?[a]:[s.shape[0],a],l=t.makeOutput(c,o.dtype);function d(f){return t.dataIdMap.get(f.dataId).id}return JA(d(s),new Uint8Array(new Int32Array(s.shape).buffer),s.shape.length,a,u,d(o),ut[o.dtype],i,d(l)),l}const EZ={kernelName:kw,backendName:"wasm",setupFunc:IZ,kernelFunc:_Z};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let e4;function CZ(e){e4=e.wasm.cwrap(Cm,null,["number","number","number","array","number","array","array","number","number"])}function TZ(e){const{backend:t,inputs:n,attrs:r}=e,{x:s}=n,{blockSize:o,dataFormat:a}=r,i=s.shape[0],u=a==="NHWC"?s.shape[1]:s.shape[2],c=a==="NHWC"?s.shape[2]:s.shape[3],l=a==="NHWC"?s.shape[3]:s.shape[1],d=u*o,f=c*o,p=l/(o*o),h=a==="NHWC"?[i,d,f,p]:[i,p,d,f],m=t.makeOutput(h,"float32"),g=t.dataIdMap.get(s.dataId).id,b=new Uint8Array(new Int32Array(Ee(s.shape)).buffer),w=new Uint8Array(new Int32Array(h).buffer),S=new Uint8Array(new Int32Array(Ee(h)).buffer),I=t.dataIdMap.get(m.dataId).id;return e4(g,o,a==="NHWC"?1:0,b,s.shape.length-1,w,S,h.length,I),m}const NZ={kernelName:Cm,backendName:"wasm",setupFunc:CZ,kernelFunc:TZ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let t4;function AZ(e){t4=e.wasm.cwrap(Tm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function DZ(e){const{inputs:t,attrs:n,backend:r}=e,{x:s,filter:o}=t,a=r.dataIdMap.get(s.dataId).id,i=r.dataIdMap.get(o.dataId).id,{strides:u,dilations:c,pad:l,dimRoundingMode:d}=n,f=c??[1,1],p=xr(s.shape,o.shape,u,f,l,d,!0),h=p.filterHeight,m=p.filterWidth,y=p.padInfo.top,g=p.padInfo.right,b=p.padInfo.bottom,w=p.padInfo.left,S=p.dilationHeight,I=p.dilationWidth,_=p.strideHeight,C=p.strideWidth,N=p.inChannels,$=p.outChannels,R=p.padInfo.type==="SAME"?1:0;if(p.dataFormat!=="channelsLast")throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${p.dataFormat}'. Please use 'channelsLast'.`);const F=r.makeOutput(p.outShape,"float32"),U=r.dataIdMap.get(F.dataId).id;return t4(a,s.shape[0],s.shape[1],s.shape[2],i,h,m,y,g,b,w,R,S,I,_,C,N,$,U),F}const $Z={kernelName:Tm,backendName:"wasm",setupFunc:AZ,kernelFunc:DZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let n4;function RZ(e){n4=e.wasm.cwrap("Diag",null,["number","number","number","number"])}function FZ(e){const{inputs:t,backend:n}=e,{x:r}=t,s=ee(r.shape),o=n.makeOutput([...r.shape,...r.shape],r.dtype);return n4(n.dataIdMap.get(r.dataId).id,ut[r.dtype],s,n.dataIdMap.get(o.dataId).id),o}const MZ={kernelName:Iw,backendName:"wasm",setupFunc:RZ,kernelFunc:FZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let r4;function OZ(e){r4=e.wasm.cwrap(Nm,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function PZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dilations:u}=r;if(s.dtype!==o.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${s.dtype} and ${o.dtype}`);const c=bu(s.shape,o.shape,a,i,"NHWC",u),l=n.makeOutput(c.outShape,s.dtype);return r4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(l.dataId).id,ut[s.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),l}const BZ={kernelName:Nm,backendName:"wasm",setupFunc:OZ,kernelFunc:PZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let s4;function LZ(e){s4=e.wasm.cwrap(rh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function zZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o,dy:a}=t,{strides:i,pad:u,dilations:c}=r;if(s.dtype!==o.dtype||s.dtype!==a.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${s.dtype}, ${o.dtype}, and ${a.dtype}`);const l=bu(s.shape,o.shape,i,u,"NHWC",c),d=n.makeOutput(o.shape,o.dtype);return s4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,ut[s.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),d}const WZ={kernelName:rh,backendName:"wasm",setupFunc:LZ,kernelFunc:zZ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let o4;function UZ(e){o4=e.wasm.cwrap(nh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function VZ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o,dy:a}=t,{strides:i,pad:u,dilations:c}=r;if(s.dtype!==o.dtype||s.dtype!==a.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${s.dtype}, ${o.dtype}, and ${a.dtype}`);const l=bu(s.shape,o.shape,i,u,"NHWC",c),d=n.makeOutput(s.shape,s.dtype);return o4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,ut[s.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),d}const HZ={kernelName:nh,backendName:"wasm",setupFunc:UZ,kernelFunc:VZ};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jZ=at(Dm);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let a4;function GZ(e){a4=e.wasm.cwrap(_w,null,["number","number","number"])}function qZ(e){const{inputs:t,backend:n}=e,{dy:r,y:s}=t,o=n.makeOutput(s.shape,"float32"),a=i=>n.dataIdMap.get(i.dataId).id;return a4(a(s),a(r),a(o)),o}const KZ={kernelName:_w,backendName:"wasm",setupFunc:GZ,kernelFunc:qZ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XZ=!1,YZ=cn(Rm,XZ,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const QZ=at($m);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ZZ=at(Fm,"float32");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1(e){const{inputs:t,attrs:n,backend:r}=e,{input:s}=t,{dim:o}=n,a=s.shape.length,i=s.shape.slice();let u=o;return o<0&&(D(-(a+1)<=o,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+o+1),i.splice(u,0,1),gr({inputs:{x:s},backend:r,attrs:{shape:i}})}const JZ={kernelName:Ew,backendName:"wasm",kernelFunc:C1};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eJ=at(Mm,"float32");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i4(e){const{attrs:{shape:t,value:n,dtype:r},backend:s}=e,o=s.makeOutput(t,r);return s.typedArrayFromHeap(o).fill(n),o}const tJ={kernelName:Cw,backendName:"wasm",kernelFunc:i4};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let l4;function nJ(e){l4=e.wasm.cwrap(Om,null,["number","number","number","number","number","number"])}function rJ(e){const{inputs:t,backend:n}=e,{image:r}=t,s=n.makeOutput(r.shape,r.dtype),o=n.dataIdMap.get(r.dataId).id,a=n.dataIdMap.get(s.dataId).id,[i,u,c,l]=r.shape;return l4(o,i,u,c,l,a),s}const sJ={kernelName:Om,backendName:"wasm",kernelFunc:rJ,setupFunc:nJ};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oJ=at(Pm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aJ=cn(Bm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let u4;function iJ(e){u4=e.wasm.cwrap(Lm,null,["number","number","number","number","number","number","number"])}function lJ(e){const{backend:t,inputs:n,attrs:r}=e,{varianceEpsilon:s}=r,{x:o,mean:a,variance:i,offset:u,scale:c}=n,l=t.dataIdMap.get(o.dataId).id,d=t.dataIdMap.get(a.dataId).id,f=t.dataIdMap.get(i.dataId).id,p=u!=null?t.dataIdMap.get(u.dataId).id:0,h=c!=null?t.dataIdMap.get(c.dataId).id:0,m=t.makeOutput(o.shape,o.dtype);if(ee(o.shape)===0)return m;const y=t.dataIdMap.get(m.dataId).id;return u4(l,d,f,p,h,s,y),m}const uJ={kernelName:Lm,backendName:"wasm",setupFunc:iJ,kernelFunc:lJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let c4;function cJ(e){c4=e.wasm.cwrap(id,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function dJ(e){const{inputs:t,attrs:n,backend:r}=e,{x:s,filter:o,bias:a,preluActivationWeights:i}=t,{strides:u,pad:c,dilations:l,dataFormat:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=n,m=xr(s.shape,o.shape,u,l,c,f),y=bd[p];if(y==null)throw new Error(`${p} activation not yet supported for FusedConv2D in the wasm backend.`);const g=r.dataIdMap.get(s.dataId).id,b=r.dataIdMap.get(o.dataId).id,w=m.outChannels;let S=0;if(a!=null){const re=r.dataIdMap.get(a.dataId);if(re.shape.length!==1)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${re.shape.length}.`);if(re.shape[0]!==w)throw new Error(`FusedConv2D bias shape (${re.shape}) does not match the number of output channels (${w})`);S=re.id}const I=m.filterHeight,_=m.filterWidth,C=m.padInfo.top,N=m.padInfo.right,$=m.padInfo.bottom,R=m.padInfo.left,F=m.dilationHeight,U=m.dilationWidth,L=m.strideHeight,H=m.strideWidth,j=m.inChannels,X=m.padInfo.type==="SAME"?1:0,Q=m.batchSize,P=m.inHeight,G=m.inWidth;if(d!=="NHWC")throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);const Y=r.makeOutput(m.outShape,"float32"),Z=r.dataIdMap.get(Y.dataId).id,se=i==null?0:r.dataIdMap.get(i.dataId).id;return c4(g,Q,P,G,b,I,_,S,C,N,$,R,X,F,U,L,H,j,w,y,se,h||0,Z),Y}const fJ={kernelName:id,backendName:"wasm",setupFunc:cJ,kernelFunc:dJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let d4;function pJ(e){d4=e.wasm.cwrap(ld,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function hJ(e){const{inputs:t,attrs:n,backend:r}=e,{x:s,filter:o,bias:a,preluActivationWeights:i}=t,{strides:u,pad:c,dilations:l,dataFormat:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=n,m=xr(s.shape,o.shape,u,l,c,f,!0),y=bd[p];if(y==null)throw new Error(`${p} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);const g=r.dataIdMap.get(s.dataId).id,b=r.dataIdMap.get(o.dataId).id,w=m.outChannels;let S=0;if(a!=null){const re=r.dataIdMap.get(a.dataId);if(re.shape.length!==1)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${re.shape.length}.`);if(re.shape[0]!==w)throw new Error(`FusedDepthwiseConv2D bias shape (${re.shape}) does not match the number of output channels (${w})`);S=re.id}const I=m.filterHeight,_=m.filterWidth,C=m.padInfo.top,N=m.padInfo.right,$=m.padInfo.bottom,R=m.padInfo.left,F=m.dilationHeight,U=m.dilationWidth,L=m.strideHeight,H=m.strideWidth,j=m.inChannels,X=m.padInfo.type==="SAME"?1:0,Q=m.batchSize,P=m.inHeight,G=m.inWidth;if(d!=="NHWC")throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${d}'. Please use 'NHWC'.`);const Y=r.makeOutput(m.outShape,"float32"),Z=r.dataIdMap.get(Y.dataId).id,se=i==null?0:r.dataIdMap.get(i.dataId).id;return d4(g,Q,P,G,b,I,_,S,C,N,$,R,X,F,U,L,H,j,w,y,se,h||0,Z),Y}const mJ={kernelName:ld,backendName:"wasm",setupFunc:pJ,kernelFunc:hJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let f4;function gJ(e){f4=e.wasm.cwrap(zm,null,["number","number","number","number","number","number","array","number"])}function yJ(e){const{backend:t,inputs:n}=e,{params:r,indices:s}=n,[o,a,i,u]=zN(r,s),c=t.makeOutput(o,r.dtype);if(a===0)return c;const l=s.shape,d=l[l.length-1],p=t.dataIdMap.get(r.dataId).id,m=t.dataIdMap.get(s.dataId).id,y=new Uint8Array(new Int32Array(u).buffer),g=t.dataIdMap.get(c.dataId).id;return f4(p,ut[r.dtype],m,a,d,i,y,g),c}const vJ={kernelName:zm,backendName:"wasm",setupFunc:gJ,kernelFunc:yJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let p4;function bJ(e){p4=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function wJ(e){const{backend:t,inputs:n,attrs:r}=e,{x:s,indices:o}=n,{axis:a,batchDims:i}=r,u=Kt(a,s.shape)[0],c=t.readSync(o.dataId),l=s.shape[u];for(let $=0;$<c.length;++$){const R=c[$];D(R<=l-1&&R>=0,()=>`GatherV2: the index value ${R} is not in [0, ${l-1}]`)}const d=uA(s,o,u,i),f=gr({inputs:{x:s},attrs:{shape:[d.batchSize,d.outerSize,d.dimSize,d.sliceSize]},backend:t}),p=ee(o.shape),h=gr({inputs:{x:o},attrs:{shape:[d.batchSize,p/d.batchSize]},backend:t}),m=[d.batchSize,d.outerSize,p/d.batchSize,d.sliceSize],y=t.makeOutput(m,s.dtype);if(ee(s.shape)===0)return y;const g=f.shape.length-1,w=t.dataIdMap.get(f.dataId).id,I=t.dataIdMap.get(h.dataId).id,_=t.dataIdMap.get(y.dataId).id,C=new Uint8Array(new Int32Array(Ee(f.shape)).buffer),N=new Uint8Array(new Int32Array(Ee(m)).buffer);return p4(w,ut[s.dtype],C,g,I,d.batchSize,N,_),t.disposeData(f.dataId),t.disposeData(h.dataId),y.shape=d.outputShape,y}const SJ={kernelName:Tw,backendName:"wasm",setupFunc:bJ,kernelFunc:wJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xJ=!1,kJ=cn(Wm,xJ,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IJ=!1,_J=cn(Um,IJ,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EJ=at(Hm,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CJ=at(jm,"bool");/**
 * @license
 * Copyright 2022 The TensorFlow Authors. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TJ=at(Gm,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let h4;function NJ(e){h4=e.wasm.cwrap(qm,null,["number","number","number","number"])}function AJ(e){const{inputs:{x:t},attrs:{alpha:n},backend:r}=e,s=r.dataIdMap.get(t.dataId).id,o=r.makeOutput(t.shape,"float32");if(ee(t.shape)!==0){const a=r.dataIdMap.get(o.dataId).id;h4(s,ut[t.dtype],n,a)}return o}const DJ={kernelName:qm,backendName:"wasm",setupFunc:NJ,kernelFunc:AJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $J=!1,RJ=cn(Km,$J,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FJ=!1,MJ=cn(Xm,FJ,"bool");/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let m4;function OJ(e){m4=e.wasm.cwrap(Ym,null,["number","number","number","number"])}function PJ(e){const{attrs:t,backend:n}=e,{start:r,stop:s,num:o}=t,a=Math.floor(o),i=n.makeOutput([a],"float32");return m4(n.dataIdMap.get(i.dataId).id,r,s,a),i}const BJ={kernelName:Ym,backendName:"wasm",setupFunc:OJ,kernelFunc:PJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LJ=at(Qm);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zJ=at(Zm);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const WJ=!1,UJ=cn(Jm,WJ,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VJ=at(eg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const HJ=!1,jJ=cn(tg,HJ,"bool");/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GJ=!1,qJ=cn(UB,GJ,"bool");/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let g4;function KJ(e){g4=e.wasm.cwrap(ng,null,["number","number","number","number","number","number","number"])}function XJ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{depthRadius:o,bias:a,alpha:i,beta:u}=r;if(s.dtype!=="float32")throw new Error("LRN error: x must have dtype float32");const c=n.makeOutput(s.shape,s.dtype);return g4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(c.dataId).id,s.shape[3],o,a,i,u),c}const YJ={kernelName:ng,backendName:"wasm",setupFunc:KJ,kernelFunc:XJ};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let y4;function QJ(e){y4=e.wasm.cwrap(Nw,null,["number","number","number","number","number","number","number","number","number"])}function ZJ(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,y:o,dy:a}=t,{depthRadius:i,bias:u,alpha:c,beta:l}=r;if(s.dtype!=="float32"||o.dtype!=="float32"||a.dtype!=="float32")throw new Error("LRNGrad error: x, y, and dy must have dtype float32");const d=n.makeOutput(s.shape,s.dtype);return y4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(d.dataId).id,a.shape[3],i,u,c,l),d}const JJ={kernelName:Nw,backendName:"wasm",setupFunc:QJ,kernelFunc:ZJ};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let v4;function eee(e){v4=e.wasm.cwrap(rg,null,["number","number","number","number"])}function tee(e){const{backend:t,inputs:n,attrs:r}=e,{reductionIndices:s,keepDims:o}=r,{x:a}=n;let u=t.dataIdMap.get(a.dataId).id,c=a;const{transposed:l,axes:d,originalAxes:f,inputWasTransposed:p}=Wa(a,s,t);if(p){const w=t.dataIdMap.get(l.dataId).id;c=l,u=w}const h=c.shape.length;or("max",d,h);const[m,y]=sr(c.shape,d),g=ee(y),b=t.makeOutput(m,a.dtype);if(ee(c.shape)!==0){const w=t.dataIdMap.get(b.dataId).id;v4(u,ut[a.dtype],g,w)}if(p&&t.disposeData(l.dataId),o){const w=Rn(b.shape,f);b.shape=w}return b}const nee={kernelName:rg,backendName:"wasm",setupFunc:eee,kernelFunc:tee};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ree=cn(sg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let b4;function see(e){b4=e.wasm.cwrap(og,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function oee(e){const{inputs:t,attrs:n,backend:r}=e,s=t.x,o=r.dataIdMap.get(s.dataId).id;D(s.dtype==="float32",()=>`Error in MaxPool: only float32 input is supported. Got ${s.dtype}.`);const{filterSize:a,strides:i,pad:u,dimRoundingMode:c}=n,l=Ws(s.shape,a,i,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,y=l.padInfo.left,g=l.dilationHeight,b=l.dilationWidth,w=l.strideHeight,S=l.strideWidth,I=l.inChannels,_=l.outChannels;if(l.dataFormat!=="channelsLast")throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);const C=r.makeOutput(l.outShape,"float32"),N=r.dataIdMap.get(C.dataId).id;return b4(o,s.shape[0],s.shape[1],s.shape[2],d,f,p,h,m,y,g,b,w,S,I,_,N),C}const aee={kernelName:og,backendName:"wasm",setupFunc:see,kernelFunc:oee};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let w4;function iee(e){w4=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function lee(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:a,pad:i,dimRoundingMode:u,dataFormat:c}=r,l=za(s.shape,o,a,1,i,u,c),d=n.makeOutput(l.outShape,s.dtype);return w4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),d}const uee={kernelName:Aw,backendName:"wasm",setupFunc:iee,kernelFunc:lee};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let S4;function cee(e){S4=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function dee(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,{filterSize:a,strides:i,pad:u,dimRoundingMode:c}=r,l=za(o.shape,a,i,1,u,c),d=n.makeOutput(o.shape,o.dtype);return S4(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),d}const fee={kernelName:oT,backendName:"wasm",setupFunc:cee,kernelFunc:dee};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let x4;function pee(e){x4=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function hee(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,{filterSize:a,strides:i,pad:u,dimRoundingMode:c}=r,l=Ws(o.shape,a,i,1,u,c),d=n.makeOutput(o.shape,o.dtype);return x4(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),d}const mee={kernelName:sT,backendName:"wasm",setupFunc:pee,kernelFunc:hee};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let k4;function gee(e){k4=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function yee(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:a,pad:i,includeBatchInIndex:u}=r;D(s.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${s.shape.length}.`);const c=[1,1];D(xs(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const l=Ws(s.shape,o,a,[1,1],i),d=n.makeOutput(l.outShape,s.dtype),f=n.makeOutput(l.outShape,"int32");return k4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(d.dataId).id,n.dataIdMap.get(f.dataId).id,ut[s.dtype],u,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),[d,f]}const vee={kernelName:Dw,backendName:"wasm",setupFunc:gee,kernelFunc:yee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let I4;function bee(e){I4=e.wasm.cwrap(ag,null,["number, number, number"])}function wee(e){const{backend:t,inputs:n,attrs:r}=e,{axis:s,keepDims:o}=r,{x:a}=n,i=t.dataIdMap.get(a.dataId).id;let u=i,c=a;const{transposed:l,axes:d,originalAxes:f,inputWasTransposed:p}=Wa(a,s,t);let h=d;if(p){const S=t.dataIdMap.get(l.dataId).id;S!==i&&(c=l,u=S,h=ar(h.length,c.shape.length))}or("mean",h,c.shape.length);const[m,y]=sr(c.shape,h),g=ee(y);let b=c;c.dtype!=="float32"&&(b=Ha({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),u=t.dataIdMap.get(b.dataId).id);const w=t.makeOutput(m,"float32");if(ee(c.shape)!==0){const S=t.dataIdMap.get(w.dataId).id;I4(u,g,S)}if(p&&t.disposeData(l.dataId),o){const S=Rn(w.shape,f);w.shape=S}return c.dtype!=="float32"&&t.disposeData(b.dataId),w}const See={kernelName:ag,backendName:"wasm",setupFunc:bee,kernelFunc:wee};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let _4;function xee(e){_4=e.wasm.cwrap(ig,null,["number","number","number","number"])}function kee(e){const{backend:t,inputs:n,attrs:r}=e,{axis:s,keepDims:o}=r,{x:a}=n,i=t.dataIdMap.get(a.dataId).id;let u=i,c=a;const{transposed:l,axes:d,originalAxes:f,inputWasTransposed:p}=Wa(a,s,t);if(p){const w=t.dataIdMap.get(l.dataId).id;w!==i&&(c=l,u=w)}const h=c.shape.length;or("min",d,h);const[m,y]=sr(c.shape,d),g=ee(y),b=t.makeOutput(m,c.dtype);if(ee(c.shape)!==0){const w=t.dataIdMap.get(b.dataId).id;_4(u,ut[a.dtype],g,w)}if(p&&t.disposeData(l.dataId),o){const w=Rn(b.shape,f);b.shape=w}return b}const Iee={kernelName:ig,backendName:"wasm",setupFunc:xee,kernelFunc:kee};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ee=cn(lg);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var T1;(function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"})(T1||(T1={}));let E4;function Eee(e){E4=e.wasm.cwrap(ug,null,["number","array","number","number","array","array","number","number"])}function Cee(e){const{inputs:{x:t},backend:n,attrs:{paddings:r,mode:s}}=e,o=r.map((h,m)=>h[0]+t.shape[m]+h[1]),a=n.dataIdMap.get(t.dataId).id,i=n.makeOutput(o,t.dtype),u=n.dataIdMap.get(i.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),l=r.map(h=>h[0]),d=r.map(h=>h[1]),f=new Uint8Array(new Int32Array(l).buffer),p=new Uint8Array(new Int32Array(d).buffer);return E4(a,c,t.shape.length,ut[t.dtype],f,p,T1[s],u),i}const Tee={kernelName:ug,backendName:"wasm",kernelFunc:Cee,setupFunc:Eee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let C4;function Nee(e){C4=e.wasm.cwrap(Wg,null,["number","number","number","number"])}function T4(e){const{backend:t,inputs:{logits:n},attrs:{dim:r}}=e,s=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(n.shape,n.dtype),a=t.dataIdMap.get(o.dataId).id,i=n.shape[r],u=ee(n.shape)/i;return ee(o.shape)===0||C4(s,a,i,u),o}const Aee={kernelName:Wg,backendName:"wasm",setupFunc:Nee,kernelFunc:T4};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let N4;function Dee(e){N4=e.wasm.cwrap(dg,null,["number","number","number","number","number","number"])}function $ee(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{numSamples:o,seed:a,normalized:i}=r;if(s.dtype!=="float32")throw new Error(`Tensor logits must have dtype float32, got ${s.dtype}`);const u=i?s:T4({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),[c,l]=u.shape,d=n.makeOutput([c,o],"int32");return N4(n.dataIdMap.get(u.dataId).id,c,l,o,a,n.dataIdMap.get(d.dataId).id),i||n.disposeData(u.dataId),d}const Ree={kernelName:dg,backendName:"wasm",setupFunc:Dee,kernelFunc:$ee};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fee=cn(cg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mee=cn(fg);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oee=at($w);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2(e,t){const n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],s=n[1],o=n[2],a=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:s,pSelectedScores:o,pValidOutputs:a}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let A4;function Pee(e){A4=e.wasm.cwrap(hg,"number",["number","number","number","number","number"])}function Bee(e){const{backend:t,inputs:n,attrs:r}=e,{iouThreshold:s,maxOutputSize:o,scoreThreshold:a}=r,{boxes:i,scores:u}=n,c=t.dataIdMap.get(i.dataId).id,l=t.dataIdMap.get(u.dataId).id,d=A4(c,l,o,s,a),{pSelectedIndices:f,selectedSize:p,pSelectedScores:h,pValidOutputs:m}=C2(t,d);return t.wasm._free(h),t.wasm._free(m),t.makeOutput([p],"int32",f)}const Lee={kernelName:hg,backendName:"wasm",setupFunc:Pee,kernelFunc:Bee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let D4;function zee(e){D4=e.wasm.cwrap(mg,"number",["number","number","number","number","number","bool"])}function Wee(e){const{backend:t,inputs:n,attrs:r}=e,{iouThreshold:s,maxOutputSize:o,scoreThreshold:a,padToMaxOutputSize:i}=r,{boxes:u,scores:c}=n,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=D4(l,d,o,s,a,i),{pSelectedIndices:p,selectedSize:h,pSelectedScores:m,pValidOutputs:y}=C2(t,f);t.wasm._free(m);const g=t.makeOutput([h],"int32",p),b=t.makeOutput([],"int32",y);return[g,b]}const Uee={kernelName:mg,backendName:"wasm",setupFunc:zee,kernelFunc:Wee};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let $4;function Vee(e){$4=e.wasm.cwrap(gg,"number",["number","number","number","number","number","number"])}function Hee(e){const{backend:t,inputs:n,attrs:r}=e,{iouThreshold:s,maxOutputSize:o,scoreThreshold:a,softNmsSigma:i}=r,{boxes:u,scores:c}=n,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=$4(l,d,o,s,a,i),{pSelectedIndices:p,selectedSize:h,pSelectedScores:m,pValidOutputs:y}=C2(t,f);t.wasm._free(y);const g=t.makeOutput([h],"int32",p),b=t.makeOutput([h],"float32",m);return[g,b]}const jee={kernelName:gg,backendName:"wasm",setupFunc:Vee,kernelFunc:Hee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gee=!1,qee=cn(pg,Gee,"bool");/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let R4;function Kee(e){R4=e.wasm.cwrap(yg,null,["number","number","number","number","number"])}function Xee(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s}=t,{dtype:o,depth:a,onValue:i,offValue:u}=r,c=n.makeOutput([...s.shape,a],o),l=n.dataIdMap.get(c.dataId).id,f=n.dataIdMap.get(s.dataId).id;return R4(f,a,i,u,l),c}const Yee={kernelName:yg,backendName:"wasm",setupFunc:Kee,kernelFunc:Xee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qee(e){const{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}const Zee={kernelName:Rw,backendName:"wasm",kernelFunc:Qee};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jee(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r;if(t.length===1)return C1({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const o=t[0].shape,a=t[0].dtype;t.forEach(l=>{Lr(o,l.shape,"All tensors passed to stack must have matching shapes"),D(a===l.dtype,()=>"All tensors passed to stack must have matching dtypes")});const i=[],u=t.map(l=>{const d=C1({inputs:{input:l},backend:n,attrs:{dim:s}});return i.push(d),d}),c=HA({inputs:u,backend:n,attrs:{axis:s}});return i.forEach(l=>n.disposeData(l.dataId)),c}const ete={kernelName:Fw,backendName:"wasm",kernelFunc:Jee};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let F4;function tte(e){F4=e.wasm.cwrap(vg,null,["number","array","number","number","array","array","number","number"])}function nte(e){const{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:s}}=e,o=r.map((m,y)=>m[0]+t.shape[y]+m[1]);if(ee(t.shape)===0)return i4({backend:n,attrs:{shape:o,value:s,dtype:t.dtype}});const a=n.dataIdMap.get(t.dataId).id,i=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(i.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=r.map(m=>m[0]),f=r.map(m=>m[1]),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return F4(a,l,t.shape.length,ut[t.dtype],p,h,s,c),i}const M4={kernelName:vg,backendName:"wasm",kernelFunc:nte,setupFunc:tte};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rte=cn(bg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let O4;function ste(e){O4=e.wasm.cwrap(wg,null,["number","number","number"])}function ote(e){const{inputs:t,backend:n}=e,{x:r,alpha:s}=t,o=n.dataIdMap.get(r.dataId).id,a=n.dataIdMap.get(s.dataId).id;let i=o;const u=r;let c=u;u.dtype!=="float32"&&(c=Ha({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),i=n.dataIdMap.get(c.dataId).id);const l=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(l.dataId).id;return O4(i,a,d),u.dtype!=="float32"&&n.disposeData(c.dataId),l}const ate={kernelName:wg,backendName:"wasm",setupFunc:ste,kernelFunc:ote};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let P4;function ite(e){P4=e.wasm.cwrap(Sg,null,["number","number","number","number"])}function lte(e){const{backend:t,inputs:n,attrs:r}=e,{axis:s,keepDims:o}=r,{x:a}=n,i=t.dataIdMap.get(a.dataId).id;let u=i,c=a;const{transposed:l,axes:d,originalAxes:f,inputWasTransposed:p}=Wa(a,s,t);let h=d;if(p){const w=t.dataIdMap.get(l.dataId).id;w!==i&&(c=l,u=w,h=ar(h.length,c.shape.length))}or("prod",h,c.shape.length);const[m,y]=sr(c.shape,h),g=ee(y),b=t.makeOutput(m,c.dtype);if(ee(c.shape)!==0){const w=t.dataIdMap.get(b.dataId).id;P4(u,g,ut[b.dtype],w)}if(p&&t.disposeData(l.dataId),o){const w=Rn(b.shape,f);b.shape=w}return b}const ute={kernelName:Sg,backendName:"wasm",setupFunc:ite,kernelFunc:lte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cte=e=>{const{backend:t,attrs:n}=e,{start:r,stop:s,step:o,dtype:a}=n,i=FA(r,s,o,a),u=t.makeOutput([i.length],a);return t.typedArrayFromHeap(u).set(i),u},dte={kernelName:Mw,backendName:"wasm",kernelFunc:cte};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fte=cn(Am);/**
 * @license
 * Copyright 2022 The TensorFlow Authors. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pte=at(xg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hte=at(kg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mte=at(Eg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let B4;function gte(e){B4=e.wasm.cwrap(_g,null,["number","number","number","number","number","number","number","number","number","number"])}function yte(e){const{backend:t,inputs:n,attrs:r}=e,{images:s}=n,{alignCorners:o,halfPixelCenters:a,size:i}=r,[u,c]=i,[l,d,f,p]=s.shape,h=[l,u,c,p];let m=t.dataIdMap.get(s.dataId),y;m.dtype!=="float32"&&(y=Ha({backend:t,inputs:{x:s},attrs:{dtype:"float32"}}),m=t.dataIdMap.get(y.dataId));const g=m.id,b=t.makeOutput(h,"float32");if(ee(s.shape)===0)return b;const w=t.dataIdMap.get(b.dataId).id;return B4(g,l,d,f,p,u,c,o?1:0,a?1:0,w),y!=null&&t.disposeData(y.dataId),b}const vte={kernelName:_g,backendName:"wasm",setupFunc:gte,kernelFunc:yte};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let L4;function bte(e){L4=e.wasm.cwrap(Bw,null,["number","number","number","array","array","boolean"])}function wte(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:o}=t,{alignCorners:a}=r,i=n.makeOutput(s.shape,"float32");let u=n.dataIdMap.get(s.dataId),c;return u.dtype!=="float32"&&(c=Ha({backend:n,inputs:{x:s},attrs:{dtype:"float32"}}),u=n.dataIdMap.get(c.dataId)),L4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,new Uint8Array(new Int32Array(s.shape).buffer),new Uint8Array(new Int32Array(o.shape).buffer),a),c!=null&&n.disposeData(c.dataId),i}const Ste={kernelName:Bw,backendName:"wasm",setupFunc:bte,kernelFunc:wte};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let z4;function xte(e){z4=e.wasm.cwrap(Ig,null,["number","number","number","number","number","number","number","number","number","number"])}function kte(e){const{backend:t,inputs:n,attrs:r}=e,{images:s}=n,{alignCorners:o,halfPixelCenters:a,size:i}=r,[u,c]=i,[l,d,f,p]=s.shape,h=[l,u,c,p],m=t.makeOutput(h,"float32");if(ee(s.shape)===0)return m;let y=t.dataIdMap.get(s.dataId),g;y.dtype!=="float32"&&(g=Ha({backend:t,inputs:{x:s},attrs:{dtype:"float32"}}),y=t.dataIdMap.get(g.dataId));const b=y.id,w=t.dataIdMap.get(m.dataId).id;return z4(b,l,d,f,p,u,c,o?1:0,a?1:0,w),g!=null&&t.disposeData(g.dataId),m}const Ite={kernelName:Ig,backendName:"wasm",setupFunc:xte,kernelFunc:kte};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let W4;function _te(e){W4=e.wasm.cwrap(Pw,null,["number","number","number","array","array","boolean"])}function Ete(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:o}=t,{alignCorners:a}=r,i=n.makeOutput(s.shape,"float32");let u=n.dataIdMap.get(s.dataId),c;return u.dtype!=="float32"&&(c=Ha({backend:n,inputs:{x:s},attrs:{dtype:"float32"}}),u=n.dataIdMap.get(c.dataId)),W4(n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,new Uint8Array(new Int32Array(s.shape).buffer),new Uint8Array(new Int32Array(o.shape).buffer),a),c!=null&&n.disposeData(c.dataId),i}const Cte={kernelName:Pw,backendName:"wasm",setupFunc:_te,kernelFunc:Ete};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let U4;function Tte(e){U4=e.wasm.cwrap(Cg,null,["number","array","number","array","number","number"])}function Nte(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dims:o}=r,a=Kt(o,s.shape);if(s.shape.length===0)return dy({inputs:{x:s},backend:n});const i=n.makeOutput(s.shape,s.dtype),u=n.dataIdMap.get(s.dataId).id,c=n.dataIdMap.get(i.dataId).id,l=new Uint8Array(new Int32Array(a).buffer),d=new Uint8Array(new Int32Array(s.shape).buffer);U4(u,l,a.length,d,s.shape.length,c);const f=gr({inputs:{x:i},attrs:{shape:s.shape},backend:n});return n.disposeData(i.dataId),f}const Ate={kernelName:Cg,backendName:"wasm",kernelFunc:Nte,setupFunc:Tte};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let V4;function Dte(e){V4=e.wasm.cwrap(Qg,null,["number","number","number","number","number","number","number","number","array","number","number"])}function $te(e){const{inputs:t,backend:n,attrs:r}=e,{image:s}=t,{radians:o,fillValue:a,center:i}=r,u=n.makeOutput(s.shape,s.dtype),c=n.dataIdMap.get(s.dataId).id,l=n.dataIdMap.get(u.dataId).id,[d,f,p,h]=s.shape,[m,y]=qN(i,f,p),g=a===0,b=255,w=typeof a=="number"?[a,a,a,g?0:b]:[...a,b],S=new Uint8Array(new Int32Array(w).buffer);return V4(c,d,f,p,h,o,m,y,S,w.length,l),u}const Rte={kernelName:Qg,backendName:"wasm",kernelFunc:$te,setupFunc:Dte};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fte=at(Tg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mte=at(Ng);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let H4;function Ote(e){H4=e.wasm.cwrap(Ag,null,["number","number","number","number","number","number","array","number","number"])}function Pte(e){const{backend:t,inputs:n,attrs:r}=e,{indices:s,updates:o}=n,{shape:a}=r,i=t.makeOutput(a,o.dtype);if(ee(a)===0)return i;const{sliceRank:u,numUpdates:c,sliceSize:l,strides:d,outputSize:f}=Su(o,s,a),h=t.dataIdMap.get(s.dataId).id,y=t.dataIdMap.get(o.dataId).id,g=new Uint8Array(new Int32Array(d).buffer),b=t.dataIdMap.get(i.dataId).id;return H4(h,y,ut[o.dtype],u,c,l,g,f,b),i}const Bte={kernelName:Ag,backendName:"wasm",setupFunc:Ote,kernelFunc:Pte};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let j4;function Lte(e){j4=e.wasm.cwrap($g,null,["number","number","number","number","number","number","bool","number"])}function zte(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:s,values:o}=t,{side:a}=r;if(s.dtype!==o.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${s.dtype} and ${o.dtype}`);const i=n.makeOutput(o.shape,"int32");function u(c){return n.dataIdMap.get(c.dataId).id}return j4(u(s),u(o),s.shape[0],s.shape[1],o.shape[1],ut[s.dtype],a==="left",u(i)),i}const Wte={kernelName:$g,backendName:"wasm",setupFunc:Lte,kernelFunc:zte};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let G4;function Ute(e){G4=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function Vte(e){const{inputs:t,backend:n}=e,{condition:r,t:s,e:o}=t,a=n.dataIdMap.get(r.dataId).id,i=n.dataIdMap.get(s.dataId).id,u=n.dataIdMap.get(o.dataId).id,c=n.makeOutput(s.shape,s.dtype),l=n.dataIdMap.get(c.dataId).id,d=r.shape.length,f=s.shape.length,p=d===0||d>1||f===1?1:ee(s.shape.slice(1));return G4(a,i,u,p,l),c}const Hte={kernelName:Lw,backendName:"wasm",kernelFunc:Vte,setupFunc:Ute};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jte=at(Rg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let q4;function Gte(e){q4=e.wasm.cwrap(Pg,null,["number","number"])}function qte(e){const{backend:t,inputs:{x:n}}=e,r=t.dataIdMap.get(n.dataId).id,s=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(s.dataId).id;return ee(s.shape)===0||q4(r,o),s}const Kte={kernelName:"Sigmoid",backendName:"wasm",setupFunc:Gte,kernelFunc:qte};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xte=at(Og);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yte=at(Fg);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qte=at(Mg);/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zte=at(Bg);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jte(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:o,paddings:a}=r,i=ee(o),u=[[0,0]];u.push(...a);for(let _=1+o.length;_<s.shape.length;++_)u.push([0,0]);const c=M4.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:u,constantValue:0}}),l=ly(c.shape,o,i,!1),d=uy(l.length,o.length,!1),f=cy(c.shape,o,i,!1),m=gr({inputs:{x:c},backend:n,attrs:{shape:l}}),b=Aa({inputs:{x:m},backend:n,attrs:{perm:d}}),I=gr({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeData(c.dataId),n.disposeData(m.dataId),n.disposeData(b.dataId),I}const ene={kernelName:Ww,backendName:"wasm",kernelFunc:Jte};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let K4;function tne(e){K4=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function nne(e){const{backend:t,inputs:n}=e,{indices:r,values:s,denseShape:o,defaultValue:a}=n,i=r.shape[0],u=r.shape[1],c=t.readSync(o.dataId)[0],l=[i+c,u],d=t.dataIdMap.get(r.dataId).id,f=t.dataIdMap.get(s.dataId).id,p=t.dataIdMap.get(a.dataId).id,h=t.makeOutput(l,r.dtype),m=t.dataIdMap.get(h.dataId).id,y=t.makeOutput(l.slice(0,1),s.dtype),g=t.dataIdMap.get(y.dataId).id,b=t.makeOutput([c],"bool"),w=t.dataIdMap.get(b.dataId).id,S=t.makeOutput([i],r.dtype),I=t.dataIdMap.get(S.dataId).id,_=t.makeOutput([4],"int32"),C=t.dataIdMap.get(_.dataId).id,N=K4(d,f,ut[s.dtype],i,c,u,p,m,g,w,I,C),$=t.readSync(_.dataId);let R;switch($[0]){case 1:{R=ZN($[1]);break}case 2:{R=JN($[1],$[2]);break}case 3:R=eA($[1],$[2],$[3]);break;default:R=""}if(t.disposeData(_.dataId),R)throw t.disposeData(h.dataId),t.disposeData(y.dataId),t.disposeData(b.dataId),t.disposeData(S.dataId),new Error(R);let F=h,U=y;return N!==l[0]&&(F=zi({inputs:{x:h},attrs:{begin:0,size:[N,u]},backend:t}),U=zi({inputs:{x:y},attrs:{begin:0,size:N},backend:t}),t.disposeData(h.dataId),t.disposeData(y.dataId)),[F,U,b,S]}const rne={kernelName:Vw,backendName:"wasm",setupFunc:tne,kernelFunc:nne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let X4;function sne(e){X4=e.wasm.cwrap(Ug,null,["number","number","number","number","number","number","number"])}function one(e){const{backend:t,inputs:n}=e,{inputIndices:r,inputShape:s,newShape:o}=n;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=t.dataIdMap.get(r.dataId).id,i=t.dataIdMap.get(s.dataId).id,u=t.dataIdMap.get(o.dataId).id,c=r.shape[0],l=ee(o.shape),d=t.makeOutput([c,l],r.dtype),f=t.dataIdMap.get(d.dataId).id,p=t.makeOutput([l],o.dtype),h=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([3],"int32"),y=t.dataIdMap.get(m.dataId).id;X4(a,i,u,c,f,h,y);const g=t.readSync(m.dataId);let b;switch(g[0]){case 0:{b=tA(g[1],g[2]);break}case 1:{b=nA(g[1],g[2]);break}case 2:b=rA();break;case 3:{const w=Array.from(t.readSync(s.dataId)),S=Array.from(t.readSync(p.dataId));b=sA(w,S);break}case 4:{const w=Array.from(t.readSync(s.dataId)),S=Array.from(t.readSync(p.dataId));b=oA(w,S);break}default:b=""}if(t.disposeData(m.dataId),b)throw t.disposeData(d.dataId),t.disposeData(p.dataId),new Error(b);return[d,p]}const ane={kernelName:Ug,backendName:"wasm",setupFunc:sne,kernelFunc:one};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let Y4;function Q4(e){Y4=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function Z4(e,t){const{backend:n,inputs:r}=e,{data:s,indices:o,segmentIds:a}=r,i=o.shape[0],u=n.readSync(a.dataId,i-1,i)[0],l=i>0?u+1:0;if(l<0)throw new Error(mh());const d=s.shape.slice();d[0]=l;const f=n.dataIdMap.get(s.dataId).id,p=n.dataIdMap.get(o.dataId).id,h=n.dataIdMap.get(a.dataId).id,m=n.makeOutput(d,s.dtype),y=n.dataIdMap.get(m.dataId).id,g=n.makeOutput([4],"int32"),b=n.dataIdMap.get(g.dataId).id;Y4(f,ut[s.dtype],s.shape[0],p,h,y,b,t,0);const w=n.readSync(g.dataId);let S;switch(w[0]){case 0:{S=mh();break}case 1:{S=aA();break}case 2:S=iA(w[1],w[2]);break;case 3:S=lA(w[1],w[2],w[3]);break;default:S=""}if(n.disposeData(g.dataId),S)throw n.disposeData(m.dataId),new Error(S);return m}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ine(e){return Z4(e,!0)}const lne={kernelName:Hw,backendName:"wasm",setupFunc:Q4,kernelFunc:ine};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function une(e){return Z4(e,!1)}const cne={kernelName:jw,backendName:"wasm",setupFunc:Q4,kernelFunc:une};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let J4;function dne(e){J4=e.wasm.cwrap(Vg,null,["number","number","number","number","number","number","number","number","array","number","number"])}function fne(e){const{backend:t,inputs:n,attrs:r}=e,{sparseIndices:s,sparseValues:o,defaultValue:a}=n,{outputShape:i}=r,u=t.makeOutput(i,a.dtype);if(ee(i)===0)return u;const{sliceRank:c,numUpdates:l,sliceSize:d,strides:f,outputSize:p}=Su(o,s,i),h=t.dataIdMap.get(s.dataId).id,m=t.dataIdMap.get(o.dataId).id,y=t.dataIdMap.get(a.dataId).id,g=new Uint8Array(new Int32Array(f).buffer),b=t.dataIdMap.get(u.dataId).id;return J4(h,m,o.shape.length,y,ut[a.dtype],c,l,d,g,p,b),u}const pne={kernelName:Vg,backendName:"wasm",setupFunc:dne,kernelFunc:fne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hne(e){const{inputs:t,attrs:n,backend:r}=e,{x:s}=t,{numOrSizeSplits:o,axis:a}=n,i=Kt(a,s.shape)[0],u=QN(s,o,i),c=new Array(s.shape.length).fill(0),l=s.shape.slice();return u.map(d=>{const f=[...l];f[i]=d;const p=zi({inputs:{x:s},attrs:{begin:c,size:f},backend:r});return c[i]+=d,p})}const mne={kernelName:Uw,backendName:"wasm",kernelFunc:hne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gne=at(Lg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yne=at(cT);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vne=cn(Hg);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let eD;function bne(e){eD=e.wasm.cwrap(Od,null,["number","number","number","number"])}function wne(e){const{backend:t,inputs:n,attrs:r}=e,{alpha:s}=r,{x:o}=n,a=t.dataIdMap.get(o.dataId).id,i=t.makeOutput(o.shape,o.dtype),u=t.dataIdMap.get(i.dataId).id;return eD(a,s,ut[o.dtype],u),i}const Sne={kernelName:Od,backendName:"wasm",setupFunc:bne,kernelFunc:wne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let tD;function xne(e){tD=e.wasm.cwrap(jg,null,["number","array","number","array","array","array","array","array","number","number"])}function kne(e){const{backend:t,inputs:n,attrs:r}=e,{x:s}=n,{begin:o,end:a,strides:i,beginMask:u,endMask:c,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:f}=r,{finalShapeSparse:p,finalShape:h,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:b,end:w,strides:S}=jN(s.shape,o,a,i,u,c,l,d,f);let I;if(m)I=gr({inputs:{x:s},backend:t,attrs:{shape:h}});else if(y||g){D(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const _=WN(b,w,S),C=zi({inputs:{x:s},backend:t,attrs:{begin:b,size:_}});I=gr({inputs:{x:C},backend:t,attrs:{shape:h}}),t.disposeData(C.dataId)}else{const _=t.makeOutput(p,"float32"),C=t.dataIdMap.get(s.dataId).id,N=new Uint8Array(new Int32Array(Ee(s.shape)).buffer),$=new Uint8Array(new Int32Array(b).buffer),R=new Uint8Array(new Int32Array(w).buffer),F=new Uint8Array(new Int32Array(S).buffer),U=new Uint8Array(new Int32Array(p).buffer),L=new Uint8Array(new Int32Array(Ee(p)).buffer),H=t.dataIdMap.get(_.dataId).id;tD(C,N,s.shape.length,$,R,F,U,L,p.length,H),I=gr({inputs:{x:_},backend:t,attrs:{shape:h}}),t.disposeData(_.dataId)}return I}const Ine={kernelName:jg,backendName:"wasm",setupFunc:xne,kernelFunc:kne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ne(e){const{backend:t,inputs:n,attrs:r}=e,{data:s,dataSplits:o}=n,{separator:a,nGramWidths:i,leftPad:u,rightPad:c,padWidth:l,preserveShortSequences:d}=r,f=t.readSync(s.dataId),p=t.readSync(o.dataId),[h,m]=PA(f,p,a,i,u,c,l,d),y=t.makeOutput([h.length],"string"),g=t.dataIdMap.get(y.dataId);g.stringBytes=h;const b=t.makeOutput(o.shape,"int32");return t.typedArrayFromHeap(b).set(m),[y,b]}const Ene={kernelName:qw,backendName:"wasm",kernelFunc:_ne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cne(e){const{backend:t,inputs:n,attrs:r}=e,{input:s,delimiter:o}=n,{skipEmpty:a}=r,i=t.readSync(s.dataId),u=t.readSync(o.dataId),[c,l,d]=BA(i,u[0],a),f=l.length,p=t.makeOutput([f,2],"int32");t.typedArrayFromHeap(p).set(c);const m=t.makeOutput([f],"string"),y=t.dataIdMap.get(m.dataId);y.stringBytes=l;const g=t.makeOutput([2],"int32");return t.typedArrayFromHeap(g).set(d),[p,m,g]}const Tne={kernelName:Kw,backendName:"wasm",kernelFunc:Cne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nne(e){const{backend:t,inputs:n,attrs:r}=e,{input:s}=n,{numBuckets:o}=r,a=t.readSync(s.dataId),i=LA(a,o),u=t.makeOutput(s.shape,"int32");return t.typedArrayFromHeap(u).set(i),u}const Ane={kernelName:Xw,backendName:"wasm",kernelFunc:Nne};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dne=cn(Gg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let nD;function $ne(e){nD=e.wasm.cwrap(zg,null,["number","number","number","number"])}function Rne(e){const{backend:t,inputs:n,attrs:r}=e,{axis:s,keepDims:o}=r,{x:a}=n,i=t.dataIdMap.get(a.dataId).id;let u=i,c=a;const{transposed:l,axes:d,originalAxes:f,inputWasTransposed:p}=Wa(a,s,t);let h=d;if(p){const w=t.dataIdMap.get(l.dataId).id;w!==i&&(c=l,u=w,h=ar(h.length,c.shape.length))}or("sum",h,c.shape.length);const[m,y]=sr(c.shape,h),g=ee(y),b=t.makeOutput(m,c.dtype);if(ee(c.shape)!==0){const w=t.dataIdMap.get(b.dataId).id;nD(u,g,ut[b.dtype],w)}if(p&&t.disposeData(l.dataId),o){const w=Rn(b.shape,f);b.shape=w}return b}const Fne={kernelName:zg,backendName:"wasm",setupFunc:$ne,kernelFunc:Rne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mne=at(qg);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const One=at(Kg);/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let rD;function Pne(e){rD=e.wasm.cwrap(Dg,null,["number","number","number","number","number","number","array","number","number","number"])}function Bne(e){const{backend:t,inputs:n,attrs:r}=e,{tensor:s,indices:o,updates:a}=n,i=t.makeOutput(s.shape,s.dtype);if(ee(s.shape)===0)return i;const{sliceRank:u,numUpdates:c,sliceSize:l,strides:d,outputSize:f}=Su(a,o,s.shape),h=t.dataIdMap.get(o.dataId).id,y=t.dataIdMap.get(a.dataId).id,b=t.dataIdMap.get(s.dataId).id,w=new Uint8Array(new Int32Array(d).buffer),S=t.dataIdMap.get(i.dataId).id;return rD(h,y,ut[a.dtype],u,c,l,w,f,S,b),i}const Lne={kernelName:Dg,backendName:"wasm",setupFunc:Pne,kernelFunc:Bne};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let sD;function zne(e){sD=e.wasm.cwrap(Md,null,["number","array","number","array","number","number"])}function Wne(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,o=n.dataIdMap.get(s.dataId).id,{reps:a}=r,i=new Array(s.shape.length);for(let f=0;f<i.length;f++)i[f]=s.shape[f]*a[f];const u=new Uint8Array(new Int32Array(s.shape).buffer),c=new Uint8Array(new Int32Array(i).buffer),l=n.makeOutput(i,s.dtype),d=n.dataIdMap.get(l.dataId).id;return sD(o,u,s.shape.length,c,i.length,ut[l.dtype],d),l}const Une={kernelName:Md,backendName:"wasm",setupFunc:zne,kernelFunc:Wne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let oD;function Vne(e){oD=e.wasm.cwrap(Xg,null,["number","array","number","number","number","bool","number","number"])}const Hne=({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{k:s,sorted:o}=n,a=t.dataIdMap.get(r.dataId).id,i=new Uint8Array(new Int32Array(r.shape).buffer),u=r.shape.slice();u[u.length-1]=s;const c=t.makeOutput(u,r.dtype),l=t.dataIdMap.get(c.dataId).id,d=t.makeOutput(u,"int32"),f=t.dataIdMap.get(d.dataId).id;return oD(a,i,r.shape.length,ut[r.dtype],s,o,l,f),[c,d]},jne={kernelName:Xg,backendName:"wasm",setupFunc:Vne,kernelFunc:Hne};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let aD;function Gne(e){aD=e.wasm.cwrap(Yg,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function qne(e){const{backend:t,inputs:n,attrs:r}=e,{image:s,transforms:o}=n,{interpolation:a,fillMode:i,fillValue:u,outputShape:c}=r,[l,d,f,p]=s.shape,[h,m]=c??[d,f],y=[l,h,m,p],g=new Uint8Array(new Int32Array(Ee(s.shape)).buffer),b=new Uint8Array(new Int32Array(Ee(y)).buffer),w=t.makeOutput(y,s.dtype),S=t.dataIdMap.get(w.dataId).id,_=t.dataIdMap.get(s.dataId).id,N=t.dataIdMap.get(o.dataId).id,$=a==="nearest"?1:2;let R;switch(i){case"constant":R=1;break;case"reflect":R=2;break;case"wrap":R=3;break;case"nearest":R=4;break;default:R=1;break}return aD(_,N,o.shape[0]>1,l,h,m,p,f,d,g,s.shape.length-1,b,y.length-1,$,R,u,S),w}const Kne={kernelName:Yg,backendName:"wasm",setupFunc:Gne,kernelFunc:qne};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xne(e){const{inputs:t,attrs:n,backend:r}=e,{axis:s}=n,{x:o}=t,{outputValues:a,outputShape:i,indices:u}=WA(r.readSync(o.dataId),s,o.shape,o.dtype);return[r.makeOutput(i,o.dtype,void 0,a),r.makeOutput([u.length],"int32",void 0,u)]}const Yne={kernelName:Yw,backendName:"wasm",kernelFunc:Xne};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qne(e){const{inputs:t,backend:n,attrs:r}=e,{value:s}=t;let{axis:o}=r;o<0&&(o+=s.shape.length);const a=s.shape[o],i=s.shape.length,u=new Array(i-1);let c=0;for(let p=0;p<i;p++)p!==o&&(u[c++]=s.shape[p]);const l=new Array(a),d=new Array(i).fill(0),f=s.shape.slice();f[o]=1;for(let p=0;p<l.length;p++)d[o]=p,l[p]=zi({inputs:{x:s},attrs:{begin:d,size:f},backend:n});return l.map(({dataId:p,dtype:h})=>({dataId:p,dtype:h,shape:u}))}const Zne={kernelName:Qw,backendName:"wasm",kernelFunc:Qne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jne(e){const{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}const ere={kernelName:Zw,backendName:"wasm",kernelFunc:Jne};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tre=[eX,tX,nX,rX,sX,iX,mX,vX,bX,wX,SX,xX,kX,IX,_X,TX,PX,DX,FX,WX,LQ,UQ,VQ,jQ,GQ,qQ,YQ,QQ,eZ,rZ,aZ,uZ,fZ,pZ,hZ,yZ,wZ,kZ,EZ,NZ,$Z,MZ,BZ,WZ,HZ,jZ,KZ,YZ,QZ,ZZ,JZ,eJ,tJ,sJ,oJ,aJ,uJ,fJ,mJ,vJ,SJ,kJ,_J,lX,EJ,CJ,TJ,DJ,RJ,MJ,BJ,zJ,LJ,UJ,VJ,jJ,qJ,YJ,JJ,nee,ree,aee,uee,fee,mee,vee,See,Iee,_ee,Tee,Ree,Fee,Mee,Oee,Lee,Uee,jee,qee,Yee,Zee,ete,M4,rte,ate,ute,dte,fte,pte,hte,mte,BX,vte,Ste,Ite,Cte,Ate,Rte,Fte,Mte,Bte,Wte,Hte,jte,Kte,Xte,Yte,Qte,PQ,Aee,Zte,ene,rne,ane,lne,cne,pne,mne,gne,yne,vne,Sne,Ine,Ene,Tne,Ane,Dne,Fne,Mne,One,Lne,Une,jne,Kne,fX,Yne,Zne,ere];for(const e of tre)fT(e);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const N1=Ye();N1.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch{return!1}});N1.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(N1.get("IS_NODE"))return!1;try{return new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}});var iD={exports:{}};(function(e,t){var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(s){s=s||{};function o(){return P.buffer!=pe&&Be(P.buffer),xe}function a(){return P.buffer!=pe&&Be(P.buffer),Se}function i(){return P.buffer!=pe&&Be(P.buffer),Ce}function u(){return P.buffer!=pe&&Be(P.buffer),$e}function c(){return P.buffer!=pe&&Be(P.buffer),Fe}var l=typeof s<"u"?s:{},d,f;l.ready=new Promise(function(M,K){d=M,f=K});var p;typeof process<"u"&&process.listeners&&(p={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var h=Object.assign({},l),m=(M,K)=>{throw K},y=typeof window=="object",g=typeof importScripts=="function",b=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",w=l.ENVIRONMENT_IS_PTHREAD||!1,S="";function I(M){return l.locateFile?l.locateFile(M,S):S+M}var _,C,N;function $(M){if(M instanceof ns)return;j("exiting due to exception: "+M)}if(b){var R=ia,F=ia;g?S=F.dirname(S)+"/":S=__dirname+"/",_=(K,de)=>(K=Ir(K)?new URL(K):F.normalize(K),R.readFileSync(K,de?void 0:"utf8")),N=K=>{var de=_(K,!0);return de.buffer||(de=new Uint8Array(de)),de},C=(K,de,Pe)=>{K=Ir(K)?new URL(K):F.normalize(K),R.readFile(K,function(ze,He){ze?Pe(ze):de(He.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(K){if(!(K instanceof ns))throw K}),process.on("unhandledRejection",function(K){throw K}),m=(K,de)=>{if(et())throw process.exitCode=K,de;$(de),process.exit(K)},l.inspect=function(){return"[Emscripten Module object]"};let M;try{M=ia}catch(K){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),K}er.Worker=M.Worker}else(y||g)&&(g?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),typeof r<"u"&&r&&(S=r),S.indexOf("blob:")!==0?S=S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):S="",b||(_=M=>{var K=new XMLHttpRequest;return K.open("GET",M,!1),K.send(null),K.responseText},g&&(N=M=>{var K=new XMLHttpRequest;return K.open("GET",M,!1),K.responseType="arraybuffer",K.send(null),new Uint8Array(K.response)}),C=(M,K,de)=>{var Pe=new XMLHttpRequest;Pe.open("GET",M,!0),Pe.responseType="arraybuffer",Pe.onload=()=>{if(Pe.status==200||Pe.status==0&&Pe.response){K(Pe.response);return}de()},Pe.onerror=de,Pe.send(null)}));b&&typeof performance>"u"&&(er.performance=ia.performance);var U=console.log.bind(console),L=console.warn.bind(console);b&&(U=M=>R.writeSync(1,M+`
`),L=M=>R.writeSync(2,M+`
`));var H=l.print||U,j=l.printErr||L;Object.assign(l,h),h=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram,l.quit&&(m=l.quit);var X;l.wasmBinary&&(X=l.wasmBinary);var Q=l.noExitRuntime||!0;typeof WebAssembly!="object"&&jn("no native wasm support detected");var P,G,Y=!1,Z;function se(M,K){M||jn(K)}var re=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ae(M,K,de){K>>>=0;for(var Pe=K+de,ze=K;M[ze]&&!(ze>=Pe);)++ze;if(ze-K>16&&M.buffer&&re)return re.decode(M.buffer instanceof SharedArrayBuffer?M.slice(K,ze):M.subarray(K,ze));for(var He="";K<ze;){var ke=M[K++];if(!(ke&128)){He+=String.fromCharCode(ke);continue}var Te=M[K++]&63;if((ke&224)==192){He+=String.fromCharCode((ke&31)<<6|Te);continue}var Et=M[K++]&63;if((ke&240)==224?ke=(ke&15)<<12|Te<<6|Et:ke=(ke&7)<<18|Te<<12|Et<<6|M[K++]&63,ke<65536)He+=String.fromCharCode(ke);else{var ur=ke-65536;He+=String.fromCharCode(55296|ur>>10,56320|ur&1023)}}return He}function ie(M,K){return M>>>=0,M?ae(a(),M,K):""}function ue(M,K,de,Pe){if(de>>>=0,!(Pe>0))return 0;for(var ze=de,He=de+Pe-1,ke=0;ke<M.length;++ke){var Te=M.charCodeAt(ke);if(Te>=55296&&Te<=57343){var Et=M.charCodeAt(++ke);Te=65536+((Te&1023)<<10)|Et&1023}if(Te<=127){if(de>=He)break;K[de++>>>0]=Te}else if(Te<=2047){if(de+1>=He)break;K[de++>>>0]=192|Te>>6,K[de++>>>0]=128|Te&63}else if(Te<=65535){if(de+2>=He)break;K[de++>>>0]=224|Te>>12,K[de++>>>0]=128|Te>>6&63,K[de++>>>0]=128|Te&63}else{if(de+3>=He)break;K[de++>>>0]=240|Te>>18,K[de++>>>0]=128|Te>>12&63,K[de++>>>0]=128|Te>>6&63,K[de++>>>0]=128|Te&63}}return K[de>>>0]=0,de-ze}function ve(M,K,de){return ue(M,a(),K,de)}var pe,xe,Se,Ce,$e,Fe;w&&(pe=l.buffer);function Be(M){pe=M,l.HEAP8=xe=new Int8Array(M),l.HEAP16=new Int16Array(M),l.HEAP32=Ce=new Int32Array(M),l.HEAPU8=Se=new Uint8Array(M),l.HEAPU16=new Uint16Array(M),l.HEAPU32=$e=new Uint32Array(M),l.HEAPF32=new Float32Array(M),l.HEAPF64=Fe=new Float64Array(M)}var Le=l.INITIAL_MEMORY||16777216;if(w)P=l.wasmMemory,pe=l.buffer;else if(l.wasmMemory)P=l.wasmMemory;else if(P=new WebAssembly.Memory({initial:Le/65536,maximum:65536,shared:!0}),!(P.buffer instanceof SharedArrayBuffer))throw j("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),b&&j("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");P&&(pe=P.buffer),Le=pe.byteLength,Be(pe);var Ae,st=[],Ze=[],Je=[];function et(){return Q}function vn(){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)bn(l.preRun.shift());bt(st)}function Ut(){w||bt(Ze)}function sn(){if(!w){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)En(l.postRun.shift());bt(Je)}}function bn(M){st.unshift(M)}function Mn(M){Ze.unshift(M)}function En(M){Je.unshift(M)}var Vt=0,Cn=null;function Hn(M){Vt++,l.monitorRunDependencies&&l.monitorRunDependencies(Vt)}function fo(M){if(Vt--,l.monitorRunDependencies&&l.monitorRunDependencies(Vt),Vt==0&&Cn){var K=Cn;Cn=null,K()}}function jn(M){l.onAbort&&l.onAbort(M),M="Aborted("+M+")",j(M),Y=!0,Z=1,M+=". Build with -sASSERTIONS for more info.";var K=new WebAssembly.RuntimeError(M);throw f(K),K}var Vo="data:application/octet-stream;base64,";function Wr(M){return M.startsWith(Vo)}function Ir(M){return M.startsWith("file://")}var Ht;Ht="tfjs-backend-wasm-threaded-simd.wasm",Wr(Ht)||(Ht=I(Ht));function Ho(M){try{if(M==Ht&&X)return new Uint8Array(X);if(N)return N(M);throw"both async and sync fetching of the wasm failed"}catch(K){jn(K)}}function Ka(){if(!X&&(y||g)){if(typeof fetch=="function"&&!Ir(Ht))return fetch(Ht,{credentials:"same-origin"}).then(function(M){if(!M.ok)throw"failed to load wasm binary file at '"+Ht+"'";return M.arrayBuffer()}).catch(function(){return Ho(Ht)});if(C)return new Promise(function(M,K){C(Ht,function(de){M(new Uint8Array(de))},K)})}return Promise.resolve().then(function(){return Ho(Ht)})}function po(){var M={env:Au,wasi_snapshot_preview1:Au};function K(ke,Te){var Et=ke.exports;if(l.asm=Et,_r(l.asm._emscripten_tls_init),Ae=l.asm.__indirect_function_table,Mn(l.asm.__wasm_call_ctors),G=Te,!w){var ur=we.unusedWorkers.length;we.unusedWorkers.forEach(function(ks){we.loadWasmModuleToWorker(ks,function(){--ur||fo()})})}}w||Hn();function de(ke){K(ke.instance,ke.module)}function Pe(ke){return Ka().then(function(Te){return WebAssembly.instantiate(Te,M)}).then(function(Te){return Te}).then(ke,function(Te){j("failed to asynchronously prepare wasm: "+Te),jn(Te)})}function ze(){return!X&&typeof WebAssembly.instantiateStreaming=="function"&&!Wr(Ht)&&!Ir(Ht)&&!b&&typeof fetch=="function"?fetch(Ht,{credentials:"same-origin"}).then(function(ke){var Te=WebAssembly.instantiateStreaming(ke,M);return Te.then(de,function(Et){return j("wasm streaming compile failed: "+Et),j("falling back to ArrayBuffer instantiation"),Pe(de)})}):Pe(de)}if(l.instantiateWasm)try{var He=l.instantiateWasm(M,K);return He}catch(ke){j("Module.instantiateWasm callback failed with error: "+ke),f(ke)}return ze().catch(f),{}}var Xa={};function ns(M){this.name="ExitStatus",this.message="Program terminated with exit("+M+")",this.status=M}function ho(M){var K=we.pthreads[M];delete we.pthreads[M],K.terminate(),$u(M),we.runningWorkers.splice(we.runningWorkers.indexOf(K),1),K.pthread_ptr=0}function Gn(M){var K=we.pthreads[M];K.postMessage({cmd:"cancel"})}function _t(M){var K=we.pthreads[M];se(K),we.returnWorkerToPool(K)}function Vs(M){var K=we.getNewWorker();if(!K)return 6;we.runningWorkers.push(K),we.pthreads[M.pthread_ptr]=K,K.pthread_ptr=M.pthread_ptr;var de={cmd:"run",start_routine:M.startRoutine,arg:M.arg,pthread_ptr:M.pthread_ptr};return K.runPthread=()=>{b&&K.ref(),K.postMessage(de,M.transferList),delete K.runPthread},K.loaded&&K.runPthread(),0}function ir(M){if(w)return Go(1,1,M);Z=M,et()||(we.terminateAllThreads(),l.onExit&&l.onExit(M),Y=!0),m(M,new ns(M))}function te(M,K){if(Z=M,!K&&w)throw Ge(M),"unwind";ir(M)}var ce=te;function Me(M){if(M instanceof ns||M=="unwind")return Z;m(1,M)}var we={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){w?we.initWorker():we.initMainThread()},initMainThread:function(){for(var M=8;M--;)we.allocateUnusedWorker()},initWorker:function(){Q=!1},setExitStatus:function(M){Z=M},terminateAllThreads:function(){for(var M of Object.values(we.pthreads))we.returnWorkerToPool(M);for(var M of we.unusedWorkers)M.terminate();we.unusedWorkers=[]},returnWorkerToPool:function(M){var K=M.pthread_ptr;delete we.pthreads[K],we.unusedWorkers.push(M),we.runningWorkers.splice(we.runningWorkers.indexOf(M),1),M.pthread_ptr=0,b&&M.unref(),$u(K)},receiveObjectTransfer:function(M){},threadInitTLS:function(){we.tlsInitFunctions.forEach(M=>M())},loadWasmModuleToWorker:function(M,K){M.onmessage=He=>{var ke=He.data,Te=ke.cmd;if(M.pthread_ptr&&(we.currentProxiedOperationCallerThread=M.pthread_ptr),ke.targetThread&&ke.targetThread!=js()){var Et=we.pthreads[ke.targetThread];Et?Et.postMessage(ke,ke.transferList):j('Internal error! Worker sent a message "'+Te+'" to target pthread '+ke.targetThread+", but that thread no longer exists!"),we.currentProxiedOperationCallerThread=void 0;return}Te==="processProxyingQueue"?_u(ke.queue):Te==="spawnThread"?Vs(ke):Te==="cleanupThread"?_t(ke.thread):Te==="killThread"?ho(ke.thread):Te==="cancelThread"?Gn(ke.thread):Te==="loaded"?(M.loaded=!0,b&&M.unref(),K&&K(M),M.runPthread&&M.runPthread()):Te==="print"?H("Thread "+ke.threadId+": "+ke.text):Te==="printErr"?j("Thread "+ke.threadId+": "+ke.text):Te==="alert"?alert("Thread "+ke.threadId+": "+ke.text):ke.target==="setimmediate"?M.postMessage(ke):Te==="callHandler"?l[ke.handler](...ke.args):Te&&j("worker sent an unknown command "+Te),we.currentProxiedOperationCallerThread=void 0},M.onerror=He=>{var ke="worker sent an error!";throw j(ke+" "+He.filename+":"+He.lineno+": "+He.message),He},b&&(M.on("message",function(He){M.onmessage({data:He})}),M.on("error",function(He){M.onerror(He)}),M.on("detachedExit",function(){}));var de=[],Pe=["onExit","onAbort","print","printErr"];for(var ze of Pe)l.hasOwnProperty(ze)&&de.push(ze);M.postMessage({cmd:"load",handlers:de,urlOrBlob:l.mainScriptUrlOrBlob||r,wasmMemory:P,wasmModule:G})},allocateUnusedWorker:function(){var M,K=I("tfjs-backend-wasm-threaded-simd.worker.js");M=new Worker(K),we.unusedWorkers.push(M)},getNewWorker:function(){return we.unusedWorkers.length==0&&(we.allocateUnusedWorker(),we.loadWasmModuleToWorker(we.unusedWorkers[0])),we.unusedWorkers.pop()}};l.PThread=we;function bt(M){for(;M.length>0;)M.shift()(l)}function kt(){var M=js(),K=i()[M+52>>>2],de=i()[M+56>>>2],Pe=K-de;Ru(K,Pe),el(K)}l.establishStackSpace=kt;function Ge(M){if(w)return Go(2,0,M);try{ce(M)}catch(K){Me(K)}}var We=[];function Xt(M){var K=We[M];return K||(M>=We.length&&(We.length=M+1),We[M]=K=Ae.get(M)),K}function lr(M,K){var de=Xt(M)(K);et()?we.setExitStatus(de):ei(de)}l.invokeEntryPoint=lr;function _r(M){we.tlsInitFunctions.push(M)}function Ya(M){Du(M,!g,1,!y),we.threadInitTLS()}function Hs(M){w?postMessage({cmd:"cleanupThread",thread:M}):_t(M)}function Qa(M,K,de,Pe){return w?Go(3,1,M,K,de,Pe):dn(M,K,de,Pe)}function dn(M,K,de,Pe){if(typeof SharedArrayBuffer>"u")return j("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var ze=[],He=0;if(w&&(ze.length===0||He))return Qa(M,K,de,Pe);var ke={startRoutine:de,pthread_ptr:M,arg:Pe,transferList:ze};return w?(ke.cmd="spawnThread",postMessage(ke,ze),0):Vs(ke)}function Ur(){return 65536}var Za=!0;function Vd(){return Za}function _u(M){Atomics.store(i(),M>>2,1),js()&&tf(M),Atomics.compareExchange(i(),M>>2,1,0)}l.executeNotifiedProxyingQueue=_u;function Ey(M,K,de,Pe){if(M==K)setTimeout(()=>_u(Pe));else if(w)postMessage({targetThread:M,cmd:"processProxyingQueue",queue:Pe});else{var ze=we.pthreads[M];if(!ze)return;ze.postMessage({cmd:"processProxyingQueue",queue:Pe})}return 1}function Hd(M,K,de){return-1}function Yi(){jn("")}function jo(M){jo.shown||(jo.shown={}),jo.shown[M]||(jo.shown[M]=1,b&&(M="warning: "+M),j(M))}function jd(){b||g||jo("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function Gd(){return Date.now()}function qd(){return 4294901760}function Cy(){return qd()}var Eu;b?Eu=()=>{var M=process.hrtime();return M[0]*1e3+M[1]/1e6}:Eu=()=>performance.timeOrigin+performance.now();function Ty(M,K,de){a().copyWithin(M>>>0,K>>>0,K+de>>>0)}function Kd(){return b?ia.cpus().length:navigator.hardwareConcurrency}function Xd(M){var K=Ji(),de=M();return el(K),de}function Go(M,K){var de=arguments.length-2,Pe=arguments;return Xd(()=>{for(var ze=de,He=tl(ze*8),ke=He>>3,Te=0;Te<de;Te++){var Et=Pe[2+Te];c()[ke+Te>>>0]=Et}return Zi(M,ze,He,K)})}var Cu=[];function Ny(M,K,de){Cu.length=K;for(var Pe=de>>3,ze=0;ze<K;ze++)Cu[ze]=c()[Pe+ze>>>0];var He=M<0,ke=He?Xa[-M-1]:Cr[M];return ke.apply(null,Cu)}function Ay(M){try{return P.grow(M-pe.byteLength+65535>>>16),Be(P.buffer),1}catch{}}function Yd(M){var K=a().length;if(M=M>>>0,M<=K)return!1;var de=qd();if(M>de)return!1;let Pe=(Et,ur)=>Et+(ur-Et%ur)%ur;for(var ze=1;ze<=4;ze*=2){var He=K*(1+.2/ze);He=Math.min(He,M+100663296);var ke=Math.min(de,Pe(Math.max(M,He),65536)),Te=Ay(ke);if(Te)return!0}return!1}function Qd(){throw"unwind"}function Qi(M){return w?Go(4,1,M):52}function Tu(M,K,de,Pe,ze){return w?Go(5,1,M,K,de,Pe,ze):70}var Nu=[null,[],[]];function Ja(M,K){var de=Nu[M];K===0||K===10?((M===1?H:j)(ae(de,0)),de.length=0):de.push(K)}function Er(M,K,de,Pe){if(w)return Go(6,1,M,K,de,Pe);for(var ze=0,He=0;He<de;He++){var ke=u()[K>>>2],Te=u()[K+4>>>2];K+=8;for(var Et=0;Et<Te;Et++)Ja(M,a()[ke+Et>>>0]);ze+=Te}return u()[Pe>>>2]=ze,0}function Zd(M){var K=l["_"+M];return K}function Dy(M,K){o().set(M,K>>>0)}function Jd(M,K,de,Pe,ze){var He={string:qn=>{var Ko=0;if(qn!=null&&qn!==0){var nl=(qn.length<<2)+1;Ko=tl(nl),ve(qn,Ko,nl)}return Ko},array:qn=>{var Ko=tl(qn.length);return Dy(qn,Ko),Ko}};function ke(qn){return K==="string"?ie(qn):K==="boolean"?!!qn:qn}var Te=Zd(M),Et=[],ur=0;if(Pe)for(var ks=0;ks<Pe.length;ks++){var rf=He[de[ks]];rf?(ur===0&&(ur=Ji()),Et[ks]=rf(Pe[ks])):Et[ks]=Pe[ks]}var Mu=Te.apply(null,Et);function sf(qn){return ur!==0&&el(ur),ke(qn)}return Mu=sf(Mu),Mu}function ef(M,K,de,Pe){de=de||[];var ze=de.every(ke=>ke==="number"||ke==="boolean"),He=K!=="string";return He&&ze&&!Pe?Zd(M):function(){return Jd(M,K,de,arguments)}}we.init();var Cr=[null,ir,Ge,Qa,Qi,Tu,Er],Au={__emscripten_init_main_thread_js:Ya,__emscripten_thread_cleanup:Hs,__pthread_create_js:dn,_emscripten_default_pthread_stack_size:Ur,_emscripten_get_now_is_monotonic:Vd,_emscripten_notify_task_queue:Ey,_emscripten_set_offscreencanvas_size:Hd,abort:Yi,emscripten_check_blocking_allowed:jd,emscripten_date_now:Gd,emscripten_get_heap_max:Cy,emscripten_get_now:Eu,emscripten_memcpy_big:Ty,emscripten_num_logical_cores:Kd,emscripten_receive_on_main_thread_js:Ny,emscripten_resize_heap:Yd,emscripten_unwind_to_js_event_loop:Qd,exit:ce,fd_close:Qi,fd_seek:Tu,fd_write:Er,memory:P||l.wasmMemory};po(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._init=function(){return(l._init=l.asm.init).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.init_with_threads_count).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.get_threads_count).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.register_tensor).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.dispose_data).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.dispose).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.Abs).apply(null,arguments)},l._Acos=function(){return(l._Acos=l.asm.Acos).apply(null,arguments)},l._Acosh=function(){return(l._Acosh=l.asm.Acosh).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.Add).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.AddN).apply(null,arguments)},l._All=function(){return(l._All=l.asm.All).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.Any).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.ArgMax).apply(null,arguments)},l._ArgMin=function(){return(l._ArgMin=l.asm.ArgMin).apply(null,arguments)},l._Asin=function(){return(l._Asin=l.asm.Asin).apply(null,arguments)},l._Asinh=function(){return(l._Asinh=l.asm.Asinh).apply(null,arguments)},l._Atan=function(){return(l._Atan=l.asm.Atan).apply(null,arguments)},l._Atan2=function(){return(l._Atan2=l.asm.Atan2).apply(null,arguments)},l._Atanh=function(){return(l._Atanh=l.asm.Atanh).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.AvgPool).apply(null,arguments)},l._AvgPool3D=function(){return(l._AvgPool3D=l.asm.AvgPool3D).apply(null,arguments)},l._AvgPool3DGrad=function(){return(l._AvgPool3DGrad=l.asm.AvgPool3DGrad).apply(null,arguments)},l._AvgPoolGrad=function(){return(l._AvgPoolGrad=l.asm.AvgPoolGrad).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.BatchMatMul).apply(null,arguments)},l._Bincount=function(){return(l._Bincount=l.asm.Bincount).apply(null,arguments)},l._BitwiseAnd=function(){return(l._BitwiseAnd=l.asm.BitwiseAnd).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.Ceil).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.ClipByValue).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.Conv2D).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.Conv2DBackpropInput).apply(null,arguments)},l._Conv3D=function(){return(l._Conv3D=l.asm.Conv3D).apply(null,arguments)},l._Conv3DBackpropFilterV2=function(){return(l._Conv3DBackpropFilterV2=l.asm.Conv3DBackpropFilterV2).apply(null,arguments)},l._Conv3DBackpropInputV2=function(){return(l._Conv3DBackpropInputV2=l.asm.Conv3DBackpropInputV2).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.Cos).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.Cosh).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.CropAndResize).apply(null,arguments)},l._Cumprod=function(){return(l._Cumprod=l.asm.Cumprod).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Cumsum).apply(null,arguments)},l._DenseBincount=function(){return(l._DenseBincount=l.asm.DenseBincount).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.DepthToSpace).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm.DepthwiseConv2dNative).apply(null,arguments)},l._Diag=function(){return(l._Diag=l.asm.Diag).apply(null,arguments)},l._Dilation2D=function(){return(l._Dilation2D=l.asm.Dilation2D).apply(null,arguments)},l._Dilation2DBackpropFilter=function(){return(l._Dilation2DBackpropFilter=l.asm.Dilation2DBackpropFilter).apply(null,arguments)},l._Dilation2DBackpropInput=function(){return(l._Dilation2DBackpropInput=l.asm.Dilation2DBackpropInput).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.Elu).apply(null,arguments)},l._EluGrad=function(){return(l._EluGrad=l.asm.EluGrad).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.Equal).apply(null,arguments)},l._Erf=function(){return(l._Erf=l.asm.Erf).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.Exp).apply(null,arguments)},l._Expm1=function(){return(l._Expm1=l.asm.Expm1).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.FlipLeftRight).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.Floor).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.FloorDiv).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.FusedBatchNorm).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.FusedConv2D).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.FusedDepthwiseConv2D).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.Gather).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.GatherNd).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.Greater).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.GreaterEqual).apply(null,arguments)},l._IsFinite=function(){return(l._IsFinite=l.asm.IsFinite).apply(null,arguments)},l._IsInf=function(){return(l._IsInf=l.asm.IsInf).apply(null,arguments)},l._IsNan=function(){return(l._IsNan=l.asm.IsNan).apply(null,arguments)},l._LRN=function(){return(l._LRN=l.asm.LRN).apply(null,arguments)},l._LRNGrad=function(){return(l._LRNGrad=l.asm.LRNGrad).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.LeakyRelu).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.Less).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.LessEqual).apply(null,arguments)},l._LinSpace=function(){return(l._LinSpace=l.asm.LinSpace).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.Log).apply(null,arguments)},l._Log1p=function(){return(l._Log1p=l.asm.Log1p).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.LogicalAnd).apply(null,arguments)},l._LogicalNot=function(){return(l._LogicalNot=l.asm.LogicalNot).apply(null,arguments)},l._LogicalOr=function(){return(l._LogicalOr=l.asm.LogicalOr).apply(null,arguments)},l._LogicalXor=function(){return(l._LogicalXor=l.asm.LogicalXor).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.Max).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.MaxPool).apply(null,arguments)},l._MaxPool3D=function(){return(l._MaxPool3D=l.asm.MaxPool3D).apply(null,arguments)},l._MaxPool3DGrad=function(){return(l._MaxPool3DGrad=l.asm.MaxPool3DGrad).apply(null,arguments)},l._MaxPoolGrad=function(){return(l._MaxPoolGrad=l.asm.MaxPoolGrad).apply(null,arguments)},l._MaxPoolWithArgmax=function(){return(l._MaxPoolWithArgmax=l.asm.MaxPoolWithArgmax).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.Maximum).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.Mean).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.Min).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.Minimum).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.MirrorPad).apply(null,arguments)},l._Mod=function(){return(l._Mod=l.asm.Mod).apply(null,arguments)},l._Multinomial=function(){return(l._Multinomial=l.asm.Multinomial).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.Multiply).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.Neg).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.NonMaxSuppressionV3).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.NonMaxSuppressionV4).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.NonMaxSuppressionV5).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.NotEqual).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.OneHot).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.PadV2).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Pow).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Prelu).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Prod).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.RealDiv).apply(null,arguments)},l._Reciprocal=function(){return(l._Reciprocal=l.asm.Reciprocal).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Relu).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.Relu6).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.ResizeBilinear).apply(null,arguments)},l._ResizeBilinearGrad=function(){return(l._ResizeBilinearGrad=l.asm.ResizeBilinearGrad).apply(null,arguments)},l._ResizeNearestNeighbor=function(){return(l._ResizeNearestNeighbor=l.asm.ResizeNearestNeighbor).apply(null,arguments)},l._ResizeNearestNeighborGrad=function(){return(l._ResizeNearestNeighborGrad=l.asm.ResizeNearestNeighborGrad).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Reverse).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.RotateWithOffset).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Round).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Rsqrt).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.ScatterNd).apply(null,arguments)},l._SearchSorted=function(){return(l._SearchSorted=l.asm.SearchSorted).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.SelectV2).apply(null,arguments)},l._Selu=function(){return(l._Selu=l.asm.Selu).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Sigmoid).apply(null,arguments)},l._Sign=function(){return(l._Sign=l.asm.Sign).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Sin).apply(null,arguments)},l._Sinh=function(){return(l._Sinh=l.asm.Sinh).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Softmax).apply(null,arguments)},l._Softplus=function(){return(l._Softplus=l.asm.Softplus).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.SparseFillEmptyRows).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.SparseReshape).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.SparseSegmentReduction).apply(null,arguments)},l._SparseToDense=function(){return(l._SparseToDense=l.asm.SparseToDense).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Sqrt).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm.Square).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.SquaredDifference).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.Step).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.StridedSlice).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.Sub).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.Sum).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.Tan).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.Tanh).apply(null,arguments)},l._TensorScatterUpdate=function(){return(l._TensorScatterUpdate=l.asm.TensorScatterUpdate).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.Tile).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.TopK).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.Transform).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.Transpose).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm._FusedMatMul).apply(null,arguments)},l._malloc=function(){return(l._malloc=l.asm.malloc).apply(null,arguments)},l._free=function(){return(l._free=l.asm.free).apply(null,arguments)},l.__emscripten_tls_init=function(){return(l.__emscripten_tls_init=l.asm._emscripten_tls_init).apply(null,arguments)};var js=l._pthread_self=function(){return(js=l._pthread_self=l.asm.pthread_self).apply(null,arguments)};l.___errno_location=function(){return(l.___errno_location=l.asm.__errno_location).apply(null,arguments)};var Du=l.__emscripten_thread_init=function(){return(Du=l.__emscripten_thread_init=l.asm._emscripten_thread_init).apply(null,arguments)};l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm._emscripten_thread_crashed).apply(null,arguments)},l._emscripten_main_thread_process_queued_calls=function(){return(l._emscripten_main_thread_process_queued_calls=l.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},l._emscripten_main_browser_thread_id=function(){return(l._emscripten_main_browser_thread_id=l.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var Zi=l._emscripten_run_in_main_runtime_thread_js=function(){return(Zi=l._emscripten_run_in_main_runtime_thread_js=l.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};l._emscripten_dispatch_to_thread_=function(){return(l._emscripten_dispatch_to_thread_=l.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var tf=l.__emscripten_proxy_execute_task_queue=function(){return(tf=l.__emscripten_proxy_execute_task_queue=l.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},$u=l.__emscripten_thread_free_data=function(){return($u=l.__emscripten_thread_free_data=l.asm._emscripten_thread_free_data).apply(null,arguments)},ei=l.__emscripten_thread_exit=function(){return(ei=l.__emscripten_thread_exit=l.asm._emscripten_thread_exit).apply(null,arguments)},Ru=l._emscripten_stack_set_limits=function(){return(Ru=l._emscripten_stack_set_limits=l.asm.emscripten_stack_set_limits).apply(null,arguments)},Ji=l.stackSave=function(){return(Ji=l.stackSave=l.asm.stackSave).apply(null,arguments)},el=l.stackRestore=function(){return(el=l.stackRestore=l.asm.stackRestore).apply(null,arguments)},tl=l.stackAlloc=function(){return(tl=l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)};l.dynCall_iijjiiii=function(){return(l.dynCall_iijjiiii=l.asm.dynCall_iijjiiii).apply(null,arguments)},l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.dynCall_jiji).apply(null,arguments)},l.keepRuntimeAlive=et,l.wasmMemory=P,l.cwrap=ef,l.ExitStatus=ns,l.PThread=we;var qo;Cn=function M(){qo||Fu(),qo||(Cn=M)};function Fu(M){if(Vt>0)return;if(w){d(l),Ut(),startWorker(l);return}if(vn(),Vt>0)return;function K(){qo||(qo=!0,l.calledRun=!0,!Y&&(Ut(),d(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),sn()))}l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),K()},1)):K()}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();Fu();var ti;p&&(ti={uncaughtException:process.listeners("uncaughtException").filter(function(M){return!p.uncaughtException.indexOf(M)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(M){return!p.unhandledRejection.indexOf(M)>-1})});var ni;if(typeof WasmBackendModule<"u")ni=WasmBackendModule;else if(typeof s<"u")ni=s;else throw new Error("Could not find wasm module in post.js");if(ti){var nf=ni._dispose;ni._dispose=function(){nf(),ti.uncaughtException.forEach(function(M){process.removeListener("uncaughtException",M)}),ti.unhandledRejection.forEach(function(M){process.removeListener("unhandledRejection",M)})}}return s.ready}})();e.exports=n})(iD);var lD=iD.exports;const uD=Wi(lD),nre=Dh({__proto__:null,default:uD},[lD]);var rre=`"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"
");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};`,cD={exports:{}};(function(e,t){var n=(()=>{var r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(r=r||__filename),function(s){s=s||{};var o=typeof s<"u"?s:{},a,i;o.ready=new Promise(function(te,ce){a=te,i=ce});var u;typeof process<"u"&&process.listeners&&(u={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var c=Object.assign({},o),l=typeof window=="object",d=typeof importScripts=="function",f=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",p="";function h(te){return o.locateFile?o.locateFile(te,p):p+te}var m,y,g;if(f){var b=ia,w=ia;d?p=w.dirname(p)+"/":p=__dirname+"/",m=(te,ce)=>(te=Le(te)?new URL(te):w.normalize(te),b.readFileSync(te,ce?void 0:"utf8")),g=te=>{var ce=m(te,!0);return ce.buffer||(ce=new Uint8Array(ce)),ce},y=(te,ce,Me)=>{te=Le(te)?new URL(te):w.normalize(te),b.readFile(te,function(we,bt){we?Me(we):ce(bt.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(te){if(!(te instanceof et))throw te}),process.on("unhandledRejection",function(te){throw te}),o.inspect=function(){return"[Emscripten Module object]"}}else(l||d)&&(d?p=self.location.href:typeof document<"u"&&document.currentScript&&(p=document.currentScript.src),r&&(p=r),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",m=te=>{var ce=new XMLHttpRequest;return ce.open("GET",te,!1),ce.send(null),ce.responseText},d&&(g=te=>{var ce=new XMLHttpRequest;return ce.open("GET",te,!1),ce.responseType="arraybuffer",ce.send(null),new Uint8Array(ce.response)}),y=(te,ce,Me)=>{var we=new XMLHttpRequest;we.open("GET",te,!0),we.responseType="arraybuffer",we.onload=()=>{if(we.status==200||we.status==0&&we.response){ce(we.response);return}Me()},we.onerror=Me,we.send(null)});var S=o.print||console.log.bind(console),I=o.printErr||console.warn.bind(console);Object.assign(o,c),c=null,o.arguments&&o.arguments,o.thisProgram&&o.thisProgram,o.quit&&o.quit;var _;o.wasmBinary&&(_=o.wasmBinary),o.noExitRuntime,typeof WebAssembly!="object"&&$e("no native wasm support detected");var C,N=!1,$=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function R(te,ce,Me){ce>>>=0;for(var we=ce+Me,bt=ce;te[bt]&&!(bt>=we);)++bt;if(bt-ce>16&&te.buffer&&$)return $.decode(te.subarray(ce,bt));for(var kt="";ce<bt;){var Ge=te[ce++];if(!(Ge&128)){kt+=String.fromCharCode(Ge);continue}var We=te[ce++]&63;if((Ge&224)==192){kt+=String.fromCharCode((Ge&31)<<6|We);continue}var Xt=te[ce++]&63;if((Ge&240)==224?Ge=(Ge&15)<<12|We<<6|Xt:Ge=(Ge&7)<<18|We<<12|Xt<<6|te[ce++]&63,Ge<65536)kt+=String.fromCharCode(Ge);else{var lr=Ge-65536;kt+=String.fromCharCode(55296|lr>>10,56320|lr&1023)}}return kt}function F(te,ce){return te>>>=0,te?R(X,te,ce):""}function U(te,ce,Me,we){if(Me>>>=0,!(we>0))return 0;for(var bt=Me,kt=Me+we-1,Ge=0;Ge<te.length;++Ge){var We=te.charCodeAt(Ge);if(We>=55296&&We<=57343){var Xt=te.charCodeAt(++Ge);We=65536+((We&1023)<<10)|Xt&1023}if(We<=127){if(Me>=kt)break;ce[Me++>>>0]=We}else if(We<=2047){if(Me+1>=kt)break;ce[Me++>>>0]=192|We>>6,ce[Me++>>>0]=128|We&63}else if(We<=65535){if(Me+2>=kt)break;ce[Me++>>>0]=224|We>>12,ce[Me++>>>0]=128|We>>6&63,ce[Me++>>>0]=128|We&63}else{if(Me+3>=kt)break;ce[Me++>>>0]=240|We>>18,ce[Me++>>>0]=128|We>>12&63,ce[Me++>>>0]=128|We>>6&63,ce[Me++>>>0]=128|We&63}}return ce[Me>>>0]=0,Me-bt}function L(te,ce,Me){return U(te,X,ce,Me)}var H,j,X,Q;function P(te){H=te,o.HEAP8=j=new Int8Array(te),o.HEAP16=new Int16Array(te),o.HEAP32=new Int32Array(te),o.HEAPU8=X=new Uint8Array(te),o.HEAPU16=new Uint16Array(te),o.HEAPU32=Q=new Uint32Array(te),o.HEAPF32=new Float32Array(te),o.HEAPF64=new Float64Array(te)}o.INITIAL_MEMORY;var G=[],Y=[],Z=[];function se(){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)ie(o.preRun.shift());vn(G)}function re(){vn(Y)}function ae(){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;)ve(o.postRun.shift());vn(Z)}function ie(te){G.unshift(te)}function ue(te){Y.unshift(te)}function ve(te){Z.unshift(te)}var pe=0,xe=null;function Se(te){pe++,o.monitorRunDependencies&&o.monitorRunDependencies(pe)}function Ce(te){if(pe--,o.monitorRunDependencies&&o.monitorRunDependencies(pe),pe==0&&xe){var ce=xe;xe=null,ce()}}function $e(te){o.onAbort&&o.onAbort(te),te="Aborted("+te+")",I(te),N=!0,te+=". Build with -sASSERTIONS for more info.";var ce=new WebAssembly.RuntimeError(te);throw i(ce),ce}var Fe="data:application/octet-stream;base64,";function Be(te){return te.startsWith(Fe)}function Le(te){return te.startsWith("file://")}var Ae;Ae="tfjs-backend-wasm.wasm",Be(Ae)||(Ae=h(Ae));function st(te){try{if(te==Ae&&_)return new Uint8Array(_);if(g)return g(te);throw"both async and sync fetching of the wasm failed"}catch(ce){$e(ce)}}function Ze(){if(!_&&(l||d)){if(typeof fetch=="function"&&!Le(Ae))return fetch(Ae,{credentials:"same-origin"}).then(function(te){if(!te.ok)throw"failed to load wasm binary file at '"+Ae+"'";return te.arrayBuffer()}).catch(function(){return st(Ae)});if(y)return new Promise(function(te,ce){y(Ae,function(Me){te(new Uint8Array(Me))},ce)})}return Promise.resolve().then(function(){return st(Ae)})}function Je(){var te={env:Ka,wasi_snapshot_preview1:Ka};function ce(Ge,We){var Xt=Ge.exports;o.asm=Xt,C=o.asm.memory,P(C.buffer),o.asm.__indirect_function_table,ue(o.asm.__wasm_call_ctors),Ce()}Se();function Me(Ge){ce(Ge.instance)}function we(Ge){return Ze().then(function(We){return WebAssembly.instantiate(We,te)}).then(function(We){return We}).then(Ge,function(We){I("failed to asynchronously prepare wasm: "+We),$e(We)})}function bt(){return!_&&typeof WebAssembly.instantiateStreaming=="function"&&!Be(Ae)&&!Le(Ae)&&!f&&typeof fetch=="function"?fetch(Ae,{credentials:"same-origin"}).then(function(Ge){var We=WebAssembly.instantiateStreaming(Ge,te);return We.then(Me,function(Xt){return I("wasm streaming compile failed: "+Xt),I("falling back to ArrayBuffer instantiation"),we(Me)})}):we(Me)}if(o.instantiateWasm)try{var kt=o.instantiateWasm(te,ce);return kt}catch(Ge){I("Module.instantiateWasm callback failed with error: "+Ge),i(Ge)}return bt().catch(i),{}}function et(te){this.name="ExitStatus",this.message="Program terminated with exit("+te+")",this.status=te}function vn(te){for(;te.length>0;)te.shift()(o)}function Ut(){$e("")}function sn(){return 4294901760}function bn(){return sn()}function Mn(te,ce,Me){X.copyWithin(te>>>0,ce>>>0,ce+Me>>>0)}function En(te){try{return C.grow(te-H.byteLength+65535>>>16),P(C.buffer),1}catch{}}function Vt(te){var ce=X.length;te=te>>>0;var Me=sn();if(te>Me)return!1;let we=(Xt,lr)=>Xt+(lr-Xt%lr)%lr;for(var bt=1;bt<=4;bt*=2){var kt=ce*(1+.2/bt);kt=Math.min(kt,te+100663296);var Ge=Math.min(Me,we(Math.max(te,kt),65536)),We=En(Ge);if(We)return!0}return!1}function Cn(te){return 52}function Hn(te,ce,Me,we,bt){return 70}var fo=[null,[],[]];function jn(te,ce){var Me=fo[te];ce===0||ce===10?((te===1?S:I)(R(Me,0)),Me.length=0):Me.push(ce)}function Vo(te,ce,Me,we){for(var bt=0,kt=0;kt<Me;kt++){var Ge=Q[ce>>>2],We=Q[ce+4>>>2];ce+=8;for(var Xt=0;Xt<We;Xt++)jn(te,X[Ge+Xt>>>0]);bt+=We}return Q[we>>>2]=bt,0}function Wr(te){var ce=o["_"+te];return ce}function Ir(te,ce){j.set(te,ce>>>0)}function Ht(te,ce,Me,we,bt){var kt={string:dn=>{var Ur=0;if(dn!=null&&dn!==0){var Za=(dn.length<<2)+1;Ur=ns(Za),L(dn,Ur,Za)}return Ur},array:dn=>{var Ur=ns(dn.length);return Ir(dn,Ur),Ur}};function Ge(dn){return ce==="string"?F(dn):ce==="boolean"?!!dn:dn}var We=Wr(te),Xt=[],lr=0;if(we)for(var _r=0;_r<we.length;_r++){var Ya=kt[Me[_r]];Ya?(lr===0&&(lr=po()),Xt[_r]=Ya(we[_r])):Xt[_r]=we[_r]}var Hs=We.apply(null,Xt);function Qa(dn){return lr!==0&&Xa(lr),Ge(dn)}return Hs=Qa(Hs),Hs}function Ho(te,ce,Me,we){Me=Me||[];var bt=Me.every(Ge=>Ge==="number"||Ge==="boolean"),kt=ce!=="string";return kt&&bt&&!we?Wr(te):function(){return Ht(te,ce,Me,arguments)}}var Ka={abort:Ut,emscripten_get_heap_max:bn,emscripten_memcpy_big:Mn,emscripten_resize_heap:Vt,fd_close:Cn,fd_seek:Hn,fd_write:Vo};Je(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.__wasm_call_ctors).apply(null,arguments)},o._init=function(){return(o._init=o.asm.init).apply(null,arguments)},o._init_with_threads_count=function(){return(o._init_with_threads_count=o.asm.init_with_threads_count).apply(null,arguments)},o._get_threads_count=function(){return(o._get_threads_count=o.asm.get_threads_count).apply(null,arguments)},o._register_tensor=function(){return(o._register_tensor=o.asm.register_tensor).apply(null,arguments)},o._dispose_data=function(){return(o._dispose_data=o.asm.dispose_data).apply(null,arguments)},o._dispose=function(){return(o._dispose=o.asm.dispose).apply(null,arguments)},o._Abs=function(){return(o._Abs=o.asm.Abs).apply(null,arguments)},o._Acos=function(){return(o._Acos=o.asm.Acos).apply(null,arguments)},o._Acosh=function(){return(o._Acosh=o.asm.Acosh).apply(null,arguments)},o._Add=function(){return(o._Add=o.asm.Add).apply(null,arguments)},o._AddN=function(){return(o._AddN=o.asm.AddN).apply(null,arguments)},o._All=function(){return(o._All=o.asm.All).apply(null,arguments)},o._Any=function(){return(o._Any=o.asm.Any).apply(null,arguments)},o._ArgMax=function(){return(o._ArgMax=o.asm.ArgMax).apply(null,arguments)},o._ArgMin=function(){return(o._ArgMin=o.asm.ArgMin).apply(null,arguments)},o._Asin=function(){return(o._Asin=o.asm.Asin).apply(null,arguments)},o._Asinh=function(){return(o._Asinh=o.asm.Asinh).apply(null,arguments)},o._Atan=function(){return(o._Atan=o.asm.Atan).apply(null,arguments)},o._Atan2=function(){return(o._Atan2=o.asm.Atan2).apply(null,arguments)},o._Atanh=function(){return(o._Atanh=o.asm.Atanh).apply(null,arguments)},o._AvgPool=function(){return(o._AvgPool=o.asm.AvgPool).apply(null,arguments)},o._AvgPool3D=function(){return(o._AvgPool3D=o.asm.AvgPool3D).apply(null,arguments)},o._AvgPool3DGrad=function(){return(o._AvgPool3DGrad=o.asm.AvgPool3DGrad).apply(null,arguments)},o._AvgPoolGrad=function(){return(o._AvgPoolGrad=o.asm.AvgPoolGrad).apply(null,arguments)},o._BatchMatMul=function(){return(o._BatchMatMul=o.asm.BatchMatMul).apply(null,arguments)},o._Bincount=function(){return(o._Bincount=o.asm.Bincount).apply(null,arguments)},o._BitwiseAnd=function(){return(o._BitwiseAnd=o.asm.BitwiseAnd).apply(null,arguments)},o._Ceil=function(){return(o._Ceil=o.asm.Ceil).apply(null,arguments)},o._ClipByValue=function(){return(o._ClipByValue=o.asm.ClipByValue).apply(null,arguments)},o._Conv2D=function(){return(o._Conv2D=o.asm.Conv2D).apply(null,arguments)},o._Conv2DBackpropInput=function(){return(o._Conv2DBackpropInput=o.asm.Conv2DBackpropInput).apply(null,arguments)},o._Conv3D=function(){return(o._Conv3D=o.asm.Conv3D).apply(null,arguments)},o._Conv3DBackpropFilterV2=function(){return(o._Conv3DBackpropFilterV2=o.asm.Conv3DBackpropFilterV2).apply(null,arguments)},o._Conv3DBackpropInputV2=function(){return(o._Conv3DBackpropInputV2=o.asm.Conv3DBackpropInputV2).apply(null,arguments)},o._Cos=function(){return(o._Cos=o.asm.Cos).apply(null,arguments)},o._Cosh=function(){return(o._Cosh=o.asm.Cosh).apply(null,arguments)},o._CropAndResize=function(){return(o._CropAndResize=o.asm.CropAndResize).apply(null,arguments)},o._Cumprod=function(){return(o._Cumprod=o.asm.Cumprod).apply(null,arguments)},o._Cumsum=function(){return(o._Cumsum=o.asm.Cumsum).apply(null,arguments)},o._DenseBincount=function(){return(o._DenseBincount=o.asm.DenseBincount).apply(null,arguments)},o._DepthToSpace=function(){return(o._DepthToSpace=o.asm.DepthToSpace).apply(null,arguments)},o._DepthwiseConv2dNative=function(){return(o._DepthwiseConv2dNative=o.asm.DepthwiseConv2dNative).apply(null,arguments)},o._Diag=function(){return(o._Diag=o.asm.Diag).apply(null,arguments)},o._Dilation2D=function(){return(o._Dilation2D=o.asm.Dilation2D).apply(null,arguments)},o._Dilation2DBackpropFilter=function(){return(o._Dilation2DBackpropFilter=o.asm.Dilation2DBackpropFilter).apply(null,arguments)},o._Dilation2DBackpropInput=function(){return(o._Dilation2DBackpropInput=o.asm.Dilation2DBackpropInput).apply(null,arguments)},o._Elu=function(){return(o._Elu=o.asm.Elu).apply(null,arguments)},o._EluGrad=function(){return(o._EluGrad=o.asm.EluGrad).apply(null,arguments)},o._Equal=function(){return(o._Equal=o.asm.Equal).apply(null,arguments)},o._Erf=function(){return(o._Erf=o.asm.Erf).apply(null,arguments)},o._Exp=function(){return(o._Exp=o.asm.Exp).apply(null,arguments)},o._Expm1=function(){return(o._Expm1=o.asm.Expm1).apply(null,arguments)},o._FlipLeftRight=function(){return(o._FlipLeftRight=o.asm.FlipLeftRight).apply(null,arguments)},o._Floor=function(){return(o._Floor=o.asm.Floor).apply(null,arguments)},o._FloorDiv=function(){return(o._FloorDiv=o.asm.FloorDiv).apply(null,arguments)},o._FusedBatchNorm=function(){return(o._FusedBatchNorm=o.asm.FusedBatchNorm).apply(null,arguments)},o._FusedConv2D=function(){return(o._FusedConv2D=o.asm.FusedConv2D).apply(null,arguments)},o._FusedDepthwiseConv2D=function(){return(o._FusedDepthwiseConv2D=o.asm.FusedDepthwiseConv2D).apply(null,arguments)},o._Gather=function(){return(o._Gather=o.asm.Gather).apply(null,arguments)},o._GatherNd=function(){return(o._GatherNd=o.asm.GatherNd).apply(null,arguments)},o._Greater=function(){return(o._Greater=o.asm.Greater).apply(null,arguments)},o._GreaterEqual=function(){return(o._GreaterEqual=o.asm.GreaterEqual).apply(null,arguments)},o._IsFinite=function(){return(o._IsFinite=o.asm.IsFinite).apply(null,arguments)},o._IsInf=function(){return(o._IsInf=o.asm.IsInf).apply(null,arguments)},o._IsNan=function(){return(o._IsNan=o.asm.IsNan).apply(null,arguments)},o._LRN=function(){return(o._LRN=o.asm.LRN).apply(null,arguments)},o._LRNGrad=function(){return(o._LRNGrad=o.asm.LRNGrad).apply(null,arguments)},o._LeakyRelu=function(){return(o._LeakyRelu=o.asm.LeakyRelu).apply(null,arguments)},o._Less=function(){return(o._Less=o.asm.Less).apply(null,arguments)},o._LessEqual=function(){return(o._LessEqual=o.asm.LessEqual).apply(null,arguments)},o._LinSpace=function(){return(o._LinSpace=o.asm.LinSpace).apply(null,arguments)},o._Log=function(){return(o._Log=o.asm.Log).apply(null,arguments)},o._Log1p=function(){return(o._Log1p=o.asm.Log1p).apply(null,arguments)},o._LogicalAnd=function(){return(o._LogicalAnd=o.asm.LogicalAnd).apply(null,arguments)},o._LogicalNot=function(){return(o._LogicalNot=o.asm.LogicalNot).apply(null,arguments)},o._LogicalOr=function(){return(o._LogicalOr=o.asm.LogicalOr).apply(null,arguments)},o._LogicalXor=function(){return(o._LogicalXor=o.asm.LogicalXor).apply(null,arguments)},o._Max=function(){return(o._Max=o.asm.Max).apply(null,arguments)},o._MaxPool=function(){return(o._MaxPool=o.asm.MaxPool).apply(null,arguments)},o._MaxPool3D=function(){return(o._MaxPool3D=o.asm.MaxPool3D).apply(null,arguments)},o._MaxPool3DGrad=function(){return(o._MaxPool3DGrad=o.asm.MaxPool3DGrad).apply(null,arguments)},o._MaxPoolGrad=function(){return(o._MaxPoolGrad=o.asm.MaxPoolGrad).apply(null,arguments)},o._MaxPoolWithArgmax=function(){return(o._MaxPoolWithArgmax=o.asm.MaxPoolWithArgmax).apply(null,arguments)},o._Maximum=function(){return(o._Maximum=o.asm.Maximum).apply(null,arguments)},o._Mean=function(){return(o._Mean=o.asm.Mean).apply(null,arguments)},o._Min=function(){return(o._Min=o.asm.Min).apply(null,arguments)},o._Minimum=function(){return(o._Minimum=o.asm.Minimum).apply(null,arguments)},o._MirrorPad=function(){return(o._MirrorPad=o.asm.MirrorPad).apply(null,arguments)},o._Mod=function(){return(o._Mod=o.asm.Mod).apply(null,arguments)},o._Multinomial=function(){return(o._Multinomial=o.asm.Multinomial).apply(null,arguments)},o._Multiply=function(){return(o._Multiply=o.asm.Multiply).apply(null,arguments)},o._Neg=function(){return(o._Neg=o.asm.Neg).apply(null,arguments)},o._NonMaxSuppressionV3=function(){return(o._NonMaxSuppressionV3=o.asm.NonMaxSuppressionV3).apply(null,arguments)},o._NonMaxSuppressionV4=function(){return(o._NonMaxSuppressionV4=o.asm.NonMaxSuppressionV4).apply(null,arguments)},o._NonMaxSuppressionV5=function(){return(o._NonMaxSuppressionV5=o.asm.NonMaxSuppressionV5).apply(null,arguments)},o._NotEqual=function(){return(o._NotEqual=o.asm.NotEqual).apply(null,arguments)},o._OneHot=function(){return(o._OneHot=o.asm.OneHot).apply(null,arguments)},o._PadV2=function(){return(o._PadV2=o.asm.PadV2).apply(null,arguments)},o._Pow=function(){return(o._Pow=o.asm.Pow).apply(null,arguments)},o._Prelu=function(){return(o._Prelu=o.asm.Prelu).apply(null,arguments)},o._Prod=function(){return(o._Prod=o.asm.Prod).apply(null,arguments)},o._RealDiv=function(){return(o._RealDiv=o.asm.RealDiv).apply(null,arguments)},o._Reciprocal=function(){return(o._Reciprocal=o.asm.Reciprocal).apply(null,arguments)},o._Relu=function(){return(o._Relu=o.asm.Relu).apply(null,arguments)},o._Relu6=function(){return(o._Relu6=o.asm.Relu6).apply(null,arguments)},o._ResizeBilinear=function(){return(o._ResizeBilinear=o.asm.ResizeBilinear).apply(null,arguments)},o._ResizeBilinearGrad=function(){return(o._ResizeBilinearGrad=o.asm.ResizeBilinearGrad).apply(null,arguments)},o._ResizeNearestNeighbor=function(){return(o._ResizeNearestNeighbor=o.asm.ResizeNearestNeighbor).apply(null,arguments)},o._ResizeNearestNeighborGrad=function(){return(o._ResizeNearestNeighborGrad=o.asm.ResizeNearestNeighborGrad).apply(null,arguments)},o._Reverse=function(){return(o._Reverse=o.asm.Reverse).apply(null,arguments)},o._RotateWithOffset=function(){return(o._RotateWithOffset=o.asm.RotateWithOffset).apply(null,arguments)},o._Round=function(){return(o._Round=o.asm.Round).apply(null,arguments)},o._Rsqrt=function(){return(o._Rsqrt=o.asm.Rsqrt).apply(null,arguments)},o._ScatterNd=function(){return(o._ScatterNd=o.asm.ScatterNd).apply(null,arguments)},o._SearchSorted=function(){return(o._SearchSorted=o.asm.SearchSorted).apply(null,arguments)},o._SelectV2=function(){return(o._SelectV2=o.asm.SelectV2).apply(null,arguments)},o._Selu=function(){return(o._Selu=o.asm.Selu).apply(null,arguments)},o._Sigmoid=function(){return(o._Sigmoid=o.asm.Sigmoid).apply(null,arguments)},o._Sign=function(){return(o._Sign=o.asm.Sign).apply(null,arguments)},o._Sin=function(){return(o._Sin=o.asm.Sin).apply(null,arguments)},o._Sinh=function(){return(o._Sinh=o.asm.Sinh).apply(null,arguments)},o._Softmax=function(){return(o._Softmax=o.asm.Softmax).apply(null,arguments)},o._Softplus=function(){return(o._Softplus=o.asm.Softplus).apply(null,arguments)},o._SparseFillEmptyRows=function(){return(o._SparseFillEmptyRows=o.asm.SparseFillEmptyRows).apply(null,arguments)},o._SparseReshape=function(){return(o._SparseReshape=o.asm.SparseReshape).apply(null,arguments)},o._SparseSegmentReduction=function(){return(o._SparseSegmentReduction=o.asm.SparseSegmentReduction).apply(null,arguments)},o._SparseToDense=function(){return(o._SparseToDense=o.asm.SparseToDense).apply(null,arguments)},o._Sqrt=function(){return(o._Sqrt=o.asm.Sqrt).apply(null,arguments)},o._Square=function(){return(o._Square=o.asm.Square).apply(null,arguments)},o._SquaredDifference=function(){return(o._SquaredDifference=o.asm.SquaredDifference).apply(null,arguments)},o._Step=function(){return(o._Step=o.asm.Step).apply(null,arguments)},o._StridedSlice=function(){return(o._StridedSlice=o.asm.StridedSlice).apply(null,arguments)},o._Sub=function(){return(o._Sub=o.asm.Sub).apply(null,arguments)},o._Sum=function(){return(o._Sum=o.asm.Sum).apply(null,arguments)},o._Tan=function(){return(o._Tan=o.asm.Tan).apply(null,arguments)},o._Tanh=function(){return(o._Tanh=o.asm.Tanh).apply(null,arguments)},o._TensorScatterUpdate=function(){return(o._TensorScatterUpdate=o.asm.TensorScatterUpdate).apply(null,arguments)},o._Tile=function(){return(o._Tile=o.asm.Tile).apply(null,arguments)},o._TopK=function(){return(o._TopK=o.asm.TopK).apply(null,arguments)},o._Transform=function(){return(o._Transform=o.asm.Transform).apply(null,arguments)},o._Transpose=function(){return(o._Transpose=o.asm.Transpose).apply(null,arguments)},o.__FusedMatMul=function(){return(o.__FusedMatMul=o.asm._FusedMatMul).apply(null,arguments)},o._malloc=function(){return(o._malloc=o.asm.malloc).apply(null,arguments)},o._free=function(){return(o._free=o.asm.free).apply(null,arguments)},o.___errno_location=function(){return(o.___errno_location=o.asm.__errno_location).apply(null,arguments)};var po=o.stackSave=function(){return(po=o.stackSave=o.asm.stackSave).apply(null,arguments)},Xa=o.stackRestore=function(){return(Xa=o.stackRestore=o.asm.stackRestore).apply(null,arguments)},ns=o.stackAlloc=function(){return(ns=o.stackAlloc=o.asm.stackAlloc).apply(null,arguments)};o.dynCall_iijjiiii=function(){return(o.dynCall_iijjiiii=o.asm.dynCall_iijjiiii).apply(null,arguments)},o.dynCall_jiji=function(){return(o.dynCall_jiji=o.asm.dynCall_jiji).apply(null,arguments)},o.cwrap=Ho;var ho;xe=function te(){ho||Gn(),ho||(xe=te)};function Gn(te){if(pe>0||(se(),pe>0))return;function ce(){ho||(ho=!0,o.calledRun=!0,!N&&(re(),a(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),ae()))}o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),ce()},1)):ce()}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();Gn();var _t;u&&(_t={uncaughtException:process.listeners("uncaughtException").filter(function(te){return!u.uncaughtException.indexOf(te)>-1}),unhandledRejection:process.listeners("unhandledRejection").filter(function(te){return!u.unhandledRejection.indexOf(te)>-1})});var Vs;if(typeof s<"u")Vs=s;else if(typeof WasmBackendModuleThreadedSimd<"u")Vs=WasmBackendModuleThreadedSimd;else throw new Error("Could not find wasm module in post.js");if(_t){var ir=Vs._dispose;Vs._dispose=function(){ir(),_t.uncaughtException.forEach(function(te){process.removeListener("uncaughtException",te)}),_t.unhandledRejection.forEach(function(te){process.removeListener("unhandledRejection",te)})}}return s.ready}})();e.exports=n})(cD);var dD=cD.exports;const fD=Wi(dD),sre=Dh({__proto__:null,default:fD},[dD]);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zk=uD||nre,ore=fD||sre;class are extends dw{constructor(t){super(),this.wasm=t,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(pre),this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new WC(this,a1())}write(t,n,r){const s={id:this.dataIdNextNumber++};return this.move(s,t,n,r,1),s}numDataIds(){return this.dataIdMap.numDataIds()}async time(t){const n=Ca();return t(),{kernelMs:Ca()-n}}move(t,n,r,s,o){const a=this.dataIdNextNumber++;if(s==="string"){const l=n;this.dataIdMap.set(t,{id:a,stringBytes:l,shape:r,dtype:s,memoryOffset:null,refCount:o});return}const i=ee(r),u=i*od(s),c=this.wasm._malloc(u)>>>0;this.dataIdMap.set(t,{id:a,memoryOffset:c,shape:r,dtype:s,refCount:o}),this.wasm.tfjs.registerTensor(a,i,c),n!=null&&this.wasm.HEAPU8.set(new Uint8Array(n.buffer,n.byteOffset,u),c)}async read(t){return this.readSync(t)}readSync(t,n,r){const{memoryOffset:s,dtype:o,shape:a,stringBytes:i}=this.dataIdMap.get(t);if(o==="string")return(n==null||n===0)&&(r==null||r>=i.length)?i:i.slice(n,r);n=n||0,r=r||ee(a);const u=od(o),c=this.wasm.HEAPU8.slice(s+n*u,s+r*u);return ure(c.buffer,o)}disposeData(t,n=!1){if(this.dataIdMap.has(t)){const r=this.dataIdMap.get(t);if(r.refCount--,!n&&r.refCount>0)return!1;this.wasm._free(r.memoryOffset),this.wasm.tfjs.disposeData(r.id),this.dataIdMap.delete(t)}return!0}refCount(t){return this.dataIdMap.has(t)?this.dataIdMap.get(t).refCount:0}incRef(t){const n=this.dataIdMap.get(t);n!=null&&n.refCount++}floatPrecision(){return 32}getMemoryOffset(t){return this.dataIdMap.get(t).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(t,n,r,s){let o;if(r==null)o=this.write(s??null,t,n);else{const a=this.dataIdNextNumber++;o={id:a},this.dataIdMap.set(o,{id:a,memoryOffset:r,shape:t,dtype:n,refCount:1});const i=ee(t);this.wasm.tfjs.registerTensor(a,i,r)}return{dataId:o,shape:t,dtype:n}}typedArrayFromHeap({shape:t,dtype:n,dataId:r}){const s=this.wasm.HEAPU8.buffer,{memoryOffset:o}=this.dataIdMap.get(r),a=ee(t);switch(n){case"float32":return new Float32Array(s,o,a);case"int32":return new Int32Array(s,o,a);case"bool":return new Uint8Array(s,o,a);default:throw new Error(`Unknown dtype ${n}`)}}}function ire(e){return(t,n)=>(ZB(e,{credentials:"same-origin"}).then(r=>{r.ok||t.env.a(`failed to load wasm binary file at '${e}'`),r.arrayBuffer().then(s=>{WebAssembly.instantiate(s,t).then(o=>{n(o.instance,o.module)})})}),{})}function Wk(e,t,n){let r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),Nc!=null&&Nc[r]!=null?Nc[r]:n+r}async function lre(){const[e,t]=await Promise.all([Ye().getAsync("WASM_HAS_SIMD_SUPPORT"),Ye().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{const s={};s.locateFile=(i,u)=>{if(i.endsWith(".worker.js")){const c=rre.replace(/\n/g,"\\n"),l=new Blob([c],{type:"application/javascript"});return URL.createObjectURL(l)}return i.endsWith(".wasm")?Wk(e,t,dc??u):u+i},pD&&(s.instantiateWasm=ire(Wk(e,t,dc??"")));let o=!1;s.onAbort=()=>{if(o||gp)return;gp=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})};let a;t&&e&&dre==null?(s.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+zk.toString()],{type:"text/javascript"}),a=zk(s)):a=ore(s),a.then(i=>{o=!0,gp=!1;const u=null;i.tfjs={init:i.cwrap("init",null,[]),initWithThreadsCount:i.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:i.cwrap("get_threads_count","number",[]),registerTensor:i.cwrap("register_tensor",null,["number","number","number"]),disposeData:i.cwrap("dispose_data",u,["number"]),dispose:i.cwrap("dispose",u,[])},n({wasm:i})}).catch(r)})}function ure(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${t}`)}}const cre=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let dre=null,dc=null,Nc={},gp=!1,pD=!1;function fre(e,t=!1){if(gp)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if(typeof e=="string")dc=e;else{Nc=e;const n=cre.filter(r=>Nc[r]==null);if(n.length>0)throw new Error(`There were no entries found for the following binaries: ${n.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}pD=t}let pre=-1;/** @license See the LICENSE file. */const hre="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mre=2;VT("wasm",async()=>{const{wasm:e}=await lre();return new are(e)},mre);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gre=_N;class py extends dw{nextDataId(){return py.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new WC(this,a1())}write(t,n,r){this.firstUse&&(this.firstUse=!1,Ye().get("IS_NODE")&&ui(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:t,dtype:r,refCount:1}),s}makeTensorInfo(t,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&tm(r[0])){const o=r.map(a=>ki(a));s=this.write(o,t,n)}else s=this.write(r,t,n);return{dataId:s,shape:t,dtype:n}}refCount(t){return this.data.has(t)?this.data.get(t).refCount:0}incRef(t){const n=this.data.get(t);n.refCount++}decRef(t){if(this.data.has(t)){const n=this.data.get(t);n.refCount--}}move(t,n,r,s,o){this.data.set(t,{values:n,dtype:s,refCount:o})}numDataIds(){return this.data.numDataIds()}async read(t){return this.readSync(t)}readSync(t){const{dtype:n,complexTensorInfos:r}=this.data.get(t);if(n==="complex64"){const s=this.readSync(r.real.dataId),o=this.readSync(r.imag.dataId);return su(s,o)}return FB(this.data.get(t).values,n)}bufferSync(t){const n=this.readSync(t.dataId);if(t.dtype==="string")try{const r=n.map(s=>ud(s));return rt(t.shape,t.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return rt(t.shape,t.dtype,n)}makeOutput(t,n,r){return a1().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,t),this)}disposeData(t,n=!1){if(this.data.has(t)){if(this.data.get(t).refCount--,!n&&this.data.get(t).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(t);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(t)}return!0}disposeIntermediateTensorInfo(t){this.disposeData(t.dataId)}async time(t){const n=Ca();return t(),{kernelMs:Ca()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(t){_e([t],"where");const n=this.readSync(t.dataId);return gre(t.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}py.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */VT("cpu",()=>new py,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hD=vt(Dm,e=>e>=0?e:Math.exp(e)-1),yre={kernelName:Dm,backendName:"cpu",kernelFunc:hD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mD(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{alpha:o}=r;_e([s],"leakyRelu");const a=ee(s.shape),i=n.data.get(s.dataId).values,u=nr("float32",a);for(let c=0;c<i.length;c++)u[c]=i[c]<0?o*i[c]:i[c];return n.makeTensorInfo(s.shape,"float32",u)}const vre={kernelName:qm,backendName:"cpu",kernelFunc:mD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bre=rn((e,t)=>e<0?t*e:e);function gD(e){const{inputs:t,backend:n}=e,{x:r,alpha:s}=t;_e([r,s],"prelu");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,[i,u]=bre(r.shape,s.shape,o,a,"float32");return n.makeTensorInfo(u,"float32",i)}const wre={kernelName:wg,backendName:"cpu",kernelFunc:gD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yD=vt(kg,e=>Math.max(0,e)),Sre={kernelName:kg,backendName:"cpu",kernelFunc:yD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vD=vt(Eg,e=>Math.min(Math.max(0,e),6)),xre={kernelName:Eg,backendName:"cpu",kernelFunc:vD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sh(e,t,n,r,s){if(n==="linear")return io({inputs:{x:t},backend:e});if(n==="relu")return yD({inputs:{x:t},backend:e});if(n==="elu")return hD({inputs:{x:t},backend:e});if(n==="relu6")return vD({inputs:{x:t},backend:e});if(n==="prelu")return gD({inputs:{x:t,alpha:r},backend:e});if(n==="leakyrelu")return mD({inputs:{x:t},backend:e,attrs:{alpha:s}});if(n==="sigmoid")return MA({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dt(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{shape:o}=r,a=ee(s.shape),i=UC(o,a),u=ee(i);D(a===u,()=>`The new shape (${i}) has ${u} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=i,d.shape=i}return{dataId:s.dataId,shape:i,dtype:s.dtype}}const kre={kernelName:Ow,backendName:"cpu",kernelFunc:Dt};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bD(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:o}=t,{transposeA:a,transposeB:i}=r;_e([s,o],"matMul");const u=s.shape.length,c=o.shape.length,l=a?s.shape[u-2]:s.shape[u-1],d=i?o.shape[c-1]:o.shape[c-2],f=a?s.shape[u-1]:s.shape[u-2],p=i?o.shape[c-2]:o.shape[c-1],h=s.shape.slice(0,-2),m=o.shape.slice(0,-2),y=ee(h),g=ee(m),w=At(s.shape.slice(0,-2),o.shape.slice(0,-2)).concat([f,p]);D(l===d,()=>`Error in matMul: inner shapes (${l}) and (${d}) of Tensors with shapes ${s.shape} and ${o.shape} and transposeA=${a} and transposeB=${i} must match.`);const S=a?[y,l,f]:[y,f,l],I=i?[g,p,d]:[g,d,p],_=Dt({inputs:{x:s},backend:n,attrs:{shape:S}}),C=Dt({inputs:{x:o},backend:n,attrs:{shape:I}}),N=a?_.shape[1]:_.shape[2],$=a?_.shape[2]:_.shape[1],R=i?C.shape[1]:C.shape[2],F=Math.max(y,g),U=n.data.get(_.dataId).values,L=n.data.get(C.dataId).values,H=Ee(_.shape),j=Ee(C.shape),[X,Q,P]=a?[H[0],1,H[1]]:[H[0],H[1],1],[G,Y,Z]=i?[1,j[1],j[0]]:[j[1],1,j[0]],se=$*R,re=rt([F,$,R],_.dtype),ae=re.values,ie=n.blockSize;for(let ue=0;ue<F;ue++){const ve=ue%y,pe=ue%g;for(let xe=0;xe<$;xe+=ie){const Se=Math.min(xe+ie,$);for(let Ce=0;Ce<R;Ce+=ie){const $e=Math.min(Ce+ie,R);for(let Fe=0;Fe<N;Fe+=ie){const Be=Math.min(Fe+ie,N);for(let Le=xe;Le<Se;Le++)for(let Ae=Ce;Ae<$e;Ae++){let st=0;for(let Ze=Fe;Ze<Be;Ze++){const Je=U[ve*X+Le*Q+Ze*P],et=L[Ze*G+Ae*Y+pe*Z];st+=Je*et}ae[ue*se+(Le*R+Ae)]+=st}}}}}return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(C),n.makeTensorInfo(w,re.dtype,re.values)}const Ire={kernelName:pm,backendName:"cpu",kernelFunc:bD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re(e){const{inputs:t,backend:n,attrs:r}=e,{a:s,b:o,bias:a,preluActivationWeights:i}=t,{transposeA:u,transposeB:c,activation:l,leakyreluAlpha:d}=r;let f,p,h;const m=[];f=bD({inputs:{a:s,b:o},attrs:{transposeA:u,transposeB:c},backend:n}),a&&(p=ou({inputs:{a:f,b:a},backend:n}),m.push(f),f=p),l&&(h=Sh(n,f,l,i,d),m.push(f),f=h);for(const g of m)n.disposeIntermediateTensorInfo(g);return f}const Ere={kernelName:ad,backendName:"cpu",kernelFunc:_re};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cre=vt(nm,e=>Math.acos(e)),Tre={kernelName:nm,backendName:"cpu",kernelFunc:Cre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nre=vt(rm,e=>Math.acosh(e)),Are={kernelName:rm,backendName:"cpu",kernelFunc:Nre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dre(e){const{inputs:t,backend:n}=e,r=t;_e(t,"addN");const s=r.map(i=>n.data.get(i.dataId).values),o=rt(r[0].shape,r[0].dtype),a=o.values;for(let i=0;i<r.length;i++){const u=s[i];for(let c=0;c<a.length;c++)a[c]+=u[c]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}const $re={kernelName:sm,backendName:"cpu",kernelFunc:Dre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rre(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r;_e(s,"all");const i=Kt(o,s.shape);let u=i;const c=ts(u,s.shape.length);let l=s;c!=null&&(l=vr({inputs:{x:s},backend:n,attrs:{perm:c}}),u=ar(u.length,s.shape.length)),or("all",u,l.shape.length);const[d,f]=sr(l.shape,u),p=ee(f),h=Vn(ee(d),l.dtype),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const b=g*p;let w=m[b];for(let S=0;S<p;++S){const I=m[b+S];w=w&&I}h[g]=w}c!=null&&n.disposeIntermediateTensorInfo(l);const y=n.makeTensorInfo(d,l.dtype,h);if(a){const g=Rn(d,i),b=Dt({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),b}return y}const Fre={kernelName:om,backendName:"cpu",kernelFunc:Rre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mre(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r;_e(s,"any");const i=Kt(o,s.shape);let u=i;const c=ts(u,s.shape.length);let l=s;c!=null&&(l=vr({inputs:{x:s},backend:n,attrs:{perm:c}}),u=ar(u.length,s.shape.length)),or("any",u,l.shape.length);const[d,f]=sr(l.shape,u),p=ee(f),h=Vn(ee(d),l.dtype),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const b=g*p;let w=m[b];for(let S=0;S<p;++S){const I=m[b+S];w=w||I}h[g]=w}c!=null&&n.disposeIntermediateTensorInfo(l);const y=n.makeTensorInfo(d,l.dtype,h);if(a){const g=Rn(d,i),b=Dt({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),b}return y}const Ore={kernelName:am,backendName:"cpu",kernelFunc:Mre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pre(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o}=r;_e(s,"argMax");let a=Kt(o,s.shape);const i=ts(a,s.shape.length);let u=s;const c=[];i!=null&&(u=vr({inputs:{x:s},backend:n,attrs:{perm:i}}),c.push(u),a=ar(a.length,u.shape.length)),a=[a[0]],or("argMax",a,u.shape.length);const[l,d]=sr(u.shape,a),f=ee(l),p=Vn(f,"int32"),h=ee(d),m=n.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const g=y*h;let b=m[g],w=0;for(let S=0;S<h;++S){const I=m[g+S];I>b&&(b=I,w=S)}p[y]=w}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(l,"int32",p)}const Bre={kernelName:gw,backendName:"cpu",kernelFunc:Pre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lre(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o}=r;_e(s,"argMin");let a=Kt(o,s.shape);const i=ts(a,s.shape.length);let u=s;const c=[];i!=null&&(u=vr({inputs:{x:s},backend:n,attrs:{perm:i}}),c.push(u),a=ar(a.length,u.shape.length)),a=[a[0]],or("argMin",a,u.shape.length);const[l,d]=sr(u.shape,a),f=ee(l),p=Vn(f,"int32"),h=ee(d),m=n.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const g=y*h;let b=m[g],w=0;for(let S=0;S<h;++S){const I=m[g+S];I<b&&(b=I,w=S)}p[y]=w}return c.forEach(y=>n.disposeIntermediateTensorInfo(y)),n.makeTensorInfo(l,"int32",p)}const zre={kernelName:yw,backendName:"cpu",kernelFunc:Lre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wre=vt(im,e=>Math.asin(e)),Ure={kernelName:im,backendName:"cpu",kernelFunc:Wre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vre=vt(lm,e=>Math.asinh(e)),Hre={kernelName:lm,backendName:"cpu",kernelFunc:Vre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jre=vt(um,e=>Math.atan(e)),Gre={kernelName:um,backendName:"cpu",kernelFunc:jre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qre=rn((e,t)=>Math.atan2(e,t)),Kre=yn(dm,qre),Xre={kernelName:dm,backendName:"cpu",kernelFunc:Kre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yre=vt(cm,e=>Math.atanh(e)),Qre={kernelName:cm,backendName:"cpu",kernelFunc:Yre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function T2(e,t,n,r,s,o){const a=s.strideHeight,i=s.strideWidth,u=s.dilationHeight,c=s.dilationWidth,l=s.effectiveFilterHeight,d=s.effectiveFilterWidth,f=s.padInfo.top,p=s.padInfo.left,h=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=rt(s.outShape,n),y=m.values,g=s.outShape[1]*s.outShape[2]*s.outShape[3],b=s.outShape[2]*s.outShape[3],w=s.outShape[3];for(let S=0;S<s.batchSize;++S){const I=S*g,_=S*r[0];for(let C=0;C<s.inChannels;++C)for(let N=0;N<s.outHeight;++N){const $=N*a-f,R=Math.max(0,$),F=Math.min(s.inHeight,l+$),U=I+N*b;for(let L=0;L<s.outWidth;++L){const H=L*i-p,j=Math.max(0,H),X=Math.min(s.inWidth,d+H);let Q=h,P=0,G=0;for(let Z=R;Z<F;Z+=u){const se=_+Z*r[1];for(let re=j;re<X;re+=c){const ae=se+re*r[2],ie=e[ae+C];o==="max"&&ie>Q?Q=ie:o==="avg"&&(P+=ie,G++)}if(isNaN(Q))break}const Y=U+L*w+C;y[Y]=o==="avg"?P/G:Q}}}return m}function wD(e,t,n,r,s=!1,o=!1){const a=rt(r.outShape,"int32"),i=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=rt(t,n,e);for(let y=0;y<r.batchSize;++y)for(let g=0;g<r.inChannels;++g)for(let b=0;b<r.outHeight;++b){const w=b*i-p;let S=w;for(;S<0;)S+=c;const I=Math.min(r.inHeight,d+w);for(let _=0;_<r.outWidth;++_){const C=_*u-h;let N=C;for(;N<0;)N+=l;const $=Math.min(r.inWidth,f+C);let R=Number.NEGATIVE_INFINITY,F=-1;for(let U=S;U<I;U+=c){const L=U-w;for(let H=N;H<$;H+=l){const j=H-C,X=m.get(y,U,H,g);X>R&&(R=X,s?F=o?((y*r.inHeight+U)*r.inWidth+H)*r.inChannels+g:(U*r.inWidth+H)*r.inChannels+g:F=L*f+j)}}a.set(F,y,b,_,g)}}return a}function SD(e,t,n,r,s,o){const a=s.strideDepth,i=s.strideHeight,u=s.strideWidth,c=s.dilationDepth,l=s.dilationHeight,d=s.dilationWidth,f=s.effectiveFilterDepth,p=s.effectiveFilterHeight,h=s.effectiveFilterWidth,m=s.padInfo.front,y=s.padInfo.top,g=s.padInfo.left,b=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,w=rt(s.outShape,n),S=w.values,I=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],_=s.outShape[2]*s.outShape[3]*s.outShape[4],C=s.outShape[3]*s.outShape[4],N=s.outShape[4];for(let $=0;$<s.batchSize;++$){const R=$*I,F=$*r[0];for(let U=0;U<s.inChannels;++U)for(let L=0;L<s.outDepth;++L){const H=L*a-m;let j=H;for(;j<0;)j+=c;const X=Math.min(s.inDepth,f+H),Q=R+L*_;for(let P=0;P<s.outHeight;++P){const G=P*i-y;let Y=G;for(;Y<0;)Y+=l;const Z=Math.min(s.inHeight,p+G),se=Q+P*C;for(let re=0;re<s.outWidth;++re){const ae=re*u-g;let ie=ae;for(;ie<0;)ie+=d;const ue=Math.min(s.inWidth,h+ae),ve=se+re*N;let pe=b,xe=0,Se=0;for(let $e=j;$e<X;$e+=c){const Fe=F+$e*r[1];for(let Be=Y;Be<Z;Be+=l){const Le=Fe+Be*r[2];for(let Ae=ie;Ae<ue;Ae+=d){const st=Le+Ae*r[3],Ze=e[st+U];if(o==="max"&&Ze>pe?pe=Ze:o==="avg"&&(xe+=Ze,Se++),isNaN(pe))break}if(isNaN(pe))break}if(isNaN(pe))break}const Ce=ve+U;S[Ce]=o==="avg"?xe/Math.max(Se,1):pe}}}}return w}function Zre(e,t){const n=rt(t.outShape,"int32"),r=t.strideDepth,s=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,i=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let y=0;y<t.inChannels;++y)for(let g=0;g<t.outDepth;++g){const b=g*r-f;let w=b;for(;w<0;)w+=a;const S=Math.min(t.inDepth,c+b);for(let I=0;I<t.outHeight;++I){const _=I*s-p;let C=_;for(;C<0;)C+=i;const N=Math.min(t.inHeight,l+_);for(let $=0;$<t.outWidth;++$){const R=$*o-h;let F=R;for(;F<0;)F+=u;const U=Math.min(t.inWidth,d+R);let L=Number.NEGATIVE_INFINITY,H=-1;for(let j=w;j<S;j+=a){const X=j-b;for(let Q=C;Q<N;Q+=i){const P=Q-_;for(let G=F;G<U;G+=u){const Y=G-R,Z=e.get(m,j,Q,G,y);Z>=L&&(L=Z,H=X*l*d+P*l+Y)}}}n.set(H,m,g,I,$,y)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jre(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;_e(s,"avgPool");const{filterSize:o,strides:a,pad:i,dimRoundingMode:u}=r,c=1;D(xs(a,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const l=Ws(s.shape,o,a,c,i,u);let d;if(l.filterWidth===1&&l.filterHeight===1&&ws(l.inShape,l.outShape))d=io({inputs:{x:s},backend:n});else{const f=n.data.get(s.dataId).values,p=Ee(s.shape),h=T2(f,s.shape,s.dtype,p,l,"avg");d=n.makeTensorInfo(l.outShape,s.dtype,h.values)}return d}const ese={kernelName:fm,backendName:"cpu",kernelFunc:Jre};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tse(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:a,pad:i,dimRoundingMode:u,dataFormat:c}=r;_e(s,"avgPool3d");const l=za(s.shape,o,a,1,i,u,c),d=n.data.get(s.dataId).values,f=SD(d,s.shape,s.dtype,Ee(s.shape),l,"avg");return n.makeTensorInfo(f.shape,"float32",f.values)}const nse={kernelName:vw,backendName:"cpu",kernelFunc:tse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rse(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,{filterSize:a,strides:i,pad:u,dimRoundingMode:c}=r;_e([s,o],"avgPool3DGrad");const l=za(o.shape,a,i,1,u,c),d=l.strideDepth,f=l.strideHeight,p=l.strideWidth,h=l.filterDepth,m=l.filterHeight,y=l.filterWidth,g=l.dilationDepth,b=l.dilationHeight,w=l.dilationWidth,S=l.effectiveFilterDepth,I=l.effectiveFilterHeight,_=l.effectiveFilterWidth,C=S-1-l.padInfo.front,N=_-1-l.padInfo.left,$=I-1-l.padInfo.top,R=rt(o.shape,"float32"),F=1/(h*m*y),U=n.bufferSync(s);for(let L=0;L<l.batchSize;++L)for(let H=0;H<l.inChannels;++H)for(let j=0;j<l.inDepth;++j)for(let X=0;X<l.inHeight;++X)for(let Q=0;Q<l.inWidth;++Q){const P=j-C,G=X-$,Y=Q-N;let Z=0;for(let se=0;se<S;se+=g){const re=(P+se)/d;if(!(re<0||re>=l.outDepth||Math.floor(re)!==re))for(let ae=0;ae<I;ae+=b){const ie=(G+ae)/f;if(!(ie<0||ie>=l.outHeight||Math.floor(ie)!==ie))for(let ue=0;ue<_;ue+=w){const ve=(Y+ue)/p;if(ve<0||ve>=l.outWidth||Math.floor(ve)!==ve)continue;const pe=U.get(L,re,ie,ve,H);Z+=pe}}}R.set(Z*F,L,j,X,Q,H)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const sse={kernelName:KC,backendName:"cpu",kernelFunc:rse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ose(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,a=o;_e([s,o],"avgPoolGrad");const{filterSize:i,strides:u,pad:c}=r,l=Ws(a.shape,i,u,1,c),d=l.strideHeight,f=l.strideWidth,p=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,y=l.dilationWidth,g=l.effectiveFilterHeight,b=l.effectiveFilterWidth,w=b-1-l.padInfo.left,S=g-1-l.padInfo.top,I=rt(a.shape,"float32"),_=1/(p*h),C=n.data.get(s.dataId).values,N=rt(s.shape,"float32",C);for(let $=0;$<l.batchSize;++$)for(let R=0;R<l.inChannels;++R)for(let F=0;F<l.inHeight;++F)for(let U=0;U<l.inWidth;++U){const L=F-S,H=U-w;let j=0;for(let X=0;X<g;X+=m){const Q=(L+X)/d;if(!(Q<0||Q>=l.outHeight||Math.floor(Q)!==Q))for(let P=0;P<b;P+=y){const G=(H+P)/f;if(G<0||G>=l.outWidth||Math.floor(G)!==G)continue;const Y=N.get($,Q,G,R);j+=Y}}I.set(j*_,$,F,U,R)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}const ase={kernelName:qC,backendName:"cpu",kernelFunc:ose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ise(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,scale:o,offset:a,mean:i,variance:u}=t;D(i.shape.length===u.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),D(a==null||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),D(o==null||i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),_e([s,i,u,o,a],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const l=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,f=n.data.get(u.dataId).values,p=o?n.data.get(o.dataId).values:new Float32Array([1]),h=a?n.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),y=h.length,g=p.length,b=f.length,w=d.length;let S=0,I=0,_=0,C=0;for(let N=0;N<l.length;++N)m[N]=h[S++]+(l[N]-d[I++])*p[_++]/Math.sqrt(f[C++]+c),S>=y&&(S=0),I>=w&&(I=0),_>=g&&(_=0),C>=b&&(C=0);return n.makeTensorInfo(s.shape,s.dtype,m)}const lse={kernelName:Lm,backendName:"cpu",kernelFunc:ise};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function use(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:o,crops:a}=r;_e([s],"batchToSpaceND");const i=o.reduce((g,b)=>g*b),u=ly(s.shape,o,i),c=uy(u.length,o.length),l=cy(s.shape,o,i),d=KN(a,o.length),f=XN(l,a,o.length),p=Dt({inputs:{x:s},backend:n,attrs:{shape:u}}),h=vr({inputs:{x:p},backend:n,attrs:{perm:c}}),m=Dt({inputs:{x:h},backend:n,attrs:{shape:l}}),y=Li({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),y}const cse={kernelName:bw,backendName:"cpu",kernelFunc:use};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dse(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,weights:o}=t,{size:a}=r,i=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,c=TA(i,u,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,c)}const fse={kernelName:hm,backendName:"cpu",kernelFunc:dse};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pse(e){const{inputs:t,backend:n}=e,{s0:r,s1:s}=t,o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,i=At(Array.from(o),Array.from(a));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}const hse={kernelName:ww,backendName:"cpu",kernelFunc:pse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mse=vt(Fd,(e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),gse={kernelName:Fd,backendName:"cpu",kernelFunc:mse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yse=e=>{const{x:t}=e.inputs,n=e.backend,r=new Float32Array(ee(t.shape)),s=n.data.get(t.dataId),o=s.complexTensorInfos.real,a=s.complexTensorInfos.imag,i=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values;for(let c=0;c<i.length;c++){const l=i[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")},vse={kernelName:YC,backendName:"cpu",kernelFunc:yse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function au(e){const{inputs:t,backend:n}=e,{input:r}=t,s=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,o)}const bse={kernelName:rT,backendName:"cpu",kernelFunc:au};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iu(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r,o=Kt(s,t[0].shape)[0],a=t.map(m=>m.shape);GN(a,o);let i=Ul(t.map(m=>m.shape),o);if(ee(i)===0)return n.makeTensorInfo(i,t[0].dtype,[]);const u=t.filter(m=>ee(m.shape)>0);if(u.length===1)return io({inputs:{x:u[0]},backend:n});if(u[0].dtype==="complex64"){const m=u.map(S=>Bi({inputs:{input:S},backend:n})),y=u.map(S=>au({inputs:{input:S},backend:n})),g=iu({inputs:m,backend:n,attrs:{axis:o}}),b=iu({inputs:y,backend:n,attrs:{axis:o}}),w=Rr({inputs:{real:g,imag:b},backend:n});return m.forEach(S=>n.disposeIntermediateTensorInfo(S)),y.forEach(S=>n.disposeIntermediateTensorInfo(S)),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),w}const c=u.map(m=>{const g=[-1,ee(m.shape.slice(o))];return Dt({inputs:{x:m},backend:n,attrs:{shape:g}})}),l=c.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));i=Ul(c.map(m=>m.shape),1);const d=c[0].shape[0]===1,f=NA(l,i,t[0].dtype,d),p=Ul(u.map(m=>m.shape),o),h=n.makeTensorInfo(p,t[0].dtype,f);return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),h}const wse={kernelName:Sw,backendName:"cpu",kernelFunc:iu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xD(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dataFormat:u,dilations:c,dimRoundingMode:l}=r;_e([s,o],"conv2d");const d=wu(u),f=xr(s.shape,o.shape,a,c,i,l,!1,d),p=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,y=f.dilationWidth,g=f.padInfo.left,b=f.padInfo.top,w=f.dataFormat==="channelsLast",S=new mn(f.outShape,s.dtype),I=Ee(s.shape),_=Ee(o.shape),C=I[0],N=w?I[1]:I[2],$=w?I[2]:1,R=w?1:I[1],F=S.strides[0],U=w?S.strides[1]:S.strides[2],L=w?S.strides[2]:1,H=w?1:S.strides[1],j=n.data.get(s.dataId).values,X=n.data.get(o.dataId).values,Q=S.values;for(let P=0;P<f.batchSize;++P){const G=P*C,Y=P*F;for(let Z=0;Z<f.outHeight;++Z){const se=Y+Z*U,re=Z*f.strideHeight-b;for(let ae=0;ae<p;++ae){const ie=re+ae*m;if(ie<0||ie>=f.inHeight)continue;const ue=ae*_[0],ve=G+ie*N;for(let pe=0;pe<f.outWidth;++pe){const xe=se+pe*L,Se=pe*f.strideWidth-g;for(let Ce=0;Ce<h;++Ce){const $e=Se+Ce*y;if($e<0||$e>=f.inWidth)continue;const Fe=ue+Ce*_[1],Be=ve+$e*$;let Le=Fe;for(let Ae=0;Ae<f.inChannels;++Ae){const st=j[Be+Ae*R];for(let Ze=0;Ze<f.outChannels;++Ze)Q[xe+Ze*H]+=st*X[Le+Ze];Le+=f.outChannels}}}}}}return n.makeTensorInfo(S.shape,S.dtype,Q)}const Sse={kernelName:vm,backendName:"cpu",kernelFunc:xD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xse(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:a,pad:i,dataFormat:u,dimRoundingMode:c,filterShape:l}=r;_e([s,o],"conv2dBackpropFilter");const d=wu(u),f=xr(s.shape,l,a,1,i,c,!1,d),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:y}=f,g=f.dataFormat==="channelsLast",b=new mn(f.filterShape,"float32"),w=f.padInfo.left,S=f.padInfo.top,I=n.data.get(s.dataId).values,_=n.data.get(o.dataId).values,C=new mn(s.shape,s.dtype,I),N=new mn(o.shape,o.dtype,_);for(let $=0;$<m;++$){const R=Math.max(0,Math.ceil((S-$)/p)),F=Math.min(f.outHeight,(f.inHeight+S-$)/p);for(let U=0;U<y;++U){const L=Math.max(0,Math.ceil((w-U)/h)),H=Math.min(f.outWidth,(f.inWidth+w-U)/h);for(let j=0;j<f.inChannels;++j)for(let X=0;X<f.outChannels;++X){let Q=0;for(let P=0;P<f.batchSize;++P)for(let G=R;G<F;++G){const Y=$+G*p-S;for(let Z=L;Z<H;++Z){const se=U+Z*h-w;g?Q+=C.get(P,Y,se,j)*N.get(P,G,Z,X):Q+=C.get(P,j,Y,se)*N.get(P,X,G,Z)}}b.set(Q,$,U,j,X)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const kse={kernelName:QC,backendName:"cpu",kernelFunc:xse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ise(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{inputShape:a,strides:i,pad:u,dataFormat:c,dimRoundingMode:l}=r;_e([s,o],"conv2dBackpropInput");const d=Ee(o.shape),f=Ee(s.shape);let p=wu(c);const h=xr(a,o.shape,i,1,u,l,!1,p),m=new mn(h.inShape,"float32"),y=m.values,g=n.data.get(s.dataId).values,b=n.data.get(o.dataId).values,[w,S,I]=d,{batchSize:_,filterHeight:C,filterWidth:N,inChannels:$,inHeight:R,inWidth:F,outChannels:U,outHeight:L,outWidth:H,strideHeight:j,strideWidth:X}=h;p=h.dataFormat;const Q=C-1-h.padInfo.top,P=N-1-h.padInfo.left,G=p==="channelsLast",Y=m.strides[0],Z=G?m.strides[1]:m.strides[2],se=G?m.strides[2]:1,re=G?1:m.strides[1],ae=f[0],ie=G?f[1]:f[2],ue=G?f[2]:1,ve=G?1:f[1];for(let pe=0;pe<_;++pe)for(let xe=0;xe<$;++xe)for(let Se=0;Se<R;++Se){const Ce=Se-Q,$e=Math.max(0,Math.ceil(Ce/j)),Fe=Math.min(L,(C+Ce)/j);for(let Be=0;Be<F;++Be){const Le=Be-P,Ae=Math.max(0,Math.ceil(Le/X)),st=Math.min(H,(N+Le)/X);let Ze=0;for(let et=$e;et<Fe;++et){const vn=et*j-Ce;for(let Ut=Ae;Ut<st;++Ut){const sn=Ut*X-Le,bn=ae*pe+ie*et+ue*Ut,Mn=w*(C-1-vn)+S*(N-1-sn)+I*xe;for(let En=0;En<U;++En){const Vt=g[bn+ve*En],Cn=b[Mn+En];Ze+=Vt*Cn}}}const Je=Y*pe+Z*Se+se*Be+re*xe;y[Je]=Ze}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const _se={kernelName:bm,backendName:"cpu",kernelFunc:Ise};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dilations:u}=r;_e([s,o],"conv3d");const c=Gi(s.shape,o.shape,a,u,i),{filterDepth:l,filterHeight:d,filterWidth:f,dilationDepth:p,dilationHeight:h,dilationWidth:m,padInfo:y}=c,g=y.front,b=y.left,w=y.top,S=new mn(c.outShape,s.dtype),I=n.data.get(s.dataId).values,_=n.data.get(o.dataId).values,C=S.values,N=Ee(s.shape),$=Ee(o.shape);for(let R=0;R<c.batchSize;++R){const F=R*N[0],U=R*S.strides[0];for(let L=0;L<c.outDepth;++L){const H=U+L*S.strides[1],j=L*c.strideDepth-g;for(let X=0;X<l;++X){const Q=j+X*p;if(Q<0||Q>=c.inDepth)continue;const P=X*$[0],G=F+Q*N[1];for(let Y=0;Y<c.outHeight;++Y){const Z=H+Y*S.strides[2],se=Y*c.strideHeight-w;for(let re=0;re<d;++re){const ae=se+re*h;if(ae<0||ae>=c.inHeight)continue;const ie=P+re*$[1],ue=G+ae*N[2];for(let ve=0;ve<c.outWidth;++ve){const pe=Z+ve*c.outChannels,xe=ve*c.strideWidth-b;for(let Se=0;Se<f;++Se){const Ce=xe+Se*m;if(Ce<0||Ce>=c.inWidth)continue;const $e=ie+Se*$[2],Fe=ue+Ce*c.inChannels;let Be=$e;for(let Le=0;Le<c.inChannels;++Le){const Ae=I[Fe+Le];for(let st=0;st<c.outChannels;++st)C[pe+st]+=Ae*_[Be+st];Be+=c.outChannels}}}}}}}}return n.makeTensorInfo(S.shape,S.dtype,S.values)}const Cse={kernelName:wm,backendName:"cpu",kernelFunc:Ese};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tse(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:a,pad:i,filterShape:u}=r;_e([s,o],"conv3dBackpropFilterV2");const c=Ee(s.shape),l=Ee(o.shape),d=Gi(s.shape,u,a,1,i),f=d.strideDepth,p=d.strideHeight,h=d.strideWidth,m=d.filterDepth,y=d.filterHeight,g=d.filterWidth,b=new mn(d.filterShape,"float32"),w=b.values,[S,I,_,C]=b.strides,N=n.data.get(o.dataId).values,[$,R,F,U]=l,L=n.data.get(s.dataId).values,[H,j,X,Q]=c,P=d.padInfo.front,G=d.padInfo.left,Y=d.padInfo.top;for(let Z=0;Z<m;++Z){const se=Math.max(0,Math.ceil((P-Z)/f)),re=Math.min(d.outDepth,(d.inDepth+P-Z)/f),ae=Z*S;for(let ie=0;ie<y;++ie){const ue=Math.max(0,Math.ceil((Y-ie)/p)),ve=Math.min(d.outHeight,(d.inHeight+Y-ie)/p),pe=ie*I+ae;for(let xe=0;xe<g;++xe){const Se=Math.max(0,Math.ceil((G-xe)/h)),Ce=Math.min(d.outWidth,(d.inWidth+G-xe)/h),$e=xe*_+pe;for(let Fe=0;Fe<d.inChannels;++Fe){const Be=Fe*C+$e;for(let Le=0;Le<d.outChannels;++Le){let Ae=0;for(let st=0;st<d.batchSize;++st){const Ze=st*H,Je=st*$;for(let et=se;et<re;++et){const Ut=(Z+et*f-P)*j+Ze,sn=et*R+Je;for(let bn=ue;bn<ve;++bn){const En=(ie+bn*p-Y)*X+Ut,Vt=bn*F+sn;for(let Cn=Se;Cn<Ce;++Cn){const fo=(xe+Cn*h-G)*Q+En,jn=Cn*U+Vt;Ae+=L[fo+Fe]*N[jn+Le]}}}}w[Be+Le]=Ae}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Nse={kernelName:xw,backendName:"cpu",kernelFunc:Tse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ase(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{pad:a,strides:i,inputShape:u}=r;_e([s],"conv3dBackpropInputV2");const c=Ee(s.shape),l=Ee(o.shape),d=Gi(u,o.shape,i,1,a),f=new mn(d.inShape,"float32"),p=f.values,[h,m,y,g]=f.strides,b=n.data.get(s.dataId).values,[w,S,I,_]=c,C=n.data.get(o.dataId).values,[N,$,R,F]=l,{batchSize:U,filterDepth:L,filterHeight:H,filterWidth:j,inChannels:X,inDepth:Q,inHeight:P,inWidth:G,outChannels:Y,outDepth:Z,outHeight:se,outWidth:re,strideDepth:ae,strideHeight:ie,strideWidth:ue}=d,ve=L-1-d.padInfo.front,pe=H-1-d.padInfo.top,xe=j-1-d.padInfo.left;for(let Se=0;Se<U;++Se)for(let Ce=0;Ce<X;++Ce)for(let $e=0;$e<Q;++$e){const Fe=$e-ve,Be=Math.max(0,Math.ceil(Fe/ae)),Le=Math.min(Z,(L+Fe)/ae);for(let Ae=0;Ae<P;++Ae){const st=Ae-pe,Ze=Math.max(0,Math.ceil(st/ie)),Je=Math.min(se,(H+st)/ie);for(let et=0;et<G;++et){const vn=et-xe,Ut=Math.max(0,Math.ceil(vn/ue)),sn=Math.min(re,(j+vn)/ue);let bn=0;for(let Mn=Be;Mn<Le;++Mn){const En=Mn*ae-Fe;for(let Vt=Ze;Vt<Je;++Vt){const Cn=Vt*ie-st;for(let Hn=Ut;Hn<sn;++Hn){const fo=Hn*ue-vn,jn=w*Se+S*Mn+I*Vt+_*Hn,Vo=N*(L-1-En)+$*(H-1-Cn)+R*(j-1-fo)+F*Ce;for(let Wr=0;Wr<Y;++Wr){const Ir=b[jn+Wr],Ht=C[Vo+Wr];bn+=Ir*Ht}}}}p[h*Se+m*$e+y*Ae+g*et+Ce]=bn}}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}const Dse={kernelName:Sm,backendName:"cpu",kernelFunc:Ase};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $se=vt(xm,e=>Math.cos(e)),Rse={kernelName:xm,backendName:"cpu",kernelFunc:$se};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fse=vt(km,e=>Math.cosh(e)),Mse={kernelName:km,backendName:"cpu",kernelFunc:Fse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ose(e){const{inputs:t,backend:n,attrs:r}=e,{image:s,boxes:o,boxInd:a}=t,{cropSize:i,method:u,extrapolationValue:c}=r,[l,d,f,p]=s.shape,h=o.shape[0],[m,y]=i,g=rt([h,m,y,p],"float32"),b=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,S=n.data.get(s.dataId).values,I=Ee(s.shape),_=Ee(g.shape);for(let C=0;C<h;C++){const N=C*4,$=b[N],R=b[N+1],F=b[N+2],U=b[N+3],L=w[C];if(L>=l)continue;const H=m>1?(F-$)*(d-1)/(m-1):0,j=y>1?(U-R)*(f-1)/(y-1):0;for(let X=0;X<m;X++){const Q=m>1?$*(d-1)+X*H:.5*($+F)*(d-1);if(Q<0||Q>d-1){for(let P=0;P<y;P++)for(let G=0;G<p;G++){const Y=G+P*_[2]+X*_[1]+C*_[0];g.values[Y]=c}continue}if(u==="bilinear"){const P=Math.floor(Q),G=Math.ceil(Q),Y=Q-P;for(let Z=0;Z<y;Z++){const se=y>1?R*(f-1)+Z*j:.5*(R+U)*(f-1);if(se<0||se>f-1){for(let ue=0;ue<p;ue++){const ve=ue+Z*_[2]+X*_[1]+C*_[0];g.values[ve]=c}continue}const re=Math.floor(se),ae=Math.ceil(se),ie=se-re;for(let ue=0;ue<p;ue++){let ve=ue+re*I[2]+P*I[1]+L*I[0];const pe=S[ve];ve=ue+ae*I[2]+P*I[1]+L*I[0];const xe=S[ve];ve=ue+re*I[2]+G*I[1]+L*I[0];const Se=S[ve];ve=ue+ae*I[2]+G*I[1]+L*I[0];const Ce=S[ve],$e=pe+(xe-pe)*ie,Fe=Se+(Ce-Se)*ie;ve=ue+Z*_[2]+X*_[1]+C*_[0],g.values[ve]=$e+(Fe-$e)*Y}}}else for(let P=0;P<y;++P){const G=y>1?R*(f-1)+P*j:.5*(R+U)*(f-1);if(G<0||G>f-1){for(let se=0;se<p;se++){const re=se+P*_[2]+X*_[1]+C*_[0];g.values[re]=c}continue}const Y=Math.round(G),Z=Math.round(Q);for(let se=0;se<p;se++){const re=se+Y*I[2]+Z*I[1]+L*I[0],ae=se+P*_[2]+X*_[1]+C*_[0];g.values[ae]=S[re]}}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Pse={kernelName:Em,backendName:"cpu",kernelFunc:Ose};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bse(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,exclusive:a,reverse:i}=r;_e(s,"cumprod");const u=ts([o],s.shape.length);let c=s;u!=null&&(c=vr({inputs:{x:s},backend:n,attrs:{perm:u}}));const l=ar(1,s.shape.length)[0];if(l!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${l}`);const d=vu(c.dtype,"int32"),f=pw(ee(c.shape),d),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=i?(g,b)=>g+h-b-1:(g,b)=>g+b;for(let g=0;g<p.length;g+=h)for(let b=0;b<h;b++){const w=m(g,b);if(b===0)f[w]=a?1:p[w];else{const S=m(g,b-1);f[w]=a?p[S]*f[S]:p[w]*f[S]}}const y=n.makeTensorInfo(c.shape,d,f);if(u!=null){const g=ty(u),b=vr({inputs:{x:y},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),b}return y}const Lse={kernelName:Im,backendName:"cpu",kernelFunc:Bse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,exclusive:a,reverse:i}=r;_e(s,"cumsum");const u=ts([o],s.shape.length);let c=s;u!=null&&(c=vr({inputs:{x:s},backend:n,attrs:{perm:u}}));const l=ar(1,s.shape.length)[0];if(l!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${l}`);const d=vu(c.dtype,"int32"),f=Vn(ee(c.shape),d),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=i?(g,b)=>g+h-b-1:(g,b)=>g+b;for(let g=0;g<p.length;g+=h)for(let b=0;b<h;b++){const w=m(g,b);if(b===0)f[w]=a?0:p[w];else{const S=m(g,b-1);f[w]=a?p[S]+f[S]:p[w]+f[S]}}const y=n.makeTensorInfo(c.shape,d,f);if(u!=null){const g=ty(u),b=vr({inputs:{x:y},backend:n,attrs:{perm:g}});return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(c),b}return y}const Wse={kernelName:_m,backendName:"cpu",kernelFunc:zse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Use(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,weights:o}=t,{size:a,binaryOutput:i}=r;if(s.shape.length===1){const u=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,l=TA(u,c,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,l)}else if(s.shape.length===2){const u=n.bufferSync(s),c=n.bufferSync(o),l=JX(u,c,a,i);return n.makeTensorInfo(l.shape,o.dtype,l.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const Vse={kernelName:kw,backendName:"cpu",kernelFunc:Use};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hse(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockSize:o,dataFormat:a}=r;D(a==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${a}`);const i=s.shape[0],u=s.shape[1],c=s.shape[2],l=s.shape[3],d=u*o,f=c*o,p=l/(o*o),h=n.data.get(s.dataId).values,m=new Float32Array(i*d*f*p);let y=0;for(let g=0;g<i;++g)for(let b=0;b<d;++b){const w=Math.floor(b/o),S=b%o;for(let I=0;I<f;++I){const _=Math.floor(I/o),C=I%o,N=(S*o+C)*p;for(let $=0;$<p;++$){const F=$+N+l*(_+c*(w+u*g));m[y++]=h[F]}}}return n.makeTensorInfo([i,d,f,p],s.dtype,m)}const jse={kernelName:Cm,backendName:"cpu",kernelFunc:Hse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kD(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o}=t,{strides:a,pad:i,dilations:u,dimRoundingMode:c}=r;_e([s,o],"depthwiseConv2DNative");const l=Ee(s.shape),d=Ee(o.shape);let f=u;f==null&&(f=[1,1]),D(xs(a,f),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${f}'`);const p=xr(s.shape,o.shape,a,f,i,c,!0),{filterHeight:h,filterWidth:m,dilationHeight:y,dilationWidth:g,padInfo:b}=p,w=b.left,S=b.top,I=p.outChannels/p.inChannels,_=new mn(p.outShape,s.dtype),C=n.data.get(s.dataId).values,N=n.data.get(o.dataId).values,$=_.values;for(let R=0;R<p.batchSize;++R){const F=R*l[0],U=R*_.strides[0];for(let L=0;L<p.outHeight;++L){const H=U+L*_.strides[1],j=L*p.strideHeight-S;for(let X=0;X<h;++X){const Q=j+X*y;if(Q<0||Q>=p.inHeight)continue;const P=X*d[0],G=F+Q*l[1];for(let Y=0;Y<p.outWidth;++Y){const Z=H+Y*_.strides[2],se=Y*p.strideWidth-w;for(let re=0;re<m;++re){const ae=se+re*g;if(ae<0||ae>=p.inWidth)continue;const ie=P+re*d[1],ue=G+ae*p.inChannels;let ve=Z,pe=ie;for(let xe=0;xe<p.inChannels;++xe){const Se=C[ue+xe];for(let Ce=0;Ce<I;++Ce)$[ve+Ce]+=Se*N[pe+Ce];ve+=I,pe+=I}}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const Gse={kernelName:Tm,backendName:"cpu",kernelFunc:kD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qse(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,dy:o}=t,{strides:a,dilations:i,pad:u,dimRoundingMode:c,filterShape:l}=r;_e([s,o],"depthwiseConv2dNativeBackpropFilter");const d=xr(s.shape,l,a,i,u,c,!0),{strideHeight:f,strideWidth:p,filterHeight:h,filterWidth:m}=d,y=new mn(d.filterShape,"float32"),g=d.padInfo.left,b=d.padInfo.top,w=d.outChannels/d.inChannels,S=n.data.get(s.dataId).values,I=new mn(s.shape,s.dtype,S),_=n.data.get(o.dataId).values,C=new mn(o.shape,o.dtype,_);for(let N=0;N<h;++N){const $=Math.max(0,Math.ceil((b-N)/f)),R=Math.min(d.outHeight,(d.inHeight+b-N)/f);for(let F=0;F<m;++F){const U=Math.max(0,Math.ceil((g-F)/p)),L=Math.min(d.outWidth,(d.inWidth+g-F)/p);for(let H=0;H<d.outChannels;++H){const j=Math.trunc(H/w),X=H%w;let Q=0;for(let P=0;P<d.batchSize;++P)for(let G=$;G<R;++G){const Y=N+G*f-b;for(let Z=U;Z<L;++Z){const se=F+Z*p-g;Q+=I.get(P,Y,se,j)*C.get(P,G,Z,H)}}y.set(Q,N,F,j,X)}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Kse={kernelName:ZC,backendName:"cpu",kernelFunc:qse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xse(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,filter:o}=t,{strides:a,dilations:i,pad:u,dimRoundingMode:c,inputShape:l}=r;_e([s,o],"depthwiseConv2DNativeBackpropInput");const d=Ee(s.shape),f=Ee(o.shape),p=xr(l,o.shape,a,i,u,c,!0),h=new mn(p.inShape,"float32"),m=h.values,[y,g,b]=h.strides,w=n.data.get(s.dataId).values,[S,I,_]=d,C=n.data.get(o.dataId).values,[N,$,R]=f,{batchSize:F,filterHeight:U,filterWidth:L,inChannels:H,inHeight:j,inWidth:X,outChannels:Q,outHeight:P,outWidth:G,strideHeight:Y,strideWidth:Z}=p,se=U-1-p.padInfo.top,re=L-1-p.padInfo.left,ae=Q/H;for(let ie=0;ie<F;++ie)for(let ue=0;ue<H;++ue)for(let ve=0;ve<j;++ve){const pe=ve-se,xe=Math.max(0,Math.ceil(pe/Y)),Se=Math.min(P,(U+pe)/Y);for(let Ce=0;Ce<X;++Ce){const $e=Ce-re,Fe=Math.max(0,Math.ceil($e/Z)),Be=Math.min(G,(L+$e)/Z);let Le=0;for(let Ae=xe;Ae<Se;++Ae){const st=Ae*Y-pe;for(let Ze=Fe;Ze<Be;++Ze){const Je=Ze*Z-$e,et=S*ie+I*Ae+_*Ze,vn=N*(U-1-st)+$*(L-1-Je)+R*ue;for(let Ut=0;Ut<ae;++Ut){const sn=ue*ae+Ut,bn=w[et+sn],Mn=C[vn+Ut];Le+=bn*Mn}}}m[y*ie+g*ve+b*Ce+ue]=Le}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const Yse={kernelName:JC,backendName:"cpu",kernelFunc:Xse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qse(e){const{inputs:t,backend:n}=e,{x:r}=t,s=ee(r.shape),o=n.data.get(r.dataId).values,a=rt([s,s],r.dtype),i=a.values;for(let c=0;c<o.length;c++)i[c*s+c]=o[c];const u=[...r.shape,...r.shape];return n.makeTensorInfo(u,a.dtype,a.values)}const Zse={kernelName:Iw,backendName:"cpu",kernelFunc:Qse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jse={kernelName:Nm,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:s}=e,{strides:o,pad:a,dilations:i}=n,u=t,c=u.data.get(r.dataId).values,l=r.shape.length,d=u.data.get(s.dataId).values,f=s.shape.length,{batchSize:p,inHeight:h,inWidth:m,inChannels:y,outHeight:g,outWidth:b,padInfo:w,strideHeight:S,strideWidth:I,filterHeight:_,filterWidth:C,dilationHeight:N,dilationWidth:$,outShape:R}=bu(r.shape,s.shape,o,a,"NHWC",i),F=ee(R),U=R.length,L=un(r.dtype,F);for(let j=0;j<p;++j)for(let X=0;X<g;++X){const Q=X*S-w.top;for(let P=0;P<b;++P){const G=P*I-w.left;for(let Y=0;Y<y;++Y){let Z=Number.MIN_SAFE_INTEGER;for(let re=0;re<_;++re){const ae=Q+re*N;if(ae>=0&&ae<h)for(let ie=0;ie<C;++ie){const ue=G+ie*$;if(ue>=0&&ue<m){const ve=so([j,ae,ue,Y],l,Ee(r.shape)),pe=so([re,ie,Y],f,Ee(s.shape)),xe=c[ve]+d[pe];xe>Z&&(Z=xe)}}}const se=so([j,X,P,Y],U,Ee(R));L[se]=Z}}}return{dataId:u.write(ji(L,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eoe={kernelName:rh,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:s,dy:o}=e,{strides:a,pad:i,dilations:u}=n,c=t,l=ys(r.shape,c.data.get(r.dataId).values),d=ys(s.shape,c.data.get(s.dataId).values),{batchSize:f,inHeight:p,inWidth:h,inChannels:m,outHeight:y,outWidth:g,padInfo:b,strideHeight:w,strideWidth:S,filterHeight:I,filterWidth:_,dilationHeight:C,dilationWidth:N,outShape:$}=bu(r.shape,s.shape,a,i,"NHWC",u);D(o.rank===$.length,()=>`Error in ${rh}, dy must have the same rank as output ${$.length}, but got ${o.rank}`);const R=ys($,c.data.get(o.dataId).values),F=HC(s.shape,s.dtype);for(let L=0;L<f;++L)for(let H=0;H<y;++H){const j=H*w-b.top;for(let X=0;X<g;++X){const Q=X*S-b.left;for(let P=0;P<m;++P){let G=Number.MIN_SAFE_INTEGER,Y=0,Z=0;for(let se=0;se<I;++se){const re=j+se*C;if(re>=0&&re<p)for(let ae=0;ae<_;++ae){const ie=Q+ae*N;if(ie>=0&&ie<h){const ue=l[L][re][ie][P]+d[se][ae][P];ue>G&&(G=ue,Y=se,Z=ae)}}}F[Y][Z][P]+=R[L][H][X][P]}}}return{dataId:c.write(ji(F,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const toe={kernelName:nh,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r,filter:s,dy:o}=e,{strides:a,pad:i,dilations:u}=n,c=t,l=ys(r.shape,c.data.get(r.dataId).values),d=ys(s.shape,c.data.get(s.dataId).values),{batchSize:f,inHeight:p,inWidth:h,inChannels:m,outHeight:y,outWidth:g,padInfo:b,strideHeight:w,strideWidth:S,filterHeight:I,filterWidth:_,dilationHeight:C,dilationWidth:N,outShape:$}=bu(r.shape,s.shape,a,i,"NHWC",u);D(o.rank===$.length,()=>`Error in ${nh}, dy must have the same rank as output ${$.length}, but got ${o.rank}`);const R=ys($,c.data.get(o.dataId).values),F=HC(r.shape,r.dtype);for(let L=0;L<f;++L)for(let H=0;H<y;++H){const j=H*w-b.top;for(let X=0;X<g;++X){const Q=X*S-b.left;for(let P=0;P<m;++P){let G=Number.MIN_SAFE_INTEGER,Y=j<0?0:j,Z=Q<0?0:Q;for(let se=0;se<I;++se){const re=j+se*C;if(re>=0&&re<p)for(let ae=0;ae<_;++ae){const ie=Q+ae*N;if(ie>=0&&ie<h){const ue=l[L][re][ie][P]+d[se][ae][P];ue>G&&(G=ue,Y=re,Z=ie)}}}F[L][Y][Z][P]+=R[L][H][X][P]}}}return{dataId:c.write(ji(F,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function noe(e){const{inputs:t,backend:n,attrs:r}=e,{image:s}=t,{canvas:o,options:a}=r,{contextOptions:i,imageOptions:u}=a||{},c=(u==null?void 0:u.alpha)||1,l=(i==null?void 0:i.contextType)||"2d";if(l!=="2d")throw new Error(`Context type ${i.contextType} is not supported by the CPU backend.`);const d=o.getContext(l,(i==null?void 0:i.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${l} type.`);const[f,p]=s.shape.slice(0,2),h=s.shape.length===2?1:s.shape[2],m=n.data.get(s.dataId).values,y=s.dtype==="float32"?255:1,g=new Uint8ClampedArray(p*f*4);for(let w=0;w<f*p;++w){const S=[0,0,0,255*c];for(let _=0;_<h;_++){const C=m[w*h+_];if(s.dtype==="float32"){if(C<0||C>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${C}.`)}else if(s.dtype==="int32"&&(C<0||C>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${C}.`);h===1?(S[0]=C*y,S[1]=C*y,S[2]=C*y):S[_]=C*y}const I=w*4;g[I+0]=Math.round(S[0]),g[I+1]=Math.round(S[1]),g[I+2]=Math.round(S[2]),g[I+3]=Math.round(S[3])}o.width=p,o.height=f;const b=new ImageData(g,p,f);return d.putImageData(b,0,0),s}const roe={kernelName:WB,backendName:"cpu",kernelFunc:noe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zd(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r;_e(s,"sum");let i;s.dtype==="bool"?i=Da({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):i=io({inputs:{x:s},backend:n});const u=i.shape.length,c=Kt(o,i.shape),l=ts(c,u);let d=c,f=i;l!=null&&(f=vr({inputs:{x:i},backend:n,attrs:{perm:l}}),d=ar(d.length,u)),or("sum",d,f.shape.length);const[p,h]=sr(f.shape,d),m=vu(f.dtype,"int32");let y=bh(n,p,m);const g=ee(h),b=n.data.get(y.dataId).values,w=n.data.get(f.dataId).values;for(let S=0;S<b.length;++S){const I=S*g;let _=0;for(let C=0;C<g;++C)_+=w[I+C];b[S]=_}if(a){const S=Rn(y.shape,c),I=y;y=Dt({inputs:{x:y},backend:n,attrs:{shape:S}}),n.disposeIntermediateTensorInfo(I)}return n.disposeIntermediateTensorInfo(i),l!=null&&n.disposeIntermediateTensorInfo(f),y}const soe={kernelName:zg,backendName:"cpu",kernelFunc:zd};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ooe(e){const{inputs:t,backend:n,attrs:r}=e,{equation:s}=r,o=t,{allDims:a,summedDims:i,idDims:u}=YG(s,o.length);ZG(a.length,u,o);const{path:c,steps:l}=JG(i,u),d=l.length;let f=null,p=a.length;const h=[];for(let m=0;m<d;++m){for(const y of l[m]){const{permutationIndices:g,expandDims:b}=QG(p,u[y]);let w;eq(g)?w=o[y]:(w=vr({inputs:{x:o[y]},backend:n,attrs:{perm:g}}),h.push(w));const S=w.shape.slice();for(let I=0;I<b.length;++I)S.splice(b[I],0,1);ws(w.shape,S)||(w=Dt({inputs:{x:w},backend:n,attrs:{shape:S}}),h.push(w)),f===null?f=w:(f=fy({inputs:{a:w,b:f},backend:n}),h.push(f))}m<d-1&&(c[m]>=0&&(f=zd({inputs:{x:f},backend:n,attrs:{axis:c[m]-(a.length-p),keepDims:!1}}),h.push(f)),p--)}for(const m of h)m!==f&&n.disposeIntermediateTensorInfo(m);return f}const aoe={kernelName:eT,backendName:"cpu",kernelFunc:ooe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ioe(e){const{inputs:t,backend:n}=e,{dy:r,y:s}=t;_e([r,s],"eluGrad");const o=new Float32Array(ee(s.shape)),a=n.data.get(s.dataId).values,i=n.data.get(r.dataId).values;for(let u=0;u<a.length;++u){const c=a[u];c>=0?o[u]=i[u]:o[u]=i[u]*(c+1)}return n.makeTensorInfo(s.shape,"float32",o)}const loe={kernelName:_w,backendName:"cpu",kernelFunc:ioe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const uoe=PG,coe=BG,doe=LG,foe=zG,poe=WG,hoe=UG,moe=vt($m,e=>{const t=Math.sign(e),n=Math.abs(e),r=1/(1+uoe*n);return t*(1-((((hoe*r+poe)*r+foe)*r+doe)*r+coe)*r*Math.exp(-n*n))}),goe={kernelName:$m,backendName:"cpu",kernelFunc:moe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xh(e){const{inputs:t,backend:n,attrs:r}=e,{input:s}=t,{dim:o}=r,a=s.shape.length,i=s.shape.slice();let u=o;return o<0&&(D(-(a+1)<=o,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),u=a+o+1),i.splice(u,0,1),Dt({inputs:{x:s},backend:n,attrs:{shape:i}})}const yoe={kernelName:Ew,backendName:"cpu",kernelFunc:xh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const voe=rn((e,t)=>e/t),N2=yn(Am,voe),A1={kernelName:Am,backendName:"cpu",kernelFunc:N2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ID(e,t,n){const r=e.shape,s=r[0],o=r[1],a=n.data.get(e.dataId),i=a.complexTensorInfos.real,u=a.complexTensorInfos.imag,c=[s,o],l=ee(c),d=nr("float32",l),f=nr("float32",l);for(let y=0;y<s;y++){const g=Li({inputs:{x:i},backend:n,attrs:{begin:[y,0],size:[1,o]}}),b=Li({inputs:{x:u},backend:n,attrs:{begin:[y,0],size:[1,o]}}),w=Rr({inputs:{real:g,imag:b},backend:n}),{real:S,imag:I}=boe(w,t,n),_=su(S,I);for(let C=0;C<o;C++){const N=YN(_,C);d[y*o+C]=N.real,f[y*o+C]=N.imag}n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(w)}const p=n.makeTensorInfo(c,"float32",d),h=n.makeTensorInfo(c,"float32",f),m=Rr({inputs:{real:p,imag:h},backend:n});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),m}function boe(e,t,n){const r=ee(e.shape),s=n.data.get(e.dataId),o=n.data.get(s.complexTensorInfos.real.dataId).values,a=n.data.get(s.complexTensorInfos.imag.dataId).values;if(woe(r)){const i=D1(o,a,r,t,n),u=[e.shape[0],e.shape[1]];if(t){const c=n.makeTensorInfo(u,"float32",i.real),l=n.makeTensorInfo(u,"float32",i.imag),d=n.makeTensorInfo([],"float32",e2(r,"float32")),f=io({inputs:{x:d},backend:n}),p=A1.kernelFunc({inputs:{a:c,b:d},backend:n}),h=A1.kernelFunc({inputs:{a:l,b:f},backend:n}),m=n.data.get(p.dataId).values,y=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:m,imag:y}}return i}else{const i=su(o,a),u=Soe(i,r,t);return VG(u)}}function woe(e){return(e&e-1)===0}function D1(e,t,n,r,s){if(n===1)return{real:e,imag:t};const o=su(e,t),a=n/2,i=HG(o),u=i.real,c=i.imag,l=[u.length],d=s.makeTensorInfo(l,"float32",u),f=s.makeTensorInfo(l,"float32",c),p=Rr({inputs:{real:d,imag:f},backend:s}),h=jG(o),m=h.real,y=h.imag,g=[m.length],b=s.makeTensorInfo(g,"float32",m),w=s.makeTensorInfo(g,"float32",y),S=Rr({inputs:{real:b,imag:w},backend:s}),I=D1(u,c,a,r,s),_=I.real,C=I.imag,N=[_.length],$=s.makeTensorInfo(N,"float32",_),R=s.makeTensorInfo(N,"float32",C),F=Rr({inputs:{real:$,imag:R},backend:s}),U=D1(m,y,a,r,s),L=U.real,H=U.imag,j=[L.length],X=s.makeTensorInfo(j,"float32",L),Q=s.makeTensorInfo(j,"float32",H),P=Rr({inputs:{real:X,imag:Q},backend:s}),G=qG(n,r),Y=[G.real.length],Z=s.makeTensorInfo(Y,"float32",G.real),se=s.makeTensorInfo(Y,"float32",G.imag),re=Rr({inputs:{real:Z,imag:se},backend:s}),ae=fy({inputs:{a:re,b:P},backend:s}),ie=ou({inputs:{a:F,b:ae},backend:s}),ue=E2({inputs:{a:F,b:ae},backend:s}),ve=Bi({inputs:{input:ie},backend:s}),pe=Bi({inputs:{input:ue},backend:s}),xe=au({inputs:{input:ie},backend:s}),Se=au({inputs:{input:ue},backend:s}),Ce=iu({inputs:[ve,pe],backend:s,attrs:{axis:0}}),$e=iu({inputs:[xe,Se],backend:s,attrs:{axis:0}}),Fe=s.data.get(Ce.dataId).values,Be=s.data.get($e.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(p),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(S),s.disposeIntermediateTensorInfo($),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(F),s.disposeIntermediateTensorInfo(X),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(P),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(se),s.disposeIntermediateTensorInfo(re),s.disposeIntermediateTensorInfo(ae),s.disposeIntermediateTensorInfo(ie),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(ve),s.disposeIntermediateTensorInfo(xe),s.disposeIntermediateTensorInfo(pe),s.disposeIntermediateTensorInfo(Se),s.disposeIntermediateTensorInfo(Ce),s.disposeIntermediateTensorInfo($e),{real:Fe,imag:Be}}function Soe(e,t,n){const r=new Float32Array(t*2);for(let s=0;s<t;s++){let o=0,a=0;for(let i=0;i<t;i++){const u=KG(s*i,t,n),c=YN(e,i);o+=c.real*u.real-c.imag*u.imag,a+=c.real*u.imag+c.imag*u.real}n&&(o/=t,a/=t),GG(r,o,a,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xoe(e){const{inputs:t,backend:n}=e,{input:r}=t,s=ee(r.shape),o=r.shape[r.shape.length-1],a=s/o,i=Dt({inputs:{x:r},backend:n,attrs:{shape:[a,o]}}),u=ID(i,!1,n),c=Dt({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}const koe={kernelName:tT,backendName:"cpu",kernelFunc:xoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2(e){const{backend:t,attrs:n}=e,{shape:r,value:s,dtype:o}=n,a=o||$d(s),i=un(a,ee(r));return _oe(i,s,a),t.makeTensorInfo(r,a,i)}const Ioe={kernelName:Cw,backendName:"cpu",kernelFunc:A2};function _oe(e,t,n){e.fill(t)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Eoe={kernelName:Om,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,s=n,o=nr(r.dtype,ee(r.shape)),[a,i,u,c]=r.shape,l=s.data.get(r.dataId).values;for(let f=0;f<a;f++){const p=f*u*i*c;for(let h=0;h<i;h++){const m=h*(u*c);for(let y=0;y<u;y++){const g=y*c;for(let b=0;b<c;b++){const w=Math.round(u-y-1),S=p+m+g+b;let I=l[S];if(w>=0&&w<u){const _=w*c,C=p+m+_+b;I=l[C]}o[S]=I}}}}return{dataId:s.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Coe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o,bias:a,preluActivationWeights:i}=t,{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=r;let m=xD({inputs:{x:s,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(a){const y=m;if(l==="NCHW"&&a.shape.length===1&&a.shape[0]!==1){const g=Dt({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=ou({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=ou({inputs:{a:m,b:a},backend:n});n.disposeIntermediateTensorInfo(y)}if(p){const y=m;if(l==="NCHW"&&p==="prelu"&&i.shape.length===1&&i.shape[0]!==1){const g=Dt({inputs:{x:i},backend:n,attrs:{shape:[i.shape[0],1,1]}});m=Sh(n,m,p,g,h),n.disposeIntermediateTensorInfo(g)}else m=Sh(n,m,p,i,h);n.disposeIntermediateTensorInfo(y)}return m}const Toe={kernelName:id,backendName:"cpu",kernelFunc:Coe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Noe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,filter:o,bias:a,preluActivationWeights:i}=t,{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f,activation:p,leakyreluAlpha:h}=r;let m=kD({inputs:{x:s,filter:o},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(a){const y=m;m=ou({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(y)}if(p){const y=m;m=Sh(n,m,p,i,h),n.disposeIntermediateTensorInfo(y)}return m}const Aoe={kernelName:ld,backendName:"cpu",kernelFunc:Noe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Doe(e){const{inputs:t,backend:n}=e,{params:r,indices:s}=t,o=ee(r.shape),a=s.shape,i=a[a.length-1],[u,c,l,d]=zN(r,s);if(c===0)return n.makeTensorInfo(u,r.dtype,[]);const f=n.data.get(s.dataId).values,p=n.bufferSync(r),h=bY(f,p,r.dtype,c,i,l,d,r.shape,o);return n.makeTensorInfo(u,r.dtype,h.values)}const $oe={kernelName:zm,backendName:"cpu",kernelFunc:Doe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Roe(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,indices:o}=t,{axis:a,batchDims:i}=r;_e([s,o],"gatherV2");const u=Kt(a,s.shape)[0],c=n.data.get(o.dataId).values,l=s.shape[u];for(let S=0;S<c.length;++S){const I=c[S];D(I<=l-1&&I>=0,()=>`GatherV2: the index value ${I} is not in [0, ${l-1}]`)}let d=i;i==null&&(d=0);const f=ee(o.shape),p=uA(s,o,u,d),h=Dt({inputs:{x:s},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=Dt({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,f/p.batchSize]}}),y=[p.batchSize,p.outerSize,f/p.batchSize,p.sliceSize],g=n.bufferSync(m),b=n.bufferSync(h),w=wY(b,g,y);return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(p.outputShape,w.dtype,w.values)}const Foe={kernelName:Tw,backendName:"cpu",kernelFunc:Roe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Moe(e){const{inputs:t,backend:n}=e,{input:r}=t,s=ee(r.shape),o=r.shape[r.shape.length-1],a=s/o,i=Dt({inputs:{x:r},backend:n,attrs:{shape:[a,o]}}),u=ID(i,!0,n),c=Dt({inputs:{x:u},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),c}const Ooe={kernelName:nT,backendName:"cpu",kernelFunc:Moe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Poe=vt(Hm,e=>Number.isFinite(e)?1:0,"bool"),Boe={kernelName:Hm,backendName:"cpu",kernelFunc:Poe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Loe=vt(jm,e=>Math.abs(e)===1/0?1:0,"bool"),zoe={kernelName:jm,backendName:"cpu",kernelFunc:Loe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Woe=vt(Gm,e=>Number.isNaN(e)?1:0,"bool"),Uoe={kernelName:Gm,backendName:"cpu",kernelFunc:Woe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Voe(e){const{backend:t,attrs:n}=e,{start:r,stop:s,num:o}=n,a=RY(r,s,o);return t.makeTensorInfo([a.length],"float32",a)}const Hoe={kernelName:Ym,backendName:"cpu",kernelFunc:Voe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const joe=vt(Zm,e=>Math.log1p(e)),Goe={kernelName:Zm,backendName:"cpu",kernelFunc:joe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qoe=rn((e,t)=>e&&t),Koe=yn(Jm,qoe,null,"bool"),Xoe={kernelName:Jm,backendName:"cpu",kernelFunc:Koe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yoe=vt(eg,e=>e?0:1,"bool"),Qoe={kernelName:eg,backendName:"cpu",kernelFunc:Yoe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zoe=rn((e,t)=>e||t),Joe=yn(tg,Zoe,null,"bool"),eae={kernelName:tg,backendName:"cpu",kernelFunc:Joe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{depthRadius:o,bias:a,alpha:i,beta:u}=r;_e(s,"LRN");const c=s.shape[3],l=c-1,d=n.data.get(s.dataId).values,f=ee(s.shape),p=new Float32Array(f);function h(m){const y=m%c;let g=m-y+Math.max(0,y-o);const b=m-y+Math.min(y+o,l);let w=0;for(;g<=b;g++){const S=d[g];w+=S*S}return w}for(let m=0;m<f;m++){const y=h(m),g=d[m]*Math.pow(a+i*y,-u);p[m]=g}return n.makeTensorInfo(s.shape,s.dtype,p)}const nae={kernelName:ng,backendName:"cpu",kernelFunc:tae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,y:o,dy:a}=t,{depthRadius:i,bias:u,alpha:c,beta:l}=r;_e(a,"LRNGrad");const d=ee(a.shape),f=a.shape[3],p=n.data.get(a.dataId).values,h=n.data.get(s.dataId).values,m=n.data.get(o.dataId).values,y=new Float32Array(d),g=d;for(let b=0;b<g;b++){const w=b%f,S=b-w+Math.max(0,w-i),I=b-w+Math.min(f,w+i+1);let _=0;for(let C=S;C<I;C++)_+=Math.pow(h[C],2);_=c*_+u;for(let C=S;C<I;C++){let N=-2*c*l*h[C]*m[b]/_;b===C&&(N+=Math.pow(_,-l)),N*=p[b],y[C]+=N}}return n.makeTensorInfo(a.shape,s.dtype,y)}const sae={kernelName:Nw,backendName:"cpu",kernelFunc:rae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _D(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reductionIndices:o,keepDims:a}=r,i=n;let u=s.shape;const c=u.length,l=Kt(o,u);let d=l;const f=ts(d,c);let p=i.data.get(s.dataId).values;if(f!=null){const S=new Array(c);for(let I=0;I<S.length;I++)S[I]=u[f[I]];p=RA(p,u,s.dtype,f,S),d=ar(d.length,c),u=S}_e(s,"max"),or("max",d,c);const[h,m]=sr(u,d),y=ee(m),g=PY(p,y,h,s.dtype),b=i.write(g,h,s.dtype);let w=h;return a&&(w=Rn(h,l)),{dataId:b,shape:w,dtype:s.dtype}}const oae={kernelName:rg,backendName:"cpu",kernelFunc:_D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t;_e(s,"maxPool");const{filterSize:o,strides:a,pad:i,dimRoundingMode:u}=r,c=1;D(xs(a,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);const l=Ws(s.shape,o,a,c,i,u);let d;if(l.filterWidth===1&&l.filterHeight===1&&ws(l.inShape,l.outShape))d=io({inputs:{x:s},backend:n});else{const f=n.data.get(s.dataId).values,p=Ee(s.shape),h=T2(f,s.shape,s.dtype,p,l,"max");d=n.makeTensorInfo(l.outShape,s.dtype,h.values)}return d}const iae={kernelName:og,backendName:"cpu",kernelFunc:aae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{filterSize:o,strides:a,pad:i,dimRoundingMode:u,dataFormat:c}=r;_e(s,"maxPool3d");const l=za(s.shape,o,a,1,i,u,c),d=n.data.get(s.dataId).values,f=SD(d,s.shape,s.dtype,Ee(s.shape),l,"max");return n.makeTensorInfo(f.shape,"float32",f.values)}const uae={kernelName:Aw,backendName:"cpu",kernelFunc:lae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cae(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o}=t,{filterSize:a,strides:i,pad:u,dimRoundingMode:c}=r;_e([s,o],"maxPool3DGrad");const l=za(o.shape,a,i,1,u,c),d=n.bufferSync(o),f=Zre(d,l),p=l.strideDepth,h=l.strideHeight,m=l.strideWidth,y=l.dilationDepth,g=l.dilationHeight,b=l.dilationWidth,w=l.effectiveFilterDepth,S=l.effectiveFilterHeight,I=l.effectiveFilterWidth,_=w-1-l.padInfo.front,C=I-1-l.padInfo.left,N=S-1-l.padInfo.top,$=rt(o.shape,"float32"),R=n.bufferSync(s);for(let F=0;F<l.batchSize;++F)for(let U=0;U<l.inChannels;++U)for(let L=0;L<l.inDepth;++L)for(let H=0;H<l.inHeight;++H)for(let j=0;j<l.inWidth;++j){const X=L-_,Q=H-N,P=j-C;let G=0;for(let Y=0;Y<w;Y+=y){const Z=(X+Y)/p;if(!(Z<0||Z>=l.outDepth||Math.floor(Z)!==Z))for(let se=0;se<S;se+=g){const re=(Q+se)/h;if(!(re<0||re>=l.outHeight||Math.floor(re)!==re))for(let ae=0;ae<I;ae+=b){const ie=(P+ae)/m;if(ie<0||ie>=l.outWidth||Math.floor(ie)!==ie)continue;const ue=w*S*I-1-f.get(F,Z,re,ie,U),ve=Y*S*I+se*I+ae,pe=ue===ve?1:0;if(pe===0)continue;const xe=R.get(F,Z,re,ie,U);G+=xe*pe}}}$.set(G,F,L,H,j,U)}return n.makeTensorInfo($.shape,$.dtype,$.values)}const dae={kernelName:oT,backendName:"cpu",kernelFunc:cae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fae(e){const{inputs:t,backend:n,attrs:r}=e,{dy:s,input:o,output:a}=t,i=o;_e([o,a],"maxPoolGrad");const{filterSize:u,strides:c,pad:l,dimRoundingMode:d}=r,f=Ws(i.shape,u,c,1,l,d),p=n.data.get(i.dataId).values,h=rt(f.outShape,i.dtype,wD(p,i.shape,i.dtype,f).values),m=f.strideHeight,y=f.strideWidth,g=f.dilationHeight,b=f.dilationWidth,w=f.effectiveFilterHeight,S=f.effectiveFilterWidth,I=S-1-f.padInfo.left,_=w-1-f.padInfo.top,C=rt(i.shape,"float32"),N=n.data.get(s.dataId).values,$=rt(s.shape,"float32",N);for(let R=0;R<f.batchSize;++R)for(let F=0;F<f.inChannels;++F)for(let U=0;U<f.inHeight;++U)for(let L=0;L<f.inWidth;++L){const H=U-_,j=L-I;let X=0;for(let Q=0;Q<w;Q+=g){const P=(H+Q)/m;if(!(P<0||P>=f.outHeight||Math.floor(P)!==P))for(let G=0;G<S;G+=b){const Y=(j+G)/y;if(Y<0||Y>=f.outWidth||Math.floor(Y)!==Y)continue;const Z=w*S-1-h.get(R,P,Y,F),se=Q*S+G,re=Z===se?1:0;if(re===0)continue;const ae=$.get(R,P,Y,F);X+=ae*re}}C.set(X,R,U,L,F)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const pae={kernelName:sT,backendName:"cpu",kernelFunc:fae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hae(e,t,n,r,s){const o=Ee(t),a=T2(e,t,n,o,s,"max"),i=wD(e,t,n,s,!0,r);return[a.values,i.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mae={kernelName:Dw,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:r}=e,{filterSize:s,strides:o,pad:a,includeBatchInIndex:i}=t,u=n;_e(r,"MaxPoolWithArgmax");const c=u.data.get(r.dataId).values,l=Ws(r.shape,s,o,[1,1],a),[d,f]=hae(c,r.shape,r.dtype,i,l),p=u.write(d,l.outShape,r.dtype),h=u.write(f,l.outShape,r.dtype);return[{dataId:p,shape:l.outShape,dtype:r.dtype},{dataId:h,shape:l.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r,i=Kt(o,s.shape),c=sr(s.shape,i)[1],l=ee(c),d=[],f=n.makeTensorInfo([],"float32",new Float32Array([l]));d.push(f);const p=Da({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(p);const h=N2({inputs:{a:p,b:f},backend:n});d.push(h);const m=zd({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:a}});return d.forEach(y=>n.disposeIntermediateTensorInfo(y)),m}const yae={kernelName:ag,backendName:"cpu",kernelFunc:gae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{axis:o,keepDims:a}=r;_e(s,"min");const i=Kt(o,s.shape);let u=i;const c=ts(u,s.shape.length);let l=s;c!=null&&(l=vr({inputs:{x:s},backend:n,attrs:{perm:c}}),u=ar(u.length,s.shape.length)),or("min",u,l.shape.length);const[d,f]=sr(l.shape,u),p=ee(f),h=Vn(ee(d),l.dtype),m=n.data.get(l.dataId).values;for(let g=0;g<h.length;++g){const b=g*p;let w=m[b];for(let S=0;S<p;++S){const I=m[b+S];(Number.isNaN(I)||I<w)&&(w=I)}h[g]=w}c!=null&&n.disposeIntermediateTensorInfo(l);const y=n.makeTensorInfo(d,l.dtype,h);if(a){const g=Rn(d,i),b=Dt({inputs:{x:y},backend:n,attrs:{shape:g}});return n.disposeIntermediateTensorInfo(y),b}return y}const bae={kernelName:ig,backendName:"cpu",kernelFunc:vae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{paddings:o,mode:a}=r;_e(s,"mirrorPad");const i=o.map((w,S)=>w[0]+s.shape[S]+w[1]),u=o.map(w=>w[0]),c=o.map((w,S)=>w[0]+s.shape[S]),l=a==="reflect"?0:1,d=n.data.get(s.dataId).values,f=s.shape.length,p=Ee(s.shape),h=ee(i),m=i.length,y=Ee(i),g=nr(s.dtype,h);for(let w=0;w<h;w++){let S=yu(w,m,y);for(let _=0;_<m;_++)S[_]<u[_]?S[_]=u[_]*2-S[_]-l:S[_]>=c[_]&&(S[_]=(c[_]-1)*2-S[_]+l);S=S.map((_,C)=>_-u[C]);const I=so(S,f,p);g[w]=d[I]}return{dataId:n.write(g,i,s.dtype),shape:i,dtype:s.dtype}}const Sae={kernelName:ug,backendName:"cpu",kernelFunc:wae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xae=rn((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),kae=yn(cg,xae),Iae={kernelName:cg,backendName:"cpu",kernelFunc:kae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ED(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{dim:o}=r,a=s.shape.length;let i=o;if(i===-1&&(i=a-1),i!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${i}`);const u=Kt([i],s.shape),c=_D({inputs:{x:s},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=Rn(c.shape,u),d=Dt({inputs:{x:c},backend:n,attrs:{shape:l}}),f=E2({inputs:{a:s,b:d},backend:n}),p=DA({inputs:{x:f},backend:n}),h=zd({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=Dt({inputs:{x:h},backend:n,attrs:{shape:l}}),y=N2({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),y}const _ae={kernelName:Wg,backendName:"cpu",kernelFunc:ED};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eae(e){const{inputs:t,backend:n,attrs:r}=e,{logits:s}=t,{numSamples:o,seed:a,normalized:i}=r;_e(s,"multinomial");const u=i?s:ED({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,f=[c,o],p=Vn(ee(f),"int32");for(let h=0;h<c;++h){const m=h*l,y=new Float32Array(l-1);y[0]=d[m];for(let w=1;w<y.length;++w)y[w]=y[w-1]+d[m+w];const g=oy.alea(a.toString()),b=h*o;for(let w=0;w<o;++w){const S=g();p[b+w]=y.length;for(let I=0;I<y.length;I++)if(S<y[I]){p[b+w]=I;break}}}return i||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",p)}const Cae={kernelName:dg,backendName:"cpu",kernelFunc:Eae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tae=AN;function Nae(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:u}=r;_e(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,{selectedIndices:d}=Tae(c,l,a,i,u);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Aae={kernelName:hg,backendName:"cpu",kernelFunc:Nae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dae=DN;function $ae(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:u,padToMaxOutputSize:c}=r;_e(s,"NonMaxSuppressionPadded");const l=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,{selectedIndices:f,validOutputs:p}=Dae(l,d,a,i,u,c);return[n.makeTensorInfo([f.length],"int32",new Int32Array(f)),n.makeTensorInfo([],"int32",new Int32Array([p]))]}const Rae={kernelName:mg,backendName:"cpu",kernelFunc:$ae};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fae=$N;function Mae(e){const{inputs:t,backend:n,attrs:r}=e,{boxes:s,scores:o}=t,{maxOutputSize:a,iouThreshold:i,scoreThreshold:u,softNmsSigma:c}=r;_e(s,"NonMaxSuppressionWithScore");const l=n.data.get(s.dataId).values,d=n.data.get(o.dataId).values,f=a,p=i,h=u,m=c,{selectedIndices:y,selectedScores:g}=Fae(l,d,f,p,h,m);return[n.makeTensorInfo([y.length],"int32",new Int32Array(y)),n.makeTensorInfo([g.length],"float32",new Float32Array(g))]}const Oae={kernelName:gg,backendName:"cpu",kernelFunc:Mae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pae(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s}=t,{dtype:o,depth:a,onValue:i,offValue:u}=r;_e(s,"oneHot");const c=ee(s.shape),l=new Float32Array(c*a);l.fill(u);const d=n.data.get(s.dataId).values;for(let f=0;f<c;++f)d[f]>=0&&d[f]<a&&(l[f*a+d[f]]=i);return n.makeTensorInfo([...s.shape,a],o,l)}const Bae={kernelName:yg,backendName:"cpu",kernelFunc:Pae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kh(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Bi({inputs:{input:r},backend:n}),o=kh({inputs:{x:s},backend:n}),a=au({inputs:{input:r},backend:n}),i=kh({inputs:{x:a},backend:n}),u=Rr({inputs:{real:o,imag:i},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),u}else return A2({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Lae={kernelName:Zw,backendName:"cpu",kernelFunc:kh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CD(e){const{inputs:t,backend:n}=e,{x:r}=t;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=Bi({inputs:{input:r},backend:n}),o=CD({inputs:{x:s},backend:n}),a=au({inputs:{input:r},backend:n}),i=kh({inputs:{x:a},backend:n}),u=Rr({inputs:{real:o,imag:i},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),u}else return A2({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const zae={kernelName:Rw,backendName:"cpu",kernelFunc:CD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function TD(e){const{inputs:t,backend:n,attrs:r}=e,{axis:s}=r;if(t.length===1)return xh({inputs:{input:t[0]},backend:n,attrs:{dim:s}});const o=t[0].shape,a=t[0].dtype;t.forEach(l=>{Lr(o,l.shape,"All tensors passed to stack must have matching shapes"),D(a===l.dtype,()=>"All tensors passed to stack must have matching dtypes")});const i=[],u=t.map(l=>{const d=xh({inputs:{input:l},backend:n,attrs:{dim:s}});return i.push(d),d}),c=iu({inputs:u,backend:n,attrs:{axis:s}});return i.forEach(l=>n.disposeIntermediateTensorInfo(l)),c}const Wae={kernelName:Fw,backendName:"cpu",kernelFunc:TD};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uae(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{paddings:o,constantValue:a}=r;_e(s,"pad");const i=o.map((b,w)=>b[0]+s.shape[w]+b[1]),u=o.map(b=>b[0]),c=n.data.get(s.dataId).values,l=ee(s.shape),d=s.shape.length,f=Ee(s.shape),p=ee(i),h=i.length,m=Ee(i),y=nr(s.dtype,p);a!==0&&y.fill(a);for(let b=0;b<l;b++){const S=yu(b,d,f).map((_,C)=>_+u[C]),I=so(S,h,m);y[I]=c[b]}return{dataId:n.write(y,i,s.dtype),shape:i,dtype:s.dtype}}const ND={kernelName:vg,backendName:"cpu",kernelFunc:Uae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vae=rn((e,t)=>Math.pow(e,t)),Hae=yn(bg,Vae),jae={kernelName:bg,backendName:"cpu",kernelFunc:Hae};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gae(e){const{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:s,paramsDenseValues:o,indices:a}=t,i=s.map(y=>n.data.get(y.dataId).values),u=s.map(y=>y.shape),c=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values,[d,f,p]=lQ(i,u,c,o.shape,o.dtype,l,a.shape),h=d.map(y=>n.makeTensorInfo([y.length],"int32",y)),m=n.makeTensorInfo(p,o.dtype,f);return h.concat([m])}const qae={kernelName:aT,backendName:"cpu",kernelFunc:Gae};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kae(e){const{inputs:t,backend:n}=e,{starts:r,limits:s,deltas:o}=t,a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[c,l]=uQ(a,r.shape,r.dtype,i,s.shape,u,o.shape),d=n.makeTensorInfo([c.length],"int32",c),f=n.makeTensorInfo([l.length],r.dtype,l);return[d,f]}const Xae={kernelName:iT,backendName:"cpu",kernelFunc:Kae};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yae(e){const{inputs:t,backend:n,attrs:r}=e,{shape:s,values:o,defaultValue:a,rowPartitionTensors:i}=t,{rowPartitionTypes:u}=r,c=n.data.get(s.dataId).values,l=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,f=i.map(y=>n.data.get(y.dataId).values),p=i.map(y=>y.shape),[h,m]=cQ(c,s.shape,l,o.shape,o.dtype,d,a.shape,f,p,u);return n.makeTensorInfo(h,o.dtype,m)}const Qae={kernelName:lT,backendName:"cpu",kernelFunc:Yae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zae(e){const{backend:t,attrs:n}=e,{start:r,stop:s,dtype:o,step:a}=n,i=FA(r,s,a,o);return t.makeTensorInfo([i.length],o,i)}const Jae={kernelName:Mw,backendName:"cpu",kernelFunc:Zae};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eie=vt(xg,e=>1/e),tie={kernelName:xg,backendName:"cpu",kernelFunc:eie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nie(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:o,halfPixelCenters:a,size:i}=r;_e(s,"resizeBilinear");const u=Ee(s.shape),[c,l]=i,[d,f,p,h]=s.shape,m=n.data.get(s.dataId).values,y=new Float32Array(ee([d,c,l,h])),g=[o&&c>1?f-1:f,o&&l>1?p-1:p],b=[o&&c>1?c-1:c,o&&l>1?l-1:l];let w=0;const S=g[0]/b[0],I=g[1]/b[1];for(let _=0;_<d;_++)for(let C=0;C<c;C++){let N;a?N=S*(C+.5)-.5:N=S*C;const $=Math.max(0,Math.floor(N)),R=N-$,F=Math.min(f-1,Math.ceil(N)),U=_*u[0]+$*u[1],L=_*u[0]+F*u[1];for(let H=0;H<l;H++){let j;a?j=I*(H+.5)-.5:j=I*H;const X=Math.max(0,Math.floor(j)),Q=j-X,P=Math.min(p-1,Math.ceil(j)),G=U+X*u[2],Y=L+X*u[2],Z=U+P*u[2],se=L+P*u[2];for(let re=0;re<h;re++){const ae=m[G+re],ie=m[Y+re],ue=m[Z+re],ve=m[se+re],pe=ae+(ue-ae)*Q,xe=ie+(ve-ie)*Q,Se=pe+(xe-pe)*R;y[w++]=Se}}}return n.makeTensorInfo([d,c,l,h],"float32",y)}const rie={kernelName:_g,backendName:"cpu",kernelFunc:nie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sie(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:o}=t,{alignCorners:a}=r;_e([o,s],"resizeBilinearGrad");const i=Ee(s.shape),[u,c,l,d]=s.shape,[,f,p]=o.shape,h=new Float32Array(u*c*l*d),m=[a&&f>1?c-1:c,a&&p>1?l-1:l],y=[a&&f>1?f-1:f,a&&p>1?p-1:p],g=m[0]/y[0],b=m[1]/y[1],w=n.data.get(o.dataId).values;let S=0;for(let I=0;I<u;I++){const _=I*i[0];for(let C=0;C<f;C++){const N=C*g,$=Math.floor(N),R=Math.min(Math.ceil(N),c-1),F=_+$*i[1],U=_+R*i[1],L=N-$,H=1-L;for(let j=0;j<p;j++){const X=j*b,Q=Math.floor(X),P=Math.min(Math.ceil(X),l-1),G=X-Q,Y=1-G,Z=F+Q*i[2],se=F+P*i[2],re=U+Q*i[2],ae=U+P*i[2],ie=H*Y,ue=H*G,ve=L*Y,pe=L*G;for(let xe=0;xe<d;xe++){const Se=w[S++];h[Z+xe]+=Se*ie,h[se+xe]+=Se*ue,h[re+xe]+=Se*ve,h[ae+xe]+=Se*pe}}}}return n.makeTensorInfo([u,l,c,d],"float32",h)}const oie={kernelName:Bw,backendName:"cpu",kernelFunc:sie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aie(e){const{inputs:t,backend:n,attrs:r}=e,{images:s}=t,{alignCorners:o,halfPixelCenters:a,size:i}=r;_e(s,"resizeNearestNeighbor");const u=Ee(s.shape),[c,l]=i,[d,f,p,h]=s.shape,m=n.data.get(s.dataId).values,y=new Float32Array(d*c*l*h),g=[o&&c>1?f-1:f,o&&l>1?p-1:p],b=[o&&c>1?c-1:c,o&&l>1?l-1:l],w=g[0]/b[0],S=g[1]/b[1];let I=0;for(let _=0;_<d;_++){const C=_*u[0];for(let N=0;N<c;N++){const $=a?w*(N+.5):w*N;let R=Math.min(f-1,o?Math.round($):Math.floor($));a&&(R=Math.max(0,R));const F=C+R*u[1];for(let U=0;U<l;U++){const L=a?S*(U+.5):S*U;let H=Math.min(p-1,o?Math.round(L):Math.floor(L));a&&(H=Math.max(0,H));const j=F+H*u[2];for(let X=0;X<h;X++){const Q=m[j+X];y[I++]=Q}}}}return n.makeTensorInfo([d,c,l,h],s.dtype,y)}const iie={kernelName:Ig,backendName:"cpu",kernelFunc:aie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lie(e){const{inputs:t,backend:n,attrs:r}=e,{images:s,dy:o}=t,{alignCorners:a}=r;_e([o,s],"resizeNearestNeighborGrad");const i=Ee(s.shape),u=Ee(o.shape),[c,l,d,f]=s.shape,[,p,h]=o.shape,m=new Float32Array(c*l*d*f),y=n.data.get(o.dataId).values,g=[a&&p>1?l-1:l,a&&h>1?d-1:d],b=[a&&p>1?p-1:p,a&&h>1?h-1:h],w=g[0]/b[0],S=g[1]/b[1],I=1/w,_=1/S,C=Math.ceil(I)*2+2,N=Math.ceil(_)*2+2;for(let $=0;$<c;$++){const R=$*i[0];for(let F=0;F<l;F++){const U=R+F*i[1],L=Math.floor(F*I),H=Math.floor(L-C/2);for(let j=0;j<d;j++){const X=U+j*i[2],Q=Math.floor(j*_),P=Math.floor(Q-N/2);for(let G=0;G<f;G++){let Y=0;for(let Z=0;Z<C;Z++){const se=Z+H;if(se<0||se>=p)continue;const re=R+se*u[1],ae=se*w,ie=Math.min(l-1,a?Math.round(ae):Math.floor(ae));if(F===ie)for(let ue=0;ue<N;ue++){const ve=ue+P;if(ve<0||ve>=h)continue;const pe=re+ve*u[2],xe=ve*S,Se=Math.min(d-1,a?Math.round(xe):Math.floor(xe));j===Se&&(Y+=y[pe+G])}}m[X+G]=Y}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}const uie={kernelName:Pw,backendName:"cpu",kernelFunc:lie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cie(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{dims:o}=r;_e(s,"reverse");const a=s.shape.length,i=Kt(o,s.shape);if(a===0)return io({inputs:{x:s},backend:n});const u=new mn(s.shape,s.dtype),c=n.bufferSync(s);for(let l=0;l<u.size;l++){const d=u.indexToLoc(l),f=d.slice();i.forEach(p=>f[p]=s.shape[p]-1-f[p]),u.set(c.get(...f),...d)}return n.makeTensorInfo(u.shape,u.dtype,u.values)}const die={kernelName:Cg,backendName:"cpu",kernelFunc:cie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fie={kernelName:Qg,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:r}=e,{radians:s,fillValue:o,center:a}=t,i=n,u=nr(r.dtype,ee(r.shape)),[c,l,d,f]=r.shape,[p,h]=qN(a,l,d),m=255,y=Math.sin(s),g=Math.cos(s),b=i.data.get(r.dataId).values;for(let S=0;S<c;S++){const I=S*d*l*f;for(let _=0;_<l;_++){const C=_*(d*f);for(let N=0;N<d;N++){const $=N*f;for(let R=0;R<f;R++){const F=[c,_,N,R],U=F[2],L=F[1];let H=(U-p)*g-(L-h)*y,j=(U-p)*y+(L-h)*g;H=Math.round(H+p),j=Math.round(j+h);let X=o;if(typeof o!="number"&&(R===3?X=m:X=o[R]),H>=0&&H<d&&j>=0&&j<l){const P=j*(d*f),G=H*f,Y=I+P+G+R;X=b[Y]}const Q=I+C+$+R;u[Q]=X}}}}return{dataId:i.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pie=vt(Tg,e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1}),hie={kernelName:Tg,backendName:"cpu",kernelFunc:pie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(e){const{inputs:t,backend:n,attrs:r}=e,{indices:s,updates:o}=t,{shape:a}=r,{sliceRank:i,numUpdates:u,sliceSize:c,strides:l,outputSize:d}=Su(o,s,a),f=!0,p=n.bufferSync(s),h=n.bufferSync(o),m=Al(p,h,a,d,c,u,i,l,0,f);return n.makeTensorInfo(a,m.dtype,m.values)}const gie={kernelName:Ag,backendName:"cpu",kernelFunc:mie};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yie(e,t){let n=0,r=e.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),e[s]<t?n=s+1:r=s;return r}function vie(e,t){let n=0,r=e.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),e[s]<=t?n=s+1:r=s;return r}function bie(e,t,n,r,s,o){const a=un("int32",n*s);for(let i=0;i<n;++i){const u=e.slice(i*r,(i+1)*r),c=i*s;for(let l=0;l<s;++l)a[c+l]=o==="left"?yie(u,t[l+c]):vie(u,t[l+c])}return a}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wie(e){const{inputs:t,backend:n,attrs:r}=e,{sortedSequence:s,values:o}=t,{side:a}=r,i=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,c=bie(i,u,s.shape[0],s.shape[1],o.shape[1],a);return n.makeTensorInfo(o.shape,"int32",c)}const Sie={kernelName:$g,backendName:"cpu",kernelFunc:wie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xie(e){const{inputs:t,backend:n}=e,{condition:r,t:s,e:o}=t;_e([r,s,o],"select");const a=r.shape.length,i=n.data.get(r.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,l=vu(s.dtype,o.dtype),d=Vn(ee(s.shape),l);let f=0;const p=a===0||a>1||s.shape.length===1?1:ee(s.shape.slice(1));for(let h=0;h<i.length;h++)for(let m=0;m<p;m++)i[h]===1?d[f++]=u[h]:d[f++]=c[h];return n.makeTensorInfo(s.shape,l,d)}const kie={kernelName:Lw,backendName:"cpu",kernelFunc:xie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iie=MG,_ie=OG,Eie=vt(Rg,e=>e>=0?_ie*e:Iie*(Math.exp(e)-1)),Cie={kernelName:Rg,backendName:"cpu",kernelFunc:Eie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tie=vt(Og,e=>e<0?-1:e>0?1:0),Nie={kernelName:Og,backendName:"cpu",kernelFunc:Tie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aie=vt(Fg,e=>Math.sin(e)),Die={kernelName:Fg,backendName:"cpu",kernelFunc:Aie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ie=vt(Mg,e=>Math.sinh(e)),Rie={kernelName:Mg,backendName:"cpu",kernelFunc:$ie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fie=11920928955078125e-23,Uk=Math.log(Fie)+2,Mie=vt(Bg,e=>{const t=e>-Uk,n=e<Uk,r=Math.exp(e);let s;return n?s=r:t?s=e:s=Math.log(1+r),s}),Oie={kernelName:Bg,backendName:"cpu",kernelFunc:Mie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pie(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{blockShape:o,paddings:a}=r;_e([s],"spaceToBatchND");const i=ee(o),u=[[0,0]];u.push(...a);for(let _=1+o.length;_<s.shape.length;++_)u.push([0,0]);const c=ND.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:u,constantValue:0}}),l=ly(c.shape,o,i,!1),d=uy(l.length,o.length,!1),f=cy(c.shape,o,i,!1),m=Dt({inputs:{x:c},backend:n,attrs:{shape:l}}),b=vr({inputs:{x:m},backend:n,attrs:{perm:d}}),I=Dt({inputs:{x:b},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),I}const Bie={kernelName:Ww,backendName:"cpu",kernelFunc:Pie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lie(e){const{inputs:t,backend:n}=e,{indices:r,values:s,denseShape:o,defaultValue:a}=t;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(a.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${a.shape}`);const i=n.data.get(r.dataId).values,u=n.data.get(s.dataId).values,c=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values[0],[d,f,p,h,m]=gQ(i,r.shape,r.dtype,u,s.dtype,c,l);return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([f[0]],s.dtype,p),n.makeTensorInfo([h.length],"bool",new Uint8Array(h.map(y=>Number(y)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const zie={kernelName:Vw,backendName:"cpu",kernelFunc:Lie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wie(e){const{inputs:t,backend:n}=e,{inputIndices:r,inputShape:s,newShape:o}=t;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const a=Array.from(n.data.get(s.dataId).values),i=n.data.get(r.dataId).values,u=Array.from(n.data.get(o.dataId).values),[c,l,d]=yQ(i,r.shape,r.dtype,a,u);return[n.makeTensorInfo(l,r.dtype,c),n.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}const Uie={kernelName:Ug,backendName:"cpu",kernelFunc:Wie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vie(e){const{inputs:t,backend:n}=e,{data:r,indices:s,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(s.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[c,l]=OA(a,r.shape,r.dtype,i,u,!0);return n.makeTensorInfo(l,r.dtype,c)}const Hie={kernelName:Hw,backendName:"cpu",kernelFunc:Vie};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jie(e){const{inputs:t,backend:n}=e,{data:r,indices:s,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(s.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const a=n.data.get(r.dataId).values,i=n.data.get(s.dataId).values,u=n.data.get(o.dataId).values,[c,l]=OA(a,r.shape,r.dtype,i,u);return n.makeTensorInfo(l,r.dtype,c)}const Gie={kernelName:jw,backendName:"cpu",kernelFunc:jie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qie(e){const{inputs:t,backend:n,attrs:r}=e,{sparseIndices:s,sparseValues:o,defaultValue:a}=t,{outputShape:i}=r,{sliceRank:u,numUpdates:c,sliceSize:l,strides:d,outputSize:f}=Su(o,s,i),p=!1,h=n.bufferSync(s);let m;switch(o.dtype){case"bool":{const y=n.bufferSync(o),g=!!n.data.get(a.dataId).values[0];m=Al(h,y,i,f,l,c,u,d,g,p);break}case"float32":{const y=n.bufferSync(o),g=n.data.get(a.dataId).values[0];m=Al(h,y,i,f,l,c,u,d,g,p);break}case"int32":{const y=n.bufferSync(o),g=n.data.get(a.dataId).values[0];m=Al(h,y,i,f,l,c,u,d,g,p);break}case"string":{const y=n.bufferSync(o),g=ud(n.data.get(a.dataId).values[0]);m=Al(h,y,i,f,l,c,u,d,g,p);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return n.makeTensorInfo(i,m.dtype,m.values)}const Kie={kernelName:Vg,backendName:"cpu",kernelFunc:qie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xie(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{numOrSizeSplits:o,axis:a}=r,i=Kt(a,s.shape)[0],u=QN(s,o,i),c=new Array(s.shape.length).fill(0),l=s.shape.slice();return u.map(d=>{const f=[...l];f[i]=d;const p=Li({inputs:{x:s},backend:n,attrs:{begin:c,size:f}});return c[i]+=d,p})}const Yie={kernelName:Uw,backendName:"cpu",kernelFunc:Xie};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qie={kernelName:cT,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,r=t;_e(n,"square");const s=r.data.get(n.dataId).values,o=new Float32Array(s.length);for(let i=0;i<s.length;++i){const u=s[i];o[i]=u*u}return{dataId:r.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zie=vt(Od,(e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),Jie={kernelName:Od,backendName:"cpu",kernelFunc:Zie};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ele(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{begin:o,end:a,strides:i,beginMask:u,endMask:c,ellipsisMask:l,newAxisMask:d,shrinkAxisMask:f}=r;_e(s,"stridedSlice");const{finalShapeSparse:p,finalShape:h,isIdentity:m,sliceDim0:y,isSimpleSlice:g,begin:b,end:w,strides:S}=jN(s.shape,o,a,i,u,c,l,d,f);let I;if(m)I=Dt({inputs:{x:s},backend:n,attrs:{shape:h}});else if(y||g){D(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const _=WN(b,w,S),C=Li({inputs:{x:s},backend:n,attrs:{begin:b,size:_}});I=Dt({inputs:{x:C},backend:n,attrs:{shape:h}}),n.disposeIntermediateTensorInfo(C)}else{const _=n.bufferSync(s),C=EQ(p,_,S,b);I=n.makeTensorInfo(h,C.dtype,C.values)}return I}const tle={kernelName:jg,backendName:"cpu",kernelFunc:ele};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nle(e){const{inputs:t,backend:n,attrs:r}=e,{separator:s,nGramWidths:o,leftPad:a,rightPad:i,padWidth:u,preserveShortSequences:c}=r,{data:l,dataSplits:d}=t,f=n.data.get(l.dataId).values,p=n.data.get(d.dataId).values,[h,m]=PA(f,p,s,o,a,i,u,c);return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(d.shape,"int32",m)]}const rle={kernelName:qw,backendName:"cpu",kernelFunc:nle};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sle(e){const{inputs:t,backend:n,attrs:r}=e,{skipEmpty:s}=r,{input:o,delimiter:a}=t;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(a.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${a.shape}`);const i=n.data.get(o.dataId).values,u=n.data.get(a.dataId).values[0],[c,l,d]=BA(i,u,s),f=l.length;return[n.makeTensorInfo([f,2],"int32",c),n.makeTensorInfo([f],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const ole={kernelName:Kw,backendName:"cpu",kernelFunc:sle};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ale(e){const{inputs:t,backend:n,attrs:r}=e,{numBuckets:s}=r,{input:o}=t;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const a=n.data.get(o.dataId).values,i=LA(a,s);return n.makeTensorInfo(o.shape,"int32",i)}const ile={kernelName:Xw,backendName:"cpu",kernelFunc:ale};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lle=vt(qg,e=>Math.tan(e)),ule={kernelName:qg,backendName:"cpu",kernelFunc:lle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cle=vt(Kg,e=>Math.tanh(e)),dle={kernelName:Kg,backendName:"cpu",kernelFunc:cle};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fle(e){const{inputs:t,backend:n}=e,{tensor:r,indices:s,updates:o}=t,{sliceRank:a,numUpdates:i,sliceSize:u,strides:c,outputSize:l}=Su(o,s,r.shape),d=!1,f=n.bufferSync(s),p=n.bufferSync(o),h=n.bufferSync(r),m=Al(f,p,r.shape,l,u,i,a,c,h,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const ple={kernelName:Dg,backendName:"cpu",kernelFunc:fle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hle(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{reps:o}=r;_e(s,"tile");const a=$Q(n.bufferSync(s),o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}const mle={kernelName:Md,backendName:"cpu",kernelFunc:hle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gle(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,{k:o,sorted:a}=r;_e(s,"topk");const i=n.data.get(s.dataId).values,[u,c]=RQ(i,s.shape,s.dtype,o,a);return[n.makeTensorInfo(u.shape,u.dtype,u.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const yle={kernelName:Xg,backendName:"cpu",kernelFunc:gle};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vle(e){const{inputs:t,attrs:n,backend:r}=e,{image:s,transforms:o}=t,{interpolation:a,fillMode:i,fillValue:u,outputShape:c}=n,[l,d,f,p]=s.shape,[h,m]=c??[d,f],y=[l,h,m,p],g=Ee(s.shape),b=g[0],w=g[1],S=g[2],I=Ee(y),_=I[0],C=I[1],N=I[2],$=nr(s.dtype,ee(y));$.fill(u);const R=r.data.get(s.dataId).values,F=r.data.get(o.dataId).values;for(let L=0;L<l;++L){const H=o.shape[0]===1?F:F.subarray(L*8,L*8+8);for(let j=0;j<h;++j)for(let X=0;X<m;++X)for(let Q=0;Q<p;++Q){let P;const G=H[6]*X+H[7]*j+1;if(G===0)continue;const Y=(H[0]*X+H[1]*j+H[2])/G,Z=(H[3]*X+H[4]*j+H[5])/G,se=Vk(Y,f,i),re=Vk(Z,d,i);switch(a){case"nearest":P=Ile(R,d,f,b,w,S,L,re,se,Q,u);break;case"bilinear":P=_le(R,d,f,b,w,S,L,re,se,Q,u);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${a}`)}const ae=L*_+j*C+X*N+Q;$[ae]=P}return r.makeTensorInfo(y,s.dtype,$)}return{dataId:r.write($,y,s.dtype),shape:s.shape,dtype:s.dtype}}const ble={kernelName:Yg,backendName:"cpu",kernelFunc:vle};function Vk(e,t,n){switch(n){case"reflect":return wle(e,t);case"wrap":return Sle(e,t);case"nearest":return kle(e,t);case"constant":default:return xle(e)}}function wle(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{const r=2*t;n-=r*Math.trunc(n/r),n>=t&&(n=r-n-1)}return fw(0,n,t-1)}function Sle(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{const r=t-1;n-=t*Math.trunc(n/r)}return fw(0,n,t-1)}function xle(e,t){return e}function kle(e,t){return fw(0,e,t-1)}function fc(e,t,n,r,s,o,a,i,u,c,l){const d=a*r+i*s+u*o+c;return 0<=i&&i<t&&0<=u&&u<n?e[d]:l}function Ile(e,t,n,r,s,o,a,i,u,c,l){const d=Math.round(i),f=Math.round(u);return fc(e,t,n,r,s,o,a,d,f,c,l)}function _le(e,t,n,r,s,o,a,i,u,c,l){const d=Math.floor(i),f=Math.floor(u),p=d+1,h=f+1,m=(h-u)*fc(e,t,n,r,s,o,a,d,f,c,l)+(u-f)*fc(e,t,n,r,s,o,a,d,h,c,l),y=(h-u)*fc(e,t,n,r,s,o,a,p,f,c,l)+(u-f)*fc(e,t,n,r,s,o,a,p,h,c,l);return(p-i)*m+(i-d)*y}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ele(e){const{inputs:t,attrs:n,backend:r}=e,{axis:s}=n,{x:o}=t;_e(o,"unique");const a=r.data.get(o.dataId).values,{outputValues:i,outputShape:u,indices:c}=WA(a,s,o.shape,o.dtype);return[r.makeTensorInfo(u,o.dtype,i),r.makeTensorInfo([c.length],"int32",c)]}const Cle={kernelName:Yw,backendName:"cpu",kernelFunc:Ele};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tle(e){const{inputs:t,backend:n,attrs:r}=e,{value:s}=t;let{axis:o}=r;o<0&&(o+=s.shape.length);const a=s.shape.length,i=s.shape[o],u=new Array(a-1);let c=0;for(let p=0;p<a;p++)p!==o&&(u[c++]=s.shape[p]);const l=new Array(a).fill(0),d=s.shape.slice();d[o]=1;const f=new Array(i);for(let p=0;p<f.length;p++){l[o]=p;const h=Li({inputs:{x:s},backend:n,attrs:{begin:l,size:d}});f[p]=Dt({inputs:{x:h},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(h)}return f}const Nle={kernelName:Qw,backendName:"cpu",kernelFunc:Tle};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ale(e){const{inputs:t,backend:n,attrs:r}=e,{x:s,segmentIds:o}=t,{numSegments:a}=r;_e(s,"unsortedSegmentSum");const i=s.shape.length,u=o.shape.length,c=[],l=[],d=i-u;let f=o;for(let h=0;h<d;++h){const m=xh({inputs:{input:f},backend:n,attrs:{dim:h+1}});f=m,l.push(m)}for(let h=0;h<a;++h){const m=e2(h,"int32"),y=n.makeTensorInfo([],"int32",m),g=AA({inputs:{a:y,b:f},backend:n}),b=Da({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),w=fy({inputs:{a:b,b:s},backend:n}),S=zd({inputs:{x:w},backend:n,attrs:{axis:0,keepDims:!1}});c.push(S),l.push(y),l.push(g),l.push(b),l.push(w),l.push(S)}const p=TD({inputs:c,backend:n,attrs:{axis:0}});return l.forEach(h=>n.disposeIntermediateTensorInfo(h)),p}const Dle={kernelName:dT,backendName:"cpu",kernelFunc:Ale};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $le=[Ere,HX,Tre,Are,ZX,$re,Fre,Ore,Bre,zre,Ure,Hre,Gre,Xre,Qre,ese,nse,sse,ase,Ire,lse,cse,fse,nY,hse,XX,oY,gse,jX,vse,wse,Sse,kse,_se,Cse,Nse,Dse,Rse,Mse,Pse,Lse,Wse,Vse,jse,Gse,Kse,Yse,Zse,Jse,eoe,toe,roe,aoe,yre,loe,iY,goe,uY,yoe,fY,koe,Ioe,Eoe,mY,vY,Toe,Aoe,$oe,Foe,kY,EY,GX,Ooe,bse,Boe,zoe,Uoe,vre,NY,$Y,Hoe,OY,Goe,Xoe,Qoe,eae,nae,sae,oae,zY,iae,uae,dae,pae,mae,yae,bae,VY,Sae,Iae,Cae,jY,KY,Aae,Rae,Oae,QY,Bae,zae,Wae,ND,jae,wre,tQ,qae,Xae,Qae,Jae,qX,A1,tie,Sre,xre,kre,rie,oie,iie,uie,die,fie,hie,pQ,gie,Sie,kie,Cie,hQ,Nie,Die,Rie,mQ,_ae,Oie,Bie,zie,Uie,Hie,Gie,Kie,Yie,bQ,Qie,xQ,_Q,Jie,tle,rle,ole,ile,DQ,soe,ule,dle,ple,mle,yle,ble,ZY,Cle,Nle,Dle,Lae];for(const e of $le)fT(e);function Rle(){try{return!!window.WebAssembly&&(!!window.WebAssembly.compile||!!window.WebAssembly.compileStreaming)}catch{return!1}}class Fle{triggerModelLoading(){this.modelLoadingPromise=this.loadModels()}}const Mle="1.0.2",Ole=`https://cdn.liveness.rekognition.amazonaws.com/face-detection/tensorflow-models/blazeface/${Mle}/model/model.json`,Ple=`https://cdn.liveness.rekognition.amazonaws.com/face-detection/tensorflow/tfjs-backend-wasm/${hre}/`;class Ble extends Fle{constructor(t,n){super(),this.faceModelUrl=n??Ole,this.binaryPath=t??Ple}async loadModels(){Rle()?await this._loadWebAssemblyBackend():await this._loadCPUBackend();try{await QL(),this._model=await QK(vh.MediaPipeFaceDetector,{runtime:"tfjs",detectorModelUrl:this.faceModelUrl})}catch{throw new Error("There was an error loading the blazeface model. If you are using a custom blazeface model url ensure that it is a fully qualified url that returns a json file.")}}async detectFaces(t){const r=await this._model.estimateFaces(t,{flipHorizontal:!0}),s=Date.now();return r.map(a=>{const{box:i,keypoints:u}=a,{xMin:c,yMin:l,width:d,height:f}=i,p=this._getCoordinate(u,"rightEye"),h=this._getCoordinate(u,"leftEye"),m=this._getCoordinate(u,"noseTip"),y=this._getCoordinate(u,"mouthCenter"),g=this._getCoordinate(u,"rightEarTragion"),b=this._getCoordinate(u,"leftEarTragion");return{top:l,left:c,width:d,height:f,timestampMs:s,probability:[90][0],rightEye:p,leftEye:h,mouth:y,nose:m,rightEar:g,leftEar:b}})}_getCoordinate(t,n){const r=t.find(s=>s.name===n);return[r.x,r.y]}async _loadWebAssemblyBackend(){try{fre(this.binaryPath),await b5(async()=>{if(!await gk("wasm"))throw new Error("Initialization of backend wasm failed")},[]),this.modelBackend="wasm"}catch{throw new Error('There was an error loading the TFJS WASM backend. If you are using a custom WASM path ensure that it ends with "/" and that it is not the full URL as @tensorflow/tfjs-backend-wasm will append the wasm binary file name. Read more: https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/src/backend_wasm.ts#L475.')}}async _loadCPUBackend(){await gk("cpu"),this.modelBackend="cpu"}}function Lle({face:e,ovalDetails:t,initialFaceIntersection:n,sessionInformation:r,frameHeight:s}){var L,H;let o;const a=(H=(L=r==null?void 0:r.Challenge)==null?void 0:L.FaceMovementAndLightChallenge)==null?void 0:H.ChallengeConfig;if(!a||!a.OvalIouThreshold||!a.OvalIouHeightThreshold||!a.OvalIouWidthThreshold||!a.FaceIouHeightThreshold||!a.FaceIouWidthThreshold)throw new Error("Challenge information not returned from session information.");const{OvalIouThreshold:i,FaceIouHeightThreshold:u,FaceIouWidthThreshold:c}=a,l=q0(e,t,s),d=l.left,f=l.right,p=l.top,h=l.bottom,{ovalBoundingBox:m,minOvalX:y,minOvalY:g,maxOvalX:b,maxOvalY:w}=PC(t),S=BC(l,m),I=i,_=t.width*c,C=t.height*u,N=Math.max(Math.min(fB,hB*(S-n)/(I-n)+pB),dB)*100,$=y>d&&b>f,R=d>y&&f>b,F=S>I,U=g-p>C||h-w>C||y-d>_&&f-b>_;return F?o=ht.MATCHED:$||R?o=ht.OFF_CENTER:U?o=ht.MATCHED:o=ht.TOO_FAR,{faceMatchState:o,faceMatchPercentage:N}}function zle(e){const t=e.signer,n=e.signer,r=e.eventStreamPayloadHandlerProvider({...e,messageSigner:n});return{...e,eventSigner:t,eventStreamPayloadHandler:r}}const Wle=e=>{let t=e.httpHandler;return{setHttpHandler(n){t=n},httpHandler(){return t},updateHttpClientConfig(n,r){t.updateHttpClientConfig(n,r)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},Ule=e=>({httpHandler:e.httpHandler()});var Hk;(function(e){e.HEADER="header",e.QUERY="query"})(Hk||(Hk={}));var jk;(function(e){e.HEADER="header",e.QUERY="query"})(jk||(jk={}));var wd;(function(e){e.HTTP="http",e.HTTPS="https"})(wd||(wd={}));var Ih;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Ih||(Ih={}));var Gk;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Gk||(Gk={}));const $1="__smithy_context";var qk;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(qk||(qk={}));var Kk;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Kk||(Kk={}));class rr{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){const n=new rr({...t,headers:{...t.headers}});return n.query&&(n.query=Vle(n.query)),n}static isInstance(t){if(!t)return!1;const n=t;return"method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&typeof n.query=="object"&&typeof n.headers=="object"}clone(){return rr.clone(this)}}function Vle(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{})}let Sd=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const n=t;return typeof n.statusCode=="number"&&typeof n.headers=="object"}};const Hle=e=>(t,n)=>async r=>{const{request:s}=r;return rr.isInstance(s)?e.eventStreamPayloadHandler.handle(t,r,n):t(r)},jle={tags:["EVENT_STREAM","SIGNATURE","HANDLE"],name:"eventStreamHandlingMiddleware",relation:"after",toMiddleware:"awsAuthMiddleware",override:!0},Gle=e=>async t=>{const{request:n}=t;return rr.isInstance(n)?(n.headers={...n.headers,"content-type":"application/vnd.amazon.eventstream","x-amz-content-sha256":"STREAMING-AWS4-HMAC-SHA256-EVENTS"},e({...t,request:n})):e(t)},qle={step:"build",tags:["EVENT_STREAM","HEADER","CONTENT_TYPE","CONTENT_SHA256"],name:"eventStreamHeaderMiddleware",override:!0},Kle=e=>({applyToStack:t=>{t.addRelativeTo(Hle(e),jle),t.add(Gle,qle)}});const Xle=e=>t=>async n=>{if(!rr.isInstance(n.request))return t(n);const{request:r}=n,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!r.headers[":authority"])delete r.headers.host,r.headers[":authority"]=r.hostname+(r.port?":"+r.port:"");else if(!r.headers.host){let o=r.hostname;r.port!=null&&(o+=`:${r.port}`),r.headers.host=o}return t(n)},Yle={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Qle=e=>({applyToStack:t=>{t.add(Xle(e),Yle)}}),Zle=()=>(e,t)=>async n=>{var r,s;try{const o=await e(n),{clientName:a,commandName:i,logger:u,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:d}=c,f=l??t.inputFilterSensitiveLog,p=d??t.outputFilterSensitiveLog,{$metadata:h,...m}=o.output;return(r=u==null?void 0:u.info)==null||r.call(u,{clientName:a,commandName:i,input:f(n.input),output:p(m),metadata:h}),o}catch(o){const{clientName:a,commandName:i,logger:u,dynamoDbDocumentClientOptions:c={}}=t,{overrideInputFilterSensitiveLog:l}=c,d=l??t.inputFilterSensitiveLog;throw(s=u==null?void 0:u.error)==null||s.call(u,{clientName:a,commandName:i,input:d(n.input),error:o,metadata:o.$metadata}),o}},Jle={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},eue=e=>({applyToStack:t=>{t.add(Zle(),Jle)}});var Xk={};const Yk="X-Amzn-Trace-Id",tue="AWS_LAMBDA_FUNCTION_NAME",nue="_X_AMZN_TRACE_ID",rue=e=>t=>async n=>{const{request:r}=n;if(!rr.isInstance(r)||e.runtime!=="node"||r.headers.hasOwnProperty(Yk))return t(n);const s=Xk[tue],o=Xk[nue],a=i=>typeof i=="string"&&i.length>0;return a(s)&&a(o)&&(r.headers[Yk]=o),t({...n,request:r})},sue={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},oue=e=>({applyToStack:t=>{t.add(rue(e),sue)}}),AD=(e,t,n)=>{let r,s,o,a=!1;const i=async()=>{s||(s=e());try{r=await s,o=!0,a=!1}finally{s=void 0}return r};return t===void 0?async u=>((!o||u!=null&&u.forceRefresh)&&(r=await i()),r):async u=>((!o||u!=null&&u.forceRefresh)&&(r=await i()),a?r:n&&!n(r)?(a=!0,r):(t(r)&&await i(),r))},DD={},R1={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),DD[e]=t,R1[t]=e}function aue(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const r=e.slice(n,n+2).toLowerCase();if(r in R1)t[n/2]=R1[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return t}function bi(e){let t="";for(let n=0;n<e.byteLength;n++)t+=DD[e[n]];return t}const iue=e=>e[$1]||(e[$1]={}),Os=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},fa=e=>encodeURIComponent(e).replace(/[!'()*]/g,lue),lue=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,F1=e=>new TextEncoder().encode(e),Ac=e=>typeof e=="string"?F1(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),uue="X-Amz-Algorithm",cue="X-Amz-Credential",$D="X-Amz-Date",due="X-Amz-SignedHeaders",fue="X-Amz-Expires",RD="X-Amz-Signature",FD="X-Amz-Security-Token",MD="authorization",OD=$D.toLowerCase(),pue="date",hue=[MD,OD,pue],mue=RD.toLowerCase(),M1="x-amz-content-sha256",gue=FD.toLowerCase(),yue={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},vue=/^proxy-/,bue=/^sec-/,wv="AWS4-HMAC-SHA256",wue="AWS4-HMAC-SHA256-PAYLOAD",Sue="UNSIGNED-PAYLOAD",xue=50,PD="aws4_request",kue=60*60*24*7,Lf={},Sv=[],xv=(e,t,n)=>`${e}/${t}/${n}/${PD}`,Iue=async(e,t,n,r,s)=>{const o=await Qk(e,t.secretAccessKey,t.accessKeyId),a=`${n}:${r}:${s}:${bi(o)}:${t.sessionToken}`;if(a in Lf)return Lf[a];for(Sv.push(a);Sv.length>xue;)delete Lf[Sv.shift()];let i=`AWS4${t.secretAccessKey}`;for(const u of[n,r,s,PD])i=await Qk(e,i,u);return Lf[a]=i},Qk=(e,t,n)=>{const r=new e(t);return r.update(Ac(n)),r.digest()},Zk=({headers:e},t,n)=>{const r={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const o=s.toLowerCase();(o in yue||t!=null&&t.has(o)||vue.test(o)||bue.test(o))&&(!n||n&&!n.has(o))||(r[o]=e[s].trim().replace(/\s+/g," "))}return r},_ue=({query:e={}})=>{const t=[],n={};for(const r of Object.keys(e).sort()){if(r.toLowerCase()===mue)continue;t.push(r);const s=e[r];typeof s=="string"?n[r]=`${fa(r)}=${fa(s)}`:Array.isArray(s)&&(n[r]=s.slice(0).reduce((o,a)=>o.concat([`${fa(r)}=${fa(a)}`]),[]).sort().join("&"))}return t.map(r=>n[r]).filter(r=>r).join("&")},Eue=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",kv=async({headers:e,body:t},n)=>{for(const r of Object.keys(e))if(r.toLowerCase()===M1)return e[r];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Eue(t)){const r=new n;return r.update(Ac(t)),bi(await r.digest())}return Sue};class Cue{format(t){const n=[];for(const o of Object.keys(t)){const a=F1(o);n.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(t[o]))}const r=new Uint8Array(n.reduce((o,a)=>o+a.byteLength,0));let s=0;for(const o of n)r.set(o,s),s+=o.byteLength;return r}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,t.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,t.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);const a=new Uint8Array(o.buffer);return a.set(t.value,3),a;case"string":const i=F1(t.value),u=new DataView(new ArrayBuffer(3+i.byteLength));u.setUint8(0,7),u.setUint16(1,i.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(i,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(Nue.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!Tue.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(aue(t.value.replace(/\-/g,"")),1),d}}}var Jk;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Jk||(Jk={}));const Tue=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let Nue=class BD{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(t));r>-1&&s>0;r--,s/=256)n[r]=s;return t<0&&eI(n),new BD(n)}valueOf(){const t=this.bytes.slice(0),n=t[0]&128;return n&&eI(t),parseInt(bi(t),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function eI(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}const Aue=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},Due=(e,t={})=>{var s;const{headers:n,query:r={}}=rr.clone(e);for(const o of Object.keys(n)){const a=o.toLowerCase();a.slice(0,6)==="x-amz-"&&!((s=t.unhoistableHeaders)!=null&&s.has(a))&&(r[o]=n[o],delete n[o])}return{...e,headers:n,query:r}},tI=e=>{e=rr.clone(e);for(const t of Object.keys(e.headers))hue.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},$ue=e=>Rue(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Rue=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;let nI=class{constructor({applyChecksum:t,credentials:n,region:r,service:s,sha256:o,uriEscapePath:a=!0}){this.headerFormatter=new Cue,this.service=s,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=Os(r),this.credentialProvider=Os(n)}async presign(t,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:i,signingRegion:u,signingService:c}=n,l=await this.credentialProvider();this.validateResolvedCredentials(l);const d=u??await this.regionProvider(),{longDate:f,shortDate:p}=zf(r);if(s>kue)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const h=xv(p,d,c??this.service),m=Due(tI(t),{unhoistableHeaders:a});l.sessionToken&&(m.query[FD]=l.sessionToken),m.query[uue]=wv,m.query[cue]=`${l.accessKeyId}/${h}`,m.query[$D]=f,m.query[fue]=s.toString(10);const y=Zk(m,o,i);return m.query[due]=rI(y),m.query[RD]=await this.getSignature(f,h,this.getSigningKey(l,d,p,c),this.createCanonicalRequest(m,y,await kv(t,this.sha256))),m}async sign(t,n){return typeof t=="string"?this.signString(t,n):t.headers&&t.payload?this.signEvent(t,n):t.message?this.signMessage(t,n):this.signRequest(t,n)}async signEvent({headers:t,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:o,signingService:a}){const i=o??await this.regionProvider(),{shortDate:u,longDate:c}=zf(r),l=xv(u,i,a??this.service),d=await kv({headers:{},body:n},this.sha256),f=new this.sha256;f.update(t);const p=bi(await f.digest()),h=[wue,c,l,s,p,d].join(`
`);return this.signString(h,{signingDate:r,signingRegion:i,signingService:a})}async signMessage(t,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:t.priorSignature}).then(a=>({message:t.message,signature:a}))}async signString(t,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=r??await this.regionProvider(),{shortDate:i}=zf(n),u=new this.sha256(await this.getSigningKey(o,a,i,s));return u.update(Ac(t)),bi(await u.digest())}async signRequest(t,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:o,signingService:a}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const u=o??await this.regionProvider(),c=tI(t),{longDate:l,shortDate:d}=zf(n),f=xv(d,u,a??this.service);c.headers[OD]=l,i.sessionToken&&(c.headers[gue]=i.sessionToken);const p=await kv(c,this.sha256);!Aue(M1,c.headers)&&this.applyChecksum&&(c.headers[M1]=p);const h=Zk(c,s,r),m=await this.getSignature(l,f,this.getSigningKey(i,u,d,a),this.createCanonicalRequest(c,h,p));return c.headers[MD]=`${wv} Credential=${i.accessKeyId}/${f}, SignedHeaders=${rI(h)}, Signature=${m}`,c}createCanonicalRequest(t,n,r){const s=Object.keys(n).sort();return`${t.method}
${this.getCanonicalPath(t)}
${_ue(t)}
${s.map(o=>`${o}:${n[o]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(t,n,r){const s=new this.sha256;s.update(Ac(r));const o=await s.digest();return`${wv}
${t}
${n}
${bi(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const n=[];for(const o of t.split("/"))(o==null?void 0:o.length)!==0&&o!=="."&&(o===".."?n.pop():n.push(o));const r=`${t!=null&&t.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return fa(r).replace(/%2F/g,"/")}return t}async getSignature(t,n,r,s){const o=await this.createStringToSign(t,n,s),a=new this.sha256(await r);return a.update(Ac(o)),bi(await a.digest())}getSigningKey(t,n,r,s){return Iue(this.sha256,t,r,n,s||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}};const zf=e=>{const t=$ue(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},rI=e=>Object.keys(e).sort().join(";"),Fue=3e5,Mue=e=>{const t=e.credentials?Oue(e.credentials):e.credentialDefaultProvider(Object.assign({},e,{parentClientConfig:e})),{signingEscapePath:n=!0,systemClockOffset:r=e.systemClockOffset||0,sha256:s}=e;let o;return e.signer?o=Os(e.signer):e.regionInfoProvider?o=()=>Os(e.region)().then(async a=>[await e.regionInfoProvider(a,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},a]).then(([a,i])=>{const{signingRegion:u,signingService:c}=a;e.signingRegion=e.signingRegion||u||i,e.signingName=e.signingName||c||e.serviceId;const l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:n},d=e.signerConstructor||nI;return new d(l)}):o=async a=>{a=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Os(e.region)(),properties:{}},a);const i=(a==null?void 0:a.name)==="sigv4a",u=a.signingRegion,c=a.signingName;let l;i?l=e.signingRegion||u:(e.signingRegion=e.signingRegion||u,l=e.signingRegion),e.signingName=e.signingName||c||e.serviceId;const d={...e,credentials:t,region:l,service:e.signingName,sha256:s,uriEscapePath:n},f=e.signerConstructor||nI;return new f(d)},{...e,systemClockOffset:r,signingEscapePath:n,credentials:t,signer:o}},Oue=e=>typeof e=="function"?AD(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Fue,t=>t.expiration!==void 0):Os(e),LD=e=>new Date(Date.now()+e),Pue=(e,t)=>Math.abs(LD(t).getTime()-e)>=3e5,sI=(e,t)=>{const n=Date.parse(e);return Pue(n,t)?n-Date.now():t},Bue=e=>(t,n)=>async function(r){var h,m,y,g,b,w,S;if(!rr.isInstance(r.request))return t(r);let s,o;const a=(y=(m=(h=n.endpointV2)==null?void 0:h.properties)==null?void 0:m.authSchemes)==null?void 0:y[0],i=(w=(b=(g=n.endpointV2)==null?void 0:g.properties)==null?void 0:b.authSchemes)==null?void 0:w[1];if((a==null?void 0:a.name)==="sigv4a"&&i){o=await e.signer(s=a);const I=o;(()=>{var C;if(typeof(I==null?void 0:I.getSigv4aSigner)=="function"){if(((C=I==null?void 0:I.signerOptions)==null?void 0:C.runtime)!=="node")return!1;try{return I.getSigv4aSigner(),!0}catch{}}return!1})()||(o=await e.signer(s=i))}else o=await e.signer(s=a);let c;const l=(s==null?void 0:s.name)==="sigv4a"?(S=s==null?void 0:s.signingRegionSet)==null?void 0:S.join(","):void 0,d={signingDate:LD(e.systemClockOffset),signingRegion:l||n.signing_region,signingService:n.signing_service};if(n.s3ExpressIdentity){if(c=await o.signWithCredentials(r.request,n.s3ExpressIdentity,d),c.headers["X-Amz-Security-Token"]||c.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.")}else c=await o.sign(r.request,d);const f=await t({...r,request:c}).catch(I=>{const _=I.ServerTime??oI(I.$response);throw _&&(e.systemClockOffset=sI(_,e.systemClockOffset)),I}),p=oI(f.response);return p&&(e.systemClockOffset=sI(p,e.systemClockOffset)),f},oI=e=>{var t,n;return Sd.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((n=e.headers)==null?void 0:n.Date):void 0},Lue={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},zue=e=>({applyToStack:t=>{t.addRelativeTo(Bue(e),Lue)}});function Wue(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}const Uue=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),zD=e=>Uue.test(e)||e.startsWith("[")&&e.endsWith("]"),Vue=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),D2=(e,t=!1)=>{if(!t)return Vue.test(e);const n=e.split(".");for(const r of n)if(!D2(r))return!1;return!0},_h={},xd="endpoints";function $a(e){return typeof e!="object"||e==null?e:"ref"in e?`$${$a(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map($a).join(", ")})`:JSON.stringify(e,null,2)}class Qr extends Error{constructor(t){super(t),this.name="EndpointError"}}const Hue=(e,t)=>e===t,jue=e=>{const t=e.split("."),n=[];for(const r of t){const s=r.indexOf("[");if(s!==-1){if(r.indexOf("]")!==r.length-1)throw new Qr(`Path: '${e}' does not end with ']'`);const o=r.slice(s+1,-1);if(Number.isNaN(parseInt(o)))throw new Qr(`Invalid array index: '${o}' in path: '${e}'`);s!==0&&n.push(r.slice(0,s)),n.push(o)}else n.push(r)}return n},WD=(e,t)=>jue(t).reduce((n,r)=>{if(typeof n!="object")throw new Qr(`Index '${r}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(n)?n[parseInt(r)]:n[r]},e),Gue=e=>e!=null,que=e=>!e,Iv={[wd.HTTP]:80,[wd.HTTPS]:443},Kue=e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:f,port:p,protocol:h="",path:m="",query:y={}}=e,g=new URL(`${h}//${f}${p?`:${p}`:""}${m}`);return g.search=Object.entries(y).map(([b,w])=>`${b}=${w}`).join("&"),g}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;const n=t.href,{host:r,hostname:s,pathname:o,protocol:a,search:i}=t;if(i)return null;const u=a.slice(0,-1);if(!Object.values(wd).includes(u))return null;const c=zD(s),l=n.includes(`${r}:${Iv[u]}`)||typeof e=="string"&&e.includes(`${r}:${Iv[u]}`),d=`${r}${l?`:${Iv[u]}`:""}`;return{scheme:u,authority:d,path:o,normalizedPath:o.endsWith("/")?o:`${o}/`,isIp:c}},Xue=(e,t)=>e===t,Yue=(e,t,n,r)=>t>=n||e.length<n?null:r?e.substring(e.length-n,e.length-t):e.substring(t,n),Que=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Zue={booleanEquals:Hue,getAttr:WD,isSet:Gue,isValidHostLabel:D2,not:que,parseURL:Kue,stringEquals:Xue,substring:Yue,uriEncode:Que},UD=(e,t)=>{const n=[],r={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const o=e.indexOf("{",s);if(o===-1){n.push(e.slice(s));break}n.push(e.slice(s,o));const a=e.indexOf("}",o);if(a===-1){n.push(e.slice(o));break}e[o+1]==="{"&&e[a+1]==="}"&&(n.push(e.slice(o+1,a)),s=a+2);const i=e.substring(o+1,a);if(i.includes("#")){const[u,c]=i.split("#");n.push(WD(r[u],c))}else n.push(r[i]);s=a+1}return n.join("")},Jue=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],hy=(e,t,n)=>{if(typeof e=="string")return UD(e,n);if(e.fn)return VD(e,n);if(e.ref)return Jue(e,n);throw new Qr(`'${t}': ${String(e)} is not a string, function or reference.`)},VD=({fn:e,argv:t},n)=>{const r=t.map(o=>["boolean","number"].includes(typeof o)?o:hy(o,"arg",n)),s=e.split(".");return s[0]in _h&&s[1]!=null?_h[s[0]][s[1]](...r):Zue[e](...r)},ece=({assign:e,...t},n)=>{var s,o;if(e&&e in n.referenceRecord)throw new Qr(`'${e}' is already defined in Reference Record.`);const r=VD(t,n);return(o=(s=n.logger)==null?void 0:s.debug)==null||o.call(s,`${xd} evaluateCondition: ${$a(t)} = ${$a(r)}`),{result:r===""?!0:!!r,...e!=null&&{toAssign:{name:e,value:r}}}},$2=(e=[],t)=>{var r,s;const n={};for(const o of e){const{result:a,toAssign:i}=ece(o,{...t,referenceRecord:{...t.referenceRecord,...n}});if(!a)return{result:a};i&&(n[i.name]=i.value,(s=(r=t.logger)==null?void 0:r.debug)==null||s.call(r,`${xd} assign: ${i.name} := ${$a(i.value)}`))}return{result:!0,referenceRecord:n}},tce=(e,t)=>Object.entries(e).reduce((n,[r,s])=>({...n,[r]:s.map(o=>{const a=hy(o,"Header value entry",t);if(typeof a!="string")throw new Qr(`Header '${r}' value '${a}' is not a string`);return a})}),{}),HD=(e,t)=>{if(Array.isArray(e))return e.map(n=>HD(n,t));switch(typeof e){case"string":return UD(e,t);case"object":if(e===null)throw new Qr(`Unexpected endpoint property: ${e}`);return jD(e,t);case"boolean":return e;default:throw new Qr(`Unexpected endpoint property type: ${typeof e}`)}},jD=(e,t)=>Object.entries(e).reduce((n,[r,s])=>({...n,[r]:HD(s,t)}),{}),nce=(e,t)=>{const n=hy(e,"Endpoint URL",t);if(typeof n=="string")try{return new URL(n)}catch(r){throw console.error(`Failed to construct URL with ${n}`,r),r}throw new Qr(`Endpoint URL must be a string, got ${typeof n}`)},rce=(e,t)=>{var l,d;const{conditions:n,endpoint:r}=e,{result:s,referenceRecord:o}=$2(n,t);if(!s)return;const a={...t,referenceRecord:{...t.referenceRecord,...o}},{url:i,properties:u,headers:c}=r;return(d=(l=t.logger)==null?void 0:l.debug)==null||d.call(l,`${xd} Resolving endpoint from template: ${$a(r)}`),{...c!=null&&{headers:tce(c,a)},...u!=null&&{properties:jD(u,a)},url:nce(i,a)}},sce=(e,t)=>{const{conditions:n,error:r}=e,{result:s,referenceRecord:o}=$2(n,t);if(s)throw new Qr(hy(r,"Error",{...t,referenceRecord:{...t.referenceRecord,...o}}))},oce=(e,t)=>{const{conditions:n,rules:r}=e,{result:s,referenceRecord:o}=$2(n,t);if(s)return GD(r,{...t,referenceRecord:{...t.referenceRecord,...o}})},GD=(e,t)=>{for(const n of e)if(n.type==="endpoint"){const r=rce(n,t);if(r)return r}else if(n.type==="error")sce(n,t);else if(n.type==="tree"){const r=oce(n,t);if(r)return r}else throw new Qr(`Unknown endpoint rule: ${n}`);throw new Qr("Rules evaluation failed")},ace=(e,t)=>{var c,l,d,f;const{endpointParams:n,logger:r}=t,{parameters:s,rules:o}=e;(l=(c=t.logger)==null?void 0:c.debug)==null||l.call(c,`${xd} Initial EndpointParams: ${$a(n)}`);const a=Object.entries(s).filter(([,p])=>p.default!=null).map(([p,h])=>[p,h.default]);if(a.length>0)for(const[p,h]of a)n[p]=n[p]??h;const i=Object.entries(s).filter(([,p])=>p.required).map(([p])=>p);for(const p of i)if(n[p]==null)throw new Qr(`Missing required parameter: '${p}'`);const u=GD(o,{endpointParams:n,logger:r,referenceRecord:{}});return(f=(d=t.logger)==null?void 0:d.debug)==null||f.call(d,`${xd} Resolved endpoint: ${$a(u)}`),u},qD=(e,t=!1)=>{if(t){for(const n of e.split("."))if(!qD(n))return!1;return!0}return!(!D2(e)||e.length<3||e.length>63||e!==e.toLowerCase()||zD(e))},ice=e=>{const t=e.split(":");if(t.length<6)return null;const[n,r,s,o,a,...i]=t;return n!=="arn"||r===""||s===""||i[0]===""?null:{partition:r,service:s,region:o,accountId:a,resourceId:i[0].includes("/")?i[0].split("/"):i}},lce=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],uce="1.1",cce={partitions:lce,version:uce};let dce=cce;const fce=e=>{const{partitions:t}=dce;for(const r of t){const{regions:s,outputs:o}=r;for(const[a,i]of Object.entries(s))if(a===e)return{...o,...i}}for(const r of t){const{regionRegex:s,outputs:o}=r;if(new RegExp(s).test(e))return{...o}}const n=t.find(r=>r.id==="aws");if(!n)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...n.outputs}},KD={isVirtualHostableS3Bucket:qD,parseArn:ice,partition:fce};_h.aws=KD;const aI="user-agent",_v="x-amz-user-agent",iI=" ",Ev="/",pce=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,hce=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,lI="-",mce=e=>(t,n)=>async r=>{var d,f;const{request:s}=r;if(!rr.isInstance(s))return t(r);const{headers:o}=s,a=((d=n==null?void 0:n.userAgent)==null?void 0:d.map(Cv))||[],i=(await e.defaultUserAgentProvider()).map(Cv),u=((f=e==null?void 0:e.customUserAgent)==null?void 0:f.map(Cv))||[],c=[].concat([...i,...a,...u]).join(iI),l=[...i.filter(p=>p.startsWith("aws-sdk-")),...u].join(iI);return e.runtime!=="browser"?(l&&(o[_v]=o[_v]?`${o[aI]} ${l}`:l),o[aI]=c):o[_v]=c,t({...r,request:s})},Cv=e=>{var a;const t=e[0].split(Ev).map(i=>i.replace(pce,lI)).join(Ev),n=(a=e[1])==null?void 0:a.replace(hce,lI),r=t.indexOf(Ev),s=t.substring(0,r);let o=t.substring(r+1);return s==="api"&&(o=o.toLowerCase()),[s,o,n].filter(i=>i&&i.length>0).reduce((i,u,c)=>{switch(c){case 0:return u;case 1:return`${i}/${u}`;default:return`${i}#${u}`}},"")},gce={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},yce=e=>({applyToStack:t=>{t.add(mce(e),gce)}});var XD=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var n,r;try{for(var s=sO(t),o=s.next();!o.done;o=s.next()){var a=o.value;this.checksum=this.checksum>>>8^bce[(this.checksum^a)&255]}}catch(i){n={error:i}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}(),vce=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],bce=dO(vce);const YD={},O1={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),YD[e]=t,O1[t]=e}function wce(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const r=e.slice(n,n+2).toLowerCase();if(r in O1)t[n/2]=O1[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return t}function ml(e){let t="";for(let n=0;n<e.byteLength;n++)t+=YD[e[n]];return t}let Tv=class QD{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(t));r>-1&&s>0;r--,s/=256)n[r]=s;return t<0&&uI(n),new QD(n)}valueOf(){const t=this.bytes.slice(0),n=t[0]&128;return n&&uI(t),parseInt(ml(t),16)*(n?-1:1)}toString(){return String(this.valueOf())}};function uI(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}let Sce=class{constructor(t,n){this.toUtf8=t,this.fromUtf8=n}format(t){const n=[];for(const o of Object.keys(t)){const a=this.fromUtf8(o);n.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(t[o]))}const r=new Uint8Array(n.reduce((o,a)=>o+a.byteLength,0));let s=0;for(const o of n)r.set(o,s),s+=o.byteLength;return r}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,t.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,t.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);const a=new Uint8Array(o.buffer);return a.set(t.value,3),a;case"string":const i=this.fromUtf8(t.value),u=new DataView(new ArrayBuffer(3+i.byteLength));u.setUint8(0,7),u.setUint16(1,i.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(i,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(Tv.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!Ace.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(wce(t.value.replace(/\-/g,"")),1),d}}parse(t){const n={};let r=0;for(;r<t.byteLength;){const s=t.getUint8(r++),o=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+r,s));switch(r+=s,t.getUint8(r++)){case 0:n[o]={type:dI,value:!0};break;case 1:n[o]={type:dI,value:!1};break;case 2:n[o]={type:xce,value:t.getInt8(r++)};break;case 3:n[o]={type:kce,value:t.getInt16(r,!1)},r+=2;break;case 4:n[o]={type:Ice,value:t.getInt32(r,!1)},r+=4;break;case 5:n[o]={type:_ce,value:new Tv(new Uint8Array(t.buffer,t.byteOffset+r,8))},r+=8;break;case 6:const a=t.getUint16(r,!1);r+=2,n[o]={type:Ece,value:new Uint8Array(t.buffer,t.byteOffset+r,a)},r+=a;break;case 7:const i=t.getUint16(r,!1);r+=2,n[o]={type:Cce,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+r,i))},r+=i;break;case 8:n[o]={type:Tce,value:new Date(new Tv(new Uint8Array(t.buffer,t.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const u=new Uint8Array(t.buffer,t.byteOffset+r,16);r+=16,n[o]={type:Nce,value:`${ml(u.subarray(0,4))}-${ml(u.subarray(4,6))}-${ml(u.subarray(6,8))}-${ml(u.subarray(8,10))}-${ml(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return n}};var cI;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(cI||(cI={}));const dI="boolean",xce="byte",kce="short",Ice="integer",_ce="long",Ece="binary",Cce="string",Tce="timestamp",Nce="uuid",Ace=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,ZD=4,Zo=ZD*2,li=4,Dce=Zo+li*2;function $ce({byteLength:e,byteOffset:t,buffer:n}){if(e<Dce)throw new Error("Provided message too short to accommodate event stream message overhead");const r=new DataView(n,t,e),s=r.getUint32(0,!1);if(e!==s)throw new Error("Reported message length does not match received message length");const o=r.getUint32(ZD,!1),a=r.getUint32(Zo,!1),i=r.getUint32(e-li,!1),u=new XD().update(new Uint8Array(n,t,Zo));if(a!==u.digest())throw new Error(`The prelude checksum specified in the message (${a}) does not match the calculated CRC32 checksum (${u.digest()})`);if(u.update(new Uint8Array(n,t+Zo,e-(Zo+li))),i!==u.digest())throw new Error(`The message checksum (${u.digest()}) did not match the expected value of ${i}`);return{headers:new DataView(n,t+Zo+li,o),body:new Uint8Array(n,t+Zo+li+o,s-o-(Zo+li+li))}}class JD{constructor(t,n){this.headerMarshaller=new Sce(t,n),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){const t=this.messageBuffer.pop(),n=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return n}}}getAvailableMessages(){const t=this.messageBuffer;this.messageBuffer=[];const n=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return n}}}encode({headers:t,body:n}){const r=this.headerMarshaller.format(t),s=r.byteLength+n.byteLength+16,o=new Uint8Array(s),a=new DataView(o.buffer,o.byteOffset,o.byteLength),i=new XD;return a.setUint32(0,s,!1),a.setUint32(4,r.byteLength,!1),a.setUint32(8,i.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),a.setUint32(s-4,i.update(o.subarray(8,s-4)).digest(),!1),o}decode(t){const{headers:n,body:r}=$ce(t);return{headers:this.headerMarshaller.parse(n),body:r}}formatHeaders(t){return this.headerMarshaller.format(t)}}class Rce{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.decoder.decode(t)}}class Fce{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class Mce{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream){const n=await this.options.deserializer(t);n!==void 0&&(yield n)}}}class Oce{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.serializer(t)}}const P1={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),P1[t]=e}function Pce(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const r=e.slice(n,n+2).toLowerCase();if(r in P1)t[n/2]=P1[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return t}const Bce=(e,t,n,r)=>{let s=e;const o={start(){},async transform(a,i){try{const u=new Date(Date.now()+await r()),c={":date":{type:"timestamp",value:u}},l=await t.sign({message:{body:a,headers:c},priorSignature:s},{signingDate:u});s=l.signature;const d=n.encode({headers:{...c,":chunk-signature":{type:"binary",value:Pce(l.signature)}},body:a});i.enqueue(d)}catch(u){i.error(u)}}};return new TransformStream({...o})};class Lce{constructor(t){this.messageSigner=t.messageSigner,this.eventStreamCodec=new JD(t.utf8Encoder,t.utf8Decoder),this.systemClockOffsetProvider=async()=>t.systemClockOffset??0}async handle(t,n,r={}){const s=n.request,{body:o,headers:a,query:i}=s;if(!(o instanceof ReadableStream))throw new Error("Eventstream payload must be a ReadableStream.");const u=new TransformStream;s.body=u.readable;let c;try{c=await t(n)}catch(h){throw s.body.cancel(),h}const d=((a.authorization||"").match(/Signature=([\w]+)$/)||[])[1]||i&&i["X-Amz-Signature"]||"",f=Bce(d,await this.messageSigner(),this.eventStreamCodec,this.systemClockOffsetProvider);return o.pipeThrough(f).pipeThrough(u),c}}const zce=e=>new Lce(e),Wce=()=>e=>async t=>{const n={...t.input},r=await e(t),s=r.output;return n.SessionId&&s.SessionId==null&&(s.SessionId=n.SessionId),r},Uce={step:"initialize",name:"injectSessionIdMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],override:!0},Vce=(e,t)=>n=>r=>{var o,a;const{request:s}=r;if(rr.isInstance(s)&&((a=(o=e.requestHandler.metadata)==null?void 0:o.handlerProtocol)!=null&&a.toLowerCase().includes("websocket"))){s.protocol="wss:",s.method="GET",s.path=`${s.path}-websocket`;const{headers:i}=s;delete i["content-type"],delete i["x-amz-content-sha256"];for(const u of Object.keys(i))if(u.indexOf(t.headerPrefix)===0){const c=u.replace(t.headerPrefix,"");s.query[c]=i[u]}i["x-amz-user-agent"]&&(s.query["user-agent"]=i["x-amz-user-agent"]),s.headers={host:i.host??s.hostname}}return n(r)},Hce={name:"websocketEndpointMiddleware",tags:["WEBSOCKET","EVENT_STREAM"],relation:"after",toMiddleware:"eventStreamHeaderMiddleware",override:!0},jce=(e,t)=>({applyToStack:n=>{n.addRelativeTo(Vce(e,t),Hce),n.add(Wce(),Uce)}}),e$=e=>e.protocol==="ws:"||e.protocol==="wss:";class Gce{constructor(t){this.signer=t.signer}presign(t,n={}){return this.signer.presign(t,n)}async sign(t,n){return rr.isInstance(t)&&e$(t)?{...await this.signer.presign({...t,body:""},{...n,expiresIn:60,unsignableHeaders:new Set(Object.keys(t.headers).filter(s=>s!=="host"))}),body:t.body}:this.signer.sign(t,n)}}const qce=e=>({...e,signer:async t=>{const n=await e.signer(t);if(Kce(n))return new Gce({signer:n});throw new Error("Expected WebsocketSignatureV4 signer, please check the client constructor.")}}),Kce=e=>!!e;function t$(e){const t=[];for(let n of Object.keys(e).sort()){const r=e[n];if(n=fa(n),Array.isArray(r))for(let s=0,o=r.length;s<o;s++)t.push(`${n}=${fa(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${fa(r)}`),t.push(s)}}return t.join("&")}function n$(e){const{port:t,query:n}=e;let{protocol:r,path:s,hostname:o}=e;r&&r.slice(-1)!==":"&&(r+=":"),t&&(o+=`:${t}`),s&&s.charAt(0)!=="/"&&(s=`/${s}`);let a=n?t$(n):"";a&&a[0]!=="?"&&(a=`?${a}`);let i="";if(e.username!=null||e.password!=null){const c=e.username??"",l=e.password??"";i=`${c}:${l}@`}let u="";return e.fragment&&(u=`#${e.fragment}`),`${r}//${i}${o}${s}${a}${u}`}function Xce(e){let t=0,n=0,r=null,s=null;const o=i=>{if(typeof i!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+i);t=i,n=4,r=new Uint8Array(i),new DataView(r.buffer).setUint32(0,i,!1)},a=async function*(){const i=e[Symbol.asyncIterator]();for(;;){const{value:u,done:c}=await i.next();if(c){if(t)if(t===n)yield r;else throw new Error("Truncated event message received.");else return;return}const l=u.length;let d=0;for(;d<l;){if(!r){const p=l-d;s||(s=new Uint8Array(4));const h=Math.min(4-n,p);if(s.set(u.slice(d,d+h),n),n+=h,d+=h,n<4)break;o(new DataView(s.buffer).getUint32(0,!1)),s=null}const f=Math.min(t-n,l-d);r.set(u.slice(d,d+f),n),n+=f,d+=f,t&&t===n&&(yield r,r=null,t=0,n=0)}}};return{[Symbol.asyncIterator]:a}}function Yce(e,t){return async function(n){const{value:r}=n.headers[":message-type"];if(r==="error"){const s=new Error(n.headers[":error-message"].value||"UnknownError");throw s.name=n.headers[":error-code"].value,s}else if(r==="exception"){const s=n.headers[":exception-type"].value,o={[s]:n},a=await e(o);if(a.$unknown){const i=new Error(t(n.body));throw i.name=s,i}throw a[s]}else if(r==="event"){const s={[n.headers[":event-type"].value]:n},o=await e(s);return o.$unknown?void 0:o}else throw Error(`Unrecognizable event type: ${n.headers[":event-type"].value}`)}}let Qce=class{constructor({utf8Encoder:t,utf8Decoder:n}){this.eventStreamCodec=new JD(t,n),this.utfEncoder=t}deserialize(t,n){const r=Xce(t);return new Mce({messageStream:new Rce({inputStream:r,decoder:this.eventStreamCodec}),deserializer:Yce(n,this.utfEncoder)})}serialize(t,n){return new Fce({messageStream:new Oce({inputStream:t,serializer:n}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const r$=e=>({[Symbol.asyncIterator]:async function*(){const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)return;yield r}}finally{t.releaseLock()}}}),s$=e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(n){const{done:r,value:s}=await t.next();if(r)return n.close();n.enqueue(s)}})};class Zce{constructor({utf8Encoder:t,utf8Decoder:n}){this.universalMarshaller=new Qce({utf8Decoder:n,utf8Encoder:t})}deserialize(t,n){const r=Jce(t)?r$(t):t;return this.universalMarshaller.deserialize(r,n)}serialize(t,n){const r=this.universalMarshaller.serialize(t,n);return typeof ReadableStream=="function"?s$(r):r}}const Jce=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,ede=e=>new Zce(e);function tde(e=0){return new Promise((t,n)=>{e&&setTimeout(()=>{const r=new Error(`Request did not complete within ${e} ms`);r.name="TimeoutError",n(r)},e)})}const Nv={supported:void 0};let B1=class o${static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new o$(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(n=>n||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Nv.supported===void 0&&(Nv.supported=typeof Request<"u"&&"keepalive"in new Request("https://[::1]"))}destroy(){}async handle(t,{abortSignal:n}={}){this.config||(this.config=await this.configProvider);const r=this.config.requestTimeout,s=this.config.keepAlive===!0,o=this.config.credentials;if(n!=null&&n.aborted){const g=new Error("Request aborted");return g.name="AbortError",Promise.reject(g)}let a=t.path;const i=t$(t.query||{});i&&(a+=`?${i}`),t.fragment&&(a+=`#${t.fragment}`);let u="";if(t.username!=null||t.password!=null){const g=t.username??"",b=t.password??"";u=`${g}:${b}@`}const{port:c,method:l}=t,d=`${t.protocol}//${u}${t.hostname}${c?`:${c}`:""}${a}`,f=l==="GET"||l==="HEAD"?void 0:t.body,p={body:f,headers:new Headers(t.headers),method:l,credentials:o,cache:this.config.cache??"default"};f&&(p.duplex="half"),typeof AbortController<"u"&&(p.signal=n),Nv.supported&&(p.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(p,this.config.requestInit(t));let h=()=>{};const m=new Request(d,p),y=[fetch(m).then(g=>{const b=g.headers,w={};for(const I of b.entries())w[I[0]]=I[1];return g.body!=null?{response:new Sd({headers:w,reason:g.statusText,statusCode:g.status,body:g.body})}:g.blob().then(I=>({response:new Sd({headers:w,reason:g.statusText,statusCode:g.status,body:I})}))}),tde(r)];return n&&y.push(new Promise((g,b)=>{const w=()=>{const S=new Error("Request aborted");S.name="AbortError",b(S)};if(typeof n.addEventListener=="function"){const S=n;S.addEventListener("abort",w,{once:!0}),h=()=>S.removeEventListener("abort",w)}else n.onabort=w})),Promise.race(y).finally(h)}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[t]=n,r))}httpHandlerConfigs(){return this.config??{}}};const Ra={},ku=new Array(64);for(let e=0,t=65,n=90;e+t<=n;e++){const r=String.fromCharCode(e+t);Ra[r]=e,ku[e]=r}for(let e=0,t=97,n=122;e+t<=n;e++){const r=String.fromCharCode(e+t),s=e+26;Ra[r]=s,ku[s]=r}for(let e=0;e<10;e++){Ra[e.toString(10)]=e+52;const t=e.toString(10),n=e+52;Ra[t]=n,ku[n]=t}Ra["+"]=62;ku[62]="+";Ra["/"]=63;ku[63]="/";const Vl=6,Dc=8,nde=63,R2=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const n=new ArrayBuffer(t),r=new DataView(n);for(let s=0;s<e.length;s+=4){let o=0,a=0;for(let c=s,l=s+3;c<=l;c++)if(e[c]!=="="){if(!(e[c]in Ra))throw new TypeError(`Invalid character ${e[c]} in base64 string.`);o|=Ra[e[c]]<<(l-c)*Vl,a+=Vl}else o>>=Vl;const i=s/4*3;o>>=a%Dc;const u=Math.floor(a/Dc);for(let c=0;c<u;c++){const l=(u-c-1)*Dc;r.setUint8(i+c,(o&255<<l)>>l)}}return new Uint8Array(n)},rde=e=>new TextEncoder().encode(e);function a$(e){let t;typeof e=="string"?t=rde(e):t=e;const n=typeof t=="object"&&typeof t.length=="number",r=typeof t=="object"&&typeof t.byteOffset=="number"&&typeof t.byteLength=="number";if(!n&&!r)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let o=0;o<t.length;o+=3){let a=0,i=0;for(let c=o,l=Math.min(o+3,t.length);c<l;c++)a|=t[c]<<(l-c-1)*Dc,i+=Dc;const u=Math.ceil(i/Vl);a<<=u*Vl-i;for(let c=1;c<=u;c++){const l=(u-c)*Vl;s+=ku[(a&nde<<l)>>l]}s+="==".slice(0,4-u)}return s}const sde=e=>typeof Blob=="function"&&e instanceof Blob?ode(e):ade(e);async function ode(e){const t=await ide(e),n=R2(t);return new Uint8Array(n)}async function ade(e){const t=[],n=e.getReader();let r=!1,s=0;for(;!r;){const{done:i,value:u}=await n.read();u&&(t.push(u),s+=u.length),r=i}const o=new Uint8Array(s);let a=0;for(const i of t)o.set(i,a),a+=i.length;return o}function ide(e){return new Promise((t,n)=>{const r=new FileReader;r.onloadend=()=>{if(r.readyState!==2)return n(new Error("Reader aborted too early"));const s=r.result??"",o=s.indexOf(","),a=o>-1?o+1:s.length;t(s.substring(a))},r.onabort=()=>n(new Error("Read aborted")),r.onerror=()=>n(r.error),r.readAsDataURL(e)})}const lde=2e3;class F2{static create(t,n=new B1){return typeof(t==null?void 0:t.handle)=="function"?t:new F2(t,n)}constructor(t,n=new B1){this.metadata={handlerProtocol:"websocket/h1.1"},this.sockets={},this.httpHandler=n,typeof t=="function"?(this.config={},this.configPromise=t().then(r=>this.config=r??{})):(this.config=t??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(const[t,n]of Object.entries(this.sockets)){for(const r of n)r.close(1e3,"Socket closed through destroy() call");delete this.sockets[t]}}async handle(t){if(!e$(t))return this.httpHandler.handle(t);const n=n$(t),r=new WebSocket(n);this.sockets[n]||(this.sockets[n]=[]),this.sockets[n].push(r),r.binaryType="arraybuffer",this.config=await this.configPromise;const{connectionTimeout:s=lde}=this.config;await this.waitForReady(r,s);const{body:o}=t,a=ude(o),i=this.connect(r,a),u=cde(i);return{response:new Sd({statusCode:200,body:u})}}updateHttpClientConfig(t,n){this.configPromise=this.configPromise.then(r=>(r[t]=n,r))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(t){this.sockets[t]=(this.sockets[t]??[]).filter(n=>![WebSocket.CLOSING,WebSocket.CLOSED].includes(n.readyState))}waitForReady(t,n){return new Promise((r,s)=>{const o=setTimeout(()=>{this.removeNotUsableSockets(t.url),s({$metadata:{httpStatusCode:500}})},n);t.onopen=()=>{clearTimeout(o),r()}})}connect(t,n){let r,s=!1,o=()=>{},a=()=>{};t.onmessage=c=>{a({done:!1,value:new Uint8Array(c.data)})},t.onerror=c=>{s=!0,t.close(),o(c)},t.onclose=()=>{this.removeNotUsableSockets(t.url),!s&&(r?o(r):a({done:!0,value:void 0}))};const i={[Symbol.asyncIterator]:()=>({next:()=>new Promise((c,l)=>{a=c,o=l})})};return(async()=>{try{for await(const c of n)t.send(c)}catch(c){r=c}finally{t.close(1e3)}})(),i}}const ude=e=>e[Symbol.asyncIterator]?e:dde(e)?r$(e):{[Symbol.asyncIterator]:async function*(){yield e}},cde=e=>typeof ReadableStream=="function"?s$(e):e,dde=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;var fI;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(fI||(fI={}));const fde=!1,pde=!1,i$=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),pI=e=>i$(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,hde=e=>{const{region:t,useFipsEndpoint:n}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return pI(t);const r=await t();return pI(r)},useFipsEndpoint:async()=>{const r=typeof t=="string"?t:await t();return i$(r)?!0:typeof n!="function"?Promise.resolve(!!n):n()}}},mde=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),hI="content-length";function gde(e){return t=>async n=>{const r=n.request;if(rr.isInstance(r)){const{body:s,headers:o}=r;if(s&&Object.keys(o).map(a=>a.toLowerCase()).indexOf(hI)===-1)try{const a=e(s);r.headers={...r.headers,[hI]:String(a)}}catch{}}return t({...n,request:r})}}const yde={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},vde=e=>({applyToStack:t=>{t.add(gde(e.bodyLengthChecker),yde)}}),bde=async e=>{const t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Ide(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!kde(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},wde=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Sde=/(\d+\.){3}\d+/,xde=/\.\./,kde=e=>wde.test(e)&&!Sde.test(e)&&!xde.test(e),Ide=e=>{const[t,n,r,,,s]=e.split(":"),o=t==="arn"&&e.split(":").length>=6,a=!!(o&&n&&r&&s);if(o&&!a)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return a},_de=(e,t,n)=>{const r=async()=>{const s=n[e]??n[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return(s==null?void 0:s.credentialScope)??(s==null?void 0:s.CredentialScope)}:e==="accountId"||t==="AccountId"?async()=>{const s=typeof n.credentials=="function"?await n.credentials():n.credentials;return(s==null?void 0:s.accountId)??(s==null?void 0:s.AccountId)}:e==="endpoint"||t==="endpoint"?async()=>{const s=await r();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:o,hostname:a,port:i,path:u}=s;return`${o}//${a}${i?":"+i:""}${u}`}}return s}:r},l$=async e=>{};function Ede(e){const t={};if(e=e.replace(/^\?/,""),e)for(const n of e.split("&")){let[r,s=null]=n.split("=");r=decodeURIComponent(r),s&&(s=decodeURIComponent(s)),r in t?Array.isArray(t[r])?t[r].push(s):t[r]=[t[r],s]:t[r]=s}return t}const Eh=e=>{if(typeof e=="string")return Eh(new URL(e));const{hostname:t,pathname:n,port:r,protocol:s,search:o}=e;let a;return o&&(a=Ede(o)),{hostname:t,port:r?parseInt(r):void 0,protocol:s,path:n,query:a}},u$=e=>typeof e=="object"?"url"in e?Eh(e.url):e:Eh(e),Cde=async(e,t,n,r)=>{if(!n.endpoint){let a;n.serviceConfiguredEndpoint?a=await n.serviceConfiguredEndpoint():a=await l$(n.serviceId),a&&(n.endpoint=()=>Promise.resolve(u$(a)))}const s=await Tde(e,t,n);if(typeof n.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return n.endpointProvider(s,r)},Tde=async(e,t,n)=>{var o;const r={},s=((o=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:o.call(t))||{};for(const[a,i]of Object.entries(s))switch(i.type){case"staticContextParams":r[a]=i.value;break;case"contextParams":r[a]=e[i.name];break;case"clientContextParams":case"builtInParams":r[a]=await _de(i.name,a,n)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(s).length===0&&Object.assign(r,n),String(n.serviceId).toLowerCase()==="s3"&&await bde(r),r},Nde=({config:e,instructions:t})=>(n,r)=>async s=>{var i,u,c;const o=await Cde(s.input,{getEndpointParameterInstructions(){return t}},{...e},r);r.endpointV2=o,r.authSchemes=(i=o.properties)==null?void 0:i.authSchemes;const a=(u=r.authSchemes)==null?void 0:u[0];if(a){r.signing_region=a.signingRegion,r.signing_service=a.signingName;const l=iue(r),d=(c=l==null?void 0:l.selectedHttpAuthScheme)==null?void 0:c.httpAuthOption;d&&(d.signingProperties=Object.assign(d.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return n({...s})},Ade=(e,t)=>n=>async r=>{const{response:s}=await n(r);try{const o=await t(s,e);return{response:s,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:s}),!("$metadata"in o)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+a,typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText)}throw o}},Dde=(e,t)=>(n,r)=>async s=>{var i;const o=(i=r.endpointV2)!=null&&i.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const a=await t(s.input,{...e,endpoint:o});return n({...s,request:a})},$de={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},M2={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Rde(e,t,n){return{applyToStack:r=>{r.add(Ade(e,n),$de),r.add(Dde(e,t),M2)}}}const c$={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:M2.name},Fde=(e,t)=>({applyToStack:n=>{n.addRelativeTo(Nde({config:e,instructions:t}),c$)}}),Mde=e=>{const t=e.tls??!0,{endpoint:n}=e,r=n!=null?async()=>u$(await Os(n)()):void 0,o={...e,endpoint:r,tls:t,isCustomEndpoint:!!n,useDualstackEndpoint:Os(e.useDualstackEndpoint??!1),useFipsEndpoint:Os(e.useFipsEndpoint??!1)};let a;return o.serviceConfiguredEndpoint=async()=>(e.serviceId&&!a&&(a=l$(e.serviceId)),a),o};var lu;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(lu||(lu={}));const Ch=3,Ode=lu.STANDARD,Pde=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Bde=["TimeoutError","RequestTimeout","RequestTimeoutException"],Lde=[500,502,503,504],zde=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Wde=e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},d$=e=>{var t,n;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Pde.includes(e.name)||((n=e.$retryable)==null?void 0:n.throttling)==!0},f$=e=>{var t;return Wde(e)||Bde.includes(e.name)||zde.includes((e==null?void 0:e.code)||"")||Lde.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Ude=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const n=e.$metadata.httpStatusCode;return 500<=n&&n<=599&&!f$(e)}return!1};class Vde{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const n=this.getCurrentTimeInSeconds();this.lastThrottleTime=n,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const n=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(r=>setTimeout(r,n))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const n=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+n),this.lastTimestamp=t}updateClientSendingRate(t){let n;if(this.updateMeasuredRate(),d$(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),n=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),n=this.cubicSuccess(this.getCurrentTimeInSeconds());const r=Math.min(n,2*this.measuredTxRate);this.updateTokenBucketRate(r)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),n=Math.floor(t*2)/2;if(this.requestCount++,n>this.lastTxRateBucket){const r=this.requestCount/(n-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(r*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=n}}getPrecise(t){return parseFloat(t.toFixed(8))}}const L1=100,p$=20*1e3,Hde=500,mI=500,jde=5,Gde=10,qde=1,Kde="amz-sdk-invocation-id",Xde="amz-sdk-request",Yde=()=>{let e=L1;return{computeNextBackoffDelay:r=>Math.floor(Math.min(p$,Math.random()*2**r*e)),setDelayBase:r=>{e=r}}},gI=({retryDelay:e,retryCount:t,retryCost:n})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(p$,e),getRetryCost:()=>n});class h${constructor(t){this.maxAttempts=t,this.mode=lu.STANDARD,this.capacity=mI,this.retryBackoffStrategy=Yde(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return gI({retryDelay:L1,retryCount:0})}async refreshRetryTokenForRetry(t,n){const r=await this.getMaxAttempts();if(this.shouldRetry(t,n,r)){const s=n.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?Hde:L1);const o=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),a=n.retryAfterHint?Math.max(n.retryAfterHint.getTime()-Date.now()||0,o):o,i=this.getCapacityCost(s);return this.capacity-=i,gI({retryDelay:a,retryCount:t.getRetryCount()+1,retryCost:i})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(mI,this.capacity+(t.getRetryCost()??qde))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ch}`),Ch}}shouldRetry(t,n,r){return t.getRetryCount()+1<r&&this.capacity>=this.getCapacityCost(n.errorType)&&this.isRetryableError(n.errorType)}getCapacityCost(t){return t==="TRANSIENT"?Gde:jde}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class Qde{constructor(t,n){this.maxAttemptsProvider=t,this.mode=lu.ADAPTIVE;const{rateLimiter:r}=n??{};this.rateLimiter=r??new Vde,this.standardRetryStrategy=new h$(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,n){return this.rateLimiter.updateClientSendingRate(n),this.standardRetryStrategy.refreshRetryTokenForRetry(t,n)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}const Zde=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Jde=e=>{const{retryStrategy:t}=e,n=Os(e.maxAttempts??Ch);return{...e,maxAttempts:n,retryStrategy:async()=>t||(await Os(e.retryMode)()===lu.ADAPTIVE?new Qde(n):new h$(n))}};class m${trace(){}debug(){}info(){}warn(){}error(){}}const si=(e,t)=>{const n=[];if(e&&n.push(e),t)for(const r of t)n.push(r);return n},Qo=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Th=()=>{let e=[],t=[],n=!1;const r=new Set,s=d=>d.sort((f,p)=>yI[p.step]-yI[f.step]||vI[p.priority||"normal"]-vI[f.priority||"normal"]),o=d=>{let f=!1;const p=h=>{const m=si(h.name,h.aliases);if(m.includes(d)){f=!0;for(const y of m)r.delete(y);return!1}return!0};return e=e.filter(p),t=t.filter(p),f},a=d=>{let f=!1;const p=h=>{if(h.middleware===d){f=!0;for(const m of si(h.name,h.aliases))r.delete(m);return!1}return!0};return e=e.filter(p),t=t.filter(p),f},i=d=>{var f;return e.forEach(p=>{d.add(p.middleware,{...p})}),t.forEach(p=>{d.addRelativeTo(p.middleware,{...p})}),(f=d.identifyOnResolve)==null||f.call(d,l.identifyOnResolve()),d},u=d=>{const f=[];return d.before.forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...u(p))}),f.push(d),d.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?f.push(p):f.push(...u(p))}),f},c=(d=!1)=>{const f=[],p=[],h={};return e.forEach(y=>{const g={...y,before:[],after:[]};for(const b of si(g.name,g.aliases))h[b]=g;f.push(g)}),t.forEach(y=>{const g={...y,before:[],after:[]};for(const b of si(g.name,g.aliases))h[b]=g;p.push(g)}),p.forEach(y=>{if(y.toMiddleware){const g=h[y.toMiddleware];if(g===void 0){if(d)return;throw new Error(`${y.toMiddleware} is not found when adding ${Qo(y.name,y.aliases)} middleware ${y.relation} ${y.toMiddleware}`)}y.relation==="after"&&g.after.push(y),y.relation==="before"&&g.before.push(y)}}),s(f).map(u).reduce((y,g)=>(y.push(...g),y),[])},l={add:(d,f={})=>{const{name:p,override:h,aliases:m}=f,y={step:"initialize",priority:"normal",middleware:d,...f},g=si(p,m);if(g.length>0){if(g.some(b=>r.has(b))){if(!h)throw new Error(`Duplicate middleware name '${Qo(p,m)}'`);for(const b of g){const w=e.findIndex(I=>{var _;return I.name===b||((_=I.aliases)==null?void 0:_.some(C=>C===b))});if(w===-1)continue;const S=e[w];if(S.step!==y.step||y.priority!==S.priority)throw new Error(`"${Qo(S.name,S.aliases)}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by "${Qo(p,m)}" middleware with ${y.priority} priority in ${y.step} step.`);e.splice(w,1)}}for(const b of g)r.add(b)}e.push(y)},addRelativeTo:(d,f)=>{const{name:p,override:h,aliases:m}=f,y={middleware:d,...f},g=si(p,m);if(g.length>0){if(g.some(b=>r.has(b))){if(!h)throw new Error(`Duplicate middleware name '${Qo(p,m)}'`);for(const b of g){const w=t.findIndex(I=>{var _;return I.name===b||((_=I.aliases)==null?void 0:_.some(C=>C===b))});if(w===-1)continue;const S=t[w];if(S.toMiddleware!==y.toMiddleware||S.relation!==y.relation)throw new Error(`"${Qo(S.name,S.aliases)}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by "${Qo(p,m)}" middleware ${y.relation} "${y.toMiddleware}" middleware.`);t.splice(w,1)}}for(const b of g)r.add(b)}t.push(y)},clone:()=>i(Th()),use:d=>{d.applyToStack(l)},remove:d=>typeof d=="string"?o(d):a(d),removeByTag:d=>{let f=!1;const p=h=>{const{tags:m,name:y,aliases:g}=h;if(m&&m.includes(d)){const b=si(y,g);for(const w of b)r.delete(w);return f=!0,!1}return!0};return e=e.filter(p),t=t.filter(p),f},concat:d=>{var p;const f=i(Th());return f.use(d),f.identifyOnResolve(n||f.identifyOnResolve()||(((p=d.identifyOnResolve)==null?void 0:p.call(d))??!1)),f},applyToStack:i,identify:()=>c(!0).map(d=>{const f=d.step??d.relation+" "+d.toMiddleware;return Qo(d.name,d.aliases)+" - "+f}),identifyOnResolve(d){return typeof d=="boolean"&&(n=d),n},resolve:(d,f)=>{for(const p of c().map(h=>h.middleware).reverse())d=p(d,f);return n&&console.log(l.identify()),d}};return l},yI={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},vI={high:3,normal:2,low:1};class efe{constructor(t){this.config=t,this.middlewareStack=Th()}send(t,n,r){const s=typeof n!="function"?n:void 0,o=typeof n=="function"?n:r,a=s===void 0&&this.config.cacheMiddleware===!0;let i;if(a){this.handlers||(this.handlers=new WeakMap);const u=this.handlers;u.has(t.constructor)?i=u.get(t.constructor):(i=t.resolveMiddleware(this.middlewareStack,this.config,s),u.set(t.constructor,i))}else delete this.handlers,i=t.resolveMiddleware(this.middlewareStack,this.config,s);if(o)i(t).then(u=>o(null,u.output),u=>o(u)).catch(()=>{});else return i(t).then(u=>u.output)}destroy(){var t,n,r;(r=(n=(t=this.config)==null?void 0:t.requestHandler)==null?void 0:n.destroy)==null||r.call(n),delete this.handlers}}const tfe=e=>new TextEncoder().encode(e),nfe=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)};function rfe(e,t="utf-8"){return t==="base64"?a$(e):nfe(e)}function sfe(e,t){return t==="base64"?Ei.mutate(R2(e)):Ei.mutate(tfe(e))}class Ei extends Uint8Array{static fromString(t,n="utf-8"){switch(typeof t){case"string":return sfe(t,n);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,Ei.prototype),t}transformToString(t="utf-8"){return rfe(this,t)}}for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`)}const ofe=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Ei.mutate(e);if(!e)return Ei.mutate(new Uint8Array);const n=t.streamCollector(e);return Ei.mutate(await n)};class g${constructor(){this.middlewareStack=Th()}static classBuilder(){return new afe}resolveMiddlewareWithContext(t,n,r,{middlewareFn:s,clientName:o,commandName:a,inputFilterSensitiveLog:i,outputFilterSensitiveLog:u,smithyContext:c,additionalContext:l,CommandCtor:d}){for(const y of s.bind(this)(d,t,n,r))this.middlewareStack.use(y);const f=t.concat(this.middlewareStack),{logger:p}=n,h={logger:p,clientName:o,commandName:a,inputFilterSensitiveLog:i,outputFilterSensitiveLog:u,[$1]:{commandInstance:this,...c},...l},{requestHandler:m}=n;return f.resolve(y=>m.handle(y.request,r||{}),h)}}class afe{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,n,r={}){return this._smithyContext={service:t,operation:n,...r},this}c(t={}){return this._additionalContext=t,this}n(t,n){return this._clientName=t,this._commandName=n,this}f(t=r=>r,n=r=>r){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=n,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}build(){const t=this;let n;return n=class extends g${static getEndpointParameterInstructions(){return t._ep}constructor(...[r]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=r??{},t._init(this)}resolveMiddleware(r,s,o){return this.resolveMiddlewareWithContext(r,s,o,{CommandCtor:n,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}}const ife=e=>{if(e!=null){if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&v$.warn(y$(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},lfe=Math.ceil(2**127*(2-2**-23)),ufe=e=>{const t=ife(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>lfe)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},cfe=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},dfe=e=>ffe(e,32),ffe=(e,t)=>{const n=cfe(e);if(n!==void 0&&pfe(n,t)!==n)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return n},pfe=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},hfe=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;const t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},br=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return v$.warn(y$(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},mfe=e=>{if(e==null)return;const t=hfe(e),n=Object.entries(t).filter(([,r])=>r!=null).map(([r])=>r);if(n.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(n.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${n} were not null.`);return t},Yn=e=>typeof e=="string"?gfe(e):ufe(e),gfe=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},y$=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),v$={warn:console.warn};class O2 extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,O2.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}}const ja=(e,t={})=>{Object.entries(t).filter(([,r])=>r!==void 0).forEach(([r,s])=>{(e[r]==null||e[r]==="")&&(e[r]=s)});const n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},yfe=({output:e,parsedBody:t,exceptionCtor:n,errorCode:r})=>{const s=bfe(e),o=s.httpStatusCode?s.httpStatusCode+"":void 0,a=new n({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||r||o||"UnknownError",$fault:"client",$metadata:s});throw ja(a,t)},vfe=e=>({output:t,parsedBody:n,errorCode:r})=>{yfe({output:t,parsedBody:n,exceptionCtor:e,errorCode:r})},bfe=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),wfe=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Sfe=e=>{const t=[];for(const n in Ih){const r=Ih[n];e[r]!==void 0&&t.push({algorithmId:()=>r,checksumConstructor:()=>e[r]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(n){this._checksumAlgorithms.push(n)},checksumAlgorithms(){return this._checksumAlgorithms}}},xfe=e=>{const t={};return e.checksumAlgorithms().forEach(n=>{t[n.algorithmId()]=n.checksumConstructor()}),t},kfe=e=>{let t=e.retryStrategy;return{setRetryStrategy(n){t=n},retryStrategy(){return t}}},Ife=e=>{const t={};return t.retryStrategy=e.retryStrategy(),t},_fe=e=>({...Sfe(e),...kfe(e)}),Efe=e=>({...xfe(e),...Ife(e)});function bI(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const z1=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),n=new t;return Object.setPrototypeOf(n,e.prototype),n};z1.prototype=Object.create(String.prototype,{constructor:{value:z1,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(z1,String);function uo(e,t,n){let r,s,o;if(typeof t>"u"&&typeof n>"u")r={},o=e;else{if(r=e,typeof t=="function")return s=t,o=n,Cfe(r,s,o);o=t}for(const a of Object.keys(o)){if(!Array.isArray(o[a])){r[a]=o[a];continue}b$(r,null,o,a)}return r}const _n=(e,t)=>{const n={};for(const r in t)b$(n,e,t,r);return n},Cfe=(e,t,n)=>uo(e,Object.entries(n).reduce((r,[s,o])=>(Array.isArray(o)?r[s]=o:typeof o=="function"?r[s]=[t,o()]:r[s]=[t,o],r),{})),b$=(e,t,n,r)=>{if(t!==null){let a=n[r];typeof a=="function"&&(a=[,a]);const[i=Tfe,u=Nfe,c=r]=a;(typeof i=="function"&&i(t[c])||typeof i!="function"&&i)&&(e[r]=u(t[c]));return}let[s,o]=n[r];if(typeof o=="function"){let a;const i=s===void 0&&(a=o())!=null,u=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;i?e[r]=a:u&&(e[r]=o())}else{const a=s===void 0&&o!=null,i=typeof s=="function"&&!!s(o)||typeof s!="function"&&!!s;(a||i)&&(e[r]=o)}},Tfe=e=>e!=null,Nfe=e=>e,Afe=(e,t,n,r,s,o)=>{if(t!=null&&t[n]!==void 0){const a=r();if(a.length<=0)throw new Error("Empty value provided for input HTTP label: "+n+".");e=e.replace(s,o?a.split("/").map(i=>bI(i)).join("/"):bI(a))}else throw new Error("No value provided for input HTTP label: "+n+".");return e},Wf=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},kd=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(kd);if(typeof e=="object"){const t={};for(const n of Object.keys(e))e[n]!=null&&(t[n]=kd(e[n]));return t}return e},Dfe=e=>(e==null?void 0:e.body)instanceof ReadableStream,$fe=e=>(t,n)=>async r=>{var a;let s=await e.retryStrategy();const o=await e.maxAttempts();if(Rfe(s)){s=s;let i=await s.acquireInitialRetryToken(n.partition_id),u=new Error,c=0,l=0;const{request:d}=r,f=rr.isInstance(d);for(f&&(d.headers[Kde]=WM());;)try{f&&(d.headers[Xde]=`attempt=${c+1}; max=${o}`);const{response:p,output:h}=await t(r);return s.recordSuccess(i),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=l,{response:p,output:h}}catch(p){const h=Ffe(p);if(u=Zde(p),f&&Dfe(d))throw(a=n.logger instanceof m$?console:n.logger)==null||a.warn("An error was encountered in a non-retryable streaming request."),u;try{i=await s.refreshRetryTokenForRetry(i,h)}catch{throw u.$metadata||(u.$metadata={}),u.$metadata.attempts=c+1,u.$metadata.totalRetryDelay=l,u}c=i.getRetryCount();const m=i.getRetryDelay();l+=m,await new Promise(y=>setTimeout(y,m))}}else return s=s,s!=null&&s.mode&&(n.userAgent=[...n.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,r)},Rfe=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Ffe=e=>{const t={error:e,errorType:Mfe(e)},n=Pfe(e.$response);return n&&(t.retryAfterHint=n),t},Mfe=e=>d$(e)?"THROTTLING":f$(e)?"TRANSIENT":Ude(e)?"SERVER_ERROR":"CLIENT_ERROR",w$={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ofe=e=>({applyToStack:t=>{t.add($fe(e),w$)}}),Pfe=e=>{if(!Sd.isInstance(e))return;const t=Object.keys(e.headers).find(o=>o.toLowerCase()==="retry-after");if(!t)return;const n=e.headers[t],r=Number(n);return Number.isNaN(r)?new Date(n):new Date(r*1e3)},Bfe=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"rekognition"}),Lfe={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},zfe="@aws-sdk/client-rekognitionstreaming",Wfe="AWS SDK for JavaScript Rekognitionstreaming Client for Node.js, Browser and React Native",Ufe="3.621.0",Vfe={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-rekognitionstreaming","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo rekognitionstreaming"},Hfe="./dist-cjs/index.js",jfe="./dist-types/index.d.ts",Gfe="./dist-es/index.js",qfe=!1,Kfe={"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/client-sso-oidc":"3.621.0","@aws-sdk/client-sts":"3.621.0","@aws-sdk/core":"3.621.0","@aws-sdk/credential-provider-node":"3.621.0","@aws-sdk/eventstream-handler-node":"3.620.0","@aws-sdk/middleware-eventstream":"3.620.0","@aws-sdk/middleware-host-header":"3.620.0","@aws-sdk/middleware-logger":"3.609.0","@aws-sdk/middleware-recursion-detection":"3.620.0","@aws-sdk/middleware-signing":"3.620.0","@aws-sdk/middleware-user-agent":"3.620.0","@aws-sdk/middleware-websocket":"3.621.0","@aws-sdk/region-config-resolver":"3.614.0","@aws-sdk/types":"3.609.0","@aws-sdk/util-endpoints":"3.614.0","@aws-sdk/util-user-agent-browser":"3.609.0","@aws-sdk/util-user-agent-node":"3.614.0","@smithy/config-resolver":"^3.0.5","@smithy/core":"^2.3.1","@smithy/eventstream-serde-browser":"^3.0.5","@smithy/eventstream-serde-config-resolver":"^3.0.3","@smithy/eventstream-serde-node":"^3.0.4","@smithy/fetch-http-handler":"^3.2.4","@smithy/hash-node":"^3.0.3","@smithy/invalid-dependency":"^3.0.3","@smithy/middleware-content-length":"^3.0.5","@smithy/middleware-endpoint":"^3.1.0","@smithy/middleware-retry":"^3.0.13","@smithy/middleware-serde":"^3.0.3","@smithy/middleware-stack":"^3.0.3","@smithy/node-config-provider":"^3.1.4","@smithy/node-http-handler":"^3.1.4","@smithy/protocol-http":"^4.1.0","@smithy/smithy-client":"^3.1.11","@smithy/types":"^3.3.0","@smithy/url-parser":"^3.0.3","@smithy/util-base64":"^3.0.0","@smithy/util-body-length-browser":"^3.0.0","@smithy/util-body-length-node":"^3.0.0","@smithy/util-defaults-mode-browser":"^3.0.13","@smithy/util-defaults-mode-node":"^3.0.13","@smithy/util-endpoints":"^2.0.5","@smithy/util-retry":"^3.0.3","@smithy/util-utf8":"^3.0.0",tslib:"^2.6.2"},Xfe={"@tsconfig/node16":"16.1.3","@types/node":"^16.18.96",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~4.9.5"},Yfe={node:">=16.0.0"},Qfe={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},Zfe=["dist-*/**"],Jfe={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},epe="Apache-2.0",tpe={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},npe="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-rekognitionstreaming",rpe={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-rekognitionstreaming"},spe={name:zfe,description:Wfe,version:Ufe,scripts:Vfe,main:Hfe,types:jfe,module:Gfe,sideEffects:qfe,dependencies:Kfe,devDependencies:Xfe,engines:Yfe,typesVersions:Qfe,files:Zfe,author:Jfe,license:epe,browser:tpe,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:npe,repository:rpe};var S$={name:"SHA-256"},wI={name:"HMAC",hash:S$},ope=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const ape={};function yp(){return typeof window<"u"?window:typeof self<"u"?self:ape}var ipe=function(){function e(t){this.toHash=new Uint8Array(0),this.secret=t,this.reset()}return e.prototype.update=function(t){if(!A0(t)){var n=Jc(t),r=new Uint8Array(this.toHash.byteLength+n.byteLength);r.set(this.toHash,0),r.set(n,this.toHash.byteLength),this.toHash=r}},e.prototype.digest=function(){var t=this;return this.key?this.key.then(function(n){return yp().crypto.subtle.sign(wI,n,t.toHash).then(function(r){return new Uint8Array(r)})}):A0(this.toHash)?Promise.resolve(ope):Promise.resolve().then(function(){return yp().crypto.subtle.digest(S$,t.toHash)}).then(function(n){return Promise.resolve(new Uint8Array(n))})},e.prototype.reset=function(){var t=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(n,r){yp().crypto.subtle.importKey("raw",Jc(t.secret),wI,!1,["sign"]).then(n,r)}),this.key.catch(function(){}))},e}(),lpe=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function upe(e){if(cpe(e)&&typeof e.crypto.subtle=="object"){var t=e.crypto.subtle;return dpe(t)}return!1}function cpe(e){if(typeof e=="object"&&typeof e.crypto=="object"){var t=e.crypto.getRandomValues;return typeof t=="function"}return!1}function dpe(e){return e&&lpe.every(function(t){return typeof e[t]=="function"})}var fpe=function(){function e(t){upe(yp())?this.hash=new ipe(t):this.hash=new fO(t)}return e.prototype.update=function(t,n){this.hash.update(Jc(t))},e.prototype.digest=function(){return this.hash.digest()},e.prototype.reset=function(){this.hash.reset()},e}();const ppe={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},x$={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},on={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},dr={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Jo={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class le{static getFirstMatch(t,n){const r=n.match(t);return r&&r.length>0&&r[1]||""}static getSecondMatch(t,n){const r=n.match(t);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(t,n,r){if(t.test(n))return r}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const n=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const n=t.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,n,r=!1){const s=le.getVersionPrecision(t),o=le.getVersionPrecision(n);let a=Math.max(s,o),i=0;const u=le.map([t,n],c=>{const l=a-le.getVersionPrecision(c),d=c+new Array(l+1).join(".0");return le.map(d.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(r&&(i=a-Math.min(s,o)),a-=1;a>=i;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===i)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}}static map(t,n){const r=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,n);for(s=0;s<t.length;s+=1)r.push(n(t[s]));return r}static find(t,n){let r,s;if(Array.prototype.find)return Array.prototype.find.call(t,n);for(r=0,s=t.length;r<s;r+=1){const o=t[r];if(n(o,r))return o}}static assign(t,...n){const r=t;let s,o;if(Object.assign)return Object.assign(t,...n);for(s=0,o=n.length;s<o;s+=1){const a=n[s];typeof a=="object"&&a!==null&&Object.keys(a).forEach(u=>{r[u]=a[u]})}return t}static getBrowserAlias(t){return ppe[t]}static getBrowserTypeByAlias(t){return x$[t]||""}}const Ct=/version\/(\d+(\.?_?\d+)+)/i,hpe=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},n=le.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},n=le.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},n=le.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},n=le.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},n=le.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},n=le.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},n=le.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},n=le.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=le.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},n=le.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},n=le.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},n=le.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},n=le.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},n=le.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},n=le.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},n=le.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},n=le.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},n=le.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},n=le.getFirstMatch(Ct,e)||le.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},n=le.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},n=le.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},n=le.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},n=le.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},n=le.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},n=le.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},n=le.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},n=le.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},n=le.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t={name:"Android Browser"},n=le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},n=le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},n=le.getFirstMatch(Ct,e);return n&&(t.version=n),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,s=e.search("\\(")!==-1?n:t;return{name:le.getFirstMatch(s,e),version:le.getSecondMatch(s,e)}}}],mpe=[{test:[/Roku\/DVP/],describe(e){const t=le.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:dr.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=le.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:dr.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=le.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=le.getWindowsVersionName(t);return{name:dr.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:dr.iOS},n=le.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe(e){const t=le.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=le.getMacOSVersionName(t),r={name:dr.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=le.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:dr.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe(e){const t=le.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=le.getAndroidVersionName(t),r={name:dr.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=le.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:dr.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=le.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||le.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||le.getFirstMatch(/\bbb(\d+)/i,e);return{name:dr.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=le.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:dr.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=le.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:dr.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:dr.Linux}}},{test:[/CrOS/],describe(){return{name:dr.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=le.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:dr.PlayStation4,version:t}}}],gpe=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=le.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:on.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:on.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:on.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:on.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:on.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:on.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:on.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe(e){const t=le.getFirstMatch(/(ipod|iphone)/i,e);return{type:on.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:on.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:on.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:on.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:on.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:on.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:on.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:on.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:on.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:on.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:on.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:on.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:on.tv}}}],ype=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Jo.Blink};const n=le.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Jo.EdgeHTML,version:n}}},{test:[/trident/i],describe(e){const t={name:Jo.Trident},n=le.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Jo.Presto},n=le.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test(e){const t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe(e){const t={name:Jo.Gecko},n=le.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Jo.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Jo.WebKit},n=le.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];class SI{constructor(t,n=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=le.find(hpe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=le.find(mpe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:n}=this.getOS();return t?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:n}=this.getPlatform();return t?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const t=le.find(gpe,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=le.find(ype,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return le.assign({},this.parsedResult)}satisfies(t){const n={};let r=0;const s={};let o=0;if(Object.keys(t).forEach(i=>{const u=t[i];typeof u=="string"?(s[i]=u,o+=1):typeof u=="object"&&(n[i]=u,r+=1)}),r>0){const i=Object.keys(n),u=le.find(i,l=>this.isOS(l));if(u){const l=this.satisfies(n[u]);if(l!==void 0)return l}const c=le.find(i,l=>this.isPlatform(l));if(c){const l=this.satisfies(n[c]);if(l!==void 0)return l}}if(o>0){const i=Object.keys(s),u=le.find(i,c=>this.isBrowser(c,!0));if(u!==void 0)return this.compareVersion(s[u])}}isBrowser(t,n=!1){const r=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const o=le.getBrowserTypeByAlias(s);return n&&o&&(s=o.toLowerCase()),s===r}compareVersion(t){let n=[0],r=t,s=!1;const o=this.getBrowserVersion();if(typeof o=="string")return t[0]===">"||t[0]==="<"?(r=t.substr(1),t[1]==="="?(s=!0,r=t.substr(2)):n=[],t[0]===">"?n.push(1):n.push(-1)):t[0]==="="?r=t.substr(1):t[0]==="~"&&(s=!0,r=t.substr(1)),n.indexOf(le.compareVersions(o,r,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,n=!1){return this.isBrowser(t,n)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class k${static getParser(t,n=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new SI(t,n)}static parse(t){return new SI(t).getResult()}static get BROWSER_MAP(){return x$}static get ENGINE_MAP(){return Jo}static get OS_MAP(){return dr}static get PLATFORMS_MAP(){return on}}const vpe=({serviceId:e,clientVersion:t})=>async()=>{var s,o,a,i,u;const n=typeof window<"u"&&((s=window==null?void 0:window.navigator)!=null&&s.userAgent)?k$.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",t],["ua","2.0"],[`os/${((o=n==null?void 0:n.os)==null?void 0:o.name)||"other"}`,(a=n==null?void 0:n.os)==null?void 0:a.version],["lang/js"],["md/browser",`${((i=n==null?void 0:n.browser)==null?void 0:i.name)??"unknown"}_${((u=n==null?void 0:n.browser)==null?void 0:u.version)??"unknown"}`]];return e&&r.push([`api/${e}`,t]),r},bpe=e=>()=>Promise.reject(e),xI=typeof TextEncoder=="function"?new TextEncoder:null,wpe=e=>{if(typeof e=="string"){if(xI)return xI.encode(e).byteLength;let t=e.length;for(let n=t-1;n>=0;n--){const r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2),r>=56320&&r<=57343&&n--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)},Spe=e=>new TextEncoder().encode(e),xpe=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)},I$="required",To="fn",No="argv",Iu="ref",kI="isSet",cr="tree",ll="error",Xu="endpoint",P2="PartitionResult",II={[I$]:!1,type:"String"},_I={[I$]:!0,default:!1,type:"Boolean"},EI={[Iu]:"Endpoint"},_$={[To]:"booleanEquals",[No]:[{[Iu]:"UseFIPS"},!0]},E$={[To]:"booleanEquals",[No]:[{[Iu]:"UseDualStack"},!0]},Ys={},CI={[To]:"booleanEquals",[No]:[!0,{[To]:"getAttr",[No]:[{[Iu]:P2},"supportsFIPS"]}]},TI={[To]:"booleanEquals",[No]:[!0,{[To]:"getAttr",[No]:[{[Iu]:P2},"supportsDualStack"]}]},NI=[_$],AI=[E$],DI=[{[Iu]:"Region"}],kpe={version:"1.0",parameters:{Region:II,UseDualStack:_I,UseFIPS:_I,Endpoint:II},rules:[{conditions:[{[To]:kI,[No]:[EI]}],type:cr,rules:[{conditions:NI,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:ll},{type:cr,rules:[{conditions:AI,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:ll},{endpoint:{url:EI,properties:Ys,headers:Ys},type:Xu}]}]},{type:cr,rules:[{conditions:[{[To]:kI,[No]:DI}],type:cr,rules:[{conditions:[{[To]:"aws.partition",[No]:DI,assign:P2}],type:cr,rules:[{conditions:[_$,E$],type:cr,rules:[{conditions:[CI,TI],type:cr,rules:[{type:cr,rules:[{endpoint:{url:"https://streaming-rekognition-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ys,headers:Ys},type:Xu}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:ll}]},{conditions:NI,type:cr,rules:[{conditions:[CI],type:cr,rules:[{type:cr,rules:[{endpoint:{url:"https://streaming-rekognition-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ys,headers:Ys},type:Xu}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:ll}]},{conditions:AI,type:cr,rules:[{conditions:[TI],type:cr,rules:[{type:cr,rules:[{endpoint:{url:"https://streaming-rekognition.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ys,headers:Ys},type:Xu}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:ll}]},{type:cr,rules:[{endpoint:{url:"https://streaming-rekognition.{Region}.{PartitionResult#dnsSuffix}",properties:Ys,headers:Ys},type:Xu}]}]}]},{error:"Invalid Configuration: Missing Region",type:ll}]}]},Ipe=kpe,_pe=(e,t={})=>ace(Ipe,{endpointParams:e,logger:t.logger});_h.aws=KD;const Epe=e=>({apiVersion:"2022-05-30",base64Decoder:(e==null?void 0:e.base64Decoder)??R2,base64Encoder:(e==null?void 0:e.base64Encoder)??a$,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??_pe,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new m$,serviceId:(e==null?void 0:e.serviceId)??"RekognitionStreaming",urlParser:(e==null?void 0:e.urlParser)??Eh,utf8Decoder:(e==null?void 0:e.utf8Decoder)??Spe,utf8Encoder:(e==null?void 0:e.utf8Encoder)??xpe}),Cpe=["in-region","cross-region","mobile","standard","legacy"],Tpe=({defaultsMode:e}={})=>AD(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(Npe()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Cpe.join(", ")}, got ${t}`)}}),Npe=()=>{var n,r;const e=typeof window<"u"&&((n=window==null?void 0:window.navigator)!=null&&n.userAgent)?k$.parse(window.navigator.userAgent):void 0,t=(r=e==null?void 0:e.platform)==null?void 0:r.type;return t==="tablet"||t==="mobile"},Ape=e=>{const t=Tpe(e),n=()=>t().then(wfe),r=Epe(e);return{...r,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??wpe,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??vpe({serviceId:r.serviceId,clientVersion:spe.version}),eventStreamPayloadHandlerProvider:(e==null?void 0:e.eventStreamPayloadHandlerProvider)??zce,eventStreamSerdeProvider:(e==null?void 0:e.eventStreamSerdeProvider)??ede,maxAttempts:(e==null?void 0:e.maxAttempts)??Ch,region:(e==null?void 0:e.region)??bpe("Region is missing"),requestHandler:F2.create((e==null?void 0:e.requestHandler)??n,B1.create(n)),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await n()).retryMode||Ode),sha256:(e==null?void 0:e.sha256)??fpe,streamCollector:(e==null?void 0:e.streamCollector)??sde,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(fde)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(pde))}},Dpe=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");const n=e.region;return typeof n=="string"?n:n()};return{setRegion(n){t=n},region(){return t}}},$pe=e=>({region:e.region()}),Av=e=>e,Rpe=(e,t)=>{const n={...Av(Dpe(e)),...Av(_fe(e)),...Av(Wle(e))};return t.forEach(r=>r.configure(n)),{...e,...$pe(n),...Efe(n),...Ule(n)}};class Fpe extends efe{constructor(...[t]){const n=Ape(t||{}),r=Bfe(n),s=hde(r),o=Mde(s),a=o,i=Mue(a),u=zle(i),c=qce(u),l=Wue(c),d=Jde(l),f=mde(d),p=Rpe(f,(t==null?void 0:t.extensions)||[]);super(p),this.config=p,this.middlewareStack.use(Qle(this.config)),this.middlewareStack.use(eue(this.config)),this.middlewareStack.use(oue(this.config)),this.middlewareStack.use(zue(this.config)),this.middlewareStack.use(yce(this.config)),this.middlewareStack.use(Ofe(this.config)),this.middlewareStack.use(vde(this.config))}destroy(){super.destroy()}}class co extends O2{constructor(t){super(t),Object.setPrototypeOf(this,co.prototype)}}class B2 extends co{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,B2.prototype),this.Message=t.Message,this.Code=t.Code}}var W1;(function(e){e.visit=(t,n)=>t.FaceMovementAndLightChallenge!==void 0?n.FaceMovementAndLightChallenge(t.FaceMovementAndLightChallenge):n._(t.$unknown[0],t.$unknown[1])})(W1||(W1={}));class L2 extends co{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,L2.prototype),this.Message=t.Message,this.Code=t.Code}}var U1;(function(e){e.visit=(t,n)=>t.VideoEvent!==void 0?n.VideoEvent(t.VideoEvent):t.ClientSessionInformationEvent!==void 0?n.ClientSessionInformationEvent(t.ClientSessionInformationEvent):n._(t.$unknown[0],t.$unknown[1])})(U1||(U1={}));var $I;(function(e){e.visit=(t,n)=>t.FaceMovementAndLightChallenge!==void 0?n.FaceMovementAndLightChallenge(t.FaceMovementAndLightChallenge):n._(t.$unknown[0],t.$unknown[1])})($I||($I={}));class z2 extends co{constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,z2.prototype),this.Message=t.Message,this.Code=t.Code}}class W2 extends co{constructor(t){super({name:"ServiceUnavailableException",$fault:"server",...t}),this.name="ServiceUnavailableException",this.$fault="server",Object.setPrototypeOf(this,W2.prototype),this.Message=t.Message,this.Code=t.Code}}class U2 extends co{constructor(t){super({name:"ThrottlingException",$fault:"client",...t}),this.name="ThrottlingException",this.$fault="client",Object.setPrototypeOf(this,U2.prototype),this.Message=t.Message,this.Code=t.Code}}class V2 extends co{constructor(t){super({name:"ValidationException",$fault:"client",...t}),this.name="ValidationException",this.$fault="client",Object.setPrototypeOf(this,V2.prototype),this.Message=t.Message,this.Code=t.Code}}var RI;(function(e){e.visit=(t,n)=>t.ServerSessionInformationEvent!==void 0?n.ServerSessionInformationEvent(t.ServerSessionInformationEvent):t.DisconnectionEvent!==void 0?n.DisconnectionEvent(t.DisconnectionEvent):t.ValidationException!==void 0?n.ValidationException(t.ValidationException):t.InternalServerException!==void 0?n.InternalServerException(t.InternalServerException):t.ThrottlingException!==void 0?n.ThrottlingException(t.ThrottlingException):t.ServiceQuotaExceededException!==void 0?n.ServiceQuotaExceededException(t.ServiceQuotaExceededException):t.ServiceUnavailableException!==void 0?n.ServiceUnavailableException(t.ServiceUnavailableException):n._(t.$unknown[0],t.$unknown[1])})(RI||(RI={}));class H2 extends co{constructor(t){super({name:"SessionNotFoundException",$fault:"client",...t}),this.name="SessionNotFoundException",this.$fault="client",Object.setPrototypeOf(this,H2.prototype),this.Message=t.Message,this.Code=t.Code}}const Mpe=e=>({...e,...e.LivenessRequestStream&&{LivenessRequestStream:"STREAMING_CONTENT"}}),Ope=e=>({...e,...e.LivenessResponseStream&&{LivenessResponseStream:"STREAMING_CONTENT"}});c$.name;M2.name;w$.name;function Ppe(e,t){return new Bpe(e,t)}class Bpe{constructor(t,n){this.input=t,this.context=n,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){const{hostname:t,protocol:n="https",port:r,path:s}=await this.context.endpoint();this.path=s;for(const o of this.resolvePathStack)o(this.path);return new rr({protocol:n,hostname:this.hostname||t,port:r,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(n=>{this.path=`${n!=null&&n.endsWith("/")?n.slice(0,-1):n||""}`+t}),this}p(t,n,r,s){return this.resolvePathStack.push(o=>{this.path=Afe(o,this.input,t,n,r,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}const Lpe=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,mfe(e)},zpe=(e,t)=>ofe(e,t).then(n=>t.utf8Encoder(n)),Ga=(e,t)=>zpe(e,t).then(n=>{if(n.length)try{return JSON.parse(n)}catch(r){throw(r==null?void 0:r.name)==="SyntaxError"&&Object.defineProperty(r,"$responseBodyText",{value:n}),r}return{}}),Wpe=async(e,t)=>{const n=await Ga(e,t);return n.message=n.message??n.Message,n},Upe=(e,t)=>{const n=(o,a)=>Object.keys(o).find(i=>i.toLowerCase()===a.toLowerCase()),r=o=>{let a=o;return typeof a=="number"&&(a=a.toString()),a.indexOf(",")>=0&&(a=a.split(",")[0]),a.indexOf(":")>=0&&(a=a.split(":")[0]),a.indexOf("#")>=0&&(a=a.split("#")[1]),a},s=n(e.headers,"x-amzn-errortype");if(s!==void 0)return r(e.headers[s]);if(t.code!==void 0)return r(t.code);if(t.__type!==void 0)return r(t.__type)},Vpe=async(e,t)=>{const n=Ppe(e,t),r=uo({},whe,{"content-type":"application/json",[F$]:e[R$],[Ehe]:e[khe],[_he]:e[xhe],[Ihe]:e[She]});n.bp("/start-face-liveness-session");let s;return e.LivenessRequestStream!==void 0&&(s=Xpe(e.LivenessRequestStream,t)),n.m("POST").h(r).b(s),n.build()},Hpe=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return jpe(e,t);const n=uo({$metadata:qa(e),[R$]:[,e.headers[F$]]}),r=e.body;return n.LivenessResponseStream=Zpe(r,t),n},jpe=async(e,t)=>{const n={...e,body:await Wpe(e.body,t)},r=Upe(e,n.body);switch(r){case"AccessDeniedException":case"com.amazonaws.rekognitionstreaming#AccessDeniedException":throw await qpe(n);case"InternalServerException":case"com.amazonaws.rekognitionstreaming#InternalServerException":throw await C$(n);case"ServiceQuotaExceededException":case"com.amazonaws.rekognitionstreaming#ServiceQuotaExceededException":throw await T$(n);case"ServiceUnavailableException":case"com.amazonaws.rekognitionstreaming#ServiceUnavailableException":throw await N$(n);case"SessionNotFoundException":case"com.amazonaws.rekognitionstreaming#SessionNotFoundException":throw await Kpe(n);case"ThrottlingException":case"com.amazonaws.rekognitionstreaming#ThrottlingException":throw await A$(n);case"ValidationException":case"com.amazonaws.rekognitionstreaming#ValidationException":throw await D$(n);default:const s=n.body;return Gpe({output:e,parsedBody:s,errorCode:r})}},Gpe=vfe(co),qpe=async(e,t)=>{const n=uo({}),r=e.body,s=_n(r,{Code:br,Message:br});Object.assign(n,s);const o=new B2({$metadata:qa(e),...n});return ja(o,e.body)},C$=async(e,t)=>{const n=uo({}),r=e.body,s=_n(r,{Code:br,Message:br});Object.assign(n,s);const o=new L2({$metadata:qa(e),...n});return ja(o,e.body)},T$=async(e,t)=>{const n=uo({}),r=e.body,s=_n(r,{Code:br,Message:br});Object.assign(n,s);const o=new z2({$metadata:qa(e),...n});return ja(o,e.body)},N$=async(e,t)=>{const n=uo({}),r=e.body,s=_n(r,{Code:br,Message:br});Object.assign(n,s);const o=new W2({$metadata:qa(e),...n});return ja(o,e.body)},Kpe=async(e,t)=>{const n=uo({}),r=e.body,s=_n(r,{Code:br,Message:br});Object.assign(n,s);const o=new H2({$metadata:qa(e),...n});return ja(o,e.body)},A$=async(e,t)=>{const n=uo({}),r=e.body,s=_n(r,{Code:br,Message:br});Object.assign(n,s);const o=new U2({$metadata:qa(e),...n});return ja(o,e.body)},D$=async(e,t)=>{const n=uo({}),r=e.body,s=_n(r,{Code:br,Message:br});Object.assign(n,s);const o=new V2({$metadata:qa(e),...n});return ja(o,e.body)},Xpe=(e,t)=>{const n=r=>U1.visit(r,{VideoEvent:s=>Qpe(s,t),ClientSessionInformationEvent:s=>Ype(s,t),_:s=>s});return t.eventStreamMarshaller.serialize(e,n)},Ype=(e,t)=>{const n={":event-type":{type:"string",value:"ClientSessionInformationEvent"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}};let r=new Uint8Array;return r=ihe(e),r=t.utf8Decoder(JSON.stringify(r)),{headers:n,body:r}},Qpe=(e,t)=>{const n={":event-type":{type:"string",value:"VideoEvent"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:"application/json"}};let r=new Uint8Array;return r=dhe(e,t),r=t.utf8Decoder(JSON.stringify(r)),{headers:n,body:r}},Zpe=(e,t)=>t.eventStreamMarshaller.deserialize(e,async n=>n.ServerSessionInformationEvent!=null?{ServerSessionInformationEvent:await the(n.ServerSessionInformationEvent,t)}:n.DisconnectionEvent!=null?{DisconnectionEvent:await Jpe(n.DisconnectionEvent,t)}:n.ValidationException!=null?{ValidationException:await ohe(n.ValidationException,t)}:n.InternalServerException!=null?{InternalServerException:await ehe(n.InternalServerException,t)}:n.ThrottlingException!=null?{ThrottlingException:await she(n.ThrottlingException,t)}:n.ServiceQuotaExceededException!=null?{ServiceQuotaExceededException:await nhe(n.ServiceQuotaExceededException,t)}:n.ServiceUnavailableException!=null?{ServiceUnavailableException:await rhe(n.ServiceUnavailableException,t)}:{$unknown:e}),Jpe=async(e,t)=>{const n={},r=await Ga(e.body,t);return Object.assign(n,kd(r)),n},ehe=async(e,t)=>{const n={...e,body:await Ga(e.body,t)};return C$(n)},the=async(e,t)=>{const n={},r=await Ga(e.body,t);return Object.assign(n,vhe(r)),n},nhe=async(e,t)=>{const n={...e,body:await Ga(e.body,t)};return T$(n)},rhe=async(e,t)=>{const n={...e,body:await Ga(e.body,t)};return N$(n)},she=async(e,t)=>{const n={...e,body:await Ga(e.body,t)};return A$(n)},ohe=async(e,t)=>{const n={...e,body:await Ga(e.body,t)};return D$(n)},$$=(e,t)=>_n(e,{Height:Wf,Left:Wf,Top:Wf,Width:Wf}),ahe=(e,t)=>W1.visit(e,{FaceMovementAndLightChallenge:n=>({FaceMovementAndLightChallenge:lhe(n)}),_:(n,r)=>({name:r})}),ihe=(e,t)=>_n(e,{Challenge:n=>ahe(n)}),lhe=(e,t)=>_n(e,{ChallengeId:[],ColorDisplayed:kd,InitialFace:n=>uhe(n),TargetFace:n=>che(n),VideoEndTimestamp:[],VideoStartTimestamp:[]}),uhe=(e,t)=>_n(e,{BoundingBox:n=>$$(n),InitialFaceDetectedTimestamp:[]}),che=(e,t)=>_n(e,{BoundingBox:n=>$$(n),FaceDetectedInTargetPositionEndTimestamp:[],FaceDetectedInTargetPositionStartTimestamp:[]}),dhe=(e,t)=>_n(e,{TimestampMillis:[],VideoChunk:t.base64Encoder}),fhe=(e,t)=>_n(e,{BlazeFaceDetectionThreshold:Yn,FaceDistanceThreshold:Yn,FaceDistanceThresholdMax:Yn,FaceDistanceThresholdMin:Yn,FaceIouHeightThreshold:Yn,FaceIouWidthThreshold:Yn,OvalFitTimeout:dfe,OvalHeightWidthRatio:Yn,OvalIouHeightThreshold:Yn,OvalIouThreshold:Yn,OvalIouWidthThreshold:Yn}),phe=(e,t)=>_n(e,{DownscrollDuration:Yn,FlatDisplayDuration:Yn,FreshnessColor:kd}),hhe=(e,t)=>(e||[]).filter(r=>r!=null).map(r=>phe(r)),mhe=(e,t)=>_n(e,{ChallengeConfig:n=>fhe(n),ColorSequences:n=>hhe(n),LightChallengeType:br,OvalParameters:n=>ghe(n)}),ghe=(e,t)=>_n(e,{CenterX:Yn,CenterY:Yn,Height:Yn,Width:Yn}),yhe=(e,t)=>e.FaceMovementAndLightChallenge!=null?{FaceMovementAndLightChallenge:mhe(e.FaceMovementAndLightChallenge)}:{$unknown:Object.entries(e)[0]},vhe=(e,t)=>_n(e,{SessionInformation:n=>bhe(n)}),bhe=(e,t)=>_n(e,{Challenge:n=>yhe(Lpe(n))}),qa=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),whe=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),She="ChallengeVersions",R$="SessionId",xhe="VideoHeight",khe="VideoWidth",Ihe="x-amz-rekognition-streaming-liveness-challenge-versions",F$="x-amz-rekognition-streaming-liveness-session-id",_he="x-amz-rekognition-streaming-liveness-video-height",Ehe="x-amz-rekognition-streaming-liveness-video-width";class Che extends g$.classBuilder().ep({...Lfe}).m(function(t,n,r,s){return[Rde(r,this.serialize,this.deserialize),Fde(r,t.getEndpointParameterInstructions()),Kle(r),jce(r,{headerPrefix:"x-amz-rekognition-streaming-liveness-"})]}).s("RekognitionStreamingService","StartFaceLivenessSession",{eventStream:{input:!0,output:!0}}).n("RekognitionStreamingClient","StartFaceLivenessSessionCommand").f(Mpe,Ope).ser(Vpe).de(Hpe).build(){}function The(){return/Macintosh/i.test(navigator.userAgent)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>1}function Nhe(){return/Android|iPhone|iPad/i.test(navigator.userAgent)||The()}function M$(){return window.matchMedia("(orientation: landscape)")}function Ahe(){const e=/Chrome\/125\.[0-9]+\.[0-9]+\.([0-9]+)/i.exec(navigator.userAgent);if(!e)return!1;const t=e[1];return/Android/i.test(navigator.userAgent)&&/Chrome\/125/i.test(navigator.userAgent)&&parseInt(t)<146}const Dhe="video/x-matroska;codecs=vp8";class $he{constructor(t){if(typeof MediaRecorder>"u")throw Error("MediaRecorder is not supported by this browser");this._stream=t,this._chunks=[],this._recorder=new MediaRecorder(t,{bitsPerSecond:1e6,mimeType:Ahe()?Dhe:void 0}),this._setupCallbacks()}getState(){return this._recorder.state}start(t){this.clearRecordedData(),this.recordingStartApiTimestamp=Date.now(),this._recorder.start(t)}async stop(){return this.getState()==="recording"&&this._recorder.stop(),this._recorderStopped}pause(){this._recorder.pause()}clearRecordedData(){this._chunks=[]}dispatch(t){this._recorder.dispatchEvent(t)}getVideoChunkSize(){return this._chunks.length}_setupCallbacks(){this.videoStream=new ReadableStream({start:t=>{this._recorder&&(this._recorder.ondataavailable=n=>{n.data&&n.data.size>0&&(this._chunks.length===0&&(this.firstChunkTimestamp=Date.now()),this._chunks.push(n.data),t.enqueue(n.data))},this._recorder.addEventListener("clientSesssionInfo",n=>{t.enqueue(n.data.clientInfo)}),this._recorder.addEventListener("stopVideo",()=>{t.enqueue("stopVideo")}),this._recorder.addEventListener("endStream",()=>{t.close()}),this._recorder.addEventListener("endStreamWithCode",n=>{t.enqueue({type:"endStreamWithCode",code:n.data.code})}))}}),this.recorderStarted=new Promise(t=>{this._recorder.onstart=()=>{this.recorderStartTimestamp=Date.now(),t()}}),this._recorderStopped=new Promise(t=>{this._recorder.onstop=()=>{this.recorderEndTimestamp=Date.now(),t()}}),this._recorder.onerror=()=>{this.getState()!=="stopped"&&this.stop()}}}const Rhe="3.1.10",Fhe=`ui-react-liveness/${Rhe}`,Mhe=()=>Fhe;var Dv={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V1=function(e,t){return V1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},V1(e,t)};function Ohe(e,t){V1(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var H1=function(){return H1=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},H1.apply(this,arguments)};function Phe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Bhe(e,t,n,r){var s=arguments.length,o=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(o=(s<3?a(o):s>3?a(t,n,o):a(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function Lhe(e,t){return function(n,r){t(n,r,e)}}function zhe(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Whe(e,t,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(l){try{c(r.next(l))}catch(d){a(d)}}function u(l){try{c(r.throw(l))}catch(d){a(d)}}function c(l){l.done?o(l.value):s(l.value).then(i,u)}c((r=r.apply(e,t||[])).next())})}function Uhe(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,a;return a={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function i(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],s=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Vhe(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}function Hhe(e,t){for(var n in e)n!=="default"&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function j1(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function O$(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,o=[],a;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(i){a={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function jhe(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(O$(arguments[t]));return e}function Ghe(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<n;t++)for(var o=arguments[t],a=0,i=o.length;a<i;a++,s++)r[s]=o[a];return r}function Id(e){return this instanceof Id?(this.v=e,this):new Id(e)}function qhe(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(f){r[f]&&(s[f]=function(p){return new Promise(function(h,m){o.push([f,p,h,m])>1||i(f,p)})})}function i(f,p){try{u(r[f](p))}catch(h){d(o[0][3],h)}}function u(f){f.value instanceof Id?Promise.resolve(f.value.v).then(c,l):d(o[0][2],f)}function c(f){i("next",f)}function l(f){i("throw",f)}function d(f,p){f(p),o.shift(),o.length&&i(o[0][0],o[0][1])}}function Khe(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,o){t[s]=e[s]?function(a){return(n=!n)?{value:Id(e[s](a)),done:s==="return"}:o?o(a):a}:o}}function Xhe(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof j1=="function"?j1(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(i,u){a=e[o](a),s(i,u,a.done,a.value)})}}function s(o,a,i,u){Promise.resolve(u).then(function(c){o({value:c,done:i})},a)}}function Yhe(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Qhe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Zhe(e){return e&&e.__esModule?e:{default:e}}function Jhe(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function eme(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}const tme=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return H1},__asyncDelegator:Khe,__asyncGenerator:qhe,__asyncValues:Xhe,__await:Id,__awaiter:Whe,__classPrivateFieldGet:Jhe,__classPrivateFieldSet:eme,__createBinding:Vhe,__decorate:Bhe,__exportStar:Hhe,__extends:Ohe,__generator:Uhe,__importDefault:Zhe,__importStar:Qhe,__makeTemplateObject:Yhe,__metadata:zhe,__param:Lhe,__read:O$,__rest:Phe,__spread:jhe,__spreadArrays:Ghe,__values:j1},Symbol.toStringTag,{value:"Module"})),P$=tb(tme);var j2={},my={};const nme=e=>{const t=[];for(let n=0,r=e.length;n<r;n++){const s=e.charCodeAt(n);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192,s&63|128);else if(n+1<e.length&&(s&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320){const o=65536+((s&1023)<<10)+(e.charCodeAt(++n)&1023);t.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else t.push(s>>12|224,s>>6&63|128,s&63|128)}return Uint8Array.from(t)},rme=e=>{let t="";for(let n=0,r=e.length;n<r;n++){const s=e[n];if(s<128)t+=String.fromCharCode(s);else if(192<=s&&s<224){const o=e[++n];t+=String.fromCharCode((s&31)<<6|o&63)}else if(240<=s&&s<365){const a="%"+[s,e[++n],e[++n],e[++n]].map(i=>i.toString(16)).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((s&15)<<12|(e[++n]&63)<<6|e[++n]&63)}return t};function sme(e){return new TextEncoder().encode(e)}function ome(e){return new TextDecoder("utf-8").decode(e)}const ame=e=>typeof TextEncoder=="function"?sme(e):nme(e),ime=e=>typeof TextDecoder=="function"?ome(e):rme(e),lme=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:ame,toUtf8:ime},Symbol.toStringTag,{value:"Module"})),ume=tb(lme);Object.defineProperty(my,"__esModule",{value:!0});my.convertToBuffer=void 0;var cme=ume,dme=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:cme.fromUtf8;function fme(e){return e instanceof Uint8Array?e:typeof e=="string"?dme(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}my.convertToBuffer=fme;var gy={};Object.defineProperty(gy,"__esModule",{value:!0});gy.isEmptyData=void 0;function pme(e){return typeof e=="string"?e.length===0:e.byteLength===0}gy.isEmptyData=pme;var yy={};Object.defineProperty(yy,"__esModule",{value:!0});yy.numToUint8=void 0;function hme(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}yy.numToUint8=hme;var vy={};Object.defineProperty(vy,"__esModule",{value:!0});vy.uint32ArrayFrom=void 0;function mme(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),n=0;n<e.length;)t[n]=e[n],n+=1;return t}return Uint32Array.from(e)}vy.uint32ArrayFrom=mme;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=my;Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var n=gy;Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var r=yy;Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return r.numToUint8}});var s=vy;Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})})(j2);var Yu={},FI;function gme(){if(FI)return Yu;FI=1,Object.defineProperty(Yu,"__esModule",{value:!0}),Yu.AwsCrc32=void 0;var e=P$,t=j2,n=B$(),r=function(){function s(){this.crc32=new n.Crc32}return s.prototype.update=function(o){(0,t.isEmptyData)(o)||this.crc32.update((0,t.convertToBuffer)(o))},s.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(o){return[2,(0,t.numToUint8)(this.crc32.digest())]})})},s.prototype.reset=function(){this.crc32=new n.Crc32},s}();return Yu.AwsCrc32=r,Yu}var MI;function B$(){return MI||(MI=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32=e.Crc32=e.crc32=void 0;var t=P$,n=j2;function r(u){return new s().update(u).digest()}e.crc32=r;var s=function(){function u(){this.checksum=4294967295}return u.prototype.update=function(c){var l,d;try{for(var f=t.__values(c),p=f.next();!p.done;p=f.next()){var h=p.value;this.checksum=this.checksum>>>8^a[(this.checksum^h)&255]}}catch(m){l={error:m}}finally{try{p&&!p.done&&(d=f.return)&&d.call(f)}finally{if(l)throw l.error}}return this},u.prototype.digest=function(){return(this.checksum^4294967295)>>>0},u}();e.Crc32=s;var o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=(0,n.uint32ArrayFrom)(o),i=gme();Object.defineProperty(e,"AwsCrc32",{enumerable:!0,get:function(){return i.AwsCrc32}})}(Dv)),Dv}B$();const L$={},G1={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),L$[e]=t,G1[t]=e}function yme(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const r=e.slice(n,n+2).toLowerCase();if(r in G1)t[n/2]=G1[r];else throw new Error(`Cannot decode unrecognized sequence ${r} as hexadecimal`)}return t}function cs(e){let t="";for(let n=0;n<e.byteLength;n++)t+=L$[e[n]];return t}class $c{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const n=new Uint8Array(8);for(let r=7,s=Math.abs(Math.round(t));r>-1&&s>0;r--,s/=256)n[r]=s;return t<0&&OI(n),new $c(n)}valueOf(){const t=this.bytes.slice(0),n=t[0]&128;return n&&OI(t),parseInt(cs(t),16)*(n?-1:1)}toString(){return String(this.valueOf())}}function OI(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}class vme{constructor(t,n){this.toUtf8=t,this.fromUtf8=n}format(t){const n=[];for(const o of Object.keys(t)){const a=this.fromUtf8(o);n.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(t[o]))}const r=new Uint8Array(n.reduce((o,a)=>o+a.byteLength,0));let s=0;for(const o of n)r.set(o,s),s+=o.byteLength;return r}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const n=new DataView(new ArrayBuffer(3));return n.setUint8(0,3),n.setInt16(1,t.value,!1),new Uint8Array(n.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,t.value,!1),new Uint8Array(r.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const o=new DataView(new ArrayBuffer(3+t.value.byteLength));o.setUint8(0,6),o.setUint16(1,t.value.byteLength,!1);const a=new Uint8Array(o.buffer);return a.set(t.value,3),a;case"string":const i=this.fromUtf8(t.value),u=new DataView(new ArrayBuffer(3+i.byteLength));u.setUint8(0,7),u.setUint16(1,i.byteLength,!1);const c=new Uint8Array(u.buffer);return c.set(i,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set($c.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!Cme.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const d=new Uint8Array(17);return d[0]=9,d.set(yme(t.value.replace(/\-/g,"")),1),d}}parse(t){const n={};let r=0;for(;r<t.byteLength;){const s=t.getUint8(r++),o=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+r,s));switch(r+=s,t.getUint8(r++)){case 0:n[o]={type:BI,value:!0};break;case 1:n[o]={type:BI,value:!1};break;case 2:n[o]={type:bme,value:t.getInt8(r++)};break;case 3:n[o]={type:wme,value:t.getInt16(r,!1)},r+=2;break;case 4:n[o]={type:Sme,value:t.getInt32(r,!1)},r+=4;break;case 5:n[o]={type:xme,value:new $c(new Uint8Array(t.buffer,t.byteOffset+r,8))},r+=8;break;case 6:const a=t.getUint16(r,!1);r+=2,n[o]={type:kme,value:new Uint8Array(t.buffer,t.byteOffset+r,a)},r+=a;break;case 7:const i=t.getUint16(r,!1);r+=2,n[o]={type:Ime,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+r,i))},r+=i;break;case 8:n[o]={type:_me,value:new Date(new $c(new Uint8Array(t.buffer,t.byteOffset+r,8)).valueOf())},r+=8;break;case 9:const u=new Uint8Array(t.buffer,t.byteOffset+r,16);r+=16,n[o]={type:Eme,value:`${cs(u.subarray(0,4))}-${cs(u.subarray(4,6))}-${cs(u.subarray(6,8))}-${cs(u.subarray(8,10))}-${cs(u.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return n}}var PI;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(PI||(PI={}));const BI="boolean",bme="byte",wme="short",Sme="integer",xme="long",kme="binary",Ime="string",_me="timestamp",Eme="uuid",Cme=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Tme=e=>({[Symbol.asyncIterator]:async function*(){const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)return;yield r}}finally{t.releaseLock()}}}),Nme=e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(n){const{done:r,value:s}=await t.next();if(r)return n.close();n.enqueue(s)}})};var LI;(function(e){e.HEADER="header",e.QUERY="query"})(LI||(LI={}));var zI;(function(e){e.HEADER="header",e.QUERY="query"})(zI||(zI={}));var WI;(function(e){e.HTTP="http",e.HTTPS="https"})(WI||(WI={}));var UI;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(UI||(UI={}));var VI;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(VI||(VI={}));var HI;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(HI||(HI={}));var jI;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(jI||(jI={}));class q1{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const n=t;return typeof n.statusCode=="number"&&typeof n.headers=="object"}}const wi=e=>encodeURIComponent(e).replace(/[!'()*]/g,Ame),Ame=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function Dme(e){const t=[];for(let n of Object.keys(e).sort()){const r=e[n];if(n=wi(n),Array.isArray(r))for(let s=0,o=r.length;s<o;s++)t.push(`${n}=${wi(r[s])}`);else{let s=n;(r||typeof r=="string")&&(s+=`=${wi(r)}`),t.push(s)}}return t.join("&")}function $me(e=0){return new Promise((t,n)=>{e&&setTimeout(()=>{const r=new Error(`Request did not complete within ${e} ms`);r.name="TimeoutError",n(r)},e)})}const Rme={supported:typeof Request<"u"&&"keepalive"in new Request("https://[::1]")};class G2{static create(t){return typeof(t==null?void 0:t.handle)=="function"?t:new G2(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(n=>n||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(t,{abortSignal:n}={}){this.config||(this.config=await this.configProvider);const r=this.config.requestTimeout,s=this.config.keepAlive===!0;if(n!=null&&n.aborted){const m=new Error("Request aborted");return m.name="AbortError",Promise.reject(m)}let o=t.path;const a=Dme(t.query||{});a&&(o+=`?${a}`),t.fragment&&(o+=`#${t.fragment}`);let i="";if(t.username!=null||t.password!=null){const m=t.username??"",y=t.password??"";i=`${m}:${y}@`}const{port:u,method:c}=t,l=`${t.protocol}//${i}${t.hostname}${u?`:${u}`:""}${o}`,f={body:c==="GET"||c==="HEAD"?void 0:t.body,headers:new Headers(t.headers),method:c};typeof AbortController<"u"&&(f.signal=n),Rme.supported&&(f.keepalive=s);const p=new Request(l,f),h=[fetch(p).then(m=>{const y=m.headers,g={};for(const w of y.entries())g[w[0]]=w[1];return m.body!=null?{response:new q1({headers:g,reason:m.statusText,statusCode:m.status,body:m.body})}:m.blob().then(w=>({response:new q1({headers:g,reason:m.statusText,statusCode:m.status,body:w})}))}),$me(r)];return n&&h.push(new Promise((m,y)=>{n.onabort=()=>{const g=new Error("Request aborted");g.name="AbortError",y(g)}})),Promise.race(h)}updateHttpClientConfig(t,n){this.config=void 0,this.configProvider=this.configProvider.then(r=>(r[t]=n,r))}httpHandlerConfigs(){return this.config??{}}}const uu={},Wd=new Array(64);for(let e=0,t=65,n=90;e+t<=n;e++){const r=String.fromCharCode(e+t);uu[r]=e,Wd[e]=r}for(let e=0,t=97,n=122;e+t<=n;e++){const r=String.fromCharCode(e+t),s=e+26;uu[r]=s,Wd[s]=r}for(let e=0;e<10;e++){uu[e.toString(10)]=e+52;const t=e.toString(10),n=e+52;uu[t]=n,Wd[n]=t}uu["+"]=62;Wd[62]="+";uu["/"]=63;Wd[63]="/";const z$=e=>new TextEncoder().encode(e),Rc=e=>typeof e=="string"?z$(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Fme=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(e)},Mme=2e3,W$="Websocket connection timeout",Ome=e=>e.protocol==="ws:"||e.protocol==="wss:",Pme=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,Bme=e=>e[Symbol.asyncIterator]?e:Pme(e)?Tme(e):{[Symbol.asyncIterator]:async function*(){yield e}},Lme=e=>typeof ReadableStream=="function"?Nme(e):e;class zme{constructor(t,n=new G2){this.metadata={handlerProtocol:"websocket/h1.1"},this.sockets={},this.utf8decoder=new TextDecoder,this.httpHandler=n,typeof t=="function"?(this.config={},this.configPromise=t().then(r=>this.config=r??{})):(this.config=t??{},this.configPromise=Promise.resolve(this.config))}destroy(){for(const[t,n]of Object.entries(this.sockets)){for(const r of n)r.close(1e3,"Socket closed through destroy() call");delete this.sockets[t]}}async handle(t){if(!Ome(t))return this.httpHandler.handle(t);const n=n$(t),r=new WebSocket(n);this.sockets[n]||(this.sockets[n]=[]),this.sockets[n].push(r),r.binaryType="arraybuffer";const{connectionTimeout:s=Mme}=await this.configPromise;await this.waitForReady(r,s);const{body:o}=t,a=Bme(o),i=this.connect(r,a),u=Lme(i);return{response:new q1({statusCode:200,body:u})}}updateHttpClientConfig(t,n){this.configPromise=this.configPromise.then(r=>({...r,[t]:n}))}httpHandlerConfigs(){return this.config??{}}removeNotUsableSockets(t){this.sockets[t]=(this.sockets[t]??[]).filter(n=>!(n.readyState===WebSocket.CLOSING||n.readyState===WebSocket.CLOSED))}waitForReady(t,n){return new Promise((r,s)=>{const o=setTimeout(()=>{this.removeNotUsableSockets(t.url),s(new Error(W$))},n);t.onopen=()=>{clearTimeout(o),r()}})}connect(t,n){let r,s=!1,o=()=>{},a=()=>{};t.onmessage=c=>{a({done:!1,value:new Uint8Array(c.data)})},t.onerror=c=>{s=!0,t.close(),o(c)},t.onclose=()=>{this.removeNotUsableSockets(t.url),!s&&(r?o(r):a({done:!0,value:void 0}))};const i={[Symbol.asyncIterator]:()=>({next:()=>new Promise((c,l)=>{a=c,o=l})})};return(async()=>{try{for await(const c of n){const l=this.utf8decoder.decode(c);if(l.includes("closeCode")){const d=l.match(/"closeCode":([0-9]*)/);if(d){const f=d[1];t.close(parseInt(f))}continue}t.send(c)}}catch(c){c instanceof Error&&(r=c)}finally{t.close(dl.SUCCESS_CODE)}})(),i}}const Wme=e=>typeof e=="function",Ume=e=>!!(e!=null&&e.accessKeyId&&(e!=null&&e.secretAccessKey));async function Vme(e){const t=Wme(e);if(t)return e;if(e&&!t)throw new Error("Invalid credentialsProvider");try{const n=(await zE()).credentials;if(Ume(n))return n;throw new Error("Missing credentials")}catch(n){const{message:r}=n;throw new Error(`Invalid credentials: ${r}`)}}const GI=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},Hme="X-Amz-Algorithm",jme="X-Amz-Credential",U$="X-Amz-Date",Gme="X-Amz-SignedHeaders",qme="X-Amz-Expires",V$="X-Amz-Signature",H$="X-Amz-Security-Token",j$="authorization",G$=U$.toLowerCase(),Kme="date",Xme=[j$,G$,Kme],Yme=V$.toLowerCase(),K1="x-amz-content-sha256",Qme=H$.toLowerCase(),Zme={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Jme=/^proxy-/,ege=/^sec-/,$v="AWS4-HMAC-SHA256",tge="AWS4-HMAC-SHA256-PAYLOAD",nge="UNSIGNED-PAYLOAD",rge=50,q$="aws4_request",sge=60*60*24*7,Uf={},Rv=[],Fv=(e,t,n)=>`${e}/${t}/${n}/${q$}`,oge=async(e,t,n,r,s)=>{const o=await qI(e,t.secretAccessKey,t.accessKeyId),a=`${n}:${r}:${s}:${cs(o)}:${t.sessionToken}`;if(a in Uf)return Uf[a];for(Rv.push(a);Rv.length>rge;)delete Uf[Rv.shift()];let i=`AWS4${t.secretAccessKey}`;for(const u of[n,r,s,q$])i=await qI(e,i,u);return Uf[a]=i},qI=(e,t,n)=>{const r=new e(t);return r.update(Rc(n)),r.digest()},KI=({headers:e},t,n)=>{const r={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const o=s.toLowerCase();(o in Zme||t!=null&&t.has(o)||Jme.test(o)||ege.test(o))&&(!n||n&&!n.has(o))||(r[o]=e[s].trim().replace(/\s+/g," "))}return r},age=({query:e={}})=>{const t=[],n={};for(const r of Object.keys(e).sort()){if(r.toLowerCase()===Yme)continue;t.push(r);const s=e[r];typeof s=="string"?n[r]=`${wi(r)}=${wi(s)}`:Array.isArray(s)&&(n[r]=s.slice(0).reduce((o,a)=>o.concat([`${wi(r)}=${wi(a)}`]),[]).sort().join("&"))}return t.map(r=>n[r]).filter(r=>r).join("&")},ige=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",Mv=async({headers:e,body:t},n)=>{for(const r of Object.keys(e))if(r.toLowerCase()===K1)return e[r];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||ige(t)){const r=new n;return r.update(Rc(t)),cs(await r.digest())}return nge},lge=(e,t)=>{e=e.toLowerCase();for(const n of Object.keys(t))if(e===n.toLowerCase())return!0;return!1},K$=({headers:e,query:t,...n})=>({...n,headers:{...e},query:t?uge(t):void 0}),uge=e=>Object.keys(e).reduce((t,n)=>{const r=e[n];return{...t,[n]:Array.isArray(r)?[...r]:r}},{}),cge=(e,t={})=>{var s;const{headers:n,query:r={}}=typeof e.clone=="function"?e.clone():K$(e);for(const o of Object.keys(n)){const a=o.toLowerCase();a.slice(0,6)==="x-amz-"&&!((s=t.unhoistableHeaders)!=null&&s.has(a))&&(r[o]=n[o],delete n[o])}return{...e,headers:n,query:r}},XI=e=>{e=typeof e.clone=="function"?e.clone():K$(e);for(const t of Object.keys(e.headers))Xme.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},dge=e=>fge(e).toISOString().replace(/\.\d{3}Z$/,"Z"),fge=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class pge{constructor({applyChecksum:t,credentials:n,region:r,service:s,sha256:o,uriEscapePath:a=!0}){this.headerMarshaller=new vme(Fme,z$),this.service=s,this.sha256=o,this.uriEscapePath=a,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=GI(r),this.credentialProvider=GI(n)}async presign(t,n={}){const{signingDate:r=new Date,expiresIn:s=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:i,signingRegion:u,signingService:c}=n,l=await this.credentialProvider();this.validateResolvedCredentials(l);const d=u??await this.regionProvider(),{longDate:f,shortDate:p}=Vf(r);if(s>sge)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const h=Fv(p,d,c??this.service),m=cge(XI(t),{unhoistableHeaders:a});l.sessionToken&&(m.query[H$]=l.sessionToken),m.query[Hme]=$v,m.query[jme]=`${l.accessKeyId}/${h}`,m.query[U$]=f,m.query[qme]=s.toString(10);const y=KI(m,o,i);return m.query[Gme]=YI(y),m.query[V$]=await this.getSignature(f,h,this.getSigningKey(l,d,p,c),this.createCanonicalRequest(m,y,await Mv(t,this.sha256))),m}async sign(t,n){return typeof t=="string"?this.signString(t,n):t.headers&&t.payload?this.signEvent(t,n):t.message?this.signMessage(t,n):this.signRequest(t,n)}async signEvent({headers:t,payload:n},{signingDate:r=new Date,priorSignature:s,signingRegion:o,signingService:a}){const i=o??await this.regionProvider(),{shortDate:u,longDate:c}=Vf(r),l=Fv(u,i,a??this.service),d=await Mv({headers:{},body:n},this.sha256),f=new this.sha256;f.update(t);const p=cs(await f.digest()),h=[tge,c,l,s,p,d].join(`
`);return this.signString(h,{signingDate:r,signingRegion:i,signingService:a})}async signMessage(t,{signingDate:n=new Date,signingRegion:r,signingService:s}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:n,signingRegion:r,signingService:s,priorSignature:t.priorSignature}).then(a=>({message:t.message,signature:a}))}async signString(t,{signingDate:n=new Date,signingRegion:r,signingService:s}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=r??await this.regionProvider(),{shortDate:i}=Vf(n),u=new this.sha256(await this.getSigningKey(o,a,i,s));return u.update(Rc(t)),cs(await u.digest())}async signRequest(t,{signingDate:n=new Date,signableHeaders:r,unsignableHeaders:s,signingRegion:o,signingService:a}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const u=o??await this.regionProvider(),c=XI(t),{longDate:l,shortDate:d}=Vf(n),f=Fv(d,u,a??this.service);c.headers[G$]=l,i.sessionToken&&(c.headers[Qme]=i.sessionToken);const p=await Mv(c,this.sha256);!lge(K1,c.headers)&&this.applyChecksum&&(c.headers[K1]=p);const h=KI(c,s,r),m=await this.getSignature(l,f,this.getSigningKey(i,u,d,a),this.createCanonicalRequest(c,h,p));return c.headers[j$]=`${$v} Credential=${i.accessKeyId}/${f}, SignedHeaders=${YI(h)}, Signature=${m}`,c}createCanonicalRequest(t,n,r){const s=Object.keys(n).sort();return`${t.method}
${this.getCanonicalPath(t)}
${age(t)}
${s.map(o=>`${o}:${n[o]}`).join(`
`)}

${s.join(";")}
${r}`}async createStringToSign(t,n,r){const s=new this.sha256;s.update(Rc(r));const o=await s.digest();return`${$v}
${t}
${n}
${cs(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const n=[];for(const o of t.split("/"))(o==null?void 0:o.length)!==0&&o!=="."&&(o===".."?n.pop():n.push(o));const r=`${t!=null&&t.startsWith("/")?"/":""}${n.join("/")}${n.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(r).replace(/%2F/g,"/")}return t}async getSignature(t,n,r,s){const o=await this.createStringToSign(t,n,s),a=new this.sha256(await r);return a.update(Rc(o)),cs(await a.digest())}getSigningKey(t,n,r,s){return oge(this.sha256,t,r,n,s||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const Vf=e=>{const t=dge(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},YI=e=>Object.keys(e).sort().join(";"),hge=299;class mge extends pge{presign(t,n){return super.presign(t,{...n,expiresIn:hge,unsignableHeaders:new Set(Object.keys(t.headers).filter(r=>r!=="host"))})}}const gge=1e4,yge=`${Qh()} ${Mhe()}`;async function vge({credentialsProvider:e,endpointOverride:t,region:n,systemClockOffset:r}){const o={credentials:await Vme(e),customUserAgent:yge,region:n,requestHandler:new zme({connectionTimeout:gge}),signerConstructor:mge,systemClockOffset:r};return t&&(o.endpointProvider=()=>({url:new URL(t)})),new Fpe(o)}const bge=1e3;function wge(e){return e.arrayBuffer!==void 0}function Sge(e){return e.Challenge!==void 0}function xge(e){return e.code!==void 0}class kge{constructor({sessionId:t,region:n,stream:r,videoEl:s,credentialProvider:o,endpointOverride:a,systemClockOffset:i}){this.sessionId=t,this.region=n,this.stream=r,this.videoEl=s,this.videoRecorder=new $he(r),this.credentialProvider=o,this.endpointOverride=a,this.systemClockOffset=i,this.initPromise=this.init()}async getResponseStream(){return await this.initPromise,this.responseStream}startRecordingLivenessVideo(){this.videoRecorder.start(bge)}sendClientInfo(t){this.videoRecorder.dispatch(new MessageEvent("clientSesssionInfo",{data:{clientInfo:t}}))}async stopVideo(){await this.videoRecorder.stop()}dispatchStopVideoEvent(){this.videoRecorder.dispatch(new Event("stopVideo"))}async endStreamWithCode(t){this.videoRecorder.getState()==="recording"&&await this.stopVideo(),this.videoRecorder.dispatch(new MessageEvent("endStreamWithCode",{data:{code:t}}))}async init(){this._client=await vge({credentialsProvider:this.credentialProvider,endpointOverride:this.endpointOverride,region:this.region,systemClockOffset:this.systemClockOffset}),this.responseStream=await this.startLivenessVideoConnection()}getAsyncGeneratorFromReadableStream(t){const n=this;return this._reader=t.getReader(),async function*(){for(;;){const{done:r,value:s}=await n._reader.read();if(r)return;if(s==="stopVideo")yield{VideoEvent:{VideoChunk:new Uint8Array([]),TimestampMillis:Date.now()}};else if(wge(s)){const o=await s.arrayBuffer(),a=new Uint8Array(o);a.length>0&&(yield{VideoEvent:{VideoChunk:a,TimestampMillis:Date.now()}})}else Sge(s)?yield{ClientSessionInformationEvent:{Challenge:s.Challenge}}:xge(s)&&(yield{VideoEvent:{VideoChunk:new Uint8Array([]),TimestampMillis:{closeCode:s.code}}})}}}async startLivenessVideoConnection(){const t=this.getAsyncGeneratorFromReadableStream(this.videoRecorder.videoStream)(),n=this.stream.getTracks()[0].getSettings();return(await this._client.send(new Che({ChallengeVersions:"FaceMovementAndLightChallenge_1.0.0",SessionId:this.sessionId,LivenessRequestStream:t,VideoWidth:(n.width??this.videoEl.width).toString(),VideoHeight:(n.height??this.videoEl.height).toString()}))).LivenessResponseStream}}const Ige=10;var _s;(function(e){e.SCROLLING="SCROLLING",e.FLAT="FLAT"})(_s||(_s={}));class _ge{constructor(t,n){this.context=t,this.freshnessColorsSequence=n,this.isFirstTick=!0}async displayColorTick(){return new Promise((t,n)=>{setTimeout(()=>{this.displayNextColorTick(t,n)},Math.min(Ige))})}init(){this.stageIndex=0,this.currColorIndex=0,this.currColorSequence=this.freshnessColorsSequence[0],this.prevColorSequence=this.freshnessColorsSequence[0],this.stage=_s.FLAT,this.timeLastFlatOrScrollChange=Date.now(),this.timeLastFaceMatchChecked=Date.now()}displayNextColorTick(t,n){const{freshnessColorEl:r}=this.context.freshnessColorAssociatedParams,{ovalDetails:s,scaleFactor:o}=this.context.ovalAssociatedParams,{videoEl:a}=this.context.videoAssociatedParams,i=Date.now();this.isFirstTick&&(this.init(),this.isFirstTick=!1,this.sendColorStartTime({tickStartTime:i,currColor:this.currColorSequence.color,prevColor:this.currColorSequence.color,currColorIndex:this.stageIndex}));let u=i-this.timeLastFlatOrScrollChange;if(r.style.display="block",(this.stage===_s.FLAT&&u>=this.currColorSequence.flatDisplayDuration||this.stage===_s.SCROLLING&&u>=this.currColorSequence.downscrollDuration)&&(this.incrementStageIndex(i),u=0),this.currColorIndex<this.freshnessColorsSequence.length){const c=u/(this.stage===_s.SCROLLING?this.currColorSequence.downscrollDuration:this.currColorSequence.flatDisplayDuration);wB({overlayCanvas:r,prevColor:this.prevColorSequence.color,nextColor:this.currColorSequence.color,videoEl:a,ovalDetails:s,heightFraction:c,scaleFactor:o}),t(!1)}else r.style.display="none",t(!0)}incrementStageIndex(t){this.stageIndex+=1,this.prevColorSequence=this.freshnessColorsSequence[this.currColorIndex],this.stage===_s.FLAT?(this.currColorIndex+=1,this.stage=_s.SCROLLING):this.stage===_s.SCROLLING&&(this.freshnessColorsSequence[this.currColorIndex].flatDisplayDuration>0?this.stage=_s.FLAT:(this.stage=_s.SCROLLING,this.currColorIndex+=1)),this.currColorSequence=this.freshnessColorsSequence[this.currColorIndex],this.timeLastFlatOrScrollChange=Date.now(),this.currColorSequence&&this.sendColorStartTime({tickStartTime:t,currColor:this.currColorSequence.color,prevColor:this.prevColorSequence.color,currColorIndex:this.stageIndex})}sendColorStartTime({tickStartTime:t,currColor:n,prevColor:r,currColorIndex:s}){const{livenessStreamProvider:o,challengeId:a}=this.context;o.sendClientInfo({Challenge:{FaceMovementAndLightChallenge:{ChallengeId:a,ColorDisplayed:{CurrentColor:{RGB:Zx(n)},PreviousColor:{RGB:Zx(r)},SequenceNumber:s,CurrentColorStartTimestamp:t}}}})}}const Ege=e=>!!(e!=null&&e.ServerSessionInformationEvent),Cge=e=>{const{message:t}=e;return t.includes(W$)},Tge=e=>!!(e!=null&&e.DisconnectionEvent),Nge=e=>!!(e!=null&&e.ValidationException),Age=e=>!!(e!=null&&e.InternalServerException),Dge=e=>!!(e!=null&&e.ThrottlingException),$ge=e=>!!(e!=null&&e.ServiceQuotaExceededException),Rge=e=>{const{message:t,name:n}=e;return n==="InvalidSignatureException"&&t.includes("valid region")},Nh={width:{min:320,ideal:640},height:{min:240,ideal:480},frameRate:{min:15,ideal:30,max:30},facingMode:"user"},X$="AmplifyLivenessCameraId",Fge=7e3;let Y$;const Mge=async e=>{try{const t=await Y$;for await(const n of t)Ege(n)?e({type:"SET_SESSION_INFO",data:{sessionInfo:n.ServerSessionInformationEvent.SessionInformation}}):Tge(n)?e({type:"DISCONNECT_EVENT"}):Nge(n)?e({type:"SERVER_ERROR",data:{error:{...n.ValidationException}}}):Age(n)?e({type:"SERVER_ERROR",data:{error:{...n.InternalServerException}}}):Dge(n)?e({type:"SERVER_ERROR",data:{error:{...n.ThrottlingException}}}):$ge(n)&&e({type:"SERVER_ERROR",data:{error:{...n.ServiceQuotaExceededException}}})}catch(t){Rge(t)?e({type:"SERVER_ERROR",data:{error:new Error("Invalid region in FaceLivenessDetector or credentials are scoped to the wrong region.")}}):t instanceof Error&&e({type:Cge(t)?"CONNECTION_TIMEOUT":"SERVER_ERROR",data:{error:t}})}};function Oge(){return localStorage.getItem(X$)}function QI(e){localStorage.setItem(X$,e)}const Pge=XP({id:"livenessMachine",initial:"cameraCheck",predictableActionArguments:!0,context:{challengeId:Xx(),maxFailedAttempts:0,failedAttempts:0,componentProps:void 0,serverSessionInformation:void 0,videoAssociatedParams:{videoConstraints:Nh,selectableDevices:[]},ovalAssociatedParams:void 0,faceMatchAssociatedParams:{illuminationState:void 0,faceMatchState:void 0,faceMatchPercentage:25,currentDetectedFace:void 0,startFace:void 0,endFace:void 0},freshnessColorAssociatedParams:{freshnessColorEl:void 0,freshnessColors:[],freshnessColorsComplete:!1,freshnessColorDisplay:void 0},errorState:void 0,livenessStreamProvider:void 0,responseStreamActorRef:void 0,shouldDisconnect:!1,faceMatchStateBeforeStart:void 0,isFaceFarEnoughBeforeRecording:void 0,isRecordingStopped:!1},on:{CANCEL:"userCancel",TIMEOUT:{target:"retryableTimeout",actions:"updateErrorStateForTimeout"},SET_SESSION_INFO:{internal:!0,actions:"updateSessionInfo"},DISCONNECT_EVENT:{internal:!0,actions:"updateShouldDisconnect"},SET_DOM_AND_CAMERA_DETAILS:{actions:"setDOMAndCameraDetails"},UPDATE_DEVICE_AND_STREAM:{actions:"updateDeviceAndStream"},SERVER_ERROR:{target:"error",actions:"updateErrorStateForServer"},CONNECTION_TIMEOUT:{target:"error",actions:"updateErrorStateForConnectionTimeout"},RUNTIME_ERROR:{target:"error",actions:"updateErrorStateForRuntime"},MOBILE_LANDSCAPE_WARNING:{target:"mobileLandscapeWarning",actions:"updateErrorStateForServer"}},states:{cameraCheck:{entry:"resetErrorState",invoke:{src:"checkVirtualCameraAndGetStream",onDone:{target:"waitForDOMAndCameraDetails",actions:"updateVideoMediaStream"},onError:{target:"permissionDenied"}}},waitForDOMAndCameraDetails:{after:{0:{target:"start",cond:"hasDOMAndCameraDetails"},10:{target:"waitForDOMAndCameraDetails"}}},start:{entry:["drawStaticOval","initializeFaceDetector"],always:[{target:"detectFaceBeforeStart",cond:"shouldSkipStartScreen"}],on:{BEGIN:"detectFaceBeforeStart"}},detectFaceBeforeStart:{invoke:{src:"detectFace",onDone:{target:"checkFaceDetectedBeforeStart",actions:"updateFaceMatchBeforeStartDetails"}}},checkFaceDetectedBeforeStart:{after:{0:{target:"detectFaceDistanceBeforeRecording",cond:"hasSingleFaceBeforeStart"},100:{target:"detectFaceBeforeStart"}}},detectFaceDistanceBeforeRecording:{invoke:{src:"detectFaceDistance",onDone:{target:"checkFaceDistanceBeforeRecording",actions:"updateFaceDistanceBeforeRecording"}}},checkFaceDistanceBeforeRecording:{after:{0:{target:"initializeLivenessStream",cond:"hasEnoughFaceDistanceBeforeRecording"},100:{target:"detectFaceDistanceBeforeRecording"}}},initializeLivenessStream:{invoke:{src:"openLivenessStreamConnection",onDone:{target:"notRecording",actions:["updateLivenessStreamProvider","spawnResponseStreamActor"]}}},notRecording:{initial:"waitForSessionInfo",states:{waitForSessionInfo:{after:{0:{target:"#livenessMachine.recording",cond:"hasServerSessionInfo"},100:{target:"waitForSessionInfo"}}}}},recording:{entry:["clearErrorState","startRecording","sendTimeoutAfterOvalDrawingDelay"],initial:"ovalDrawing",states:{ovalDrawing:{invoke:{src:"detectInitialFaceAndDrawOval",onDone:{target:"checkFaceDetected",actions:["updateOvalAndFaceDetailsPostDraw","sendTimeoutAfterOvalMatchDelay"]},onError:{target:"#livenessMachine.error",actions:"updateErrorStateForRuntime"}}},checkFaceDetected:{after:{0:{target:"cancelOvalDrawingTimeout",cond:"hasSingleFace"},100:{target:"ovalDrawing"}}},cancelOvalDrawingTimeout:{entry:["cancelOvalDrawingTimeout","sendTimeoutAfterRecordingDelay"],after:{0:{target:"checkRecordingStarted"}}},checkRecordingStarted:{after:{0:{target:"ovalMatching",cond:"hasRecordingStarted",actions:"updateRecordingStartTimestampMs"},100:{target:"checkRecordingStarted"}}},ovalMatching:{entry:"cancelRecordingTimeout",invoke:{src:"detectFaceAndMatchOval",onDone:{target:"checkMatch",actions:"updateFaceDetailsPostMatch"}}},checkMatch:{after:{0:{target:"delayBeforeFlash",cond:"hasFaceMatchedInOval",actions:["setFaceMatchTimeAndStartFace","updateEndFaceMatch","setupFlashFreshnessColors","cancelOvalMatchTimeout","cancelOvalDrawingTimeout"]},1:{target:"ovalMatching"}}},delayBeforeFlash:{after:{1e3:"flashFreshnessColors"}},flashFreshnessColors:{invoke:{src:"flashColors",onDone:[{target:"success",cond:"hasFreshnessColorShown"},{target:"flashFreshnessColors",actions:"updateFreshnessDetails"}]}},success:{entry:"stopRecording",type:"final"}},onDone:"uploading"},uploading:{initial:"pending",states:{pending:{entry:["pauseVideoStream"],invoke:{src:"stopVideo",onDone:"waitForDisconnectEvent",onError:{target:"#livenessMachine.error",actions:"updateErrorStateForRuntime"}}},waitForDisconnectEvent:{after:{0:{target:"getLivenessResult",cond:"getShouldDisconnect"},100:{target:"waitForDisconnectEvent"}}},getLivenessResult:{entry:["freezeStream"],invoke:{src:"getLiveness",onError:{target:"#livenessMachine.error",actions:"updateErrorStateForServer"}}}}},retryableTimeout:{entry:"updateFailedAttempts",always:[{target:"timeout",cond:"shouldTimeoutOnFailedAttempts"},{target:"notRecording"}]},permissionDenied:{entry:"callUserPermissionDeniedCallback",on:{RETRY_CAMERA_CHECK:"cameraCheck"}},mobileLandscapeWarning:{entry:"callMobileLandscapeWarningCallback",always:{target:"error"}},timeout:{entry:["cleanUpResources","callUserTimeoutCallback","freezeStream"]},error:{entry:["cleanUpResources","callErrorCallback","cancelOvalDrawingTimeout","cancelOvalMatchTimeout","cancelRecordingTimeout","freezeStream"]},userCancel:{entry:["cleanUpResources","callUserCancelCallback","resetContext"],always:{target:"cameraCheck"}}}},{actions:{spawnResponseStreamActor:wt({responseStreamActorRef:()=>jP(Mge)}),updateFailedAttempts:wt({failedAttempts:e=>e.failedAttempts+1}),updateVideoMediaStream:wt({videoAssociatedParams:(e,t)=>{var n,r,s;return{...e.videoAssociatedParams,videoMediaStream:(n=t.data)==null?void 0:n.stream,selectedDeviceId:(r=t.data)==null?void 0:r.selectedDeviceId,selectableDevices:(s=t.data)==null?void 0:s.selectableDevices}}}),initializeFaceDetector:wt({ovalAssociatedParams:e=>{const{componentProps:t}=e,{faceModelUrl:n,binaryPath:r}=t.config,s=new Ble(r,n);return s.triggerModelLoading(),{...e.ovalAssociatedParams,faceDetector:s}}}),updateLivenessStreamProvider:wt({livenessStreamProvider:(e,t)=>{var n;return(n=t.data)==null?void 0:n.livenessStreamProvider}}),setDOMAndCameraDetails:wt({videoAssociatedParams:(e,t)=>{var n,r,s;return{...e.videoAssociatedParams,videoEl:(n=t.data)==null?void 0:n.videoEl,canvasEl:(r=t.data)==null?void 0:r.canvasEl,isMobile:(s=t.data)==null?void 0:s.isMobile}},freshnessColorAssociatedParams:(e,t)=>{var n;return{...e.freshnessColorAssociatedParams,freshnessColorEl:(n=t.data)==null?void 0:n.freshnessColorEl}}}),updateDeviceAndStream:wt({videoAssociatedParams:(e,t)=>{var n,r,s;return QI((n=t.data)==null?void 0:n.newDeviceId),{...e.videoAssociatedParams,selectedDeviceId:(r=t.data)==null?void 0:r.newDeviceId,videoMediaStream:(s=t.data)==null?void 0:s.newStream}}}),drawStaticOval:e=>{const{canvasEl:t,videoEl:n,videoMediaStream:r}=e.videoAssociatedParams;G0(t,n,r)},updateRecordingStartTimestampMs:wt({videoAssociatedParams:e=>{const{challengeId:t,videoAssociatedParams:n,ovalAssociatedParams:r,livenessStreamProvider:s}=e,{recordingStartApiTimestamp:o,recorderStartTimestamp:a}=s.videoRecorder,{videoMediaStream:i}=n,{initialFace:u}=r,c=Math.round(.73*(a-o)+o),{width:l,height:d}=i.getTracks()[0].getSettings(),f=l-u.left-u.width;return e.livenessStreamProvider.sendClientInfo({Challenge:{FaceMovementAndLightChallenge:{ChallengeId:t,VideoStartTimestamp:c,InitialFace:{InitialFaceDetectedTimestamp:u.timestampMs,BoundingBox:uv({deviceHeight:d,deviceWidth:l,height:u.height,width:u.width,top:u.top,left:f})}}}}),{...e.videoAssociatedParams,recordingStartTimestampMs:c}}}),startRecording:wt({videoAssociatedParams:e=>{if(!e.serverSessionInformation)throw new Error("Session information was not received from response stream");return e.livenessStreamProvider.videoRecorder&&e.livenessStreamProvider.videoRecorder.getState()!=="recording"&&e.livenessStreamProvider.startRecordingLivenessVideo(),{...e.videoAssociatedParams}}}),stopRecording:()=>{},updateFaceMatchBeforeStartDetails:wt({faceMatchStateBeforeStart:(e,t)=>t.data.faceMatchState}),updateFaceDistanceBeforeRecording:wt({isFaceFarEnoughBeforeRecording:(e,t)=>!!t.data.isFaceFarEnoughBeforeRecording}),updateFaceDistanceWhileLoading:wt({isFaceFarEnoughBeforeRecording:(e,t)=>!!t.data.isFaceFarEnoughBeforeRecording,errorState:(e,t)=>{var n;return(n=t.data)==null?void 0:n.error}}),updateOvalAndFaceDetailsPostDraw:wt({ovalAssociatedParams:(e,t)=>({...e.ovalAssociatedParams,initialFace:t.data.initialFace,ovalDetails:t.data.ovalDetails,scaleFactor:t.data.scaleFactor}),faceMatchAssociatedParams:(e,t)=>({...e.faceMatchAssociatedParams,faceMatchState:t.data.faceMatchState,illuminationState:t.data.illuminationState})}),updateFaceDetailsPostMatch:wt({faceMatchAssociatedParams:(e,t)=>({...e.faceMatchAssociatedParams,faceMatchState:t.data.faceMatchState,faceMatchPercentage:t.data.faceMatchPercentage,illuminationState:t.data.illuminationState,currentDetectedFace:t.data.detectedFace})}),updateEndFaceMatch:wt({faceMatchAssociatedParams:e=>({...e.faceMatchAssociatedParams,endFace:e.faceMatchAssociatedParams.currentDetectedFace})}),setFaceMatchTimeAndStartFace:wt({faceMatchAssociatedParams:e=>({...e.faceMatchAssociatedParams,startFace:e.faceMatchAssociatedParams.startFace===void 0?e.faceMatchAssociatedParams.currentDetectedFace:e.faceMatchAssociatedParams.startFace})}),resetErrorState:wt({errorState:e=>{}}),updateErrorStateForConnectionTimeout:wt({errorState:e=>Rt.CONNECTION_TIMEOUT}),updateErrorStateForTimeout:wt({errorState:(e,t)=>{var n;return((n=t.data)==null?void 0:n.errorState)||Rt.TIMEOUT},errorMessage:(e,t)=>{var n;return(n=t.data)==null?void 0:n.message}}),updateErrorStateForRuntime:wt({errorState:(e,t)=>{var n;return((n=t.data)==null?void 0:n.errorState)||Rt.RUNTIME_ERROR}}),updateErrorStateForServer:wt({errorState:e=>Rt.SERVER_ERROR}),clearErrorState:wt({errorState:e=>{}}),updateSessionInfo:wt({serverSessionInformation:(e,t)=>t.data.sessionInfo}),updateShouldDisconnect:wt({shouldDisconnect:()=>!0}),updateFreshnessDetails:wt({freshnessColorAssociatedParams:(e,t)=>({...e.freshnessColorAssociatedParams,freshnessColorsComplete:t.data.freshnessColorsComplete})}),setupFlashFreshnessColors:wt({freshnessColorAssociatedParams:e=>{const{serverSessionInformation:t}=e,n=xB(t),r=new _ge(e,n);return{...e.freshnessColorAssociatedParams,freshnessColorDisplay:r}}}),sendTimeoutAfterOvalDrawingDelay:lp({type:"RUNTIME_ERROR",data:{message:"Client failed to draw oval."}},{delay:5e3,id:"ovalDrawingTimeout"}),cancelOvalDrawingTimeout:up("ovalDrawingTimeout"),sendTimeoutAfterRecordingDelay:lp({type:"RUNTIME_ERROR",data:{message:"Client failed to start recording."}},{delay:5e3,id:"recordingTimeout"}),cancelRecordingTimeout:up("recordingTimeout"),sendTimeoutAfterOvalMatchDelay:lp({type:"TIMEOUT",data:{message:"Client timed out waiting for face to match oval."}},{delay:e=>{var t,n,r,s;return((s=(r=(n=(t=e.serverSessionInformation)==null?void 0:t.Challenge)==null?void 0:n.FaceMovementAndLightChallenge)==null?void 0:r.ChallengeConfig)==null?void 0:s.OvalFitTimeout)??Fge},id:"ovalMatchTimeout"}),cancelOvalMatchTimeout:up("ovalMatchTimeout"),callUserPermissionDeniedCallback:wt({errorState:(e,t)=>{var a,i;let n;t.data.message.includes("15 fps")?n=Rt.CAMERA_FRAMERATE_ERROR:n=Rt.CAMERA_ACCESS_ERROR;const r=t.data.message||t.data.Message,s=new Error(r),o={state:n,error:s};return(i=(a=e.componentProps).onError)==null||i.call(a,o),n}}),callMobileLandscapeWarningCallback:wt({errorState:()=>Rt.MOBILE_LANDSCAPE_ERROR}),callUserCancelCallback:e=>{var t,n;(n=(t=e.componentProps).onUserCancel)==null||n.call(t)},callUserTimeoutCallback:e=>{var r,s;const t=new Error(e.errorMessage??"Client Timeout");t.name=e.errorState;const n={state:e.errorState,error:t};(s=(r=e.componentProps).onError)==null||s.call(r,n)},callErrorCallback:(e,t)=>{var r,s,o;const n={state:e.errorState,error:((r=t.data)==null?void 0:r.error)||t.data};(o=(s=e.componentProps).onError)==null||o.call(s,n)},cleanUpResources:e=>{var r;const{freshnessColorEl:t}=e.freshnessColorAssociatedParams;t&&(t.style.display="none");let n=dl.DEFAULT_ERROR_CODE;e.errorState===Rt.TIMEOUT?n=dl.FACE_FIT_TIMEOUT:e.errorState===Rt.RUNTIME_ERROR?n=dl.RUNTIME_ERROR:e.errorState===Rt.FACE_DISTANCE_ERROR||e.errorState===Rt.MULTIPLE_FACES_ERROR?n=dl.USER_ERROR_DURING_CONNECTION:e.errorState===void 0&&(n=dl.USER_CANCEL),(r=e.livenessStreamProvider)==null||r.endStreamWithCode(n)},freezeStream:e=>{const{videoMediaStream:t,videoEl:n}=e.videoAssociatedParams;e.isRecordingStopped=!0,n==null||n.pause(),t==null||t.getTracks().forEach(function(r){r.stop()})},pauseVideoStream:e=>{const{videoEl:t}=e.videoAssociatedParams;e.isRecordingStopped=!0,t.pause()},resetContext:wt({challengeId:Xx(),maxFailedAttempts:0,failedAttempts:0,componentProps:e=>e.componentProps,serverSessionInformation:e=>{},videoAssociatedParams:e=>({videoConstraints:Nh}),ovalAssociatedParams:e=>{},errorState:e=>{},livenessStreamProvider:e=>{},responseStreamActorRef:e=>{},shouldDisconnect:!1,faceMatchStateBeforeStart:e=>{},isFaceFarEnoughBeforeRecording:e=>{},isRecordingStopped:!1})},guards:{shouldTimeoutOnFailedAttempts:e=>e.failedAttempts>=e.maxFailedAttempts,hasFaceMatchedInOval:e=>e.faceMatchAssociatedParams.faceMatchState===ht.MATCHED,hasSingleFace:e=>e.faceMatchAssociatedParams.faceMatchState===ht.FACE_IDENTIFIED,hasSingleFaceBeforeStart:e=>e.faceMatchStateBeforeStart===ht.FACE_IDENTIFIED,hasEnoughFaceDistanceBeforeRecording:e=>e.isFaceFarEnoughBeforeRecording,hasNotEnoughFaceDistanceBeforeRecording:e=>!e.isFaceFarEnoughBeforeRecording,hasFreshnessColorShown:e=>e.freshnessColorAssociatedParams.freshnessColorsComplete,hasServerSessionInfo:e=>e.serverSessionInformation!==void 0,hasDOMAndCameraDetails:e=>e.videoAssociatedParams.videoEl!==void 0&&e.videoAssociatedParams.canvasEl!==void 0&&e.freshnessColorAssociatedParams.freshnessColorEl!==void 0,getShouldDisconnect:e=>!!e.shouldDisconnect,hasRecordingStarted:e=>e.livenessStreamProvider.videoRecorder.firstChunkTimestamp!==void 0,shouldSkipStartScreen:e=>{var t;return!!((t=e.componentProps)!=null&&t.disableStartScreen)}},services:{async checkVirtualCameraAndGetStream(e){const{videoConstraints:t}=e.videoAssociatedParams,n=Oge(),r=await navigator.mediaDevices.getUserMedia({video:{...t,...n?{deviceId:n}:{}},audio:!1}),o=(await navigator.mediaDevices.enumerateDevices()).filter(d=>d.kind==="videoinput").filter(d=>!yB(d));if(!o.length)throw new Error("No real video devices found");const a=r.getTracks().filter(d=>d.getSettings().frameRate>=15);if(a.length<1)throw new Error("No camera found with more than 15 fps");const i=a[0].getSettings().deviceId,u=o.some(d=>d.deviceId===i),c=u?i:o[0].deviceId;let l=r;return u||(l=await navigator.mediaDevices.getUserMedia({video:{...t,deviceId:{exact:c}},audio:!1})),QI(c),{stream:l,selectedDeviceId:i,selectableDevices:o}},async openLivenessStreamConnection(e){const{config:t}=e.componentProps,{credentialProvider:n,endpointOverride:r,systemClockOffset:s}=t,o=new kge({sessionId:e.componentProps.sessionId,region:e.componentProps.region,systemClockOffset:s,stream:e.videoAssociatedParams.videoMediaStream,videoEl:e.videoAssociatedParams.videoEl,credentialProvider:n,endpointOverride:r});return Y$=o.getResponseStream(),{livenessStreamProvider:o}},async detectFace(e){const{videoEl:t}=e.videoAssociatedParams,{faceDetector:n}=e.ovalAssociatedParams;try{await n.modelLoadingPromise}catch(s){console.log({err:s})}return{faceMatchState:await kB(n,t)}},async detectFaceDistance(e){const{isFaceFarEnoughBeforeRecording:t}=e,{videoEl:n,videoMediaStream:r,isMobile:s}=e.videoAssociatedParams,{faceDetector:o}=e.ovalAssociatedParams,{width:a,height:i}=r.getTracks()[0].getSettings(),u=j0({width:a,height:i}),{isDistanceBelowThreshold:c}=await Jx({faceDetector:o,videoEl:n,ovalDetails:u,reduceThreshold:t,isMobile:s});return{isFaceFarEnoughBeforeRecording:c}},async detectFaceDistanceWhileLoading(e){const{isFaceFarEnoughBeforeRecording:t}=e,{videoEl:n,videoMediaStream:r,isMobile:s}=e.videoAssociatedParams,{faceDetector:o}=e.ovalAssociatedParams,{width:a,height:i}=r.getTracks()[0].getSettings(),u=j0({width:a,height:i}),{isDistanceBelowThreshold:c,error:l}=await Jx({faceDetector:o,isMobile:s,ovalDetails:u,videoEl:n,reduceThreshold:t});return{isFaceFarEnoughBeforeRecording:c,error:l}},async detectInitialFaceAndDrawOval(e){const{serverSessionInformation:t,livenessStreamProvider:n}=e,{videoEl:r,canvasEl:s,isMobile:o}=e.videoAssociatedParams,{faceDetector:a}=e.ovalAssociatedParams;try{await a.modelLoadingPromise,await n.videoRecorder.recorderStarted}catch(y){console.log({err:y})}const i=await a.detectFaces(r);let u,c,l;switch(i.length){case 0:{c=ht.CANT_IDENTIFY,l=Qx(r);break}case 1:{c=ht.FACE_IDENTIFIED,u=i[0];break}default:{c=ht.TOO_MANY;break}}if(!u)return{faceMatchState:c,illuminationState:l};const{width:d,height:f}=r.getBoundingClientRect();o?(s.width=window.innerWidth,s.height=window.innerHeight):(s.width=d,s.height=f);const p=d/r.videoWidth,h=mB({sessionInformation:t,videoWidth:r.width}),m=q0(u,h,r.videoHeight);return u.top=m.top,u.left=m.left,u.height=m.bottom-m.top,u.width=m.right-m.left,LC({canvas:s,oval:h,scaleFactor:p,videoEl:r}),{faceMatchState:c,ovalDetails:h,scaleFactor:p,initialFace:u}},async detectFaceAndMatchOval(e){const{serverSessionInformation:t}=e,{videoEl:n}=e.videoAssociatedParams,{faceDetector:r,ovalDetails:s,initialFace:o}=e.ovalAssociatedParams,a=await r.detectFaces(n);let i,u=0,c,l;const d=q0(o,s,n.videoHeight),{ovalBoundingBox:f}=PC(s),p=BC(d,f);switch(a.length){case 0:{i=ht.CANT_IDENTIFY,l=Qx(n);break}case 1:{c=a[0];const{faceMatchState:h,faceMatchPercentage:m}=Lle({face:c,ovalDetails:s,initialFaceIntersection:p,sessionInformation:t,frameHeight:n.videoHeight});i=h,u=m;break}default:{i=ht.TOO_MANY;break}}return{faceMatchState:i,faceMatchPercentage:u,illuminationState:l,detectedFace:c}},async flashColors(e){const{freshnessColorsComplete:t,freshnessColorDisplay:n}=e.freshnessColorAssociatedParams;return t?void 0:{freshnessColorsComplete:await n.displayColorTick()}},async stopVideo(e){const{challengeId:t,livenessStreamProvider:n}=e,{videoMediaStream:r}=e.videoAssociatedParams,{initialFace:s,ovalDetails:o}=e.ovalAssociatedParams,{startFace:a,endFace:i}=e.faceMatchAssociatedParams,{width:u,height:c}=r.getTracks()[0].getSettings(),l=u-s.left-s.width;await n.stopVideo();const d={Challenge:{FaceMovementAndLightChallenge:{ChallengeId:t,InitialFace:{InitialFaceDetectedTimestamp:s.timestampMs,BoundingBox:uv({deviceHeight:c,deviceWidth:u,height:s.height,width:s.width,top:s.top,left:l})},TargetFace:{FaceDetectedInTargetPositionStartTimestamp:a.timestampMs,FaceDetectedInTargetPositionEndTimestamp:i.timestampMs,BoundingBox:uv({deviceHeight:c,deviceWidth:u,height:o.height,width:o.width,top:o.centerY-o.height/2,left:o.centerX-o.width/2})},VideoEndTimestamp:n.videoRecorder.recorderEndTimestamp}}};if(n.videoRecorder.getVideoChunkSize()===0)throw new Error("Video chunks not recorded successfully.");n.sendClientInfo(d),n.dispatchStopVideoEvent()},async getLiveness(e){const{onAnalysisComplete:t}=e.componentProps;await t()}}});var Bge=typeof er=="object"&&er&&er.Object===Object&&er,Lge=Bge,zge=Lge,Wge=typeof self=="object"&&self&&self.Object===Object&&self,Uge=zge||Wge||Function("return this")(),Vge=Uge,Hge=Vge,jge=Hge.Symbol,q2=jge,ZI=q2,Q$=Object.prototype,Gge=Q$.hasOwnProperty,qge=Q$.toString,Qu=ZI?ZI.toStringTag:void 0;function Kge(e){var t=Gge.call(e,Qu),n=e[Qu];try{e[Qu]=void 0;var r=!0}catch{}var s=qge.call(e);return r&&(t?e[Qu]=n:delete e[Qu]),s}var Xge=Kge,Yge=Object.prototype,Qge=Yge.toString;function Zge(e){return Qge.call(e)}var Jge=Zge,JI=q2,eye=Xge,tye=Jge,nye="[object Null]",rye="[object Undefined]",e3=JI?JI.toStringTag:void 0;function sye(e){return e==null?e===void 0?rye:nye:e3&&e3 in Object(e)?eye(e):tye(e)}var oye=sye,aye=Array.isArray,iye=aye;function lye(e){return e!=null&&typeof e=="object"}var uye=lye;const cye=e=>{const t={default:void 0,...e};return t.default??t};function zo(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function cu(e){return typeof e=="string"||typeof e=="object"&&Object.prototype.toString.call(e)==="[object String]"}function Fa(e,t){return e!=null&&Object.prototype.hasOwnProperty.call(e,t)}function Ah(e){return typeof e=="function"}const Xr=(e,t)=>t?`${e}--${t}`:"",Ia=(e,t,n)=>n?`${e}--${t}`:"";function dye(e,t){const n={},r={};return Object.entries(e).forEach(([s,o])=>{t(s)?n[s]=o:r[s]=o}),[n,r]}function fye(e,t){for(var n=-1,r=e==null?0:e.length,s=Array(r);++n<r;)s[n]=t(e[n],n,e);return s}var pye=fye,hye=oye,mye=uye,gye="[object Symbol]";function yye(e){return typeof e=="symbol"||mye(e)&&hye(e)==gye}var vye=yye,t3=q2,bye=pye,wye=iye,Sye=vye,xye=1/0,n3=t3?t3.prototype:void 0,r3=n3?n3.toString:void 0;function Z$(e){if(typeof e=="string")return e;if(wye(e))return bye(e,Z$)+"";if(Sye(e))return r3?r3.call(e):"";var t=e+"";return t=="0"&&1/e==-xye?"-0":t}var kye=Z$,Iye=kye;function _ye(e){return e==null?"":Iye(e)}var J$=_ye;const eR={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},tR={red:{10:{value:"hsl(0, 75%, 95%)"},20:{value:"hsl(0, 75%, 85%)"},40:{value:"hsl(0, 75%, 75%)"},60:{value:"hsl(0, 50%, 50%)"},80:{value:"hsl(0, 95%, 30%)"},90:{value:"hsl(0, 100%, 20%)"},100:{value:"hsl(0, 100%, 15%)"}},orange:{10:{value:"hsl(30, 75%, 95%)"},20:{value:"hsl(30, 75%, 85%)"},40:{value:"hsl(30, 75%, 75%)"},60:{value:"hsl(30, 50%, 50%)"},80:{value:"hsl(30, 95%, 30%)"},90:{value:"hsl(30, 100%, 20%)"},100:{value:"hsl(30, 100%, 15%)"}},yellow:{10:{value:"hsl(60, 75%, 95%)"},20:{value:"hsl(60, 75%, 85%)"},40:{value:"hsl(60, 75%, 75%)"},60:{value:"hsl(60, 50%, 50%)"},80:{value:"hsl(60, 95%, 30%)"},90:{value:"hsl(60, 100%, 20%)"},100:{value:"hsl(60, 100%, 15%)"}},green:{10:{value:"hsl(130, 60%, 95%)"},20:{value:"hsl(130, 60%, 90%)"},40:{value:"hsl(130, 44%, 63%)"},60:{value:"hsl(130, 43%, 46%)"},80:{value:"hsl(130, 33%, 37%)"},90:{value:"hsl(130, 27%, 29%)"},100:{value:"hsl(130, 22%, 23%)"}},teal:{10:{value:"hsl(190, 75%, 95%)"},20:{value:"hsl(190, 75%, 85%)"},40:{value:"hsl(190, 70%, 70%)"},60:{value:"hsl(190, 50%, 50%)"},80:{value:"hsl(190, 95%, 30%)"},90:{value:"hsl(190, 100%, 20%)"},100:{value:"hsl(190, 100%, 15%)"}},blue:{10:{value:"hsl(220, 95%, 95%)"},20:{value:"hsl(220, 85%, 85%)"},40:{value:"hsl(220, 70%, 70%)"},60:{value:"hsl(220, 50%, 50%)"},80:{value:"hsl(220, 95%, 30%)"},90:{value:"hsl(220, 100%, 20%)"},100:{value:"hsl(220, 100%, 15%)"}},purple:{10:{value:"hsl(300, 95%, 95%)"},20:{value:"hsl(300, 85%, 85%)"},40:{value:"hsl(300, 70%, 70%)"},60:{value:"hsl(300, 50%, 50%)"},80:{value:"hsl(300, 95%, 30%)"},90:{value:"hsl(300, 100%, 20%)"},100:{value:"hsl(300, 100%, 15%)"}},pink:{10:{value:"hsl(340, 95%, 95%)"},20:{value:"hsl(340, 90%, 85%)"},40:{value:"hsl(340, 70%, 70%)"},60:{value:"hsl(340, 50%, 50%)"},80:{value:"hsl(340, 95%, 30%)"},90:{value:"hsl(340, 100%, 20%)"},100:{value:"hsl(340, 100%, 15%)"}},neutral:{10:{value:"hsl(210, 5%, 98%)"},20:{value:"hsl(210, 5%, 94%)"},40:{value:"hsl(210, 5%, 87%)"},60:{value:"hsl(210, 10%, 58%)"},80:{value:"hsl(210, 10%, 40%)"},90:{value:"hsl(210, 25%, 25%)"},100:{value:"hsl(210, 50%, 10%)"}},primary:{10:{value:"{colors.teal.10.value}"},20:{value:"{colors.teal.20.value}"},40:{value:"{colors.teal.40.value}"},60:{value:"{colors.teal.60.value}"},80:{value:"{colors.teal.80.value}"},90:{value:"{colors.teal.90.value}"},100:{value:"{colors.teal.100.value}"}},secondary:{10:{value:"{colors.purple.10.value}"},20:{value:"{colors.purple.20.value}"},40:{value:"{colors.purple.40.value}"},60:{value:"{colors.purple.60.value}"},80:{value:"{colors.purple.80.value}"},90:{value:"{colors.purple.90.value}"},100:{value:"{colors.purple.100.value}"}},font:{primary:{value:"{colors.neutral.100.value}"},secondary:{value:"{colors.neutral.90.value}"},tertiary:{value:"{colors.neutral.80.value}"},disabled:{value:"{colors.neutral.60.value}"},inverse:{value:"{colors.white.value}"},interactive:{value:"{colors.primary.80.value}"},hover:{value:"{colors.primary.90.value}"},focus:{value:"{colors.primary.100.value}"},active:{value:"{colors.primary.100.value}"},info:{value:"{colors.blue.90.value}"},warning:{value:"{colors.orange.90.value}"},error:{value:"{colors.red.90.value}"},success:{value:"{colors.green.90.value}"}},background:{primary:{value:"{colors.white.value}"},secondary:{value:"{colors.neutral.10.value}"},tertiary:{value:"{colors.neutral.20.value}"},quaternary:{value:"{colors.neutral.60.value}"},disabled:{value:"{colors.background.tertiary.value}"},info:{value:"{colors.blue.10.value}"},warning:{value:"{colors.orange.10.value}"},error:{value:"{colors.red.10.value}"},success:{value:"{colors.green.10.value}"}},border:{primary:{value:"{colors.neutral.60.value}"},secondary:{value:"{colors.neutral.40.value}"},tertiary:{value:"{colors.neutral.20.value}"},disabled:{value:"{colors.border.tertiary.value}"},pressed:{value:"{colors.primary.100.value}"},focus:{value:"{colors.primary.100.value}"},error:{value:"{colors.red.80.value}"},info:{value:"{colors.blue.80.value}"},success:{value:"{colors.green.80.value}"},warning:{value:"{colors.orange.80.value}"}},shadow:{primary:{value:"hsla(210, 50%, 10%, 0.25)"},secondary:{value:"hsla(210, 50%, 10%, 0.15)"},tertiary:{value:"hsla(210, 50%, 10%, 0.05)"}},overlay:{5:{value:"hsla(0, 0%, 0%, 0.05)"},10:{value:"hsla(0, 0%, 0%, 0.1)"},20:{value:"hsla(0, 0%, 0%, 0.2)"},30:{value:"hsla(0, 0%, 0%, 0.3)"},40:{value:"hsla(0, 0%, 0%, 0.4)"},50:{value:"hsla(0, 0%, 0%, 0.5)"},60:{value:"hsla(0, 0%, 0%, 0.6)"},70:{value:"hsla(0, 0%, 0%, 0.7)"},80:{value:"hsla(0, 0%, 0%, 0.8)"},90:{value:"hsla(0, 0%, 0%, 0.9)"}},black:{value:"hsl(0, 0%, 0%)"},white:{value:"hsl(0, 0%, 100%)"},transparent:{value:"transparent"}},Eye={alignItems:{value:"center"},justifyContent:{value:"space-between"},color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.tertiary.value}"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.medium.value}"},icon:{size:{value:"{fontSizes.xl.value}"}},heading:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"}}},Cye={menu:{width:{value:"100%"},marginBlockStart:{value:"{space.xxxs}"},backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderWidth:{value:"{borderWidths.small}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.small}"},options:{display:{value:"flex"},flexDirection:{value:"column"},maxHeight:{value:"300px"}},option:{backgroundColor:{value:"{colors.background.primary}"},color:{value:"currentcolor"},cursor:{value:"pointer"},transitionDuration:{value:"{time.short}"},transitionProperty:{value:"background-color, color"},transitionTimingFunction:{value:"ease"},_active:{backgroundColor:{value:"{colors.primary.80}"},color:{value:"{colors.white}"}}},_empty:{display:{value:"flex"}},_loading:{alignItems:{value:"center"},display:{value:"flex"},gap:{value:"{space.xxxs}"}},spaceShared:{paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"}}}},Tye={maxWidth:{value:"60rem"},modal:{width:{value:"{space.relative.full}"},height:{value:"{space.relative.full}"},backgroundColor:{value:"{colors.overlay.50.value}"},top:{value:"{space.zero}"},left:{value:"{space.zero}"}},container:{widthMax:{value:"30rem"}},router:{borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},boxShadow:{value:"{shadows.medium.value}"}},footer:{paddingBottom:{value:"{space.medium.value}"}},form:{padding:{value:"{space.xl.value}"}},state:{inactive:{backgroundColor:{value:"{colors.background.secondary.value}"}}},orContainer:{color:{value:"{colors.neutral.80.value}"},orLine:{backgroundColor:{value:"{colors.background.primary.value}"}}}},Nye={color:{value:"{colors.font.tertiary.value}"},lineHeight:{value:1},fontWeight:{value:"{fontWeights.semibold.value}"},fontSize:{value:"{fontSizes.small.value}"},textAlign:{value:"center"},width:{value:"{fontSizes.xxl.value}"},height:{value:"{fontSizes.xxl.value}"},backgroundColor:{value:"{colors.background.tertiary}"},borderRadius:{value:"100%"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.medium.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"},borderColor:{value:"{colors.border.info.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"},borderColor:{value:"{colors.border.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"},borderColor:{value:"{colors.border.success.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"},borderColor:{value:"{colors.border.error.value}"}},small:{fontSize:{value:"{fontSizes.xs.value}"},width:{value:"{fontSizes.xl.value}"},height:{value:"{fontSizes.xl.value}"}},large:{fontSize:{value:"{fontSizes.medium.value}"},width:{value:"{fontSizes.xxxl.value}"},height:{value:"{fontSizes.xxxl.value}"}}},Aye={color:{value:"{colors.font.primary.value}"},lineHeight:{value:1},fontWeight:{value:"{fontWeights.semibold.value}"},fontSize:{value:"{fontSizes.small.value}"},textAlign:{value:"center"},paddingVertical:{value:"{space.xs.value}"},paddingHorizontal:{value:"{space.small.value}"},backgroundColor:{value:"{colors.background.tertiary.value}"},borderRadius:{value:"{radii.xl.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"}},small:{fontSize:{value:"{fontSizes.xs.value}"},paddingVertical:{value:"{space.xxs.value}"},paddingHorizontal:{value:"{space.xs.value}"}},large:{fontSize:{value:"{fontSizes.medium.value}"},paddingVertical:{value:"{space.small.value}"},paddingHorizontal:{value:"{space.medium.value}"}}},Dye={flexDirection:{value:"row"},flexWrap:{value:"wrap"},gap:{value:"0"},color:{value:"{colors.font.tertiary}"},item:{flexDirection:{value:"row"},color:{value:"inherit"},fontSize:{value:"inherit"},alignItems:{value:"center"},lineHeight:{value:"1"}},separator:{color:{value:"inherit"},fontSize:{value:"inherit"},paddingInline:{value:"{space.xxs}"}},link:{color:{value:"{components.link.color}"},fontSize:{value:"inherit"},fontWeight:{value:"normal"},textDecoration:{value:"none"},paddingInline:{value:"{space.xs}"},paddingBlock:{value:"{space.xxs}"},current:{color:{value:"inherit"},fontSize:{value:"inherit"},fontWeight:{value:"normal"},textDecoration:{value:"none"}}}},$ye={fontWeight:{value:"{fontWeights.bold.value}"},transitionDuration:{value:"{components.fieldcontrol.transitionDuration.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},lineHeight:{value:"{components.fieldcontrol.lineHeight.value}"},paddingBlockStart:{value:"{components.fieldcontrol.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.paddingInlineEnd.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},borderWidth:{value:"{components.fieldcontrol.borderWidth.value}"},borderStyle:{value:"{components.fieldcontrol.borderStyle.value}"},borderRadius:{value:"{components.fieldcontrol.borderRadius.value}"},color:{value:"{colors.font.primary.value}"},_hover:{color:{value:"{colors.font.focus.value}"},backgroundColor:{value:"{colors.primary.10.value}"},borderColor:{value:"{colors.primary.60.value}"}},_focus:{color:{value:"{colors.font.focus.value}"},backgroundColor:{value:"{colors.primary.10.value}"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{color:{value:"{colors.font.active.value}"},backgroundColor:{value:"{colors.primary.20.value}"},borderColor:{value:"{colors.primary.100.value}"}},_loading:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"}},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"}},outlined:{info:{borderColor:{value:"{colors.blue.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.blue.100}"},_hover:{borderColor:{value:"{colors.blue.60.value}"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"}},_focus:{borderColor:{value:"{colors.blue.100.value}"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.blue.100.value}"},backgroundColor:{value:"{colors.blue.20.value}"},color:{value:"{colors.blue.100.value}"}}},warning:{borderColor:{value:"{colors.orange.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.orange.100}"},_hover:{borderColor:{value:"{colors.orange.60.value}"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"}},_focus:{borderColor:{value:"{colors.orange.100.value}"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"},boxShadow:{value:"{components.fieldcontrol.warning._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.orange.100.value}"},backgroundColor:{value:"{colors.orange.20.value}"},color:{value:"{colors.orange.100.value}"}}},success:{borderColor:{value:"{colors.green.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.green.100}"},_hover:{borderColor:{value:"{colors.green.60.value}"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"}},_focus:{borderColor:{value:"{colors.green.100.value}"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.green.100.value}"},backgroundColor:{value:"{colors.green.20.value}"},color:{value:"{colors.green.100.value}"}}},error:{borderColor:{value:"{colors.red.80.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.red.100}"},_hover:{borderColor:{value:"{colors.red.80.value}"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"}},_focus:{borderColor:{value:"{colors.red.100.value}"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.red.100.value}"},backgroundColor:{value:"{colors.red.20.value}"},color:{value:"{colors.red.100.value}"}}},overlay:{borderColor:{value:"{colors.overlay.60.value}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.primary.value}"},_hover:{borderColor:{value:"{colors.overlay.60.value}"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.neutral.90.value}"}},_focus:{borderColor:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.neutral.90.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.neutral.100.value}"}}}},primary:{borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},backgroundColor:{value:"{colors.primary.80.value}"},color:{value:"{colors.font.inverse.value}"},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.100.value}"},color:{value:"{colors.font.inverse.value}"}},info:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.100.value}"},color:{value:"{colors.font.inverse.value}"}}},warning:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.100.value}"},color:{value:"{colors.font.inverse.value}"}}},error:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.100.value}"},color:{value:"{colors.font.inverse.value}"}}},success:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.80}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.100.value}"},color:{value:"{colors.font.inverse.value}"}}},overlay:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.70}"},color:{value:"{colors.font.inverse.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.90.value}"},color:{value:"{colors.font.inverse.value}"}}}},menu:{borderWidth:{value:"{space.zero.value}"},backgroundColor:{value:"transparent"},justifyContent:{value:"start"},_hover:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.80.value}"}},_focus:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.80.value}"}},_active:{color:{value:"{colors.font.inverse.value}"},backgroundColor:{value:"{colors.primary.90.value}"}},_disabled:{color:{value:"{colors.font.disabled.value}"}}},link:{backgroundColor:{value:"transparent"},borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.interactive.value}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.10.value}"},color:{value:"{colors.font.hover.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.10.value}"},color:{value:"{colors.font.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.primary.20.value}"},color:{value:"{colors.font.active.value}"}},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled.value}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled.value}"}},info:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.blue.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.10.value}"},color:{value:"{colors.blue.100.value}"},boxShadow:{value:"{components.fieldcontrol.info._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.blue.20.value}"},color:{value:"{colors.blue.100.value}"}}},warning:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.orange.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.10.value}"},color:{value:"{colors.orange.100.value}"},boxShadow:{value:"{components.fieldcontrol.warning._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.orange.20.value}"},color:{value:"{colors.orange.100.value}"}}},success:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.green.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.10.value}"},color:{value:"{colors.green.100.value}"},boxShadow:{value:"{components.fieldcontrol.success._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.green.20.value}"},color:{value:"{colors.green.100.value}"}}},error:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.red.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.90.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.10.value}"},color:{value:"{colors.red.100.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.20.value}"},color:{value:"{colors.red.100.value}"}}},overlay:{borderColor:{value:"transparent"},backgroundColor:{value:"transparent"},color:{value:"{colors.neutral.100}"},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.overlay.80.value}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.5.value}"},color:{value:"{colors.overlay.90.value}"},boxShadow:{value:"{components.fieldcontrol.overlay._focus.boxShadow.value}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.overlay.90.value}"}}}},warning:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.red.60}"},borderWidth:{value:"{borderWidths.small}"},color:{value:"{colors.red.60}"},_hover:{borderColor:{value:"{colors.red.80}"},backgroundColor:{value:"{colors.red.10}"},color:{value:"{colors.font.error}"}},_focus:{borderColor:{value:"{colors.red.80}"},backgroundColor:{value:"{colors.red.10}"},color:{value:"{colors.red.80}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow}"}},_active:{borderColor:{value:"{colors.red.100}"},backgroundColor:{value:"{colors.red.20}"},color:{value:"{colors.red.100}"}},_disabled:{borderColor:{value:"{colors.border.tertiary}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled}"}},_loading:{borderColor:{value:"{colors.border.tertiary}"},backgroundColor:{value:"transparent"},color:{value:"{colors.font.disabled}"}}},destructive:{borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small}"},borderStyle:{value:"solid"},backgroundColor:{value:"{colors.red.60}"},color:{value:"{colors.font.inverse}"},_disabled:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled}"},color:{value:"{colors.font.disabled}"}},_loading:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.background.disabled}"},color:{value:"{colors.font.disabled}"}},_hover:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse}"}},_focus:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.80}"},color:{value:"{colors.font.inverse}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow}"}},_active:{borderColor:{value:"transparent"},backgroundColor:{value:"{colors.red.100}"},color:{value:"{colors.font.inverse}"}}},small:{fontSize:{value:"{components.fieldcontrol.small.fontSize.value}"},paddingBlockStart:{value:"{components.fieldcontrol.small.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.small.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.small.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.small.paddingInlineEnd.value}"}},large:{fontSize:{value:"{components.fieldcontrol.large.fontSize.value}"},paddingBlockStart:{value:"{components.fieldcontrol.large.paddingBlockStart.value}"},paddingBlockEnd:{value:"{components.fieldcontrol.large.paddingBlockEnd.value}"},paddingInlineStart:{value:"{components.fieldcontrol.large.paddingInlineStart.value}"},paddingInlineEnd:{value:"{components.fieldcontrol.large.paddingInlineEnd.value}"}},loaderWrapper:{alignItems:{value:"center"},gap:{value:"{space.xs.value}"}}},Rye={backgroundColor:{value:"{colors.background.primary.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"0"},borderStyle:{value:"solid"},borderColor:{value:"transparent"},boxShadow:{value:"none"},padding:{value:"{space.medium.value}"},outlined:{backgroundColor:{value:"{components.card.backgroundColor.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},boxShadow:{value:"{components.card.boxShadow.value}"}},elevated:{backgroundColor:{value:"{components.card.backgroundColor.value}"},borderRadius:{value:"{radii.xs.value}"},borderWidth:{value:"0"},borderStyle:{value:"solid"},borderColor:{value:"transparent"},boxShadow:{value:"{shadows.medium.value}"}}},Fye={cursor:{value:"pointer"},alignItems:{value:"center"},_disabled:{cursor:{value:"not-allowed"}},button:{position:{value:"relative"},alignItems:{value:"center"},justifyContent:{value:"center"},color:{value:"{colors.font.inverse.value}"},before:{width:{value:"100%"},height:{value:"100%"},borderWidth:{value:"{borderWidths.medium.value}"},borderRadius:{value:"20%"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"}},_focus:{outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},_focus:{borderColor:{value:"{colors.border.error.value}"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}}},icon:{backgroundColor:{value:"{colors.primary.80.value}"},borderRadius:{value:"20%"},opacity:{value:"{opacities.0.value}"},transform:{value:"scale(0)"},transitionProperty:{value:"all"},transitionDuration:{value:"{time.short.value}"},transitionTimingFunction:{value:"ease-in-out"},_checked:{opacity:{value:"{opacities.100.value}"},transform:{value:"scale(1)"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}},_indeterminate:{opacity:{value:"{opacities.100.value}"},transform:{value:"scale(1)"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}}},label:{color:{value:"{components.text.color.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"}}}},Mye={alignItems:{value:"flex-start"},alignContent:{value:"center"},flexDirection:{value:"column"},justifyContent:{value:"center"}},Oye={pagination:{current:{color:{value:"{components.pagination.current.color}"},backgroundColor:{value:"{components.pagination.current.backgroundColor}"}},button:{color:{value:"{components.pagination.button.color}"},_hover:{backgroundColor:{value:"{components.pagination.button.hover.backgroundColor}"},color:{value:"{components.pagination.button.hover.color}"}},_disabled:{color:{value:"{components.pagination.button.disabled.color}"}}}},search:{input:{color:{value:"{components.searchfield.color}"}},button:{color:{value:"{components.searchfield.button.color}"},_active:{backgroundColor:{value:"{components.searchfield.button._active.backgroundColor}"},borderColor:{value:"{components.searchfield.button._active.borderColor}"},color:{value:"{components.searchfield.button._active.color}"}},_disabled:{backgroundColor:{value:"{components.searchfield.button._disabled.backgroundColor}"},borderColor:{value:"{components.searchfield.button._disabled.borderColor}"},color:{value:"{components.searchfield.button._disabled.color}"}},_focus:{backgroundColor:{value:"{components.searchfield.button._focus.backgroundColor}"},borderColor:{value:"{components.searchfield.button._focus.borderColor}"},color:{value:"{components.searchfield.button._focus.color}"}},_hover:{backgroundColor:{value:"{components.searchfield.button._hover.backgroundColor}"},borderColor:{value:"{components.searchfield.button._hover.borderColor}"},color:{value:"{components.searchfield.button._hover.color}"}}}}},Pye={fontSize:{value:"{fontSizes.xs}"},gap:{value:"{space.relative.medium}"},svg:{path:{fill:{value:"{colors.font.primary}"}}},toolTip:{bottom:{value:"{space.large}"},color:{value:"{colors.teal.100}"},fontSize:{value:"{fontSizes.xxs}"}}},Bye={height:{value:"{space.relative.full.value}"}},Lye={borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.medium.value}"},label:{color:{value:"{colors.font.tertiary.value}"},paddingInline:{value:"{space.medium.value}"},fontSize:{value:"{fontSizes.small.value}"},backgroundColor:{value:"{colors.background.primary.value}"}},small:{borderWidth:{value:"{borderWidths.small.value}"}},large:{borderWidth:{value:"{borderWidths.large.value}"}},opacity:{value:"{opacities.60.value}"}},zye={backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},color:{value:"{colors.font.primary}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.primary}"}},_disabled:{backgroundColor:{value:"{colors.background.disabled}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.disabled}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.disabled}"}},accepted:{backgroundColor:{value:"{colors.background.success}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.success}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.success}"}},rejected:{backgroundColor:{value:"{colors.background.error}"},borderRadius:{value:"{components.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.dropzone.borderStyle}"},borderWidth:{value:"{components.dropzone.borderWidth}"},color:{value:"{colors.font.error}"}}},Wye={backgroundColor:{value:"{colors.background.primary.value}"},item:{borderColor:{value:"{colors.border.secondary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.small.value}"},trigger:{alignItems:{value:"center"},backgroundColor:{value:"{colors.background.primary.value}"},color:{value:"inherit"},gap:{value:"{space.small.value}"},justifyContent:{value:"space-between"},paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"},_hover:{color:{value:"inherit"},backgroundColor:{value:"{colors.overlay.5.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0",offsetY:"0",blurRadius:"0",spreadRadius:"2px",color:"{colors.border.focus.value}"}}}},content:{color:{value:"inherit"},paddingInline:{value:"{space.small.value}"},paddingBlockEnd:{value:"{space.small.value}"},paddingBlockStart:{value:"{space.xxxs.value}"}},icon:{color:{value:"{colors.font.tertiary.value}"},transitionDuration:{value:"{time.medium.value}"},transitionTimingFunction:{value:"cubic-bezier(0.87, 0, 0.13, 1)"}}}},Uye={gap:{value:"{space.xs.value}"},fontSize:{value:"{fontSizes.medium.value}"},flexDirection:{value:"column"},small:{gap:{value:"{space.xxxs.value}"},fontSize:{value:"{fontSizes.small.value}"}},large:{gap:{value:"{space.small.value}"},fontSize:{value:"{fontSizes.large.value}"}},label:{color:{value:"{colors.font.secondary.value}"}}},Vye={borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.small.value}"},color:{value:"{colors.font.primary.value}"},paddingBlockStart:{value:"{space.xs.value}"},paddingBlockEnd:{value:"{space.xs.value}"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"},fontSize:{value:"{components.field.fontSize.value}"},lineHeight:{value:"{lineHeights.medium.value}"},transitionDuration:{value:"{time.medium.value}"},outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},small:{fontSize:{value:"{components.field.small.fontSize.value}"},paddingBlockStart:{value:"{space.xxs.value}"},paddingBlockEnd:{value:"{space.xxs.value}"},paddingInlineStart:{value:"{space.small.value}"},paddingInlineEnd:{value:"{space.small.value}"}},large:{fontSize:{value:"{components.field.large.fontSize.value}"},paddingBlockStart:{value:"{space.xs.value}"},paddingBlockEnd:{value:"{space.xs.value}"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"}},quiet:{borderStyle:{value:"none"},borderInlineStart:{value:"none"},borderInlineEnd:{value:"none"},borderBlockStart:{value:"none"},borderRadius:{value:"0"},_focus:{borderBlockEndColor:{value:"transparent"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_error:{borderBlockEndColor:{value:"{colors.border.error.value}"},_focus:{borderBlockEndColor:{value:"transparent"},boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.focus.value}"}}},_disabled:{color:{value:"{colors.font.disabled.value}"},cursor:{value:"not-allowed"},borderColor:{value:"{colors.transparent.value}"},backgroundColor:{value:"{colors.background.disabled.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},color:{value:"{colors.font.error.value}"},_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.border.error.value}"}}}},info:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.blue.100.value}"}}}},warning:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.orange.100.value}"}}}},success:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.green.100.value}"}}}},overlay:{_focus:{boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"2px",color:"{colors.overlay.90.value}"}}}}},Hye={gap:{value:"{space.zero.value}"},vertical:{alignItems:{value:"center"}},outer:{alignItems:{value:"center"}}},jye={backgroundColor:{value:"transparent"},borderRadius:{value:"{radii.xs.value}"},flexDirection:{value:"column"},gap:{value:"{components.field.gap.value}"},legend:{color:{value:"{colors.font.primary.value}"},fontSize:{value:"{components.field.fontSize.value}"},fontWeight:{value:"{fontWeights.bold.value}"},lineHeight:{value:"{lineHeights.medium.value}"},small:{fontSize:"{components.field.small.fontSize.value}"},large:{fontSize:"{components.field.large.fontSize.value}"}},outlined:{padding:"{space.medium.value}",borderColor:"{colors.neutral.40.value}",borderWidth:"{borderWidths.small.value}",borderStyle:"solid",small:{padding:"{space.small.value}"},large:{padding:"{space.large.value}"}},small:{gap:"{components.field.small.gap.value}"},large:{gap:"{components.field.large.gap.value}"}},Gye={error:{color:{value:"{colors.font.error.value}"},fontSize:{value:"{fontSizes.small.value}"}},description:{color:{value:"{colors.font.secondary.value}"},fontStyle:{value:"italic"},fontSize:{value:"{fontSizes.small.value}"}}},qye={dropzone:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.fileuploader.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.fileuploader.dropzone.borderStyle}"},borderWidth:{value:"{borderWidths.medium}"}},icon:{color:{value:"{colors.border.primary}"},fontSize:{value:"{fontSizes.xxl}"}},text:{color:{value:"{colors.font.tertiary}"},fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"}}},file:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"},gap:{value:"{space.small}"},alignItems:{value:"baseline"},name:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},size:{fontSize:{value:"{fontSizes.small}"},fontWeight:{value:"{fontWeights.normal}"},color:{value:"{colors.font.tertiary}"}},image:{width:{value:"{space.xxl}"},height:{value:"{space.xxl}"},backgroundColor:{value:"{colors.background.secondary}"},color:{value:"{colors.font.tertiary}"},borderRadius:{value:"{radii.small}"}}},filelist:{flexDirection:{value:"column"},gap:{value:"{space.small}"}},loader:{strokeLinecap:{value:"round"},strokeEmpty:{value:"{colors.border.secondary}"},strokeFilled:{value:"{components.loader.strokeFilled}"},strokeWidth:{value:"{borderWidths.large}"}},previewer:{backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},borderRadius:{value:"{radii.small}"},paddingBlock:{value:"{space.zero}"},paddingInline:{value:"{space.zero}"},maxHeight:{value:"40rem"},maxWidth:{value:"auto"},text:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},body:{paddingBlock:{value:"{space.medium}"},paddingInline:{value:"{space.medium}"},gap:{value:"{space.small}"}},footer:{justifyContent:{value:"flex-end"}}}},Kye={gap:{value:"{space.medium.value}"},justifyContent:{value:"normal"},alignItems:{value:"stretch"},alignContent:{value:"normal"},flexWrap:{value:"nowrap"}},Xye={color:{value:"{colors.font.primary.value}"},lineHeight:{value:"{lineHeights.small.value}"},1:{fontSize:{value:"{fontSizes.xxxxl.value}"},fontWeight:{value:"{fontWeights.light.value}"}},2:{fontSize:{value:"{fontSizes.xxxl.value}"},fontWeight:{value:"{fontWeights.normal.value}"}},3:{fontSize:{value:"{fontSizes.xxl.value}"},fontWeight:{value:"{fontWeights.medium.value}"}},4:{fontSize:{value:"{fontSizes.xl.value}"},fontWeight:{value:"{fontWeights.semibold.value}"}},5:{fontSize:{value:"{fontSizes.large.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},6:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.extrabold.value}"}}},Yye={highlighted:{fontWeight:{value:"{fontWeights.bold}"}}},Qye={lineHeight:{value:1},height:{value:"1em"}},Zye={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},Jye={maxWidth:{value:"100%"},height:{value:"auto"},objectFit:{value:"initial"},objectPosition:{value:"initial"}},eve={banner:{height:{value:"150px "},width:{value:"400px "}},button:{backgroundColor:{value:"#e8e8e8"},borderRadius:{value:"5px"},color:{value:"black"}},dialog:{height:{value:"50vh"},minHeight:{value:"400px"},minWidth:{value:"400px"},width:{value:"30vw"}},header:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.extrabold.value}"}}},tve={active:{color:{value:"{colors.font.active.value}"}},color:{value:"{colors.font.interactive.value}"},focus:{color:{value:"{colors.font.focus.value}"}},hover:{color:{value:"{colors.font.hover.value}"}},visited:{color:{value:"{colors.font.interactive.value}"}}},nve={cameraModule:{backgroundColor:{value:"{colors.background.primary.value}"}}},rve={width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"},fontSize:{value:"{fontSizes.xs.value}"},strokeEmpty:{value:"{colors.neutral.20.value}"},strokeFilled:{value:"{colors.primary.80.value}"},strokeLinecap:{value:"round"},animationDuration:{value:"1s"},small:{width:{value:"{fontSizes.small.value}"},height:{value:"{fontSizes.small.value}"},fontSize:{value:"{fontSizes.xxs.value}"}},large:{width:{value:"{fontSizes.large.value}"},height:{value:"{fontSizes.large.value}"},fontSize:{value:"{fontSizes.small.value}"}},linear:{width:{value:"100%"},minWidth:{value:"5rem"},fontSize:{value:"{fontSizes.xxs.value}"},strokeWidth:{value:"{fontSizes.xxs.value}"},strokeFilled:{value:"{colors.primary.80.value}"},strokeEmpty:{value:"{colors.neutral.20.value}"},strokeLinecap:{value:"round"},animationDuration:{value:"1s"},small:{strokeWidth:{value:"{fontSizes.xxxs.value}"},fontSize:{value:"{fontSizes.xxxs.value}"}},large:{strokeWidth:{value:"{fontSizes.xs.value}"},fontSize:{value:"{fontSizes.xs.value}"}}},text:{fill:{value:"{colors.font.primary.value}"}}},sve={backgroundColor:{value:"{colors.background.primary.value}"},borderRadius:{value:"{radii.medium.value}"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderColor:{value:"{colors.border.primary.value}"},boxShadow:{value:"{shadows.large.value}"},flexDirection:{value:"column"},gap:{value:"{space.zero.value}"},maxWidth:{value:"30rem"},minWidth:{value:"14rem"},small:{width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"}},large:{width:{value:"{fontSizes.xxxl.value}"},height:{value:"{fontSizes.xxxl.value}"}},item:{minHeight:{value:"2.5rem"},paddingInlineStart:{value:"{space.medium.value}"},paddingInlineEnd:{value:"{space.medium.value}"}}},ove={alignItems:{value:"center"},backgroundColor:{value:"{colors.background.tertiary.value}"},borderColor:{value:"transparent"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},borderRadius:{value:"{radii.xs.value}"},color:{value:"{colors.font.primary.value}"},justifyContent:{value:"flex-start"},paddingBlock:{value:"{space.small.value}"},paddingInline:{value:"{space.medium.value}"},lineHeight:{value:"{lineHeights.small.value}"},icon:{size:{value:"{fontSizes.xl.value}"}},heading:{fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"}},dismiss:{gap:{value:"{space.xxs.value}"}},plain:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"}}},outlined:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.primary.value}"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.info.value}"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.error.value}"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.success.value}"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.warning.value}"}}},filled:{color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.background.secondary.value}"},borderColor:{value:"transparent"},info:{color:{value:"{colors.font.info.value}"},backgroundColor:{value:"{colors.background.info.value}"},borderColor:{value:"transparent"}},error:{color:{value:"{colors.font.error.value}"},backgroundColor:{value:"{colors.background.error.value}"},borderColor:{value:"transparent"}},success:{color:{value:"{colors.font.success.value}"},backgroundColor:{value:"{colors.background.success.value}"},borderColor:{value:"transparent"}},warning:{color:{value:"{colors.font.warning.value}"},backgroundColor:{value:"{colors.background.warning.value}"},borderColor:{value:"transparent"}}}},ave={current:{alignItems:{value:"center"},justifyContent:{value:"center"},color:{value:"{colors.font.inverse.value}"},fontSize:{value:"{fontSizes.small.value}"},backgroundColor:{value:"{colors.overlay.40.value}"}},button:{color:{value:"{colors.font.primary.value}"},paddingInlineStart:{value:"{space.xxs.value}"},paddingInlineEnd:{value:"{space.xxs.value}"},transitionProperty:{value:"background-color"},transitionDuration:{value:"{time.medium.value}"},hover:{backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.font.primary.value}"}},disabled:{color:{value:"{colors.font.disabled.value}"}}},ellipsis:{alignItems:{value:"baseline"},justifyContent:{value:"center"},paddingInlineStart:{value:"{space.xs.value}"},paddingInlineEnd:{value:"{space.xs.value}"}},itemContainer:{marginLeft:{value:"{space.xxxs.value}"},marginRight:{value:"{space.xxxs.value}"}},itemShared:{height:{value:"{fontSizes.xxl.value}"},minWidth:{value:"{fontSizes.xxl.value}"},borderRadius:{value:"{fontSizes.medium.value}"}}},ive={color:{value:"{components.fieldcontrol.color.value}"},button:{color:{value:"{components.button.color.value}"},_active:{backgroundColor:{value:"{components.button._active.backgroundColor.value}"},borderColor:{value:"{components.button._active.borderColor.value}"},color:{value:"{components.button._active.color.value}"}},_disabled:{backgroundColor:{value:"{components.button._disabled.backgroundColor.value}"},borderColor:{value:"{components.button._disabled.borderColor.value}"},color:{value:"{components.button._disabled.color.value}"}},_error:{color:{value:"{components.button.outlined.error.color.value}"},backgroundColor:{value:"{components.button.outlined.error.backgroundColor.value}"},borderColor:{value:"{components.button.outlined.error.borderColor.value}"},_active:{borderColor:{value:"{components.button.outlined.error._active.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._active.backgroundColor.value}"},color:{value:"{components.button.outlined.error._active.color.value}"}},_focus:{borderColor:{value:"{components.button.outlined.error._focus.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._focus.backgroundColor.value}"},color:{value:"{components.button.outlined.error._focus.color.value}"},boxShadow:{value:"{components.button.outlined.error._focus.boxShadow.value}"}},_hover:{borderColor:{value:"{components.button.outlined.error._hover.borderColor.value}"},backgroundColor:{value:"{components.button.outlined.error._hover.backgroundColor.value}"},color:{value:"{components.button.outlined.error._hover.color.value}"}}},_focus:{backgroundColor:{value:"{components.button._focus.backgroundColor.value}"},borderColor:{value:"{components.button._focus.borderColor.value}"},color:{value:"{components.button._focus.color.value}"}},_hover:{backgroundColor:{value:"{components.button._hover.backgroundColor.value}"},borderColor:{value:"{components.button._hover.borderColor.value}"},color:{value:"{components.button._hover.color.value}"}}}},lve={color:{value:"{components.fieldcontrol.color}"},borderColor:{value:"{components.fieldcontrol.borderColor}"},fontSize:{value:"{components.fieldcontrol.fontSize}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor}"}}},uve={borderRadius:{value:"{radii.small.value}"},transitionDuration:{value:"{time.long.value}"},startColor:{value:"{colors.background.secondary.value}"},endColor:{value:"{colors.background.tertiary.value}"},small:{height:{value:"{space.small.value}"}},default:{height:{value:"{space.medium.value}"}},large:{height:{value:"{space.large.value}"}}},cve={alignItems:{value:"center"},justifyContent:{value:"flex-start"},gap:{value:"inherit"},_disabled:{cursor:{value:"not-allowed"}},button:{alignItems:{value:"center"},justifyContent:{value:"center"},width:{value:"{fontSizes.medium.value}"},height:{value:"{fontSizes.medium.value}"},boxSizing:{value:"border-box"},borderWidth:{value:"{borderWidths.medium.value}"},borderStyle:{value:"solid"},borderRadius:{value:"50%"},borderColor:{value:"{colors.border.primary.value}"},color:{value:"{colors.background.primary.value}"},backgroundColor:{value:"{colors.background.primary.value}"},transitionProperty:{value:"all"},transitionDuration:{value:"{time.medium.value}"},outlineColor:{value:"{colors.transparent.value}"},outlineStyle:{value:"solid"},outlineWidth:{value:"{outlineWidths.medium.value}"},outlineOffset:{value:"{outlineOffsets.medium.value}"},padding:{value:"{borderWidths.medium.value}"},small:{width:{value:"{fontSizes.small.value}"},height:{value:"{fontSizes.small.value}"}},large:{width:{value:"{fontSizes.large.value}"},height:{value:"{fontSizes.large.value}"}},_checked:{color:{value:"{colors.primary.80.value}"},_disabled:{color:{value:"{colors.background.disabled.value}"}}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},_error:{borderColor:{value:"{colors.border.error.value}"},_focus:{boxShadow:{value:"{components.fieldcontrol._error._focus.boxShadow.value}"}}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"},backgroundColor:{value:"{colors.background.primary.value}"}}},label:{color:{value:"{components.text.color.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"}}}},dve={radio:{borderWidth:{value:"{components.radio.button.borderWidth}"},borderColor:{value:"{components.radio.button.borderColor}"},backgroundColor:{value:"{components.radio.button.backgroundColor}"},_checked:{color:{value:"{components.radio.button._checked.color}"}},label:{color:{value:"{components.radio.label.color}"}}},legend:{color:{value:"{components.fieldset.legend.color}"},fontWeight:{value:"{fontWeights.normal}"}}},fve={large:{size:{value:"{fontSizes.xxxl.value}"}},default:{size:{value:"{fontSizes.xl.value}"}},small:{size:{value:"{fontSizes.small.value}"}},filled:{color:{value:"{colors.secondary.80.value}"}},empty:{color:{value:"{colors.background.tertiary.value}"}}},pve={color:{value:"{components.fieldcontrol.color.value}"},button:{color:{value:"{components.button.color.value}"},backgroundColor:{value:"{colors.background.primary.value}"},_active:{backgroundColor:{value:"{components.button._active.backgroundColor.value}"},borderColor:{value:"{components.button._active.borderColor.value}"},color:{value:"{components.button._active.color.value}"}},_disabled:{backgroundColor:{value:"{components.button._disabled.backgroundColor.value}"},borderColor:{value:"{components.button._disabled.borderColor.value}"},color:{value:"{components.button._disabled.color.value}"}},_focus:{backgroundColor:{value:"{components.button._focus.backgroundColor.value}"},borderColor:{value:"{components.button._focus.borderColor.value}"},color:{value:"{components.button._focus.color.value}"}},_hover:{backgroundColor:{value:"{components.button._hover.backgroundColor.value}"},borderColor:{value:"{components.button._hover.borderColor.value}"},color:{value:"{components.button._hover.color.value}"}}}},hve={color:{value:"{components.fieldcontrol.color}"},backgroundColor:{value:"{colors.background.primary.value}"},paddingInlineEnd:{value:"{space.xxl.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"{colors.background.disabled.value}"}},wrapper:{flex:{value:"1"},display:{value:"block"},position:{value:"relative"},cursor:{value:"pointer"}},iconWrapper:{alignItems:{value:"center"},position:{value:"absolute"},top:{value:"50%"},right:{value:"{space.medium.value}"},transform:{value:"translateY(-50%)"},pointerEvents:{value:"none"},small:{right:{value:"{space.xs.value}"}},large:{right:{value:"{space.medium.value}"}}},option:{backgroundColor:{value:"transparent"},color:{value:"{colors.font.primary.value}"},_disabled:{color:{value:"{colors.font.disabled.value}"},backgroundColor:{value:"transparent"}}},whiteSpace:{value:"nowrap"},minWidth:{value:"6.5rem"},small:{minWidth:{value:"5.5rem"},paddingInlineEnd:{value:"{space.xl.value}"}},large:{minWidth:{value:"7.5rem"},paddingInlineEnd:{value:"{space.xxl.value}"}},expanded:{paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"},option:{paddingBlock:{value:"{space.xs.value}"},paddingInline:{value:"{space.small.value}"}}}},mve={borderColor:{value:"{components.fieldcontrol.borderColor}"},color:{value:"{components.fieldcontrol.color}"},flexDirection:{value:"column"},fontSize:{value:"{components.fieldcontrol.fontSize}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor}"}},label:{color:{value:"{components.field.label.color}"}}},gve={paddingBlock:{value:"{space.xs.value}"},track:{backgroundColor:{value:"{colors.background.quaternary.value}"},borderRadius:{value:"9999px"},height:{value:"0.375rem"},minWidth:{value:"10rem"}},range:{backgroundColor:{value:"{colors.primary.80.value}"},borderRadius:{value:"9999px"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"}}},thumb:{width:{value:"1.25rem"},height:{value:"1.25rem"},backgroundColor:{value:"{colors.background.primary.value}"},boxShadow:{value:"{shadows.small.value}"},borderRadius:{value:"50%"},borderWidth:{value:"{borderWidths.medium.value}"},borderColor:{value:"{colors.border.primary.value}"},borderStyle:{value:"solid"},_disabled:{backgroundColor:{value:"{colors.background.disabled.value}"},borderColor:{value:"transparent"},boxShadow:{value:"none"}},_hover:{backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"{colors.border.focus.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}}},small:{track:{height:{value:"0.25rem"}},thumb:{width:{value:"1rem"},height:{value:"1rem"}}},large:{track:{height:{value:"0.625rem"}},thumb:{width:{value:"1.5rem"},height:{value:"1.5rem"}}}},yve={borderColor:{value:"{components.fieldcontrol.borderColor}"},flexDirection:{value:"column"},input:{color:{value:"{components.fieldcontrol.color}"},fontSize:{value:"{components.fieldcontrol.fontSize}"},textAlign:{value:"center"}},button:{color:{value:"{components.button.color}"},backgroundColor:{value:"{colors.transparent}"},_active:{color:{value:"{components.button._active.color}"},backgroundColor:{value:"{components.button._active.backgroundColor}"}},_focus:{color:{value:"{components.button._focus.color}"},backgroundColor:{value:"{components.button._focus.backgroundColor}"}},_disabled:{color:{value:"{components.button._disabled.color}"},backgroundColor:{value:"{components.fieldcontrol._disabled.backgroundColor}"}},_hover:{color:{value:"{components.button._hover.color}"},backgroundColor:{value:"{components.button._hover.backgroundColor}"}}}},vve={dropzone:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"dashed"},borderWidth:{value:"{borderWidths.small}"},gap:{value:"{space.small}"},paddingBlock:{value:"{space.xl}"},paddingInline:{value:"{space.large}"},textAlign:{value:"center"},_active:{backgroundColor:{value:"{colors.primary.10}"},borderRadius:{value:"{components.storagemanager.dropzone.borderRadius}"},borderColor:{value:"{colors.border.pressed}"},borderStyle:{value:"{components.storagemanager.dropzone.borderStyle}"},borderWidth:{value:"{borderWidths.medium}"}},icon:{color:{value:"{colors.border.primary}"},fontSize:{value:"{fontSizes.xxl}"}},text:{color:{value:"{colors.font.tertiary}"},fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"}}},file:{backgroundColor:{value:"{colors.background.primary}"},borderRadius:{value:"{radii.small}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},paddingBlock:{value:"{space.xs}"},paddingInline:{value:"{space.small}"},gap:{value:"{space.small}"},alignItems:{value:"baseline"},name:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},size:{fontSize:{value:"{fontSizes.small}"},fontWeight:{value:"{fontWeights.normal}"},color:{value:"{colors.font.tertiary}"}},image:{width:{value:"{space.xxl}"},height:{value:"{space.xxl}"},backgroundColor:{value:"{colors.background.secondary}"},color:{value:"{colors.font.tertiary}"},borderRadius:{value:"{radii.small}"}}},filelist:{flexDirection:{value:"column"},gap:{value:"{space.small}"}},loader:{strokeLinecap:{value:"round"},strokeEmpty:{value:"{colors.border.secondary}"},strokeFilled:{value:"{components.loader.strokeFilled}"},strokeWidth:{value:"{borderWidths.large}"}},previewer:{backgroundColor:{value:"{colors.background.primary}"},borderColor:{value:"{colors.border.primary}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small}"},borderRadius:{value:"{radii.small}"},paddingBlock:{value:"{space.zero}"},paddingInline:{value:"{space.zero}"},maxHeight:{value:"40rem"},maxWidth:{value:"auto"},text:{fontSize:{value:"{fontSizes.medium}"},fontWeight:{value:"{fontWeights.bold}"},color:{value:"{colors.font.primary}"}},body:{paddingBlock:{value:"{space.medium}"},paddingInline:{value:"{space.medium}"},gap:{value:"{space.small}"}},footer:{justifyContent:{value:"flex-end"}}}},bve={_disabled:{opacity:{value:"{opacities.60.value}"}},_focused:{shadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"}},fontSize:{value:"{fontSizes.medium.value}"},large:{fontSize:{value:"{fontSizes.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"}},label:{padding:{value:"{space.xs.value}"}},thumb:{backgroundColor:{value:"{colors.background.primary.value}"},borderColor:{value:"transparent"},borderWidth:{value:"{borderWidths.small.value}"},borderStyle:{value:"solid"},borderRadius:{value:"{radii.xxxl.value}"},checked:{transform:{value:"{transforms.slideX.medium.value}"}},transition:{duration:{value:"{time.medium.value}"}},width:{value:"{space.relative.medium.value}"}},track:{backgroundColor:{value:"{colors.background.quaternary.value}"},borderRadius:{value:"{radii.xxxl.value}"},checked:{backgroundColor:{value:"{colors.primary.80.value}"}},height:{value:"{space.relative.medium.value}"},padding:{value:"{outlineWidths.medium.value}"},transition:{duration:{value:"{time.short.value}"}},width:{value:"{space.relative.xl.value}"},_error:{backgroundColor:{value:"{colors.background.error.value}"}}}},wve={borderCollapse:{value:"collapse"},display:{value:"table"},width:{value:"100%"},head:{display:{value:"table-header-group"},verticalAlign:{value:"middle"}},body:{display:{value:"table-row-group"},verticalAlign:{value:"middle"}},foot:{display:{value:"table-footer-group"},verticalAlign:{value:"middle"}},row:{display:{value:"table-row"},verticalAlign:{value:"middle"},hover:{backgroundColor:{value:"{colors.background.tertiary.value}"}},striped:{backgroundColor:{value:"{colors.background.secondary.value}"}}},header:{borderColor:{value:"{colors.border.tertiary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.primary.value}"},display:{value:"table-cell"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"},padding:{value:"{space.medium.value}"},verticalAlign:{value:"middle"},large:{fontSize:{value:"{fontSizes.large.value}"},padding:{value:"{space.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"},padding:{value:"{space.xs.value}"}}},data:{borderColor:{value:"{colors.border.tertiary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.small.value}"},color:{value:"{colors.font.primary.value}"},display:{value:"table-cell"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.normal.value}"},padding:{value:"{space.medium.value}"},verticalAlign:{value:"middle"},large:{fontSize:{value:"{fontSizes.large.value}"},padding:{value:"{space.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"},padding:{value:"{space.xs.value}"}}},caption:{captionSide:{value:"bottom"},color:{value:"{colors.font.primary.value}"},display:{value:"table-caption"},fontSize:{value:"{fontSizes.medium.value}"},textAlign:{value:"center"},wordBreak:{value:"break-all"},large:{fontSize:{value:"{fontSizes.large.value}"}},small:{fontSize:{value:"{fontSizes.small.value}"}}}},Sve={backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.secondary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.medium.value}"},gap:{value:"0"},item:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.secondary.value}"},borderStyle:{value:"solid"},borderWidth:{value:"{borderWidths.medium.value}"},color:{value:"{colors.font.secondary.value}"},fontSize:{value:"{fontSizes.medium.value}"},fontWeight:{value:"{fontWeights.bold.value}"},paddingVertical:{value:"{space.small.value}"},paddingHorizontal:{value:"{space.medium.value}"},textAlign:{value:"center"},transitionDuration:{value:"{time.medium.value}"},_hover:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.hover.value}"}},_focus:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.focus.value}"},boxShadow:{value:{offsetX:"0px",offsetY:"0px",blurRadius:"0px",spreadRadius:"{borderWidths.medium}",color:"{colors.border.focus.value}"}},color:{value:"{colors.font.focus.value}"}},_active:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.font.interactive.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.interactive.value}"}},_disabled:{backgroundColor:{value:"transparent"},borderColor:{value:"{colors.border.tertiary.value}"},boxShadow:{value:"none"},color:{value:"{colors.font.disabled.value}"}}},panel:{backgroundColor:{value:"transparent"},paddingInline:{value:"0"},paddingBlock:{value:"{space.small.value}"}}},xve={color:{value:"{colors.font.primary.value}"},primary:{color:{value:"{colors.font.primary.value}"}},secondary:{color:{value:"{colors.font.secondary.value}"}},tertiary:{color:{value:"{colors.font.tertiary.value}"}},error:{color:{value:"{colors.font.error.value}"}},warning:{color:{value:"{colors.font.warning.value}"}},success:{color:{value:"{colors.font.success.value}"}},info:{color:{value:"{colors.font.info.value}"}}},kve={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},Ive={color:{value:"{components.fieldcontrol.color.value}"},borderColor:{value:"{components.fieldcontrol.borderColor.value}"},fontSize:{value:"{components.fieldcontrol.fontSize.value}"},_focus:{borderColor:{value:"{components.fieldcontrol._focus.borderColor.value}"}}},_ve={borderColor:{value:"{colors.border.primary.value}"},color:{value:"{colors.font.primary.value}"},_hover:{backgroundColor:{value:"{colors.overlay.10.value}"}},_focus:{borderColor:{value:"{colors.border.focus.value}"},color:{value:"{colors.font.primary.value}"}},_active:{backgroundColor:{value:"{colors.transparent.value}"}},_disabled:{backgroundColor:{value:"{colors.transparent.value}"},borderColor:{value:"{colors.border.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{borderColor:{value:"{colors.border.pressed.value}"},color:{value:"{colors.font.primary.value}"},backgroundColor:{value:"{colors.overlay.20.value}"},_hover:{backgroundColor:{value:"{colors.overlay.30.value}"}}},primary:{backgroundColor:{value:"{colors.transparent.value}"},borderWidth:{value:"{borderWidths.small.value}"},_focus:{borderColor:{value:"{colors.border.focus.value}"},backgroundColor:{value:"{colors.transparent.value}"},boxShadow:{value:"{components.fieldcontrol._focus.boxShadow.value}"},color:{value:"{colors.font.primary.value}"}},_hover:{backgroundColor:{value:"{colors.overlay.10.value}"},color:{value:"{colors.font.primary.value}"}},_disabled:{borderColor:{value:"{colors.border.disabled.value}"},backgroundColor:{value:"{colors.background.disabled.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{backgroundColor:{value:"{colors.primary.80.value}"},borderColor:{value:"{colors.primary.80.value}"},color:{value:"{colors.background.primary.value}"},_focus:{backgroundColor:{value:"{colors.border.focus.value}"},borderColor:{value:"{colors.border.focus.value}"},color:{value:"{colors.background.primary.value}"}},_hover:{borderColor:{value:"{colors.primary.60.value}"},backgroundColor:{value:"{colors.primary.60.value}"},boxShadow:{value:"{colors.primary.60.value}"},color:{value:"{colors.background.primary.value}"}}}},link:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"},_hover:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"}},_focus:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.50.value}"}},_disabled:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.font.disabled.value}"}},_pressed:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.90.value}"},_focus:{backgroundColor:{value:"{colors.transparent.value}"},color:{value:"{colors.overlay.90.value}"}},_hover:{color:{value:"{colors.overlay.90.value}"},backgroundColor:{value:"{colors.transparent.value}"}}}}},Eve={alignItems:{value:"center"},alignContent:{value:"center"},justifyContent:{value:"flex-start"}},Cve={accordion:Wye,alert:Eye,authenticator:Tye,autocomplete:Cye,avatar:Nye,badge:Aye,breadcrumbs:Dye,button:$ye,card:Rye,checkbox:Fye,checkboxfield:Mye,collection:Oye,copy:Pye,countrycodeselect:Bye,divider:Lye,dropzone:zye,field:Uye,fieldcontrol:Vye,fieldgroup:Hye,fieldmessages:Gye,fieldset:jye,fileuploader:qye,flex:Kye,heading:Xye,icon:Qye,highlightmatch:Yye,image:Jye,inappmessaging:eve,input:Zye,link:tve,liveness:nve,loader:rve,menu:sve,message:ove,pagination:ave,passwordfield:ive,phonenumberfield:lve,placeholder:uve,radio:cve,radiogroup:dve,rating:fve,searchfield:pve,select:hve,selectfield:mve,sliderfield:gve,stepperfield:yve,storagemanager:vve,switchfield:bve,table:wve,tabs:Sve,text:xve,textareafield:kve,textfield:Ive,togglebutton:_ve,togglebuttongroup:Eve},Tve={default:{variable:{value:`'InterVariable', 'Inter var', 'Inter', -apple-system, BlinkMacSystemFont,
        'Helvetica Neue', 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans',
        sans-serif`},static:{value:`'Inter', -apple-system, BlinkMacSystemFont, 'Helvetica Neue',
        'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif`}}},go={xxxs:{value:"0.375rem"},xxs:{value:"0.5rem"},xs:{value:"0.75rem"},small:{value:"0.875rem"},medium:{value:"1rem"},large:{value:"1.25rem"},xl:{value:"1.5rem"},xxl:{value:"2rem"},xxxl:{value:"2.5rem"},xxxxl:{value:"3rem"}},nR={hairline:{value:100},thin:{value:200},light:{value:300},normal:{value:400},medium:{value:500},semibold:{value:600},bold:{value:700},extrabold:{value:800},black:{value:900}},Nve={small:{value:"1.25"},medium:{value:"1.5"},large:{value:"2"}},rR={0:{value:"0"},10:{value:"0.1"},20:{value:"0.2"},30:{value:"0.3"},40:{value:"0.4"},50:{value:"0.5"},60:{value:"0.6"},70:{value:"0.7"},80:{value:"0.8"},90:{value:"0.9"},100:{value:"1"}},Ave={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},Dve={small:{value:"1px"},medium:{value:"2px"},large:{value:"3px"}},sR={xs:{value:"0.125rem"},small:{value:"0.25rem"},medium:{value:"0.5rem"},large:{value:"1rem"},xl:{value:"2rem"},xxl:{value:"4rem"},xxxl:{value:"8rem"}},$ve={small:{value:{offsetX:"0px",offsetY:"2px",blurRadius:"4px",color:"{colors.shadow.tertiary.value}"}},medium:{value:{offsetX:"0px",offsetY:"2px",blurRadius:"6px",color:"{colors.shadow.secondary.value}"}},large:{value:{offsetX:"0px",offsetY:"4px",blurRadius:"12px",color:"{colors.shadow.primary.value}"}}},yo={zero:{value:"0"},xxxs:{value:"0.25rem"},xxs:{value:"0.375rem"},xs:{value:"0.5rem"},small:{value:"0.75rem"},medium:{value:"1rem"},large:{value:"1.5rem"},xl:{value:"2.0rem"},xxl:{value:"3.0rem"},xxxl:{value:"4.5rem"},relative:{xxxs:{value:"0.25em"},xxs:{value:"0.375em"},xs:{value:"0.5em"},small:{value:"0.75em"},medium:{value:"1em"},large:{value:"1.5em"},xl:{value:"2.0em"},xxl:{value:"3.0em"},xxxl:{value:"4.5em"},full:{value:"100%"}}},oR={short:{value:"100ms"},medium:{value:"250ms"},long:{value:"500ms"}},Rve={slideX:{small:{value:"translateX(0.5em)"},medium:{value:"translateX(1em)"},large:{value:"translateX(2em)"}}},Fve={components:Cve,borderWidths:eR,colors:tR,fonts:Tve,fontSizes:go,fontWeights:nR,lineHeights:Nve,opacities:rR,outlineOffsets:Ave,outlineWidths:Dve,radii:sR,shadows:$ve,space:yo,time:oR,transforms:Rve};go.xxs,go.xs,go.small,go.medium,go.large,go.xl,go.xxl,go.xxxl,yo.xxxs,yo.xs,yo.small,yo.medium,yo.large,yo.xl,yo.xxl,yo.xxxl;const Mve={values:{base:0,small:480,medium:768,large:992,xl:1280,xxl:1536},defaultBreakpoint:"base"},aR={tokens:Fve,breakpoints:Mve,name:"default-theme"};function Ove(e,t,n,r){var s=-1,o=e==null?0:e.length;for(r&&o&&(n=e[++s]);++s<o;)n=t(n,e[s],s,e);return n}var Pve=Ove;function Bve(e){return function(t){return e==null?void 0:e[t]}}var Lve=Bve,zve=Lve,Wve={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Uve=zve(Wve),Vve=Uve,Hve=Vve,jve=J$,Gve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qve="\\u0300-\\u036f",Kve="\\ufe20-\\ufe2f",Xve="\\u20d0-\\u20ff",Yve=qve+Kve+Xve,Qve="["+Yve+"]",Zve=RegExp(Qve,"g");function Jve(e){return e=jve(e),e&&e.replace(Gve,Hve).replace(Zve,"")}var e0e=Jve,t0e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function n0e(e){return e.match(t0e)||[]}var r0e=n0e,s0e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function o0e(e){return s0e.test(e)}var a0e=o0e,iR="\\ud800-\\udfff",i0e="\\u0300-\\u036f",l0e="\\ufe20-\\ufe2f",u0e="\\u20d0-\\u20ff",c0e=i0e+l0e+u0e,lR="\\u2700-\\u27bf",uR="a-z\\xdf-\\xf6\\xf8-\\xff",d0e="\\xac\\xb1\\xd7\\xf7",f0e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",p0e="\\u2000-\\u206f",h0e=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cR="A-Z\\xc0-\\xd6\\xd8-\\xde",m0e="\\ufe0e\\ufe0f",dR=d0e+f0e+p0e+h0e,fR="['’]",s3="["+dR+"]",g0e="["+c0e+"]",pR="\\d+",y0e="["+lR+"]",hR="["+uR+"]",mR="[^"+iR+dR+pR+lR+uR+cR+"]",v0e="\\ud83c[\\udffb-\\udfff]",b0e="(?:"+g0e+"|"+v0e+")",w0e="[^"+iR+"]",gR="(?:\\ud83c[\\udde6-\\uddff]){2}",yR="[\\ud800-\\udbff][\\udc00-\\udfff]",gl="["+cR+"]",S0e="\\u200d",o3="(?:"+hR+"|"+mR+")",x0e="(?:"+gl+"|"+mR+")",a3="(?:"+fR+"(?:d|ll|m|re|s|t|ve))?",i3="(?:"+fR+"(?:D|LL|M|RE|S|T|VE))?",vR=b0e+"?",bR="["+m0e+"]?",k0e="(?:"+S0e+"(?:"+[w0e,gR,yR].join("|")+")"+bR+vR+")*",I0e="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_0e="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",E0e=bR+vR+k0e,C0e="(?:"+[y0e,gR,yR].join("|")+")"+E0e,T0e=RegExp([gl+"?"+hR+"+"+a3+"(?="+[s3,gl,"$"].join("|")+")",x0e+"+"+i3+"(?="+[s3,gl+o3,"$"].join("|")+")",gl+"?"+o3+"+"+a3,gl+"+"+i3,_0e,I0e,pR,C0e].join("|"),"g");function N0e(e){return e.match(T0e)||[]}var A0e=N0e,D0e=r0e,$0e=a0e,R0e=J$,F0e=A0e;function M0e(e,t,n){return e=R0e(e),t=n?void 0:t,t===void 0?$0e(e)?F0e(e):D0e(e):e.match(t)||[]}var O0e=M0e,P0e=Pve,B0e=e0e,L0e=O0e,z0e="['’]",W0e=RegExp(z0e,"g");function U0e(e){return function(t){return P0e(L0e(B0e(t).replace(W0e,"")),e,"")}}var V0e=U0e,H0e=V0e,j0e=H0e(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),G0e=j0e;const wR=Wi(G0e),q0e="amplify";function X1(e){return Object.entries(e).map(([t,n])=>{const r=by(n)?n.toString():SR({value:n});return`${wR(t)}:${r}; `}).join(" ")}function K2({path:e=[]}){return`${wR([q0e,...e].join(" "))}`}const K0e=["offsetX","offsetY","blurRadius","spreadRadius","color"];function SR(e){const{value:t}=e;return cu(t)?u3(t):l3(t)?K0e.map(n=>u3(l3(e)?e[n]:t[n])).join(" "):t}function by(e){return zo(e)&&Fa(e,"value")}function l3(e){return zo(e)&&Fa(e,"offsetX")}function u3(e){if(!e)return"";if(kR(e)){const t=e.replace(/\{|\}/g,"").replace(".value","").split(".");return`var(--${K2({path:t})})`}return e}const c3=({token:e,path:t})=>{const n=`--${K2({path:t})}`,{value:r}=e,s=SR(e);return{name:n,original:r,path:t,value:s,toString:()=>`var(${n})`}};function Y1({tokens:e,path:t=[],setupToken:n}){if(Fa(e,"value"))return n({token:e,path:t});const r={};for(const s in e)if(Fa(e,s)){const o=e[s],a=zo(o)?o:{value:o};r[s]=Y1({tokens:a,path:t.concat(s),setupToken:n})}return r}function Q1(e,t){t=t||[];for(var n in e)Fa(e,n)&&(zo(e[n])&&"value"in e[n]?t.push(e[n]):zo(e[n])&&Q1(e[n],t));return t}function xR(e,t,n){if(e==null)return{};var r,s,o,a,i,u,c=e[0]||{},l=1,d=e.length;for(n=n||[],typeof c!="object"&&(c={});l<d;l++)if((i=e[l])!=null){for(a in i)if(Fa(i,a)&&a!=="__proto__"&&(r=c[a],o=i[a],c!==o))if(o&&(zo(o)||(s=Array.isArray(o)))){s?(s=!1,u=r&&Array.isArray(r)?r:[]):u=r&&zo(r)?r:{};var f=n.slice(0);f.push(a),c[a]=xR([u,o],t,f)}else o!==void 0&&(r!=null&&typeof t=="function"&&t({target:c,copy:i,path:n,key:a}),c[a]=o)}return c}function kR(e){const t=new RegExp("\\{([^}]+)\\}","g");if(typeof e=="string")return t.test(e);if(typeof e=="object"){let n=!1;for(const r in e)if(Fa(e,r)){const s=e[r];if(kR(s)){n=!0;break}}return n}return!1}function d3(e,t){return t?`${e} { ${Object.entries(t).map(([n,r])=>`--${n}:${r}; `).join(" ")}}
`:""}function na(e,t){let n="";const{_modifiers:r={},_element:s={},_vars:o,...a}=t;if(Object.keys(a).length){const[i,u]=dye(a,c=>c.startsWith(":")||c.startsWith("["));Object.entries(i).forEach(([c,l])=>{const{_modifiers:d={},_element:f={},_vars:p,...h}=l;n+=`${e}${c} { ${X1(h)} }
`,n+=d3(`${e}${c}`,p)}),n+=`${e} { ${X1(u)} }
`}return n+=d3(e,o),Object.entries(r).forEach(([i,u])=>{u&&Object.keys(u).length&&(n+=na(`${e}--${i}`,u))}),Object.entries(s).forEach(([i,u])=>{u&&Object.keys(u).length&&(n+=na(`${e}__${i}`,u))}),n}function X0e({theme:e,components:t}){let n="";const{tokens:r,name:s,breakpoints:o}=e;return t.forEach(({name:a,theme:i,overrides:u})=>{const c=`amplify-${a}`,l=`[data-amplify-theme="${s}"] .${c}`,d=Ah(i)?i(r):i;n+=na(l,d),u&&u.forEach(f=>{const p=Ah(f.theme)?f.theme(r):f.theme;if("mediaQuery"in f&&(n+=`@media (${f.mediaQuery}) {
 ${na(l,p)} 
}`),"breakpoint"in f){const h=o.values[f.breakpoint];n+=`
@media (min-width: ${h}px) {
 ${na(l,p)} 
}`}"selector"in f&&(n+=na(`${f.selector} .${c}`,p)),"colorMode"in f&&(n+=`
@media (prefers-color-scheme: ${f.colorMode}) {
${na(`[data-amplify-theme="${s}"][data-amplify-color-mode="system"] .${c}`,p)}
}
`,n+=na(`[data-amplify-theme="${s}"][data-amplify-color-mode="${f.colorMode}"] .${c}`,p))})}),n}function f3({keys:e,value:t}){return e.reduce((n,r)=>({...n,[r]:{value:`{colors.${t}.${r}.value}`}}),{})}function Y0e({animations:e,tokens:t}){let n="";return Object.entries(e).forEach(([r,s])=>{n+=`
  @keyframes ${r} {`,Object.entries(s).forEach(([o,a])=>{n+=`
    ${o} {
`;const i=Ah(a)?a(t):a;n+=X1(i),n+=`
    }`}),n+=`
  }`}),n}function X2(e,t=aR){const n=xR([{},t,{...e,components:{}}]),{primaryColor:r,secondaryColor:s}=n;cu(r)&&(n.tokens.colors.primary=f3({keys:Object.keys(n.tokens.colors[r]),value:r})),cu(s)&&(n.tokens.colors.secondary=f3({keys:Object.keys(n.tokens.colors[s]),value:s}));const o=Y1({tokens:n.tokens,setupToken:c3}),{breakpoints:a,name:i}=n;let u=`[data-amplify-theme="${i}"] {
`+Q1(o).map(l=>`${l.name}: ${l.value};`).join(`
`)+`
}
`;e!=null&&e.components&&(u+=X0e({theme:{...n,tokens:o},components:e.components}));let c=[];return n.animations&&(u+=Y0e({animations:n.animations,tokens:o})),n.overrides&&(c=n.overrides.map(l=>{const d=Y1({tokens:l.tokens,setupToken:c3}),f=Q1(d).map(p=>`${p.name}: ${p.value};`).join(`
`);if("selector"in l&&(u+=`
${l.selector} {
${f}
}
`),"mediaQuery"in l&&(u+=`
@media (${l.mediaQuery}) {
  [data-amplify-theme="${i}"] {
    ${f}
  }
}
`),"breakpoint"in l){const p=n.breakpoints.values[l.breakpoint];u+=`
@media (min-width: ${p}px) {
  [data-amplify-theme="${i}"] {
    ${f}
  }
}
`}return"colorMode"in l&&(u+=`
@media (prefers-color-scheme: ${l.colorMode}) {
          [data-amplify-theme="${i}"][data-amplify-color-mode="system"] {
            ${f}
            color-scheme: ${l.colorMode};
          }
        }
`,u+=`
[data-amplify-theme="${i}"][data-amplify-color-mode="${l.colorMode}"] {
          ${f}
          color-scheme: ${l.colorMode};
        }
`),{...l,tokens:d}})),{tokens:o,breakpoints:a,name:i,cssText:u,containerProps:({colorMode:l}={})=>({"data-amplify-theme":i,"data-amplify-color-mode":l}),overrides:c}}const Nt=(...e)=>{const t=[];for(const n of e)if(n){if(cu(n)){t.push(n);continue}if(typeof n=="number"){t.push(n.toString());continue}if(Array.isArray(n)){t.push(Nt(...n));continue}if(zo(n)){if(n.toString!==Object.prototype.toString&&n.toString()!=="[object Object]"){t.push(n.toString());continue}for(const r in n)Fa(n,r)&&n[r]&&t.push(r)}}return t.join(" ")},De={Accordion:"amplify-accordion",AccordionItem:"amplify-accordion__item",AccordionItemTrigger:"amplify-accordion__item__trigger",AccordionItemContent:"amplify-accordion__item__content",AccordionItemIcon:"amplify-accordion__item__icon",Alert:"amplify-alert",AlertIcon:"amplify-alert__icon",AlertHeading:"amplify-alert__heading",AlertBody:"amplify-alert__body",AlertDismiss:"amplify-alert__dismiss",Autocomplete:"amplify-autocomplete",AutocompleteMenu:"amplify-autocomplete__menu",AutocompleteMenuEmpty:"amplify-autocomplete__menu--empty",AutocompleteMenuFooter:"amplify-autocomplete__menu__footer",AutocompleteMenuHeader:"amplify-autocomplete__menu__header",AutocompleteMenuLoading:"amplify-autocomplete__menu--loading",AutocompleteMenuOption:"amplify-autocomplete__menu__option",AutocompleteMenuOptions:"amplify-autocomplete__menu__options",Avatar:"amplify-avatar",AvatarIcon:"amplify-avatar__icon",AvatarImage:"amplify-avatar__image",AvatarLoader:"amplify-avatar__loader",AIConversation:"amplify-ai-conversation",AIConversationAttachment:"amplify-ai-conversation__attachment",AIConversationAttachmentList:"amplify-ai-conversation__attachment__list",AIConversationAttachmentImage:"amplify-ai-conversation__attachment__image",AIConversationAttachmentName:"amplify-ai-conversation__attachment__name",AIConversationAttachmentSize:"amplify-ai-conversation__attachment__size",AIConversationAttachmentRemove:"amplify-ai-conversation__attachment__remove",AIConversationForm:"amplify-ai-conversation__form",AIConversationFormAttach:"amplify-ai-conversation__form__attach",AIConversationFormSend:"amplify-ai-conversation__form__send",AIConversationFormField:"amplify-ai-conversation__form__field",AIConversationFormDropzone:"amplify-ai-conversation__form__dropzone",AIConversationMessage:"amplify-ai-conversation__message",AIConversationMessageAvatar:"amplify-ai-conversation__message__avatar",AIConversationMessageSender:"amplify-ai-conversation__message__sender",AIConversationMessageSenderUsername:"amplify-ai-conversation__message__sender__username",AIConversationMessageSenderTimestamp:"amplify-ai-conversation__message__sender__timestamp",AIConversationMessageBody:"amplify-ai-conversation__message__body",AIConversationMessageContent:"amplify-ai-conversation__message__content",AIConversationMessageActions:"amplify-ai-conversation__message__actions",AIConversationMessageList:"amplify-ai-conversation__message__list",AIConversationPrompt:"amplify-ai-conversation__prompt",Badge:"amplify-badge",Breadcrumbs:"amplify-breadcrumbs",BreadcrumbsList:"amplify-breadcrumbs__list",BreadcrumbsItem:"amplify-breadcrumbs__item",BreadcrumbsSeparator:"amplify-breadcrumbs__separator",BreadcrumbsLink:"amplify-breadcrumbs__link",Button:"amplify-button",ButtonGroup:"amplify-buttongroup",ButtonLoaderWrapper:"amplify-button__loader-wrapper",Card:"amplify-card",Checkbox:"amplify-checkbox",CheckboxButton:"amplify-checkbox__button",CheckboxIcon:"amplify-checkbox__icon",CheckboxInput:"amplify-checkbox__input",CheckboxLabel:"amplify-checkbox__label",CheckboxField:"amplify-checkboxfield",Collection:"amplify-collection",CollectionItems:"amplify-collection-items",CollectionSearch:"amplify-collection-search",CollectionPagination:"amplify-collection-pagination",CountryCodeSelect:"amplify-countrycodeselect",DialCodeSelect:"amplify-dialcodeselect",Divider:"amplify-divider",DividerLabel:"amplify-divider--label",DropZone:"amplify-dropzone",Field:"amplify-field",FieldDescription:"amplify-field__description",FieldErrorMessage:"amplify-field__error-message",FieldGroup:"amplify-field-group",FieldGroupControl:"amplify-field-group__control",FieldGroupOuterEnd:"amplify-field-group__outer-end",FieldGroupOuterStart:"amplify-field-group__outer-start",FieldGroupInnerEnd:"amplify-field-group__inner-end",FieldGroupInnerStart:"amplify-field-group__inner-start",FieldGroupIcon:"amplify-field-group__icon",FieldGroupIconButton:"amplify-field-group__icon-button",FieldGroupHasInnerEnd:"amplify-field-group--has-inner-end",FieldGroupHasInnerStart:"amplify-field-group--has-inner-start",FieldShowPassword:"amplify-field__show-password",FieldGroupFieldWrapper:"amplify-field-group__field-wrapper",Fieldset:"amplify-fieldset",FieldsetLegend:"amplify-fieldset__legend",FileUploader:"amplify-fileuploader",FileUploaderDropZone:"amplify-fileuploader__dropzone",FileUploaderDropZoneIcon:"amplify-fileuploader__dropzone__icon",FileUploaderDropZoneText:"amplify-fileuploader__dropzone__text",FileUploaderFilePicker:"amplify-fileuploader__file__picker",FileUploaderFile:"amplify-fileuploader__file",FileUploaderFileWrapper:"amplify-fileuploader__file__wrapper",FileUploaderFileList:"amplify-fileuploader__file__list",FileUploaderFileName:"amplify-fileuploader__file__name",FileUploaderFileSize:"amplify-fileuploader__file__size",FileUploaderFileInfo:"amplify-fileuploader__file__info",FileUploaderFileImage:"amplify-fileuploader__file__image",FileUploaderFileMain:"amplify-fileuploader__file__main",FileUploaderFileStatus:"amplify-fileuploader__file__status",FileUploaderLoader:"amplify-fileuploader__loader",FileUploaderPreviewer:"amplify-fileuploader__previewer",FileUploaderPreviewerText:"amplify-fileuploader__previewer__text",FileUploaderPreviewerActions:"amplify-fileuploader__previewer__actions",FileUploaderPreviewerFooter:"amplify-fileuploader__previewer__footer",Flex:"amplify-flex",Grid:"amplify-grid",Heading:"amplify-heading",HighlightMatch:"amplify-highlightmatch",HighlightMatchHighlighted:"amplify-highlightmatch__highlighted",Icon:"amplify-icon",Image:"amplify-image",Input:"amplify-input",Label:"amplify-label",Link:"amplify-link",Loader:"amplify-loader",LoaderLabel:"amplify-loader__label",MenuContent:"amplify-menu__content",MenuItem:"amplify-menu__content__item",MenuTrigger:"amplify-menu__trigger",MenuWrapper:"amplify-menu__wrapper",Message:"amplify-message",MessageIcon:"amplify-message__icon",MessageHeading:"amplify-message__heading",MessageBody:"amplify-message__body",MessageContent:"amplify-message__content",MessageDismiss:"amplify-message__dismiss",Pagination:"amplify-pagination",PaginationItem:"amplify-pagination__item",PasswordField:"amplify-passwordfield",PhoneNumberField:"amplify-phonenumberfield",Placeholder:"amplify-placeholder",Radio:"amplify-radio",RadioButton:"amplify-radio__button",RadioInput:"amplify-radio__input",RadioLabel:"amplify-radio__label",RadioGroupField:"amplify-radiogroupfield",RadioGroup:"amplify-radiogroup",Rating:"amplify-rating",RatingItem:"amplify-rating__item",RatingIcon:"amplify-rating__icon",RatingLabel:"amplify-rating__label",ScrollView:"amplify-scrollview",SearchField:"amplify-searchfield",SearchFieldClear:"amplify-searchfield__clear",SearchFieldSearch:"amplify-searchfield__search",Select:"amplify-select",SelectField:"amplify-selectfield",SelectWrapper:"amplify-select__wrapper",SelectIcon:"amplify-select__icon",SliderField:"amplify-sliderfield",SliderFieldGroup:"amplify-sliderfield__group",SliderFieldLabel:"amplify-sliderfield__label",SliderFieldRange:"amplify-sliderfield__range",SliderFieldRoot:"amplify-sliderfield__root",SliderFieldThumb:"amplify-sliderfield__thumb",SliderFieldTrack:"amplify-sliderfield__track",StepperField:"amplify-stepperfield",StepperFieldButtonDecrease:"amplify-stepperfield__button--decrease",StepperFieldButtonIncrease:"amplify-stepperfield__button--increase",StepperFieldInput:"amplify-stepperfield__input",StorageImage:"amplify-storageimage",StorageManager:"amplify-storagemanager",StorageManagerDropZone:"amplify-storagemanager__dropzone",StorageManagerDropZoneIcon:"amplify-storagemanager__dropzone__icon",StorageManagerDropZoneText:"amplify-storagemanager__dropzone__text",StorageManagerFilePicker:"amplify-storagemanager__file__picker",StorageManagerFile:"amplify-storagemanager__file",StorageManagerFileWrapper:"amplify-storagemanager__file__wrapper",StorageManagerFileList:"amplify-storagemanager__file__list",StorageManagerFileName:"amplify-storagemanager__file__name",StorageManagerFileSize:"amplify-storagemanager__file__size",StorageManagerFileInfo:"amplify-storagemanager__file__info",StorageManagerFileImage:"amplify-storagemanager__file__image",StorageManagerFileMain:"amplify-storagemanager__file__main",StorageManagerFileStatus:"amplify-storagemanager__file__status",StorageManagerLoader:"amplify-storagemanager__loader",StorageManagerPreviewer:"amplify-storagemanager__previewer",StorageManagerPreviewerText:"amplify-storagemanager__previewer__text",StorageManagerPreviewerActions:"amplify-storagemanager__previewer__actions",StorageManagerPreviewerFooter:"amplify-storagemanager__previewer__footer",SwitchField:"amplify-switchfield",SwitchLabel:"amplify-switch__label",SwitchThumb:"amplify-switch__thumb",SwitchTrack:"amplify-switch__track",SwitchWrapper:"amplify-switch__wrapper",Table:"amplify-table",TableCaption:"amplify-table__caption",TableBody:"amplify-table__body",TableTd:"amplify-table__td",TableTh:"amplify-table__th",TableFoot:"amplify-table__foot",TableHead:"amplify-table__head",TableRow:"amplify-table__row",Tabs:"amplify-tabs",TabsList:"amplify-tabs__list",TabsItem:"amplify-tabs__item",TabsPanel:"amplify-tabs__panel",Text:"amplify-text",Textarea:"amplify-textarea",TextAreaField:"amplify-textareafield",TextField:"amplify-textfield",ToggleButton:"amplify-togglebutton",ToggleButtonGroup:"amplify-togglebuttongroup",VisuallyHidden:"amplify-visually-hidden"},Y2=V.createContext({theme:X2(),colorMode:void 0}),Q2={alignContent:"alignContent",alignItems:"alignItems",alignSelf:"alignSelf",area:"gridArea",aspectRatio:"aspectRatio",autoColumns:"gridAutoColumns",autoFlow:"gridAutoFlow",autoRows:"gridAutoRows",backgroundColor:"backgroundColor",backgroundImage:"backgroundImage",basis:"flexBasis",border:"border",borderRadius:"borderRadius",borderColor:"borderColor",borderWidth:"borderWidth",borderStyle:"borderStyle",bottom:"bottom",boxShadow:"boxShadow",color:"color",column:"gridColumn",columnEnd:"gridColumnEnd",columnGap:"columnGap",columnSpan:"gridColumn",columnStart:"gridColumnStart",direction:"flexDirection",display:"display",flex:"flex",fontFamily:"fontFamily",fontSize:"fontSize",fontStyle:"fontStyle",fontWeight:"fontWeight",gap:"gap",grow:"flexGrow",height:"height",justifyContent:"justifyContent",left:"left",letterSpacing:"letterSpacing",lineHeight:"lineHeight",margin:"margin",marginBlock:"marginBlock",marginBlockEnd:"marginBlockEnd",marginBlockStart:"marginBlockStart",marginBottom:"marginBlockEnd",marginInline:"marginInline",marginInlineEnd:"marginInlineEnd",marginInlineStart:"marginInlineStart",marginLeft:"marginInlineStart",marginRight:"marginInlineEnd",marginTop:"marginBlockStart",maxHeight:"maxHeight",maxWidth:"maxWidth",minHeight:"minHeight",minWidth:"minWidth",objectFit:"objectFit",objectPosition:"objectPosition",opacity:"opacity",order:"order",overflow:"overflow",padding:"padding",paddingBlock:"paddingBlock",paddingBlockEnd:"paddingBlockEnd",paddingBlockStart:"paddingBlockStart",paddingBottom:"paddingBlockEnd",paddingInline:"paddingInline",paddingInlineEnd:"paddingInlineEnd",paddingInlineStart:"paddingInlineStart",paddingLeft:"paddingInlineStart",paddingRight:"paddingInlineEnd",paddingTop:"paddingBlockStart",position:"position",resize:"resize",right:"right",row:"gridRow",rowEnd:"gridRowEnd",rowGap:"rowGap",rowSpan:"gridRow",rowStart:"gridRowStart",shrink:"flexShrink",templateAreas:"gridTemplateAreas",templateColumns:"gridTemplateColumns",templateRows:"gridTemplateRows",textAlign:"textAlign",textDecoration:"textDecoration",textTransform:"textTransform",top:"top",transform:"transform",transformOrigin:"transformOrigin",width:"width",whiteSpace:"whiteSpace",wrap:"flexWrap"},Q0e={Alert:{dismissButtonLabel:"Dismiss alert"},Autocomplete:{emptyText:"No options found",loadingText:"Loading options..."},Collection:{searchButtonLabel:"Search",searchNoResultsFound:"No results found"},Fields:{clearButtonLabel:"Clear input"},Message:{dismissLabel:"Dismiss message"},PaginationItem:{currentPageLabel:"Page",nextLabel:"Go to next page",pageLabel:"Go to page",previousLabel:"Go to previous page"},PhoneNumberField:{countryCodeLabel:"Country code"},SearchField:{searchButtonLabel:"Search"},PasswordField:{passwordIsHidden:"Password is hidden",passwordIsShown:"Password is shown",showPassword:"Show password"},StepperField:{increaseButtonLabel:"Increase to",decreaseButtonLabel:"Decrease to"}},Z1={backgroundColor:"colors",borderColor:"colors",borderWidth:"borderWidths",color:"colors",borderRadius:"radii",fontSize:"fontSizes",fontWeight:"fontWeights",fontFamily:"fonts",lineHeight:"lineHeights",opacity:"opacities",boxShadow:"shadows",transform:"transforms",left:"space",right:"space",top:"space",bottom:"space",height:"space",width:"space",letterSpacing:"space",margin:"space",marginBlock:"space",marginBlockEnd:"space",marginBlockStart:"space",marginInline:"space",marginInlineEnd:"space",marginInlineStart:"space",marginLeft:"space",marginRight:"space",marginTop:"space",marginBottom:"space",maxHeight:"space",maxWidth:"space",minHeight:"space",minWidth:"space",padding:"space",paddingBlock:"space",paddingBlockEnd:"space",paddingBlockStart:"space",paddingInline:"space",paddingInlineEnd:"space",paddingInlineStart:"space",paddingLeft:"space",paddingRight:"space",paddingTop:"space",paddingBottom:"space",gap:"space",columnGap:"space",rowGap:"space"},Z0e=e=>e in Z1,IR=e=>typeof e=="string"&&e.length===0,p3=e=>e==null||IR(e),wy=e=>Object.keys(e),Z2=(e,t,n)=>{if(typeof t!="string")return t;if(t.includes(" "))return t.split(" ").map(r=>Z2(e,r,n)).join(" ");if(Z0e(e)){const r=t.split("."),s=Z1[e];let o=n[s];for(let a=0;a<r.length;a++){if(o){o=o[r[a]];continue}break}return by(o)?`var(--${K2({path:[Z1[e],...r]})})`:t}return t},J0e=({breakpoint:e,breakpoints:t,values:n})=>{const r=n[e];if(r!==void 0)return r;const s=wy(t).sort((a,i)=>t[i]-t[a]),o=s.slice(s.indexOf(e));for(const a of o){const i=n[a];if(i!==void 0)return i}return null},e1e=e=>wy(e).reduce((t,n)=>n in aR.breakpoints.values?{...t,[n]:e[n]}:t,{}),t1e=({breakpoint:e,breakpoints:t,values:n})=>{let r={};const s=wy(t).sort((o,a)=>t[o]-t[a]);return Array.isArray(n)?n.forEach((o,a)=>{r[s[a]]=o}):typeof n=="object"&&(r=e1e(n)),J0e({breakpoint:e,breakpoints:t,values:r})},n1e=({breakpoints:e})=>{const t=wy(e).sort((n,r)=>e[r]-e[n]);return t.map((n,r)=>{let s="";const o=e[n],a=t[r-1],i=a?e[a]-1:null;return o>=0&&(s=`(min-width: ${o}px)`),i!==null&&(s&&(s+=" and "),s+=`(max-width: ${i}px)`),{breakpoint:n,query:s,maxWidth:i,minWidth:o}})},r1e=typeof window>"u"?V.useEffect:V.useLayoutEffect,_R=({breakpoints:e,defaultBreakpoint:t})=>{const r=typeof window<"u"&&typeof window.matchMedia<"u"?window.matchMedia:null,s=V.useMemo(()=>n1e({breakpoints:e}),[e]),[o,a]=V.useState(t),i=V.useCallback((u,c)=>{u&&a(c)},[a]);return r1e(()=>{if(!r)return;const u=s.map(({query:c,breakpoint:l})=>{const d=r(c);i(d.matches,l);const f=p=>{p.matches&&a(l)};return d.addEventListener("change",f),()=>d.removeEventListener("change",f)});return()=>{u.forEach(c=>c())}},[e,a,r,s]),V.useDebugValue(o,u=>u),o},s1e=e=>typeof e>"u"||typeof e.theme>"u"?X2():e.theme,Sy=()=>{const e=V.useContext(Y2);return s1e(e)},o1e=()=>V.useContext(Y2).colorMode,a1e=({value:e,propKey:t,tokens:n})=>by(e)?e.toString():cu(e)?cu(t)?Z2(t,e,n):e:null,i1e=e=>e==="auto"||typeof e=="number"&&!isNaN(e)||typeof e=="string"&&!isNaN(parseFloat(e)),Ov=e=>e==="auto"?"auto":`span ${e}`,h3=e=>i1e(e)?Ov(e):Array.isArray(e)?e.map(t=>Ov(t)):typeof e=="object"&&e!=null?Object.entries(e).reduce((t,[n,r])=>({...t,[n]:Ov(r)}),{}):null,l1e=e=>{const{rowSpan:t,columnSpan:n,row:r,column:s,...o}=e,{rowFromSpanValue:a,columnFromSpanValue:i}=V.useMemo(()=>({rowFromSpanValue:h3(t),columnFromSpanValue:h3(n)}),[t,n]);return{row:p3(r)?a:r,column:p3(s)?i:s,...o}},u1e=e=>e in Q2,c1e=({props:e={},style:t={},breakpoint:n,breakpoints:r,tokens:s})=>{const o={};return Object.keys(e).filter(a=>e[a]!==null).forEach(a=>{if(u1e(a)){const i=e[a];if(!i||IR(i))return;const u=Q2[a];let c="";by(i)?c=i.toString():typeof i=="string"?c=Z2(a,i,s):typeof i=="number"?c=i:typeof i=="object"&&(c=a1e({propKey:a,tokens:s,value:t1e({values:i,breakpoint:n,breakpoints:r})})),t={...t,[u]:c}}else typeof e[a]<"u"&&(o[a]=e[a])}),{propStyles:t,nonStyleProps:o}},d1e=(e,t)=>{const{breakpoints:{values:n,defaultBreakpoint:r},tokens:s}=Sy(),o=_R({breakpoints:n,defaultBreakpoint:r}),a=l1e(e);return V.useMemo(()=>c1e({props:a,style:t,breakpoint:o,breakpoints:n,tokens:s}),[a,t,n,o,s])},kr=e=>V.forwardRef(e),f1e=({as:e="div",children:t,testId:n,ariaLabel:r,isDisabled:s,style:o,inert:a,...i},u)=>{const{propStyles:c,nonStyleProps:l}=d1e(i,o);return V.createElement(e,{"aria-label":r,"data-testid":n,disabled:s,ref:u,inert:a?"":null,style:c,...l},t)},Qe=kr(f1e);Qe.displayName="View";const Zu={minX:0,minY:0,width:24,height:24},p1e=({className:e,as:t="svg",fill:n="currentColor",pathData:r,viewBox:s=Zu,children:o,paths:a,...i},u)=>{const c=s.minX?s.minX:Zu.minX,l=s.minY?s.minY:Zu.minY,d=s.width?s.width:Zu.width,f=s.height?s.height:Zu.height;let p;return o&&(p=o),a&&(p=a.map((h,m)=>V.createElement("path",{...h,key:m}))),r&&(p=V.createElement("path",{d:r,fill:n})),V.createElement(Qe,{as:t,className:Nt(De.Icon,e),ref:u,viewBox:`${c} ${l} ${d} ${f}`,...i},p)},ER=kr(p1e);ER.displayName="Icon";const h1e=V.createContext({});function J2(e){const t=V.useContext(h1e);if(e&&t)return t[e]}const m1e=e=>{const{className:t,...n}=e;return V.createElement(Qe,{as:"span",width:"1em",height:"1em",className:Nt(De.Icon,t),...n},V.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM16.59 7.58L10 14.17L7.41 11.59L6 13L10 17L18 9L16.59 7.58Z",fill:"currentColor"})))},g1e=e=>{const{className:t,...n}=e;return V.createElement(Qe,{as:"span",width:"1em",height:"1em",className:Nt(De.Icon,t),...n},V.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z",fill:"currentColor"})))},y1e=e=>{const{className:t,...n}=e;return V.createElement(Qe,{as:"span",width:"1em",height:"1em",className:Nt(De.Icon,t),...n},V.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V.createElement("path",{d:"M11 7H13V9H11V7ZM11 11H13V17H11V11ZM12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20Z",fill:"currentColor"})))},v1e=e=>{const{className:t,...n}=e;return V.createElement(Qe,{as:"span",width:"1em",height:"1em",className:Nt(De.Icon,t),...n},V.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V.createElement("path",{d:"M1 21H23L12 2L1 21ZM13 18H11V16H13V18ZM13 14H11V10H13V14Z",fill:"currentColor"})))},xy=({variation:e,ariaHidden:t,ariaLabel:n,role:r})=>{const s=J2("alert");let o;switch(e){case"info":o=(s==null?void 0:s.info)??V.createElement(y1e,{"aria-hidden":t,"aria-label":n,role:r});break;case"error":o=(s==null?void 0:s.error)??V.createElement(g1e,{"aria-hidden":t,"aria-label":n,role:r});break;case"warning":o=(s==null?void 0:s.warning)??V.createElement(v1e,{"aria-hidden":t,"aria-label":n,role:r});break;case"success":o=(s==null?void 0:s.success)??V.createElement(m1e,{"aria-hidden":t,"aria-label":n,role:r});break}return o?V.createElement("span",{className:De.AlertIcon},o):null};xy.displayName="AlertIcon";const b1e=V.createContext({isFieldsetDisabled:!1}),CR=()=>V.useContext(b1e),w1e=({className:e,children:t,...n},r)=>V.createElement(Qe,{className:Nt(De.Flex,e),ref:r,...n},t),yt=kr(w1e);yt.displayName="Flex";const S1e="linear-empty",x1e="linear-filled",k1e="circular-empty",I1e="circular-filled",m3=8,J1=42,Hf=2*J1*Math.PI,_1e=({className:e,filledColor:t,emptyColor:n,size:r,variation:s,isDeterminate:o=!1,isPercentageTextHidden:a=!1,percentage:i=0,...u},c)=>{i=Math.min(i,100),i=Math.max(i,0);const l=`${i}%`,d=Nt(De.Loader,Xr(De.Loader,r),Xr(De.Loader,s),Ia(De.Loader,"determinate",o),e),f=V.createElement("g",null,V.createElement("line",{x1:"0",x2:"100%",y1:"50%",y2:"50%",style:{stroke:String(n)},"data-testid":S1e}),V.createElement("line",{x1:"0",x2:o?l:"100%",y1:"50%",y2:"50%",style:{stroke:o&&i===0?"none":t?String(t):void 0},"data-testid":x1e}),o?V.createElement("text",{"aria-live":"polite",className:Nt(De.LoaderLabel,a?De.VisuallyHidden:null),x:`${-1+i}%`,y:"200%"},l):null),p=V.createElement("g",null,V.createElement("circle",{cx:"50%",cy:"50%",r:`${J1}%`,strokeWidth:`${m3}%`,style:{stroke:String(n)},"data-testid":k1e}),V.createElement("circle",{cx:"50%",cy:"50%",r:`${J1}%`,strokeWidth:`${m3}%`,style:{stroke:String(t),strokeDasharray:o?`${Hf}% ${Hf}%`:void 0,strokeDashoffset:o?`${Hf-Hf*i/100}%`:void 0},"data-testid":I1e}),o?V.createElement("text",{"aria-live":"polite",className:Nt(De.LoaderLabel,a?De.VisuallyHidden:null),x:"130%",y:"80%"},l):null);return V.createElement(Qe,{as:"svg",className:d,ref:c,role:"img",...u},s==="linear"?f:p)},Ud=kr(_1e);Ud.displayName="Loader";const E1e=["link","primary",void 0],C1e=({className:e,children:t,colorTheme:n,isFullWidth:r=!1,isDisabled:s,isLoading:o,loadingText:a="",size:i,type:u="button",variation:c,...l},d)=>{const f=E1e.includes(c)&&n?`${c??"outlined"}--${n}`:void 0,{isFieldsetDisabled:p}=CR(),h=p||(s??o??l.disabled),m=Nt(De.Button,De.FieldGroupControl,Xr(De.Button,c),Xr(De.Button,f),Xr(De.Button,i),Ia(De.Button,"disabled",h),Ia(De.Button,"loading",o),Ia(De.Button,"fullwidth",r),e);return V.createElement(Qe,{ref:d,as:"button",className:m,isDisabled:h,type:u,...l},o?V.createElement(yt,{as:"span",className:De.ButtonLoaderWrapper},V.createElement(Ud,{size:i}),a||null):t)},lo=kr(C1e);lo.displayName="Button";const TR=e=>{const{className:t,size:n,...r}=e;return V.createElement(Qe,{as:"span",width:n??"1em",height:n??"1em",className:Nt(De.Icon,t),...r},V.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n?{width:n,height:n}:void 0},V.createElement("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})))},T1e=({as:e="p",className:t,children:n,isTruncated:r,variation:s,...o},a)=>{const i=Nt(De.Text,Xr(De.Text,s),Ia(De.Text,"truncated",r),t);return V.createElement(Qe,{as:e,className:i,ref:a,...o},n)},Bs=kr(T1e);Bs.displayName="Text";const N1e="qa-field-description",NR=({descriptiveText:e,labelHidden:t,...n})=>e?V.createElement(Bs,{"data-testid":N1e,className:Nt(De.FieldDescription,{[De.VisuallyHidden]:t}),...n},e):null;NR.displayName="FieldDescription";const AR=({errorMessage:e,hasError:t,...n})=>t&&e?V.createElement(Bs,{className:De.FieldErrorMessage,...n},e):null;AR.displayName="FieldErrorMessage";const A1e=({children:e,className:t,visuallyHidden:n,...r},s)=>V.createElement(Qe,{as:"label",className:Nt(De.Label,t,{[De.VisuallyHidden]:n}),ref:s,...r},e),eS=kr(A1e);eS.displayName="Label";const D1e=({buttonRef:e,children:t,className:n,dismissButtonLabel:r=Q0e.Alert.dismissButtonLabel,hasIcon:s=!0,heading:o,isDismissible:a=!1,onDismiss:i,variation:u,...c},l)=>{const[d,f]=V.useState(!1),p=J2("alert"),h=V.useCallback(()=>{f(!d),Ah(i)&&i()},[f,i,d]);return d?null:V.createElement(yt,{className:Nt(De.Alert,n,Xr(De.Alert,u)),ref:l,role:"alert",...c},s&&V.createElement(xy,{variation:u,ariaHidden:!0}),V.createElement(Qe,{flex:"1"},o&&V.createElement(Qe,{className:De.AlertHeading},o),V.createElement(Qe,{className:De.AlertBody},t)),a&&V.createElement(lo,{ariaLabel:r,variation:"link",className:De.AlertDismiss,onClick:h,ref:e},(p==null?void 0:p.close)??V.createElement(TR,{"aria-hidden":"true"})))},DR=kr(D1e);DR.displayName="Alert";const $1e=globalThis!=null&&globalThis.document?V.useLayoutEffect:()=>{},R1e="amplify-id",F1e=dF.useId||(()=>{});let M1e=0;const g3=e=>{const[t,n]=V.useState(F1e());return $1e(()=>{e||n(r=>r??String(M1e++))},[e]),e??(t?`${R1e}-${t}`:"")},y3=(e,t)=>e&&t?`${e}-${t}`:void 0,O1e=e=>e in Q2,P1e=e=>{const t={styleProps:{},rest:{}};return Object.keys(e).forEach(n=>{O1e(n)?t.styleProps={...t.styleProps,[n]:e[n]}:t.rest={...t.rest,[n]:e[n]}}),t},B1e=e=>{const t=e.filter(n=>n!==void 0).join(" ");return t.length>0?t:void 0},L1e="error",z1e="description",W1e=({className:e,children:t,variation:n,...r},s)=>V.createElement(Qe,{className:Nt(De.Card,Xr(De.Card,n),e),ref:s,...r},t),$R=kr(W1e);$R.displayName="Card";const U1e=({as:e="span",children:t,className:n,...r},s)=>V.createElement(Qe,{as:e,className:Nt(De.VisuallyHidden,n),ref:s,...r},t),vp=kr(U1e);vp.displayName="VisuallyHidden";const V1e=e=>{const{className:t,...n}=e;return V.createElement(Qe,{as:"span",width:"1em",height:"1em",className:Nt(De.Icon,t),...n},V.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V.createElement("path",{d:"M16.59 8.58984L12 13.1698L7.41 8.58984L6 9.99984L12 15.9998L18 9.99984L16.59 8.58984Z",fill:"currentColor"})))},H1e={1:"h1",2:"h2",3:"h3",4:"h4",5:"h5",6:"h6"},j1e=({className:e,children:t,isTruncated:n,level:r=6,...s},o)=>V.createElement(Qe,{as:H1e[r],className:Nt(De.Heading,Xr(De.Heading,r),Ia(De.Heading,"truncated",n),e),ref:o,...s},t),eb=kr(j1e);eb.displayName="Heading";const RR=V.createContext(void 0),FR=e=>{const{dir:t,children:n}=e;return V.createElement(RR.Provider,{value:t},n)};function G1e(e){const t=V.useContext(RR);return e||t||"ltr"}const q1e=FR,K1e=Object.freeze(Object.defineProperty({__proto__:null,DirectionProvider:FR,Provider:q1e,useDirection:G1e},Symbol.toStringTag,{value:"Module"})),X1e=({autoComplete:e,className:t,size:n,variation:r,value:s,defaultValue:o,hasError:a,icon:i,iconColor:u,children:c,placeholder:l,isDisabled:d,isRequired:f,isMultiple:p=!1,selectSize:h=1,...m},y)=>{const g="",b=s===void 0&&o===void 0&&l,w=p||h>1,S=Nt(De.Select,De.FieldGroupControl,Xr(De.Select,n),Xr(De.Select,r),Ia(De.Select,"error",a),Ia(De.Select,"expanded",w),t),I=J2("select"),{isFieldsetDisabled:_}=CR();return V.createElement(Qe,{className:De.SelectWrapper},V.createElement(Qe,{"aria-invalid":a,as:"select",autoComplete:e,value:s,defaultValue:b?g:o,isDisabled:_||d,multiple:p,size:h,required:f,className:S,ref:y,...m},l&&V.createElement("option",{value:""},l),c),w?null:V.createElement(yt,{className:Nt(De.SelectIcon,Xr(De.SelectIcon,n)),color:u,"aria-hidden":"true"},i??(I==null?void 0:I.expand)??V.createElement(V1e,null)))},MR=kr(X1e);MR.displayName="Select";const Y1e=({children:e,options:t})=>e?(t!=null&&t.length&&console.warn("Amplify UI: <SelectField> component  defaults to rendering children over `options`. When using the `options` prop, omit children."),e):t==null?void 0:t.map((n,r)=>V.createElement("option",{label:n,value:n,key:`${n}-${r}`},n)),Q1e=(e,t)=>{const{children:n,className:r,descriptiveText:s,errorMessage:o,hasError:a=!1,id:i,label:u,labelHidden:c=!1,options:l,size:d,testId:f,inputStyles:p,...h}=e,m=g3(i),y=g3(),g=s?y3(y,z1e):void 0,b=a?y3(y,L1e):void 0,w=B1e([b,g]),{styleProps:S,rest:I}=P1e(h);return V.createElement(yt,{className:Nt(De.Field,Xr(De.Field,d),De.SelectField,r),testId:f,...S},V.createElement(eS,{htmlFor:m,visuallyHidden:c},u),V.createElement(NR,{id:g,labelHidden:c,descriptiveText:s}),V.createElement(MR,{"aria-describedby":w,hasError:a,id:m,ref:t,size:d,...I,...p},Y1e({children:n,options:l})),V.createElement(AR,{id:b,hasError:a,errorMessage:o}))},OR=kr(Q1e);OR.displayName="SelectField";const Z1e=({cssText:e,...t},n)=>e===void 0||/<\/style/i.test(e)?null:V.createElement("style",{...t,ref:n,dangerouslySetInnerHTML:{__html:e}}),PR=kr(Z1e);PR.displayName="Style";const J1e=({theme:e,nonce:t,...n},r)=>{if(!e)return null;const{name:s,cssText:o}=e;return V.createElement(PR,{...n,ref:r,cssText:o,nonce:t,id:`amplify-theme-${s}`})},BR=kr(J1e);BR.displayName="ThemeStyle";const{DirectionProvider:ebe}=cye(K1e);function tbe({children:e,colorMode:t,direction:n="ltr",nonce:r,theme:s}){const o=V.useMemo(()=>({theme:X2(s),colorMode:t}),[s,t]);return V.createElement(Y2.Provider,{value:o},V.createElement(ebe,{dir:n},V.createElement("div",{"data-amplify-theme":o.theme.name,"data-amplify-color-mode":t,dir:n},e),s?V.createElement(BR,{theme:o.theme,nonce:r}):null))}const LR=ge.createContext(null);function nbe({children:e,...t}){return ge.createElement(LR.Provider,{value:t},e)}function zR(){const e=ge.useContext(LR);if(e===null)throw new Error("useFaceLivenessDetector must be used within a FaceLivenessDetectorProvider");return e}const rbe=()=>{const{breakpoints:{values:e,defaultBreakpoint:t}}=Sy();return _R({breakpoints:e,defaultBreakpoint:t})};function ky(){const{service:e}=zR();return sB(e)}function pr(e){const{service:t}=zR();return iB(t,e)}function sbe(e){const t=Nh.height.ideal,n=Nh.width.ideal,r=V.useRef(null),[s,o]=V.useState(t),[a,i]=V.useState(n);return V.useEffect(()=>{if(e){zo(r.current)&&(r.current.srcObject=e);const{height:u,width:c}=e.getTracks()[0].getSettings();o(u),i(c)}return()=>{e&&e.getTracks().forEach(u=>{e.removeTrack(u),u.stop()})}},[e]),{videoRef:r,videoHeight:s,videoWidth:a}}var je;(function(e){e.CameraModule="amplify-liveness-camera-module",e.CancelContainer="amplify-liveness-cancel-container",e.CancelButton="amplify-liveness-cancel-button",e.CountdownContainer="amplify-liveness-countdown-container",e.DescriptionBullet="amplify-liveness-description-bullet",e.DescriptionBulletIndex="amplify-liveness-description-bullet__index",e.DescriptionBulletIndexText="amplify-liveness-description-bullet__index__text",e.DescriptionBulletMessage="amplify-liveness-description-bullet__message",e.ErrorModal="amplify-liveness-error-modal",e.ErrorModalHeading="amplify-liveness-error-modal__heading",e.FadeOut="amplify-liveness-fade-out",e.FreshnessCanvas="amplify-liveness-freshness-canvas",e.InstructionList="amplify-liveness-instruction-list",e.InstructionOverlay="amplify-liveness-instruction-overlay",e.Hint="amplify-liveness-hint",e.HintText="amplify-liveness-hint__text",e.LandscapeErrorModal="amplify-liveness-landscape-error-modal",e.LandscapeErrorModalButton="amplify-liveness-landscape-error-modal__button",e.LandscapeErrorModalHeader="amplify-liveness-landscape-error-modal__header",e.Loader="amplify-liveness-loader",e.MatchIndicator="amplify-liveness-match-indicator",e.OvalCanvas="amplify-liveness-oval-canvas",e.OpaqueOverlay="amplify-liveness-overlay-opaque",e.Overlay="amplify-liveness-overlay",e.Popover="amplify-liveness-popover",e.PopoverContainer="amplify-liveness-popover__container",e.PopoverAnchor="amplify-liveness-popover__anchor",e.PopoverAnchorSecondary="amplify-liveness-popover__anchor-secondary",e.RecordingIconContainer="amplify-liveness-recording-icon-container",e.RecordingIcon="amplify-liveness-recording-icon",e.StartScreenCameraSelect="amplify-liveness-start-screen-camera-select",e.StartScreenCameraSelectContainer="amplify-liveness-start-screen-camera-select__container",e.StartScreenCameraWaiting="amplify-liveness-start-screen-camera-waiting",e.StartScreenHeader="amplify-liveness-start-screen-header",e.StartScreenHeaderBody="amplify-liveness-start-screen-header__body",e.StartScreenHeaderHeading="amplify-liveness-start-screen-header__heading",e.StartScreenWarning="amplify-liveness-start-screen-warning",e.StartScreenInstructions="amplify-liveness-start-screen-instructions",e.StartScreenInstructionsHeading="amplify-liveness-start-screen-instructions__heading",e.Toast="amplify-liveness-toast",e.ToastContainer="amplify-liveness-toast__container",e.ToastMessage="amplify-liveness-toast__message",e.Video="amplify-liveness-video",e.VideoAnchor="amplify-liveness-video-anchor"})(je||(je={}));const Iy=({variation:e="default",size:t="medium",children:n,isInitial:r=!1,...s})=>{const{tokens:o}=Sy();return V.createElement(Qe,{className:`${je.Toast} ${je.Toast}--${e} ${je.Toast}--${t}`,...r&&{backgroundColor:o.colors.background.primary},...s},V.createElement(yt,{className:je.ToastContainer},V.createElement(yt,{className:je.ToastMessage,...r?{color:o.colors.font.primary}:{}},n)))},v3=({displayText:e})=>V.createElement(Iy,{"aria-live":"polite"},V.createElement(yt,{className:je.HintText},V.createElement(Ud,null),V.createElement(Qe,null,e))),tS=e=>e.context.errorState,obe=e=>e.context.faceMatchAssociatedParams.faceMatchState,abe=e=>e.context.faceMatchAssociatedParams.illuminationState,ibe=e=>e.context.isFaceFarEnoughBeforeRecording,lbe=e=>e.context.faceMatchStateBeforeStart,ube=e=>{var t;return(t=e.context.faceMatchAssociatedParams)==null?void 0:t.faceMatchPercentage},ul=({text:e,isInitial:t=!1})=>V.createElement(Iy,{size:"large",variation:"primary",isInitial:t},V.createElement(Qe,{"aria-live":"assertive"},e)),cbe=({hintDisplayText:e})=>{const[t]=ky(),n=pr(tS),r=pr(obe),s=pr(abe),o=pr(lbe),a=pr(ibe),i=pr(ube),u=t.matches("checkFaceDetectedBeforeStart")||t.matches("detectFaceBeforeStart"),c=t.matches("checkFaceDistanceBeforeRecording")||t.matches("detectFaceDistanceBeforeRecording"),l=t.matches("start")||t.matches("userCancel"),d=t.matches("recording"),f=t.matches("notRecording"),p=t.matches("uploading"),h=t.matches("checkSucceeded"),m=t.matches("checkFailed"),y=t.matches({recording:"flashFreshnessColors"}),g={[ht.CANT_IDENTIFY]:e.hintCanNotIdentifyText,[ht.FACE_IDENTIFIED]:e.hintTooFarText,[ht.TOO_MANY]:e.hintTooManyFacesText,[ht.TOO_FAR]:e.hintTooFarText,[ht.MATCHED]:e.hintHoldFaceForFreshnessText,[ht.OFF_CENTER]:e.hintFaceOffCenterText},b={[Eo.BRIGHT]:e.hintIlluminationTooBrightText,[Eo.DARK]:e.hintIlluminationTooDarkText,[Eo.NORMAL]:e.hintIlluminationNormalText};if(l)return V.createElement(V.Fragment,null,V.createElement(vp,{role:"alert"},e.hintCenterFaceInstructionText),V.createElement(ul,{text:e.hintCenterFaceText,isInitial:!0}));if(n??(m||h))return null;if(!d){if(u)return o===ht.TOO_MANY?V.createElement(ul,{text:e.hintTooManyFacesText}):V.createElement(ul,{text:e.hintMoveFaceFrontOfCameraText});if(c&&a===!1)return V.createElement(ul,{text:e.hintTooCloseText});if(f)return V.createElement(v3,{displayText:e.hintConnectingText});if(p)return V.createElement(V.Fragment,null,V.createElement(vp,{"aria-live":"assertive"},e.hintCheckCompleteText),V.createElement(v3,{displayText:e.hintVerifyingText}));if(s&&s!==Eo.NORMAL)return V.createElement(ul,{text:b[s]})}if(y)return V.createElement(ul,{text:e.hintHoldFaceForFreshnessText});if(d&&!y){let w=g[ht.TOO_FAR];r===ht.MATCHED&&(w=g[r]);let S=w;return r===ht.OFF_CENTER?S=g[r]:r===ht.TOO_FAR&&i>50&&(S=e.hintMatchIndicatorText),V.createElement(Iy,{size:"large",variation:"primary"},V.createElement(vp,{"aria-live":"assertive"},S),V.createElement(Qe,{"aria-label":S},w))}return null},dbe=({percentage:e,initialPercentage:t=25,testId:n})=>{const[r,s]=ge.useState(t);ge.useEffect(()=>{e<0?s(0):e>100?s(100):s(e)},[e]);const o={"--percentage":`${r}%`};return ge.createElement("div",{className:je.MatchIndicator,"data-testid":n},ge.createElement("div",{className:`${je.MatchIndicator}__bar`,style:o,role:"progressbar","aria-label":"MatchIndicator","aria-valuenow":e,"aria-valuetext":`${e}% face fit`}))},WR=({children:e,horizontal:t="center",vertical:n="center",className:r,...s})=>V.createElement(yt,{className:`${je.Overlay} ${r}`,alignItems:t,justifyContent:n,...s},e),_y={errorLabelText:"Error",connectionTimeoutHeaderText:"Connection time out",connectionTimeoutMessageText:"Connection has timed out.",timeoutHeaderText:"Time out",timeoutMessageText:"Face didn't fit inside oval in time limit. Try again and completely fill the oval with face in it.",faceDistanceHeaderText:"Forward movement detected",faceDistanceMessageText:"Avoid moving closer when connecting.",multipleFacesHeaderText:"Multiple faces detected",multipleFacesMessageText:"Ensure only one face is present in front of the camera when connecting.",clientHeaderText:"Client error",clientMessageText:"Check failed due to client issue",serverHeaderText:"Server issue",serverMessageText:"Cannot complete check due to server issue",landscapeHeaderText:"Landscape orientation not supported",landscapeMessageText:"Rotate your device to portrait (vertical) orientation.",portraitMessageText:"Ensure your device remains in portrait (vertical) orientation for the check’s duration.",tryAgainText:"Try again"},bp={cameraMinSpecificationsHeadingText:"Camera does not meet minimum specifications",cameraMinSpecificationsMessageText:"Camera must support at least 320*240 resolution and 15 frames per second.",cameraNotFoundHeadingText:"Camera is not accessible.",cameraNotFoundMessageText:"Check that a camera is connected and there is not another application using the camera. You may have to go into settings to grant camera permissions and close out all instances of your browser and retry.",a11yVideoLabelText:"Webcam for liveness check",cancelLivenessCheckText:"Cancel Liveness check",goodFitCaptionText:"Good fit",goodFitAltText:"Ilustration of a person's face, perfectly fitting inside of an oval.",hintCenterFaceText:"Center your face",hintCenterFaceInstructionText:"Instruction: Before starting the check, make sure your camera is at the center top of your screen and center your face to the camera. When the check starts an oval will show up in the center. You will be prompted to move forward into the oval and then prompted to hold still. After holding still for a few seconds, you should hear check complete.",hintFaceOffCenterText:"Face is not in the oval, center your face to the camera.",hintMoveFaceFrontOfCameraText:"Move face in front of camera",hintTooManyFacesText:"Ensure only one face is in front of camera",hintFaceDetectedText:"Face detected",hintCanNotIdentifyText:"Move face in front of camera",hintTooCloseText:"Move back",hintTooFarText:"Move closer",hintConnectingText:"Connecting...",hintVerifyingText:"Verifying...",hintCheckCompleteText:"Check complete",hintIlluminationTooBrightText:"Move to dimmer area",hintIlluminationTooDarkText:"Move to brighter area",hintIlluminationNormalText:"Lighting conditions normal",hintHoldFaceForFreshnessText:"Hold still",hintMatchIndicatorText:"50% completed. Keep moving closer.",photosensitivityWarningBodyText:"This check flashes different colors. Use caution if you are photosensitive.",photosensitivityWarningHeadingText:"Photosensitivity warning",photosensitivityWarningInfoText:"Some people may experience epileptic seizures when exposed to colored lights. Use caution if you, or anyone in your family, have an epileptic condition.",photosensitivityWarningLabelText:"More information about photosensitivity",photosensitivyWarningBodyText:"This check flashes different colors. Use caution if you are photosensitive.",photosensitivyWarningHeadingText:"Photosensitivity warning",photosensitivyWarningInfoText:"Some people may experience epileptic seizures when exposed to colored lights. Use caution if you, or anyone in your family, have an epileptic condition.",photosensitivyWarningLabelText:"More information about photosensitivity",retryCameraPermissionsText:"Retry",recordingIndicatorText:"Rec",startScreenBeginCheckText:"Start video check",tooFarCaptionText:"Too far",tooFarAltText:"Illustration of a person's face inside of an oval; there is a gap between the perimeter of the face and the boundaries of the oval.",waitingCameraPermissionText:"Waiting for you to allow camera permission.",..._y},fbe=e=>{const{error:t,displayText:n}=e,{connectionTimeoutHeaderText:r,connectionTimeoutMessageText:s,errorLabelText:o,timeoutHeaderText:a,timeoutMessageText:i,faceDistanceHeaderText:u,faceDistanceMessageText:c,multipleFacesHeaderText:l,multipleFacesMessageText:d,clientHeaderText:f,clientMessageText:p,serverHeaderText:h,serverMessageText:m}=n;let y,g;switch(t){case Rt.CONNECTION_TIMEOUT:y=r,g=s;break;case Rt.TIMEOUT:y=a,g=i;break;case Rt.FACE_DISTANCE_ERROR:y=u,g=c;break;case Rt.MULTIPLE_FACES_ERROR:y=l,g=d;break;case Rt.RUNTIME_ERROR:y=f,g=p;break;case Rt.SERVER_ERROR:default:y=h,g=m}return ge.createElement(ge.Fragment,null,ge.createElement(yt,{className:je.ErrorModal},ge.createElement(xy,{ariaLabel:o,role:"img",variation:"error"}),ge.createElement(Bs,{className:je.ErrorModalHeading,id:"amplify-liveness-error-heading"},y)),ge.createElement(Bs,{id:"amplify-liveness-error-message"},g))},pbe=({errorState:e,overrideErrorDisplayText:t})=>{const n={..._y,...t};return e===Rt.CAMERA_ACCESS_ERROR||e===Rt.CAMERA_FRAMERATE_ERROR||e===Rt.MOBILE_LANDSCAPE_ERROR?null:fbe({error:e,displayText:n})},hbe=e=>{const{children:t,onRetry:n,displayText:r}=e,s={..._y,...r},{tryAgainText:o}=s;return ge.createElement(WR,{className:je.OpaqueOverlay},ge.createElement(Iy,{"aria-labelledby":"amplify-liveness-error-heading","aria-describedby":"amplify-liveness-error-message",role:"alertdialog"},t,ge.createElement(yt,{justifyContent:"center"},ge.createElement(lo,{variation:"primary",type:"button",onClick:n},o))))},UR=({ariaLabel:e})=>{const[t,n]=ky(),r=t.done,s=()=>{n({type:"CANCEL"})};return r?null:ge.createElement(lo,{autoFocus:!0,variation:"link",onClick:s,size:"large",className:je.CancelButton,"aria-label":e},ge.createElement(TR,{"aria-hidden":"true","data-testid":"close-icon"}))},mbe=({children:e})=>ge.createElement(yt,{className:je.RecordingIcon},ge.createElement(yt,{"data-testid":"rec-icon",justifyContent:"center"},ge.createElement(ER,{viewBox:{width:20,height:20},width:"20",height:"20"},ge.createElement("circle",{cx:"10",cy:"10",r:"8",fill:"red"}))),ge.createElement(Bs,{as:"span",fontWeight:"bold"},e)),VR=({children:e,headingText:t,labelText:n})=>{const r=rbe(),[s,o]=V.useState(!1),a=V.useRef(null),i=r==="base";return V.useEffect(()=>{function u(c){s&&a.current&&!a.current.contains(c.target)&&o(!1)}return document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[a,s]),V.createElement("div",{className:je.Popover,ref:a},V.createElement(lo,{"aria-controls":"photosensitivity-description","aria-expanded":s,role:"alertdialog","aria-label":n,"aria-describedby":"photosensitivity-description",colorTheme:"info",id:"popover-button",onClick:()=>o(!s),testId:"popover-icon"},V.createElement(xy,{ariaHidden:!0,variation:"info"})),s&&V.createElement(V.Fragment,null,V.createElement(yt,{className:je.PopoverAnchor}),V.createElement(yt,{className:je.PopoverAnchorSecondary}),V.createElement(yt,{"aria-hidden":!s,"aria-label":t,className:je.PopoverContainer,"data-testid":"popover-text",id:"photosensitivity-description",left:i?-190:-108,role:"alertdialog"},e)))};VR.displayName="LivenessIconWithPopover";const gbe=({bodyText:e,headingText:t,infoText:n,labelText:r})=>ge.createElement(yt,{className:`${De.Alert} ${je.StartScreenWarning}`,style:{zIndex:"3"}},ge.createElement(Qe,{flex:"1"},ge.createElement(Qe,{className:De.AlertHeading},t),ge.createElement(Qe,{className:De.AlertBody},e)),ge.createElement(VR,{labelText:r,headingText:t},n)),ybe=({recordingIndicatorText:e})=>ge.createElement(Qe,{className:je.RecordingIconContainer},ge.createElement(mbe,null,e)),vbe=({cancelLivenessCheckText:e})=>ge.createElement(Qe,{className:je.CancelContainer},ge.createElement(UR,{ariaLabel:e})),bbe=e=>{var t;return(t=e.context.videoAssociatedParams)==null?void 0:t.videoConstraints},wbe=e=>{var t;return(t=e.context.videoAssociatedParams)==null?void 0:t.videoMediaStream},Sbe=e=>{var t;return(t=e.context.faceMatchAssociatedParams)==null?void 0:t.faceMatchPercentage},xbe=e=>{var t;return(t=e.context.faceMatchAssociatedParams)==null?void 0:t.faceMatchState},kbe=e=>{var t;return(t=e.context.videoAssociatedParams)==null?void 0:t.selectedDeviceId},Ibe=e=>{var t;return(t=e.context.videoAssociatedParams)==null?void 0:t.selectableDevices},_be=ge.createElement(Ud,{size:"large",className:je.Loader,"data-testid":"centered-loader"}),Ebe=[ht.TOO_FAR,ht.CANT_IDENTIFY,ht.FACE_IDENTIFIED,ht.OFF_CENTER],Cbe=ge.memo(dbe),Tbe=e=>{const{isMobileScreen:t,isRecordingStopped:n,instructionDisplayText:r,streamDisplayText:s,hintDisplayText:o,errorDisplayText:a,cameraDisplayText:i,components:u,testId:c}=e,{cancelLivenessCheckText:l,recordingIndicatorText:d}=s,{ErrorView:f=hbe,PhotosensitiveWarning:p=gbe}=u??{},[h,m]=ky(),y=pr(wbe),g=pr(bbe),b=pr(kbe),w=pr(Ibe),S=pr(Sbe),I=pr(xbe),_=pr(tS),C=o1e(),{videoRef:N,videoWidth:$,videoHeight:R}=sbe(y),F=V.useRef(null),U=V.useRef(null),[L,H]=V.useState(!1),j=h.matches("cameraCheck"),X=h.matches("waitForDOMAndCameraDetails"),Q=h.matches("start")||h.matches("userCancel"),P=h.matches("detectFaceBeforeStart"),G=h.matches("recording"),Y=h.matches("checkSucceeded"),Z=h.matches({recording:"flashFreshnessColors"}),[se,re]=V.useState($),[ae,ie]=V.useState(R),[ue,ve]=V.useState(()=>$&&R?$/R:0);ge.useEffect(()=>{F!=null&&F.current&&(N!=null&&N.current)&&y&&Q&&G0(F.current,N.current,y)},[F,N,y,C,Q]),ge.useEffect(()=>{const Fe=Ae=>{Ae.matches&&(F!=null&&F.current)&&(N!=null&&N.current)&&y&&Q&&G0(F.current,N.current,y)},Be=window.matchMedia("(prefers-color-scheme: dark)"),Le=window.matchMedia("(prefers-color-scheme: light)");return Be.addEventListener("change",Fe),Le.addEventListener("change",Fe),()=>{Be.removeEventListener("change",Fe),Le.addEventListener("change",Fe)}},[F,N,y,Q]),ge.useLayoutEffect(()=>{L&&m({type:"SET_DOM_AND_CAMERA_DETAILS",data:{videoEl:N.current,canvasEl:F.current,freshnessColorEl:U.current,isMobile:t}}),N.current&&(re(N.current.videoWidth),ie(N.current.videoHeight),ve(N.current.videoWidth/N.current.videoHeight))},[m,N,L,t]),ge.useEffect(()=>{P&&gB({canvas:F.current})},[P]);const pe=ge.useMemo(()=>ge.createElement(Qe,{style:{visibility:Q?"visible":"hidden"}},ge.createElement(p,{bodyText:r.photosensitivityWarningBodyText,headingText:r.photosensitivityWarningHeadingText,infoText:r.photosensitivityWarningInfoText,labelText:r.photosensitivityWarningLabelText})),[p,r,Q]),xe=()=>{H(!0)},Se=ge.useCallback(()=>{m({type:"BEGIN"})},[m]),Ce=ge.useCallback(Fe=>{const Be=Fe.target.value;(async()=>{const Ae=await navigator.mediaDevices.getUserMedia({video:{...g,deviceId:{exact:Be}},audio:!1});m({type:"UPDATE_DEVICE_AND_STREAM",data:{newDeviceId:Be,newStream:Ae}})})()},[g,m]);if(j)return ge.createElement(yt,{justifyContent:"center",className:je.StartScreenCameraWaiting},ge.createElement(Ud,{size:"large",className:je.Loader,"data-testid":"centered-loader",position:"unset"}),ge.createElement(Bs,{fontSize:"large",fontWeight:"bold","data-testid":"waiting-camera-permission",className:`${je.StartScreenCameraWaiting}__text`},i.waitingCameraPermissionText));const $e=t&&!Q&&!X;return ge.createElement(ge.Fragment,null,pe,ge.createElement(yt,{className:Nt(je.CameraModule,$e&&`${je.CameraModule}--mobile`),"data-testid":c,gap:"zero"},!L&&_be,ge.createElement(WR,{horizontal:"center",vertical:G&&!Z?"start":"space-between",className:je.InstructionOverlay},G&&ge.createElement(ybe,{recordingIndicatorText:d}),!Q&&!X&&!Y&&ge.createElement(vbe,{cancelLivenessCheckText:l}),ge.createElement(yt,{className:Nt(je.Hint,$e&&`${je.Hint}--mobile`)},ge.createElement(cbe,{hintDisplayText:o})),_&&ge.createElement(f,{onRetry:()=>{m({type:"CANCEL"})},displayText:a},pbe({errorState:_,overrideErrorDisplayText:a})),G&&!Z&&Ebe.includes(I)?ge.createElement(Cbe,{percentage:Math.ceil(S)}):null),ge.createElement(Qe,{as:"canvas",ref:U,className:je.FreshnessCanvas,hidden:!0}),ge.createElement(Qe,{className:je.VideoAnchor,style:{aspectRatio:`${ue}`}},ge.createElement("video",{ref:N,muted:!0,autoPlay:!0,playsInline:!0,width:se,height:ae,onCanPlay:xe,"data-testid":"video",className:Nt(je.Video,n&&je.FadeOut),"aria-label":i.a11yVideoLabelText}),ge.createElement(yt,{className:Nt(je.OvalCanvas,$e&&`${je.OvalCanvas}--mobile`,n&&je.FadeOut)},ge.createElement(Qe,{as:"canvas",ref:F})),Q&&!t&&w&&w.length>1&&ge.createElement(yt,{className:je.StartScreenCameraSelect},ge.createElement(Qe,{className:je.StartScreenCameraSelectContainer},ge.createElement(eS,{htmlFor:"amplify-liveness-camera-select",className:`${je.StartScreenCameraSelect}__label`},"Camera:"),ge.createElement(OR,{id:"amplify-liveness-camera-select",label:"Camera",labelHidden:!0,value:b,onChange:Ce},w==null?void 0:w.map(Fe=>ge.createElement("option",{value:Fe.deviceId,key:Fe.deviceId},Fe.label))))))),Q&&ge.createElement(yt,{justifyContent:"center"},ge.createElement(lo,{variation:"primary",type:"button",onClick:Se},r.startScreenBeginCheckText)))},Nbe=e=>{const{onRetry:t,header:n,portraitMessage:r,landscapeMessage:s,tryAgainText:o}=e,[a,i]=V.useState(!0);return V.useLayoutEffect(()=>{const u=M$();return i(u.matches),u.addEventListener("change",c=>{i(c.matches)}),()=>{u.removeEventListener("change",c=>i(c.matches))}},[]),V.createElement(yt,{className:je.LandscapeErrorModal,height:a?"auto":480},V.createElement(Bs,{className:je.LandscapeErrorModalHeader},n),V.createElement(Bs,null,a?s:r),a?null:V.createElement(yt,{className:je.LandscapeErrorModalButton},V.createElement(lo,{variation:"primary",type:"button",onClick:t},o)))},b3="liveness-detector-check",Abe=420,Dbe=e=>e.context.isRecordingStopped,$be=({instructionDisplayText:e,hintDisplayText:t,cameraDisplayText:n,streamDisplayText:r,errorDisplayText:s,components:o})=>{const[a,i]=ky(),u=pr(tS),c=pr(Dbe),l=a.matches("permissionDenied"),d=Nhe(),f=()=>{i({type:"RETRY_CAMERA_CHECK"})},{cameraMinSpecificationsHeadingText:p,cameraMinSpecificationsMessageText:h,cameraNotFoundHeadingText:m,cameraNotFoundMessageText:y,retryCameraPermissionsText:g}=n,{cancelLivenessCheckText:b}=r;V.useLayoutEffect(()=>{if(d){const S=_=>{_&&i({type:"MOBILE_LANDSCAPE_WARNING"})},I=M$();return S(I.matches),I.addEventListener("change",_=>{S(_.matches)}),()=>{I.removeEventListener("change",_=>S(_.matches))}}},[d,i]);const w=()=>{if(u===Rt.MOBILE_LANDSCAPE_ERROR){const S={..._y,...s},{landscapeHeaderText:I,portraitMessageText:_,landscapeMessageText:C,tryAgainText:N}=S;return V.createElement(yt,{backgroundColor:"background.primary",direction:"column",textAlign:"center",alignItems:"center",justifyContent:"center",position:"absolute",width:"100%"},V.createElement(Nbe,{header:I,portraitMessage:_,landscapeMessage:C,tryAgainText:N,onRetry:()=>{i({type:"CANCEL"})}}))}else return l?V.createElement(yt,{backgroundColor:"background.primary",direction:"column",textAlign:"center",alignItems:"center",justifyContent:"center",width:"100%",height:480},V.createElement(Bs,{fontSize:"large",fontWeight:"bold"},u===Rt.CAMERA_FRAMERATE_ERROR?p:m),V.createElement(Bs,{maxWidth:Abe},u===Rt.CAMERA_FRAMERATE_ERROR?h:y),V.createElement(lo,{variation:"primary",type:"button",onClick:f},g),V.createElement(Qe,{position:"absolute",top:"medium",right:"medium"},V.createElement(UR,{ariaLabel:b}))):V.createElement(Tbe,{isMobileScreen:d,isRecordingStopped:c,instructionDisplayText:e,streamDisplayText:r,hintDisplayText:t,errorDisplayText:s,cameraDisplayText:n,components:o})};return V.createElement(yt,{direction:"column",position:"relative",testId:b3,className:b3,gap:"xl"},w())};function Rbe(e){const t=(n,r)=>e[n]&&e[n]!==bp[n]?e[n]:e[r]&&e[r]!==bp[n]?e[r]:bp[n];return{photosensitivityWarningBodyText:t("photosensitivityWarningBodyText","photosensitivyWarningBodyText"),photosensitivityWarningHeadingText:t("photosensitivityWarningHeadingText","photosensitivyWarningHeadingText"),photosensitivityWarningInfoText:t("photosensitivityWarningInfoText","photosensitivyWarningInfoText"),photosensitivityWarningLabelText:t("photosensitivityWarningLabelText","photosensitivyWarningLabelText")}}function Fbe(e){const t=Rbe(e??{}),n={...bp,...e,...t},{a11yVideoLabelText:r,cameraMinSpecificationsHeadingText:s,cameraMinSpecificationsMessageText:o,cameraNotFoundHeadingText:a,cameraNotFoundMessageText:i,cancelLivenessCheckText:u,connectionTimeoutHeaderText:c,connectionTimeoutMessageText:l,clientHeaderText:d,clientMessageText:f,errorLabelText:p,hintCanNotIdentifyText:h,hintCenterFaceText:m,hintCenterFaceInstructionText:y,hintFaceOffCenterText:g,hintConnectingText:b,hintFaceDetectedText:w,hintHoldFaceForFreshnessText:S,hintIlluminationNormalText:I,hintIlluminationTooBrightText:_,hintIlluminationTooDarkText:C,hintMoveFaceFrontOfCameraText:N,hintTooManyFacesText:$,hintTooCloseText:R,hintTooFarText:F,hintVerifyingText:U,hintCheckCompleteText:L,hintMatchIndicatorText:H,faceDistanceHeaderText:j,faceDistanceMessageText:X,goodFitCaptionText:Q,goodFitAltText:P,landscapeHeaderText:G,landscapeMessageText:Y,multipleFacesHeaderText:Z,multipleFacesMessageText:se,photosensitivityWarningBodyText:re,photosensitivityWarningHeadingText:ae,photosensitivityWarningInfoText:ie,photosensitivityWarningLabelText:ue,photosensitivyWarningBodyText:ve,photosensitivyWarningHeadingText:pe,photosensitivyWarningInfoText:xe,photosensitivyWarningLabelText:Se,portraitMessageText:Ce,retryCameraPermissionsText:$e,recordingIndicatorText:Fe,serverHeaderText:Be,serverMessageText:Le,startScreenBeginCheckText:Ae,timeoutHeaderText:st,timeoutMessageText:Ze,tooFarCaptionText:Je,tooFarAltText:et,tryAgainText:vn,waitingCameraPermissionText:Ut}=n;return{hintDisplayText:{hintMoveFaceFrontOfCameraText:N,hintTooManyFacesText:$,hintFaceDetectedText:w,hintCanNotIdentifyText:h,hintTooCloseText:R,hintTooFarText:F,hintConnectingText:b,hintVerifyingText:U,hintCheckCompleteText:L,hintIlluminationTooBrightText:_,hintIlluminationTooDarkText:C,hintIlluminationNormalText:I,hintHoldFaceForFreshnessText:S,hintCenterFaceText:m,hintCenterFaceInstructionText:y,hintFaceOffCenterText:g,hintMatchIndicatorText:H},cameraDisplayText:{cameraMinSpecificationsHeadingText:s,cameraMinSpecificationsMessageText:o,cameraNotFoundHeadingText:a,cameraNotFoundMessageText:i,retryCameraPermissionsText:$e,waitingCameraPermissionText:Ut,a11yVideoLabelText:r},instructionDisplayText:{photosensitivityWarningBodyText:re,photosensitivityWarningHeadingText:ae,photosensitivityWarningInfoText:ie,photosensitivityWarningLabelText:ue,photosensitivyWarningBodyText:ve,photosensitivyWarningHeadingText:pe,photosensitivyWarningInfoText:xe,photosensitivyWarningLabelText:Se,goodFitCaptionText:Q,goodFitAltText:P,tooFarCaptionText:Je,tooFarAltText:et,startScreenBeginCheckText:Ae},streamDisplayText:{cancelLivenessCheckText:u,recordingIndicatorText:Fe},errorDisplayText:{connectionTimeoutHeaderText:c,connectionTimeoutMessageText:l,errorLabelText:p,timeoutHeaderText:st,timeoutMessageText:Ze,faceDistanceHeaderText:j,faceDistanceMessageText:X,multipleFacesHeaderText:Z,multipleFacesMessageText:se,clientHeaderText:d,clientMessageText:f,serverHeaderText:Be,serverMessageText:Le,landscapeHeaderText:G,landscapeMessageText:Y,portraitMessageText:Ce,tryAgainText:vn}}}const w3="liveness-detector";function Mbe(e){const{components:t,config:n,displayText:r}=e,s=V.useRef(null),{hintDisplayText:o,cameraDisplayText:a,instructionDisplayText:i,streamDisplayText:u,errorDisplayText:c}=Fbe(r),l=JP(Pge,{devTools:!1,context:{componentProps:{...e,config:n??{}}}});return V.createElement(Qe,{className:w3,testId:w3},V.createElement(nbe,{componentProps:e,service:l},V.createElement(yt,{direction:"column",ref:s},V.createElement($be,{instructionDisplayText:i,hintDisplayText:o,cameraDisplayText:a,streamDisplayText:u,errorDisplayText:c,components:t}))))}const Obe=async()=>{const{credentials:e}=await zE();if(!e)throw new Error("No credentials provided");return e};function Pbe(e){const{config:t,...n}=e;return V.createElement(Mbe,{...n,config:{credentialProvider:Obe,...t}})}u8.configure(f8);function Bbe(){const{tokens:e}=Sy(),t={name:"Face Liveness Example Theme",tokens:{colors:{background:{primary:{value:e.colors.neutral[90].value},secondary:{value:e.colors.neutral[100].value}},font:{primary:{value:e.colors.white.value}},brand:{primary:{10:e.colors.teal[100],80:e.colors.teal[40],90:e.colors.teal[20],100:e.colors.teal[10]}}}}},r=new URLSearchParams(window.location.search).get("userId"),[s,o]=V.useState(null),[a,i]=V.useState(80),[u,c]=V.useState(!0),[l,d]=V.useState({latitude:null,longitude:null}),f=()=>c(!1),p=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(b=>{const{latitude:w,longitude:S}=b.coords;d({latitude:w,longitude:S})},b=>{console.error("Error obteniendo la geolocalización:",b)}):console.error("La geolocalización no es compatible con este navegador.")},h=()=>{const b=async()=>{try{const w={user:{userId:r,provider:"awsAmplify"},latitude:l.latitude,longitude:l.longitude};console.log(w);const S=await F8(w);o(S.SessionId)}catch(w){console.log(w)}};l.latitude&&l.longitude?b():console.log("Esperando por la geolocalización...")},m=()=>{o(null),h()};V.useLayoutEffect(()=>{i(a),p()},[a]);const y=()=>{c(!1),localStorage.setItem("userConsent",!0),h()},g=async b=>{if(b){const w=await M8(b);try{const S=w.Confidence;i(localStorage.getItem("userSelectedConfidence")),S>=a?alert(`Its Alive!! Confidence: ${S}`):alert(`Its Dead!! Confidence: ${S}`)}catch(S){return console.log(S),{isLive:!1}}}};return V.useEffect(()=>{},[]),Sn.jsx(tbe,{theme:t,children:u?Sn.jsx(Qe,{direction:{base:"column",large:"row"},children:Sn.jsx(R8,{open:u,showCloseIcon:!1,children:Sn.jsxs(DR,{isDismissible:!1,onDismiss:()=>f(),hasIcon:!0,direction:{base:"column",large:"row"},children:[Sn.jsx(eb,{level:6,marginBottom:e.space.small,fontWeight:e.fontWeights.light,children:'This feature uses Amazon Web Services. Amazon Web Services may collect, store, and use biometric identifiers and biometric information (`"`biometric data`"`) to compare an individual`\'`s image with a stored image for analysis, verification, fraud, and security purposes.'})," ",Sn.jsx(eb,{level:6,marginBottom:e.space.large,fontWeight:e.fontWeights.light,children:"Amazon Web Services’ privacy policy will retain generated biometric information from this process. You provide your express, informed, written release and consent for Amazon Web Services to collect, use, and store your biometric data as described herein."}),Sn.jsxs(yt,{direction:"row",justifyContent:"center",alignItems:"center",alignContent:"center",wrap:"nowrap",gap:"1rem",children:[" ",Sn.jsx(lo,{variation:"primary",onClick:y,children:"Ok"})," "]})]})})}):Sn.jsx(Sn.Fragment,{children:s?Sn.jsx(Sn.Fragment,{children:Sn.jsx($R,{children:Sn.jsx(yt,{direction:"row",justifyContent:"center",alignItems:"center",alignContent:"center",wrap:"nowrap",gap:"1rem",children:Sn.jsx(Qe,{as:"div",width:"740px",maxWidth:"740px",overflow:"auto",children:Sn.jsx(Pbe,{sessionId:s,region:"us-east-1",onUserCancel:m,onAnalysisComplete:async()=>{const b=await g(s);console.log("response: ",b)},onError:async b=>{console.log(b)}})})})})}):Sn.jsx(lo,{isLoading:!0,loadingText:"Loading...",variation:"primary"})})})}FE(document.getElementById("root")).render(Sn.jsx(V.StrictMode,{children:Sn.jsx(Bbe,{})}));
